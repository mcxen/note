---
author: MCXW
shortTitle: ç®—æ³•ç¬”è®°
---
Copyè‡ªï¼š[ç®—æ³•ç¬”è®°](ç®—æ³•ç¬”è®°.md) é‡æ–°ä¿®è®¢

è¯¥æ–‡æ¡£ä½œä¸ºç®—æ³•é¢˜é¢˜å½•ï¼Œåšè¿‡çš„æ¯”è¾ƒå¥½çš„éƒ½æ”¶å½•äºæ­¤ã€‚

# 758ã€å­—ç¬¦ä¸²ä¸­çš„åŠ ç²—å•è¯
ç»™å®šä¸€ä¸ªå…³é”®è¯é›†åˆ `words` å’Œä¸€ä¸ªå­—ç¬¦ä¸² `s`ã€‚
è¦æ±‚ï¼šåœ¨æ‰€æœ‰ `s` ä¸­å‡ºç°çš„å…³é”®è¯å‰åä½ç½®ä¸Šæ·»åŠ åŠ ç²—é—­åˆæ ‡ç­¾ `<b>` å’Œ `</b>`ã€‚å¦‚æœä¸¤ä¸ªå­ä¸²æœ‰é‡å éƒ¨åˆ†ï¼Œåˆ™å°†å®ƒä»¬ä¸€èµ·ç”¨ä¸€å¯¹é—­åˆæ ‡ç­¾åŒ…å›´èµ·æ¥ã€‚åŒç†ï¼Œå¦‚æœä¸¤ä¸ªå­å­—ç¬¦ä¸²è¿ç»­è¢«åŠ ç²—ï¼Œé‚£ä¹ˆä½ ä¹Ÿéœ€è¦æŠŠå®ƒä»¬åˆèµ·æ¥ç”¨ä¸€å¯¹åŠ ç²—æ ‡ç­¾åŒ…å›´ã€‚æœ€åè¿”å›æ·»åŠ åŠ ç²—æ ‡ç­¾åçš„å­—ç¬¦ä¸² `s`ã€‚

æ€è·¯ï¼š
å…ˆä½¿ç”¨ä¸€ä¸ªæ•°ç»„isBoldä¿å­˜Sä¸­çš„æ¯ä¸ªå­—ç¬¦æ˜¯å¦åº”è¯¥åŠ ç²—ï¼Œåˆ¤æ–­çš„æ–¹å¼æ˜¯ï¼Œéå†wordsä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºSä¸­æœ‰å“ªäº›ä½ç½®å’Œå®ƒåŒ¹é…ã€‚
æ˜¯å¦å¢åŠ æ ‡ç­¾<b>çš„æ–¹æ³•æ˜¯å½“å‰å­—ç¬¦éœ€è¦åŠ ç²—ï¼Œä½†æ˜¯å…¶å‰é¢çš„å­—ç¬¦ä¸ç”¨åŠ ç²—ï¼Œæˆ–è€…å½“å‰å­—ç¬¦æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚ æ˜¯å¦å¢åŠ æ ‡ç­¾</b>çš„æ–¹æ³•æ˜¯å½“å‰å­—ç¬¦éœ€è¦åŠ ç²—ï¼Œä½†æ˜¯å…¶åé¢çš„å­—ç¬¦ä¸ç”¨åŠ ç²—ï¼Œæˆ–è€…å½“å‰å­—ç¬¦æ˜¯æœ€åä¸€ä¸ªå­—ç¬¦ã€‚

```java
public class Huawei {
    public static void main(String[] args) {
        String[] words = {"asas","dsw","12"};
        String s = "asasdsdasd12121";
        new Huawei().BoldWords(words,s);
    }
    static void BoldWords(String[] words,String s){
        int len = s.length();
        boolean[] isBold = new boolean[len+1];
        for (String word : words) {
            for (int i = 0; i < len-word.length(); i++) {
                String subs = s.substring(i, i+word.length());
                if (subs.equals(word)){
                    for (int j = i; j < i + word.length(); j++) {
                        isBold[j] = true;
                    }
                }
            }
        }
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < len; i++) {
            if (isBold[i]&&(i==0||!isBold[i-1])) sb.append("<br>");
            //å¦‚æœå½“å‰ä¸ºåŠ é†‹ï¼Œå‰é¢ä¸æ˜¯åŠ ç²—ï¼Œæˆ–è€…å‰é¢æ˜¯i==0ï¼›
            sb.append(s.charAt(i));
            if (isBold[i]&&(i==len-1||!isBold[i+1])) sb.append("</br>");
        }
        System.out.println(sb.toString());
    }
}

```
è¿è¡Œç»“æœï¼š
```latex
<br>asas</br>dsdasd<br>1212</br>1
```


# ä¸€ã€æ•°æ®ç»“æ„é—®é¢˜
## å­—ç¬¦ä¸²ç›¸å…³é—®é¢˜
> æ¯éš”8ä¸ªè¾“å‡ºä¸€ä¸‹

```java
String ss = sb.toString();
while (ss.length()>0) {
    System.out.println(ss.substring(0,8));
    ss = ss.substring(8);
}
```

### HJ4 å­—ç¬¦ä¸²åˆ†éš”
æè¿°
â€¢è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·æŒ‰é•¿åº¦ä¸º8æ‹†åˆ†æ¯ä¸ªè¾“å…¥å­—ç¬¦ä¸²å¹¶è¿›è¡Œè¾“å‡ºï¼›
â€¢é•¿åº¦ä¸æ˜¯8æ•´æ•°å€çš„å­—ç¬¦ä¸²è¯·åœ¨åé¢è¡¥æ•°å­—0ï¼Œç©ºå­—ç¬¦ä¸²ä¸å¤„ç†ã€‚
è¾“å…¥æè¿°ï¼š
è¿ç»­è¾“å…¥å­—ç¬¦ä¸²(æ¯ä¸ªå­—ç¬¦ä¸²é•¿åº¦å°äºç­‰äº100)
è¾“å‡ºæè¿°ï¼š
ä¾æ¬¡è¾“å‡ºæ‰€æœ‰åˆ†å‰²åçš„é•¿åº¦ä¸º8çš„æ–°å­—ç¬¦ä¸²
ç¤ºä¾‹1
è¾“å…¥ï¼š
```
abc
```

è¾“å‡ºï¼š
```
abc00000
```

```java
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        // æ³¨æ„ hasNext å’Œ hasNextLine çš„åŒºåˆ«
        while (in.hasNext()) { // æ³¨æ„ while å¤„ç†å¤šä¸ª case
            String s = in.next();
            StringBuilder sb = new StringBuilder();
            sb.append(s);
            int addZeroNum = 8-sb.length()%8;
            while (addZeroNum>0&&addZeroNum<8) {
                sb.append('0');
                addZeroNum--;
            }
            String ss = sb.toString();
            while (ss.length()>0) {
                System.out.println(ss.substring(0,8));
                ss = ss.substring(8);
            }
        }
    }
```



### FZ3 ç‰›ç‰›çš„å­—ç¬¦ä¸²è§£ç é—®é¢˜

æè¿°

åŠ¨ç‰©ç‰›ç‰›æ˜¯ä¸€ä¸ªèªæ˜çš„åŠ¨ç‰©ï¼Œå®ƒç°åœ¨é¢ä¸´ä¸€ä¸ªå­—ç¬¦ä¸²è§£ç çš„é—®é¢˜ã€‚ç»™å®šä¸€ä¸ªç»è¿‡ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œç‰›ç‰›éœ€è¦å°†å…¶è§£ç æˆåŸå§‹çš„å­—ç¬¦ä¸²ã€‚

ç¼–ç è§„åˆ™ä¸ºï¼šk[encoded_string]ï¼Œè¡¨ç¤ºå…¶ä¸­æ–¹æ‹¬å·å†…éƒ¨çš„ encoded_string æ­£å¥½é‡å¤ k æ¬¡ã€‚æ³¨æ„ k ä¿è¯ä¸ºæ­£æ•´æ•°ã€‚

è¯·ä½ ç¼–å†™ä¸€ä¸ªå‡½æ•°`decodeString`ï¼Œæ¥æ”¶ä¸€ä¸ªå­—ç¬¦ä¸²`s`ä½œä¸ºå‚æ•°ï¼Œè¿”å›è§£ç åçš„å­—ç¬¦ä¸²ã€‚

ç¤ºä¾‹1

è¾“å…¥ï¼š

```
"abc3[mn]xy"
```

è¿”å›å€¼ï¼š

```
"abcmnmnmnxy"
```

ç¤ºä¾‹2

è¾“å…¥ï¼š

```
"2[abc]3[cd]ef"
```

è¿”å›å€¼ï¼š

```
"abcabccdcdcdef"
```

```java
public String decodeString (String s) {
        //ä¸¤ä¸ªæ ˆï¼Œä¸€ä¸ªæ˜¯ä¿å­˜å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªä¿å­˜æ•°å­—
        ArrayDeque<Integer> s1 = new ArrayDeque<>();//ä¿å­˜æ•°å­—
        ArrayDeque<String> s2 = new ArrayDeque<>();//ä¿å­˜å­—ç¬¦ä¸²
        char[] as = s.toCharArray();
        for(char c:as){
            if (Character.isDigit(c)) {
                //å¦‚æœæ˜¯æ•°å­—
                s1.push(c-'0');
            }else if (c=='['||Character.isLetter(c)) {
                //å¦‚æœæ˜¯å·¦æ‹¬å·æˆ–è€…æ˜¯å­—æ¯
                s2.push(Character.toString(c));
            }else if (c==']') {
                StringBuilder sb= new StringBuilder();
                while (!s2.isEmpty()) {
                    String x = s2.pop();
                    if (!x.equals("[")) {
                        sb.insert(0, x);//æ¯”å¦‚ abc3[mn],é‡åˆ°äº†],å¼¹å‡ºï¼šnï¼Œm
                        //è¿™é‡Œæ˜¯åœ¨å‰é¢æ’å…¥ï¼Œsb: m n
                    }else{
                        break;//é‡åˆ°äº†[
                    }
                }
                int cnt = s1.pop();
                StringBuilder t= new StringBuilder();
                while (cnt>0) {
                    t.append(sb.toString());
                    cnt--;
                }
                s2.push(t.toString());//é‡å¤çš„æ’å…¥
            }
        }
        StringBuilder sb= new StringBuilder();
        while (!s2.isEmpty()) {
            sb.insert(0, s2.pop());
        }
        return sb.toString();
    }
```



## æ•°ç»„é—®é¢˜

### 41. ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•´æ•°

ç»™ä½ ä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ `nums` ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­æ²¡æœ‰å‡ºç°çš„æœ€å°çš„æ­£æ•´æ•°ã€‚

è¯·ä½ å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(n)` å¹¶ä¸”åªä½¿ç”¨å¸¸æ•°çº§åˆ«é¢å¤–ç©ºé—´çš„è§£å†³æ–¹æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,0]
è¾“å‡ºï¼š3
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [3,4,-1,1]
è¾“å‡ºï¼š2
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [7,8,9,11,12]
è¾“å‡ºï¼š1
```

```java
class Solution {
    public int firstMissingPositive(int[] nums) {
        //æœ€å°çš„æ­£æ•´æ•°ï¼Œéå†
        int len = nums.length;
        for (int i = 0; i < len; i++) {
            while (nums[i]>0 && nums[i]<=len && nums[i]!=nums[nums[i]-1]){
                //  1 2 3 0 4
                //  - - - ! -
                // 4åº”è¯¥åœ¨ä¸‹æ ‡3çš„ä½ç½®
                int j = nums[i] - 1;
                int temp = nums[i];
                nums[i] = nums[j];
                nums[j] = temp;
            }
        }
        for (int i = 0; i < len; i++) {
            if (nums[i]!=i+1){
                return i+1;//å¦‚æœå½“å‰ä½ç½®ä¸å­˜åœ¨å¯¹åº”çš„åˆç†çš„å€¼ï¼Œå°±è¿”å›
            }
        }
        return len+1;
    }
}
```

### HJ3.**æ˜æ˜çš„éšæœºæ•°**

æè¿°

æ˜æ˜ç”Ÿæˆäº†ï¿½_N_ä¸ª1åˆ°500ä¹‹é—´çš„éšæœºæ•´æ•°ã€‚è¯·ä½ åˆ å»å…¶ä¸­é‡å¤çš„æ•°å­—ï¼Œå³ç›¸åŒçš„æ•°å­—åªä¿ç•™ä¸€ä¸ªï¼ŒæŠŠå…¶ä½™ç›¸åŒçš„æ•°å»æ‰ï¼Œç„¶åå†æŠŠè¿™äº›æ•°ä»å°åˆ°å¤§æ’åºï¼ŒæŒ‰ç…§æ’å¥½çš„é¡ºåºè¾“å‡ºã€‚

æ•°æ®èŒƒå›´ï¼š 1â‰¤ï¿½â‰¤1000 1â‰¤_n_â‰¤1000 ï¼Œè¾“å…¥çš„æ•°å­—å¤§å°æ»¡è¶³ 1â‰¤ï¿½ï¿½ï¿½â‰¤500 1â‰¤_v**a**l_â‰¤500

è¾“å…¥æè¿°ï¼š

ç¬¬ä¸€è¡Œå…ˆè¾“å…¥éšæœºæ•´æ•°çš„ä¸ªæ•° N ã€‚ æ¥ä¸‹æ¥çš„ N è¡Œæ¯è¡Œè¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨æ˜æ˜ç”Ÿæˆçš„éšæœºæ•°ã€‚ å…·ä½“æ ¼å¼å¯ä»¥å‚è€ƒä¸‹é¢çš„"ç¤ºä¾‹"ã€‚

è¾“å‡ºæè¿°ï¼š

è¾“å‡ºå¤šè¡Œï¼Œè¡¨ç¤ºè¾“å…¥æ•°æ®å¤„ç†åçš„ç»“æœ

ç¤ºä¾‹1

è¾“å…¥ï¼š

```
3
2
2
1
```

è¾“å‡ºï¼š

```
1
2
```

è¯´æ˜ï¼š

```
è¾“å…¥è§£é‡Šï¼š
ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯3ï¼Œä¹Ÿå³è¿™ä¸ªå°æ ·ä¾‹çš„N=3ï¼Œè¯´æ˜ç”¨è®¡ç®—æœºç”Ÿæˆäº†3ä¸ª1åˆ°500ä¹‹é—´çš„éšæœºæ•´æ•°ï¼Œæ¥ä¸‹æ¥æ¯è¡Œä¸€ä¸ªéšæœºæ•°å­—ï¼Œå…±3è¡Œï¼Œä¹Ÿå³è¿™3ä¸ªéšæœºæ•°å­—ä¸ºï¼š
2
2
1
æ‰€ä»¥æ ·ä¾‹çš„è¾“å‡ºä¸ºï¼š
1
2
```

```java
public class Main {
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        // æ³¨æ„ hasNext å’Œ hasNextLine çš„åŒºåˆ«
        while (in.hasNext()) { // æ³¨æ„ while å¤„ç†å¤šä¸ª case
            int n = in.nextInt();
            int[] nums = new int[501];
            for(int i = 0;i<n;i++){
                int next = in.nextInt();
                // System.out.println(next);
                nums[next] =1 ;
            }
            for(int i = 0;i<501;i++){
                if (nums[i]==1) {
                    System.out.println(i);
                }
            }
            
        }
    }
}
```

## é“¾è¡¨é—®é¢˜

> LRUç¼“å­˜ï¼š`**int oldestKey = cache.keySet().iterator().next();**`ï¼š è¿™ä¸€è¡Œä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º`oldestKey`çš„æ•´å‹å˜é‡ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸º`cache`é”®é›†çš„ç¬¬ä¸€ä¸ªé”®ã€‚è¿™é‡Œçš„å˜é‡å`oldestKey`æš—ç¤ºç€è¿™ä¸ªé”®æ˜¯â€œæœ€æ—§â€çš„ï¼Œå¯èƒ½æ˜¯æŒ‰æ’å…¥é¡ºåºæ¥çœ‹çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨`LinkedHashMap`è¿™æ ·å¯ä»¥ä¿æŒæ’å…¥é¡ºåºçš„`Map`å®ç°æ—¶ã€‚ä¸è¿‡ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯`HashMap`ï¼Œåˆ™ä¸èƒ½ä¿è¯è¿™ä¸ªé”®æ˜¯æœ€æ—§çš„ï¼Œå› ä¸º`HashMap`ä¸ä¿è¯ä»»ä½•é¡ºåºã€‚


### [146. LRU ç¼“å­˜](https://leetcode.cn/problems/lru-cache/)

è¯·ä½ è®¾è®¡å¹¶å®ç°ä¸€ä¸ªæ»¡è¶³ [LRU (æœ€è¿‘æœ€å°‘ä½¿ç”¨) ç¼“å­˜](https://baike.baidu.com/item/LRU) çº¦æŸçš„æ•°æ®ç»“æ„ã€‚

å®ç° `LRUCache` ç±»ï¼š

- `LRUCache(int capacity)` ä»¥ **æ­£æ•´æ•°** ä½œä¸ºå®¹é‡ `capacity` åˆå§‹åŒ– LRU ç¼“å­˜
- `int get(int key)` å¦‚æœå…³é”®å­— `key` å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è¿”å›å…³é”®å­—çš„å€¼ï¼Œå¦åˆ™è¿”å› `-1` ã€‚
- `void put(int key, int value)` å¦‚æœå…³é”®å­— `key` å·²ç»å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶æ•°æ®å€¼ `value` ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å‘ç¼“å­˜ä¸­æ’å…¥è¯¥ç»„ `key-value` ã€‚å¦‚æœæ’å…¥æ“ä½œå¯¼è‡´å…³é”®å­—æ•°é‡è¶…è¿‡ `capacity` ï¼Œåˆ™åº”è¯¥ **é€å‡º** æœ€ä¹…æœªä½¿ç”¨çš„å…³é”®å­—ã€‚

å‡½æ•° `get` å’Œ `put` å¿…é¡»ä»¥ `O(1)` çš„å¹³å‡æ—¶é—´å¤æ‚åº¦è¿è¡Œã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥
["LRUCache", "put", "put", "get", "put", "get", "put", "get", "get", "get"]
[[2], [1, 1], [2, 2], [1], [3, 3], [2], [4, 4], [1], [3], [4]]
è¾“å‡º
[null, null, null, 1, null, -1, null, -1, 3, 4]

è§£é‡Š
LRUCache lRUCache = new LRUCache(2);
lRUCache.put(1, 1); // ç¼“å­˜æ˜¯ {1=1}
lRUCache.put(2, 2); // ç¼“å­˜æ˜¯ {1=1, 2=2}
lRUCache.get(1);    // è¿”å› 1
lRUCache.put(3, 3); // è¯¥æ“ä½œä¼šä½¿å¾—å…³é”®å­— 2 ä½œåºŸï¼Œç¼“å­˜æ˜¯ {1=1, 3=3}
lRUCache.get(2);    // è¿”å› -1 (æœªæ‰¾åˆ°)
lRUCache.put(4, 4); // è¯¥æ“ä½œä¼šä½¿å¾—å…³é”®å­— 1 ä½œåºŸï¼Œç¼“å­˜æ˜¯ {4=4, 3=3}
lRUCache.get(1);    // è¿”å› -1 (æœªæ‰¾åˆ°)
lRUCache.get(3);    // è¿”å› 3
lRUCache.get(4);    // è¿”å› 4
```

è¦è®© put å’Œ get æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡º cache è¿™ä¸ªæ•°æ®ç»“æ„å¿…è¦çš„æ¡ä»¶ï¼š

1ã€æ˜¾ç„¶ cache ä¸­çš„å…ƒç´ å¿…é¡»æœ‰æ—¶åºï¼Œä»¥åŒºåˆ†æœ€è¿‘ä½¿ç”¨çš„å’Œä¹…æœªä½¿ç”¨çš„æ•°æ®ï¼Œå½“å®¹é‡æ»¡äº†ä¹‹åè¦åˆ é™¤æœ€ä¹…æœªä½¿ç”¨çš„é‚£ä¸ªå…ƒç´ è…¾ä½ç½®ã€‚

2ã€æˆ‘ä»¬è¦åœ¨ cache ä¸­å¿«é€Ÿæ‰¾æŸä¸ª key æ˜¯å¦å·²å­˜åœ¨å¹¶å¾—åˆ°å¯¹åº”çš„ valï¼›

3ã€æ¯æ¬¡è®¿é—® cache ä¸­çš„æŸä¸ª keyï¼Œéœ€è¦å°†è¿™ä¸ªå…ƒç´ å˜ä¸ºæœ€è¿‘ä½¿ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ cache è¦æ”¯æŒåœ¨ä»»æ„ä½ç½®å¿«é€Ÿæ’å…¥å’Œåˆ é™¤å…ƒç´ ã€‚

é‚£ä¹ˆï¼Œä»€ä¹ˆæ•°æ®ç»“æ„åŒæ—¶ç¬¦åˆä¸Šè¿°æ¡ä»¶å‘¢ï¼Ÿ**å“ˆå¸Œè¡¨æŸ¥æ‰¾å¿«ï¼Œä½†æ˜¯æ•°æ®æ— å›ºå®šé¡ºåºï¼›é“¾è¡¨æœ‰é¡ºåºä¹‹åˆ†ï¼Œæ’å…¥åˆ é™¤å¿«ï¼Œä½†æ˜¯æŸ¥æ‰¾æ…¢ã€‚**æ‰€ä»¥ç»“åˆä¸€ä¸‹ï¼Œå½¢æˆä¸€ç§æ–°çš„æ•°æ®ç»“æ„ï¼š`å“ˆå¸Œé“¾è¡¨ LinkedHashMap`ã€‚

```java
class LRUCache {
    int cap;
    LinkedHashMap<Integer,Integer> cache = new LinkedHashMap<>();
    public LRUCache(int capacity) {
        this.cap = capacity;
    }
    
    public int get(int key) {
        if(!cache.containsKey(key)){
            return -1;
        }
        int val = cache.get(key);
        cache.remove(key);
        cache.put(key,val);//å†æ¬¡æ’å…¥å°±å®ç°äº†æœ€æ–°çš„ä½¿ç”¨çš„æ ‡è®°
        return cache.get(key);
    }
    
    public void put(int key, int value) {
        if(cache.containsKey(key)){
            cache.put(key,value);
            int val = cache.get(key);
            cache.remove(key);
            cache.put(key,val);//å†æ¬¡æ’å…¥
            return;
        }
        if(cache.size()>=cap){
            //ä½¿ç”¨iterator()æ–¹æ³•è·å–è¿­ä»£å™¨ï¼Œå¯ä»¥éå†é›†åˆä¸­çš„å…ƒç´ ã€‚next()æ–¹æ³•ç”¨äºè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå³è·å–æœ€æ—©çš„é”®ã€‚
            int oldestKey = cache.keySet().iterator().next();
            cache.remove(oldestKey);
        }
        cache.put(key,value);
        return;
    }
}
```

> ç”¨ LinkedHashMap å¯ä»¥å¾ˆå®¹æ˜“å®ç° LRU ç¼“å­˜ï¼Œä¸è¿‡é¢è¯•çš„æ—¶å€™ä¼°è®¡è¿™æ ·ä¸å¥½ï¼Œè¿˜æ˜¯å°½é‡è‡ªå·±å®ç°æ•°æ®ç»“æ„å§ğŸ¤£
>  
> ä¸»è¦æƒ³æ³•æ˜¯ä½¿ç”¨ JDK æä¾›çš„ HashMapï¼Œç„¶åè‡ªå·±å†™ä¸€ä¸ª Node èŠ‚ç‚¹ç±»ï¼Œç”¨æ¥ä¿å­˜ value ï¼Œå¹¶ä¸”é€šè¿‡è¿™ä¸ª Node é‡Œé¢çš„ prevã€next æŒ‡é’ˆå°†å„ä¸ªå€¼ä¸²è”èµ·æ¥ï¼Œè¿™æ ·å°±ç»´æŠ¤äº†é¡ºåºã€‚
>  
> å¾ˆé‡è¦çš„ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼ŒNode é‡Œé¢è¿˜è¦åŠ ä¸Š key ï¼ˆå°½ç®¡ HashMap æœ¬æ¥å°±å­˜äº†ä¸€ä»½ï¼‰ã€‚
>  
> åŸå› æ˜¯å½“ç¼“å­˜è¾¾åˆ°å®¹é‡ä¸Šé™æ—¶ï¼Œå°±è¦å…ˆç§»é™¤å°¾éƒ¨çš„èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœåªç§»é™¤é“¾è¡¨çš„ tail èŠ‚ç‚¹ï¼Œå¿½ç•¥äº† HasmMap ä¹Ÿè¦ remove ï¼Œåé¢å†è®¿é—®è¿™ä¸ªè¢«ç§»é™¤çš„ key å°±ä¼šé€ æˆç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ï¼ï¼
>  
> æ‰€ä»¥æˆ‘ä»¬åœ¨ Node èŠ‚ç‚¹é‡Œé¢åŠ ä¸Š key ï¼Œåˆ æ‰ tail ä¹‹å‰å…ˆ remove æ‰ HasmMap çš„è¿™ä¸ª keyï¼Œå°±å¾ˆæ–¹ä¾¿äº†ã€‚
>  
> ä¸é€‚ç”¨LinkedList:
>  

```java
import java.util.*;
public class Solution {
    private int capacity;
    private Map<Integer,Node> map;
    private Node head;
    private Node tail;
    private int used;
    class Node{
        int key;
        int value;
        Node prev;
        Node next;
        Node(int key,int value,Node prev,Node next){
            this.key = key;
            this.value = value;
            this.prev = prev;
            this.next = next;
        }
    }
 public Solution(int capacity) {
    //æ„é€ å‡½æ•°
    this.capacity = capacity;
    this.map =  new HashMap<>();
    this.used= 0;
 }
 public int get(int key) {
 // write code here
    if(!map.containsKey(key)){
        return -1;
    }
    makeRecently(key);
    return map.get(key).value;
 }
 public void set(int key, int value) {
 // write code here
    if(map.containsKey(key)){
        map.get(key).value = value;
        makeRecently(key);
        return;
    }
    if(used==capacity){
        map.remove(tail.key);
        tail = tail.prev;
        tail.next = null;
        used--;
    }
    if(head==null){
        head = new Node(key,value,null,null);
        tail = head;
    }
    else{
        //headä¸ä¸ºç©º
        Node t = new Node(key,value,null,head);
        head.prev = t;
        head = t;
    }
    map.put(key,head);
    used++;
 }
 private void makeRecently(int key){
    Node t = map.get(key);
    if(t!=head){
        if(t==tail){
            tail = tail.prev;
            tail.next = null;
        }else{
            t.prev.next = t.next;//å°†tè·³è¿‡äº†
            t.next.prev = t.prev;//å°†nextçš„å‘å‰æŒ‡çš„é¡ºåºçº æ­£
        }
        t.prev = null;
        t.next = head;
        head.prev = t;
        head =t;
    }
 }
}
```

### å®ç°ä¸€ä¸ªcacheï¼ŒåŒ…æ‹¬LRUç®—æ³•å’Œåœ¨xç§’åè¿‡æœŸ

```java
import java.util.LinkedHashMap;  
import java.util.Map;  
import java.util.concurrent.ScheduledExecutorService;  
import java.util.concurrent.Executors;  
import java.util.concurrent.TimeUnit;  
  
public class LRUCacheWithExpiration<K, V> {  
    // ç¼“å­˜çš„æœ€å¤§å®¹é‡  
    private final int capacity;  
    // ç¼“å­˜é¡¹çš„è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰  
    private final long expirationTimeInSeconds;  
    // ä½¿ç”¨LinkedHashMapå®ç°LRUç¼“å­˜ï¼ŒaccessOrderè®¾ç½®ä¸ºtrueä»¥å¯ç”¨LRUé¡ºåº  
    private final LinkedHashMap<K, CacheEntry<V>> cacheMap;  
    // å®šæ—¶ä»»åŠ¡æ‰§è¡Œå™¨ï¼Œç”¨äºæ¸…ç†è¿‡æœŸçš„ç¼“å­˜é¡¹  
    private final ScheduledExecutorService expirationExecutor;  
  
    // å†…éƒ¨ç±»CacheEntryï¼Œç”¨äºå­˜å‚¨ç¼“å­˜å€¼å’Œè¿‡æœŸæ—¶é—´  
    private static class CacheEntry<V> {  
        V value;  
        long expirationTime;  
  
        CacheEntry(V value, long expirationTime) {  
            this.value = value;  
            this.expirationTime = expirationTime;  
        }  
    }  
  
    // æ„é€ å‡½æ•°  
    public LRUCacheWithExpiration(int capacity, long expirationTimeInSeconds) {  
        this.capacity = capacity;  
        this.expirationTimeInSeconds = expirationTimeInSeconds;  
        // åˆå§‹åŒ–LRUç¼“å­˜ï¼Œè®¾ç½®accessOrderä¸ºtrueï¼Œä»¥ä¾¿æŒ‰è®¿é—®é¡ºåºè¿›è¡ŒLRUæ“ä½œ  
        this.cacheMap = new LinkedHashMap<>(capacity, 0.75f, true) {  
            // é‡å†™removeEldestEntryæ–¹æ³•ï¼Œå½“Mapå¤§å°è¶…è¿‡æŒ‡å®šå®¹é‡æ—¶ï¼Œåˆ é™¤æœ€è€çš„å…ƒç´   
            @Override  
            protected boolean removeEldestEntry(Map.Entry<K, CacheEntry<V>> eldest) {  
                return size() > LRUCacheWithExpiration.this.capacity;  
            }  
        };  
        // åˆå§‹åŒ–å®šæ—¶ä»»åŠ¡æ‰§è¡Œå™¨  
        this.expirationExecutor = Executors.newSingleThreadScheduledExecutor();  
        // å®‰æ’å®šæ—¶ä»»åŠ¡ï¼Œæ¯éš”expirationTimeInSecondsç§’æ‰§è¡Œä¸€æ¬¡æ¸…ç†è¿‡æœŸç¼“å­˜é¡¹çš„æ“ä½œ  
        this.expirationExecutor.scheduleAtFixedRate(this::evictExpiredEntries, expirationTimeInSeconds, expirationTimeInSeconds, TimeUnit.SECONDS);  
    }  
  
    // è·å–ç¼“å­˜é¡¹  
    public synchronized V get(K key) {  
        CacheEntry<V> entry = cacheMap.get(key);  
        if (entry == null || isExpired(entry.expirationTime)) {  
            // ç¼“å­˜é¡¹ä¸å­˜åœ¨æˆ–å·²è¿‡æœŸï¼Œè¿”å›null  
            return null;  
        }  
        // æ›´æ–°ç¼“å­˜é¡¹çš„è®¿é—®é¡ºåºï¼ˆç§»åˆ°å°¾éƒ¨ï¼Œè¡¨ç¤ºæœ€è¿‘è®¿é—®ï¼‰  
        cacheMap.remove(key);  
        cacheMap.put(key, entry);  
        // è¿”å›ç¼“å­˜å€¼  
        return entry.value;  
    }  
  
    // æ·»åŠ æˆ–æ›´æ–°ç¼“å­˜é¡¹  
    public synchronized void put(K key, V value) {  
        // åˆ›å»ºæ–°çš„ç¼“å­˜é¡¹ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´  
        CacheEntry<V> newEntry = new CacheEntry<>(value, System.currentTimeMillis() + (expirationTimeInSeconds * 1000));  
        // å°†æ–°çš„ç¼“å­˜é¡¹æ·»åŠ åˆ°LRUç¼“å­˜ä¸­ï¼Œå¦‚æœç¼“å­˜å·²æ»¡ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ é™¤æœ€è€çš„å…ƒç´   
        cacheMap.put(key, newEntry);  
    }  
  
    // æ¸…ç†è¿‡æœŸç¼“å­˜é¡¹çš„æ–¹æ³•  
    private void evictExpiredEntries() {  
        long currentTime = System.currentTimeMillis();  
        // éå†ç¼“å­˜ï¼Œç§»é™¤å·²è¿‡æœŸçš„ç¼“å­˜é¡¹  
        cacheMap.entrySet().removeIf(entry -> isExpired(entry.getValue().expirationTime));  
    }  
  
    // åˆ¤æ–­ç¼“å­˜é¡¹æ˜¯å¦è¿‡æœŸ  
    private boolean isExpired(long expirationTime) {  
        return expirationTime <= System.currentTimeMillis();  
    }  
  
    // å…³é—­ç¼“å­˜ï¼Œåœæ­¢å®šæ—¶ä»»åŠ¡æ‰§è¡Œå™¨  
    public void close() {  
        expirationExecutor.shutdown();  
        try {  
            if (!expirationExecutor.awaitTermination(60, TimeUnit.SECONDS)) {  
                expirationExecutor.shutdownNow();  
            }  
        } catch (InterruptedException e) {  
            expirationExecutor.shutdownNow();  
            Thread.currentThread().interrupt();  
        }  
    }  
}
```

### [61. æ—‹è½¬é“¾è¡¨](https://leetcode.cn/problems/rotate-list/)

ç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ï¼Œæ—‹è½¬é“¾è¡¨ï¼Œå°†é“¾è¡¨æ¯ä¸ªèŠ‚ç‚¹å‘å³ç§»åŠ¨ `k` ä¸ªä½ç½®ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/rotate1.jpg#id=bmYtW&originHeight=302&originWidth=712&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šhead = [1,2,3,4,5], k = 2
è¾“å‡ºï¼š[4,5,1,2,3]
```

```java
class Solution {
    public ListNode rotateRight(ListNode head, int k) {
        if(head==null) return head;
        int n = 1;
        ListNode tail = head;
        while(tail.next!=null){
            tail = tail.next;
            n++;// length
        }
        k = k%n;//é˜²æ­¢é‡å¤ç§»åŠ¨
        if(k<1) return head;
        ListNode fast = head;
        ListNode slow = head;
        while(k-->0){
            fast = fast.next;
        }
        
        while(fast.next!=null){
            fast= fast.next;
            slow = slow.next;
        }
        ListNode newHead = slow.next;
        slow.next = null;
        tail.next = head;
        return newHead;
    }
}
```

### [138. éšæœºé“¾è¡¨çš„å¤åˆ¶](https://leetcode.cn/problems/copy-list-with-random-pointer/)

ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„é“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªé¢å¤–å¢åŠ çš„éšæœºæŒ‡é’ˆ `random` ï¼Œè¯¥æŒ‡é’ˆå¯ä»¥æŒ‡å‘é“¾è¡¨ä¸­çš„ä»»ä½•èŠ‚ç‚¹æˆ–ç©ºèŠ‚ç‚¹ã€‚

æ„é€ è¿™ä¸ªé“¾è¡¨çš„ [**æ·±æ‹·è´**](https://baike.baidu.com/item/%E6%B7%B1%E6%8B%B7%E8%B4%9D/22785317?fr=aladdin)ã€‚ æ·±æ‹·è´åº”è¯¥æ­£å¥½ç”± `n` ä¸ª **å…¨æ–°** èŠ‚ç‚¹ç»„æˆï¼Œå…¶ä¸­æ¯ä¸ªæ–°èŠ‚ç‚¹çš„å€¼éƒ½è®¾ä¸ºå…¶å¯¹åº”çš„åŸèŠ‚ç‚¹çš„å€¼ã€‚æ–°èŠ‚ç‚¹çš„ `next` æŒ‡é’ˆå’Œ `random` æŒ‡é’ˆä¹Ÿéƒ½åº”æŒ‡å‘å¤åˆ¶é“¾è¡¨ä¸­çš„æ–°èŠ‚ç‚¹ï¼Œå¹¶ä½¿åŸé“¾è¡¨å’Œå¤åˆ¶é“¾è¡¨ä¸­çš„è¿™äº›æŒ‡é’ˆèƒ½å¤Ÿè¡¨ç¤ºç›¸åŒçš„é“¾è¡¨çŠ¶æ€ã€‚**å¤åˆ¶é“¾è¡¨ä¸­çš„æŒ‡é’ˆéƒ½ä¸åº”æŒ‡å‘åŸé“¾è¡¨ä¸­çš„èŠ‚ç‚¹** ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœåŸé“¾è¡¨ä¸­æœ‰ `X` å’Œ `Y` ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­ `X.random --> Y` ã€‚é‚£ä¹ˆåœ¨å¤åˆ¶é“¾è¡¨ä¸­å¯¹åº”çš„ä¸¤ä¸ªèŠ‚ç‚¹ `x` å’Œ `y` ï¼ŒåŒæ ·æœ‰ `x.random --> y` ã€‚

è¿”å›å¤åˆ¶é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚

ç”¨ä¸€ä¸ªç”± `n` ä¸ªèŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨æ¥è¡¨ç¤ºè¾“å…¥/è¾“å‡ºä¸­çš„é“¾è¡¨ã€‚æ¯ä¸ªèŠ‚ç‚¹ç”¨ä¸€ä¸ª `[val, random_index]` è¡¨ç¤ºï¼š

- `val`ï¼šä¸€ä¸ªè¡¨ç¤º `Node.val` çš„æ•´æ•°ã€‚
- `random_index`ï¼šéšæœºæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ç´¢å¼•ï¼ˆèŒƒå›´ä» `0` åˆ° `n-1`ï¼‰ï¼›å¦‚æœä¸æŒ‡å‘ä»»ä½•èŠ‚ç‚¹ï¼Œåˆ™ä¸º `null` ã€‚

ä½ çš„ä»£ç  **åª** æ¥å—åŸé“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ä½œä¸ºä¼ å…¥å‚æ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/e1.png#id=z1UVT&originHeight=386&originWidth=1900&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šhead = [[7,null],[13,0],[11,4],[10,2],[1,0]]
è¾“å‡ºï¼š[[7,null],[13,0],[11,4],[10,2],[1,0]]
```

åˆ©ç”¨å“ˆå¸Œè¡¨çš„æŸ¥è¯¢ç‰¹ç‚¹ï¼Œè€ƒè™‘æ„å»º åŸé“¾è¡¨èŠ‚ç‚¹ å’Œ æ–°é“¾è¡¨å¯¹åº”èŠ‚ç‚¹ çš„é”®å€¼å¯¹æ˜ å°„å…³ç³»ï¼Œå†éå†æ„å»ºæ–°é“¾è¡¨å„èŠ‚ç‚¹çš„ next å’Œ random å¼•ç”¨æŒ‡å‘å³å¯ã€‚

ç®—æ³•æµç¨‹ï¼š

- è‹¥å¤´èŠ‚ç‚¹ head ä¸ºç©ºèŠ‚ç‚¹ï¼Œç›´æ¥è¿”å› null ã€‚
- åˆå§‹åŒ–ï¼š å“ˆå¸Œè¡¨ dic ï¼Œ èŠ‚ç‚¹ cur æŒ‡å‘å¤´èŠ‚ç‚¹ã€‚
- å¤åˆ¶é“¾è¡¨ï¼š
å»ºç«‹æ–°èŠ‚ç‚¹ï¼Œå¹¶å‘ dic æ·»åŠ é”®å€¼å¯¹ (åŸ cur èŠ‚ç‚¹, æ–° cur èŠ‚ç‚¹ï¼‰ ã€‚
cur éå†è‡³åŸé“¾è¡¨ä¸‹ä¸€èŠ‚ç‚¹ã€‚
- æ„å»ºæ–°é“¾è¡¨çš„å¼•ç”¨æŒ‡å‘ï¼š
æ„å»ºæ–°èŠ‚ç‚¹çš„ next å’Œ random å¼•ç”¨æŒ‡å‘ã€‚
cur éå†è‡³åŸé“¾è¡¨ä¸‹ä¸€èŠ‚ç‚¹ã€‚
- è¿”å›å€¼ï¼š æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹ dic[cur] ã€‚

```java
class Solution {
    public Node copyRandomList(Node head) {
        if(head==null) return null;
        Node cur = head;
        Map<Node,Node> map = new HashMap<>();
        while(cur!=null){
            //map storage the new Node
            map.put(cur,new Node(cur.val));
            cur = cur.next;
        }
        cur = head;
        while(cur!=null){
            map.get(cur).next = map.get(cur.next);
            map.get(cur).random = map.get(cur.random);
            cur = cur.next;
        }
        return map.get(head);
    }
}
```

### [å‰‘æŒ‡ Offer II 025. é“¾è¡¨ä¸­çš„ä¸¤æ•°ç›¸åŠ ](https://leetcode.cn/problems/lMSNwu/)

ç»™å®šä¸¤ä¸ª **éç©ºé“¾è¡¨** `l1`å’Œ `l2` æ¥ä»£è¡¨ä¸¤ä¸ªéè´Ÿæ•´æ•°ã€‚æ•°å­—æœ€é«˜ä½ä½äºé“¾è¡¨å¼€å§‹ä½ç½®ã€‚å®ƒä»¬çš„æ¯ä¸ªèŠ‚ç‚¹åªå­˜å‚¨ä¸€ä½æ•°å­—ã€‚å°†è¿™ä¸¤æ•°ç›¸åŠ ä¼šè¿”å›ä¸€ä¸ªæ–°çš„é“¾è¡¨ã€‚

å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°å­—éƒ½ä¸ä¼šä»¥é›¶å¼€å¤´ã€‚

**ç¤ºä¾‹1ï¼š**

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1389077/1715474951264-007e6f63-e6f1-4523-be84-8beadab56301.png#averageHue=%23f3f3f3&clientId=u3a18be3a-46a6-4&id=dKGpc&originHeight=342&originWidth=523&originalType=binary&ratio=1&rotation=0&showTitle=false&size=32741&status=done&style=none&taskId=ue2088a6f-5d0d-4adf-a1e6-650ab01b41b&title=)

```
è¾“å…¥ï¼šl1 = [7,2,4,3], l2 = [5,6,4]
è¾“å‡ºï¼š[7,8,0,7]
```

```java
class Solution {
    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {
//        ä½¿ç”¨ä¸¤ä¸ªè¾…åŠ©æ ˆ
        ArrayDeque<Integer> stk1 = new ArrayDeque<>();
        ArrayDeque<Integer> stk2 = new ArrayDeque<>();
        while (l1!=null){
            stk1.push(l1.val);
            l1 = l1.next;
        }
        while (l2!=null){
            stk2.push(l2.val);
            l2 = l2.next;
        }
        int carry = 0;//å‚¨å­˜è¿›ä½
        ListNode res = null;//å‚¨å­˜ç»“æœ
        while (!stk1.isEmpty()||!stk2.isEmpty()||carry!=0) {
            int digit1 = stk1.isEmpty()?0:stk1.pop();
            int digit2 = stk2.isEmpty()?0:stk2.pop();
            int sum = digit1+digit2+carry;
            carry = sum/10;
            sum = sum%10;
            ListNode tmp = new ListNode(sum);
            tmp.next = res;
            res = tmp;
        }
        return res;
    }
}
```

### [25. K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨](https://leetcode.cn/problems/reverse-nodes-in-k-group/)
ç»™ä½ é“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ï¼Œæ¯ `k` ä¸ªèŠ‚ç‚¹ä¸€ç»„è¿›è¡Œç¿»è½¬ï¼Œè¯·ä½ è¿”å›ä¿®æ”¹åçš„é“¾è¡¨ã€‚
`k` æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºé“¾è¡¨çš„é•¿åº¦ã€‚å¦‚æœèŠ‚ç‚¹æ€»æ•°ä¸æ˜¯ `k` çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆè¯·å°†æœ€åå‰©ä½™çš„èŠ‚ç‚¹ä¿æŒåŸæœ‰é¡ºåºã€‚
ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚
**ç¤ºä¾‹ 1ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/reverse_ex1.jpg#id=WF3kZ&originHeight=222&originWidth=542&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šhead = [1,2,3,4,5], k = 2
è¾“å‡ºï¼š[2,1,4,3,5]
```

```java
class Solution {
    public ListNode reverseKGroup(ListNode head, int k) {
        if (head==null||head.next ==null) return head;
        ListNode tail = head;
        for(int i = 0;i<k;i++){
            if(tail==null) return head;
            tail = tail.next;
        }
        ListNode newHead = reverse(head,tail);
        head.next = reverseKGroup(tail,k);//è¿™ä¸ªæ—¶å€™çš„headå°±æ˜¯åè½¬å¥½çš„é˜Ÿå°¾äº†
        return newHead;
    }
    private ListNode reverse(ListNode head,ListNode tail){
        ListNode prev = null;
        ListNode next = null;
        while(head!=tail){
            next = head.next;
            head.next = prev;
            prev = head;
            head = next;
        }
        return prev;//è¿”å›å¤´éƒ¨ï¼Œå°±æ˜¯åè½¬çš„å¤´éƒ¨äº†
    }
}
```

![](https://cdn.jsdelivr.net/gh/52chen/imagebed2023@main/picgo/image-20240320134441671.png#id=o3Znu&originHeight=474&originWidth=828&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

### [å‰‘æŒ‡ Offer II 026. é‡æ’é“¾è¡¨](https://leetcode.cn/problems/LGjMqU/)

ç»™å®šä¸€ä¸ªå•é“¾è¡¨ `L` çš„å¤´èŠ‚ç‚¹ `head` ï¼Œå•é“¾è¡¨ `L` è¡¨ç¤ºä¸ºï¼š

`L0 â†’ L1 â†’ â€¦ â†’ Ln-1 â†’ Ln`
è¯·å°†å…¶é‡æ–°æ’åˆ—åå˜ä¸ºï¼š

```
L0 â†’ Ln â†’ L1 â†’ Ln-1 â†’ L2 â†’ Ln-2 â†’ â€¦
```

ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…çš„è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚
**ç¤ºä¾‹ 1:**

![](https://pic.leetcode-cn.com/1626420311-PkUiGI-image.png#id=G9bQk&originHeight=222&originWidth=422&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥: head = [1,2,3,4]
è¾“å‡º: [1,4,2,3]
```

```java
class Solution {
    public void reorderList(ListNode head) {
        ////å°†ä¸»é“¾è¡¨åˆ’åˆ†ä¸º å‰ä¸€æ®µå­é“¾è¡¨å’Œåä¸€æ®µå­é“¾è¡¨ï¼Œ
        // å¯¹äºåä¸€æ®µå­é“¾è¡¨è¿›è¡Œç¿»è½¬ï¼ŒåŒæ—¶å¯¹äºè¿™ä¸¤æ¡é“¾è¡¨è¿›è¡Œé‡æ„;
        ArrayDeque<ListNode> deque = new ArrayDeque<ListNode>();
        ListNode dummy = new ListNode(-1);
        dummy.next = head;
        while (head!=null) {
            ListNode next = head.next;
            head.next = null;
            deque.add(head);
            head = next;
        }
        ListNode curr = dummy;
        while (!deque.isEmpty()) {
            ListNode start = deque.pollFirst();
            curr.next = start;
            //å¾ªç¯éå†dequeåŒç«¯ï¼Œç›´è‡³é˜Ÿåˆ—ä¸ºç©º
            if (!deque.isEmpty()){
                ListNode last = deque.pollLast();
                start.next = last;//curr-ã€‹start-ã€‹last
                curr = last;//currä¸“ç¨‹last
            }else {
                start.next = null;
            }
        }
        return;
    }
}
```

### ä¸¤ä¸ªé“¾è¡¨åˆå¹¶

```java
public ListNode mergeTwoLists(ListNode a, ListNode b) {
    if (a == null || b == null) {
        return a != null ? a : b;
    }
    ListNode head = new ListNode(0);
    ListNode tail = head, la = a, lb = b;
    while (la != null && lb != null) {
        if (la.val < lb.val) {
            tail.next = la;
            la = la.next;
        } else {
            tail.next = lb;
            lb = lb.next;
        }
        tail = tail.next;
    }
    tail.next = (la != null ? la : lb);
    return head.next;
}
```

> å¤šä¸ªé“¾è¡¨åˆå¹¶å¯ä»¥éå†ï¼Œ
>  

```java
public ListNode mergeKLists(ListNode[] lists) {
    ListNode ans = null;
    for (ListNode list : lists) {
        ans = mergeTwoLists(ans,list);
    }
    return ans;
}
```

### [92. åè½¬é“¾è¡¨ II](https://leetcode.cn/problems/reverse-linked-list-ii/)

ç»™ä½ å•é“¾è¡¨çš„å¤´æŒ‡é’ˆ `head` å’Œä¸¤ä¸ªæ•´æ•° `left` å’Œ `right` ï¼Œå…¶ä¸­ `left <= right` ã€‚è¯·ä½ åè½¬ä»ä½ç½® `left` åˆ°ä½ç½® `right` çš„é“¾è¡¨èŠ‚ç‚¹ï¼Œè¿”å› **åè½¬åçš„é“¾è¡¨** ã€‚

**ç¤ºä¾‹ 1ï¼š**
![](https://raw.githubusercontent.com/52chen/imagebed2023/main/rev2ex2.jpg#id=bT9HK&originHeight=222&originWidth=542&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šhead = [1,2,3,4,5], left = 2, right = 4
è¾“å‡ºï¼š[1,4,3,2,5]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šhead = [5], left = 1, right = 1
è¾“å‡ºï¼š[5]
```

**æç¤ºï¼š**

- é“¾è¡¨ä¸­èŠ‚ç‚¹æ•°ç›®ä¸º `n`
- `1 <= n <= 500`
- `-500 <= Node.val <= 500`
- `1 <= left <= right <= n`

```java
class Solution {
    public ListNode reverseBetween(ListNode head, int left, int right) {
        ListNode dummy = new ListNode(-1,head);
        ListNode prev = dummy;
        ListNode curr = head;

        //ç›´æ¥æ‰¾åˆ°å¯¹åº”çš„ä½ç½®ï¼Œç„¶åå†åˆ‡æ–­å†åè½¬å†æ¥ä¸Š
        for (int i = 1; i < left; i++) {
            prev = curr;
            curr = curr.next;
        }
        for (int i = 0; i < right - left; i++) {
            ListNode tmp = curr.next;
            curr.next = tmp.next;//curræŒ‡å‘tmpåé¢
            tmp.next = prev.next;//æŠŠtmpæ¥é¾™ï¼Œæ¥åˆ°è¦é€†å‘çš„prevçš„åé¢
            prev.next = tmp;//è¿™ä¸‰éƒ¨=éƒ¨åˆ†ä¸èƒ½è°ƒæ¢é¡ºåºï¼Œå› ä¸ºcurrè¦ç”¨tmp
            //tmpè¦ç”¨prevï¼Œæœ€åæ‰å¯ä»¥åˆ‡æ¢prevçš„next
        }
        return dummy.next;
    }

}
```

### ä¸¤ä¸¤äº¤æ¢é“¾è¡¨
ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œä¸¤ä¸¤äº¤æ¢å…¶ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚ä½ å¿…é¡»åœ¨ä¸ä¿®æ”¹èŠ‚ç‚¹å†…éƒ¨çš„å€¼çš„æƒ…å†µä¸‹å®Œæˆæœ¬é¢˜ï¼ˆå³ï¼Œåªèƒ½è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ï¼‰ã€‚
**ç¤ºä¾‹ 1ï¼š**
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1389077/1714876109933-7fa8e0af-facf-433a-b974-57769ebd91ba.png#averageHue=%23f5f5f5&clientId=uae8ec878-cd5c-4&from=paste&id=u95f8df60&originHeight=222&originWidth=422&originalType=url&ratio=2&rotation=0&showTitle=false&size=36253&status=done&style=none&taskId=ufbe88286-0066-4003-a348-0e7f34819b2&title=)
```
è¾“å…¥ï¼šhead = [1,2,3,4]
è¾“å‡ºï¼š[2,1,4,3]
```
**ç¤ºä¾‹ 2ï¼š**
![](https://cdn.nlark.com/yuque/0/2024/jpeg/1389077/1714876219992-f689ea3c-7742-4ce9-958a-1cb17d403f3b.jpeg)
```java
public ListNode swapPairs(ListNode head) {
    ListNode dummy = new ListNode(-1,head);
    ListNode prev = dummy;
    ListNode cur = head;
    while (cur!=null&&cur.next!=null){
        ListNode tmp = cur.next.next;
        prev.next = cur.next;
        cur.next.next = cur;
        cur.next = tmp;
        cur = cur.next;
        prev = prev.next.next;
    }
    return dummy.next;
}
```
## æ ˆçš„ä½¿ç”¨



### é€†æ³¢å…°ç®—æ³•

### [å‰‘æŒ‡ Offer II 036. åç¼€è¡¨è¾¾å¼](https://leetcode.cn/problems/8Zf90G/)

æ ¹æ®[ é€†æ³¢å…°è¡¨ç¤ºæ³•](https://baike.baidu.com/item/%E9%80%86%E6%B3%A2%E5%85%B0%E5%BC%8F/128437)ï¼Œæ±‚è¯¥åç¼€è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœã€‚

æœ‰æ•ˆçš„ç®—ç¬¦åŒ…æ‹¬ `+`ã€`-`ã€`*`ã€`/` ã€‚æ¯ä¸ªè¿ç®—å¯¹è±¡å¯ä»¥æ˜¯æ•´æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªé€†æ³¢å…°è¡¨è¾¾å¼ã€‚

**è¯´æ˜ï¼š**

- æ•´æ•°é™¤æ³•åªä¿ç•™æ•´æ•°éƒ¨åˆ†ã€‚
- ç»™å®šé€†æ³¢å…°è¡¨è¾¾å¼æ€»æ˜¯æœ‰æ•ˆçš„ã€‚æ¢å¥è¯è¯´ï¼Œè¡¨è¾¾å¼æ€»ä¼šå¾—å‡ºæœ‰æ•ˆæ•°å€¼ä¸”ä¸å­˜åœ¨é™¤æ•°ä¸º 0 çš„æƒ…å†µã€‚

**ç¤ºä¾‹ 1ï¼š**

```shell
è¾“å…¥ï¼štokens = ["2","1","+","3","*"]
è¾“å‡ºï¼š9
è§£é‡Šï¼šè¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š((2 + 1) * 3) = 9
```

é€†æ³¢å…°è¡¨è¾¾å¼ï¼š

é€†æ³¢å…°è¡¨è¾¾å¼æ˜¯ä¸€ç§åç¼€è¡¨è¾¾å¼ï¼Œæ‰€è°“åç¼€å°±æ˜¯æŒ‡ç®—ç¬¦å†™åœ¨åé¢ã€‚

å¹³å¸¸ä½¿ç”¨çš„ç®—å¼åˆ™æ˜¯ä¸€ç§ä¸­ç¼€è¡¨è¾¾å¼ï¼Œå¦‚ ( 1 + 2 ) * ( 3 + 4 ) ã€‚
è¯¥ç®—å¼çš„é€†æ³¢å…°è¡¨è¾¾å¼å†™æ³•ä¸º ( ( 1 2 + ) ( 3 4 + ) * ) ã€‚
é€†æ³¢å…°è¡¨è¾¾å¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªä¼˜ç‚¹ï¼š

å»æ‰æ‹¬å·åè¡¨è¾¾å¼æ— æ­§ä¹‰ï¼Œä¸Šå¼å³ä¾¿å†™æˆ 1 2 + 3 4 + * ä¹Ÿå¯ä»¥ä¾æ®æ¬¡åºè®¡ç®—å‡ºæ­£ç¡®ç»“æœã€‚
é€‚åˆç”¨æ ˆæ“ä½œè¿ç®—ï¼šé‡åˆ°æ•°å­—åˆ™å…¥æ ˆï¼›é‡åˆ°ç®—ç¬¦åˆ™å–å‡ºæ ˆé¡¶ä¸¤ä¸ªæ•°å­—è¿›è¡Œè®¡ç®—ï¼Œå¹¶å°†ç»“æœå‹å…¥æ ˆä¸­ã€‚

```java
class Solution {
    public int evalRPN(String[] tokens) {
        Deque<Integer> stack = new LinkedList<>();
        for(int i = 0;i<tokens.length;i++){
            String token = tokens[i];
            if(isNumber(token)) {
                stack.push(Integer.parseInt(token));//å‹å…¥æ•°å­—åˆ°æ ˆå˜ç±³
            }else{
                int num2 = stack.pop();
                int num1 = stack.pop();//å¼¹å‡ºä¸¤ä¸ªå°±æ˜¯æ•°ç»„
                switch(token){
                    case "+":{
                        stack.push(num1+num2);
                        break;
                    }
                    case "-":{
                        stack.push(num1-num2);
                        break;
                    }
                    case "*":{
                        stack.push(num1*num2);
                        break;
                    }
                    case "/":{
                        stack.push(num1/num2);
                        break;
                    }
                }
            }
        }
        return stack.pop();
    }
    public boolean isNumber(String s){
        return !("+".equals(s)||"-".equals(s)||"*".equals(s)||"/".equals(s));
        // æ—¢ä¸æ˜¯åŠ å‡ä¹˜é™¤å°±æ˜¯å¯¹çš„æ•°å­—äº†
    }
}
```

> ä½ æƒ³å“ˆï¼Œè¿™ä¸ªæ•°å­—å¯èƒ½æ˜¯å‡ ç™¾ä¸Šåƒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½è¯´ç”¨åˆ¤æ–­0åˆ°9å°±è¡Œäº†


### [32. æœ€é•¿æœ‰æ•ˆæ‹¬å·-æ ˆå­˜å‚¨-ä»¥åŠåŠ¨æ€è§„åˆ’](https://leetcode.cn/problems/longest-valid-parentheses/)

ç»™ä½ ä¸€ä¸ªåªåŒ…å« `'('` å’Œ `')'` çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿æœ‰æ•ˆï¼ˆæ ¼å¼æ­£ç¡®ä¸”è¿ç»­ï¼‰æ‹¬å·å­ä¸²çš„é•¿åº¦ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "(()"
è¾“å‡ºï¼š2
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = ")()())"
è¾“å‡ºï¼š4
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()()"
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = ""
è¾“å‡ºï¼š0
```

**æç¤ºï¼š**

- `0 <= s.length <= 3 * 104`
- `s[i]` ä¸º `'('` æˆ– `')'`

éå†å­—ç¬¦ä¸²ï¼šæ¥ç€ï¼Œéå†å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦ï¼š

å¦‚æœé‡åˆ°å·¦æ‹¬å· '('ï¼Œå°†å®ƒçš„ç´¢å¼•å‹å…¥æ ˆä¸­ã€‚
å¦‚æœé‡åˆ°å³æ‹¬å· ')'ï¼š
é¦–å…ˆå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œè¡¨ç¤ºåŒ¹é…äº†ä¸€ä¸ªå·¦æ‹¬å·ã€‚
å¦‚æœæ ˆå˜ç©ºäº†ï¼Œå°†å½“å‰å³æ‹¬å·çš„ç´¢å¼•å‹å…¥æ ˆä¸­ã€‚
å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œè®¡ç®—å½“å‰æœ‰æ•ˆå­ä¸²çš„é•¿åº¦ï¼Œå³ å½“å‰ç´¢å¼• - æ ˆé¡¶å…ƒç´ ï¼Œå¹¶æ›´æ–°æœ€å¤§é•¿åº¦ã€‚

```java
import java.util.ArrayDeque;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    public int longestValidParentheses(String s) {
        if (s.length()<1) return 0;
        int ans  = 0;
        ArrayDeque<Integer> stack = new ArrayDeque<>();
        stack.push(-1);
        int count = 0;
        for (int i = 0; i < s.length(); i++) {
            if (s.charAt(i)=='('){
                stack.push(i);//å·¦è¾¹çš„å°±å­˜å…¥
            }
            else {
                stack.pop();
                //peekå­˜çš„æ˜¯æ²¡æœ‰é…å¯¹çš„æœ€å°çš„å…ƒç´ 
                if (!stack.isEmpty()) ans = Math.max(ans,i-stack.peek());
                else stack.push(i);
            }
        }
        return ans;
    }
}
```

åŠ¨æ€è§„åˆ’
```java
class Solution {  
    public int longestValidParentheses(String s) {  
        int ans  = 0;  
        int[] dp = new int[s.length()];  
        for (int i = 1; i < s.length(); i++) {  
            if (s.charAt(i)==')'){  
                if (s.charAt(i-1)=='('){  
                    if (i<2) dp[i] = 2;  
                    else dp[i] = dp[i-2]+2;  
                }else{  
                    // ***))  
                    if (dp[i-1]>0){  
                        int left = i-dp[i-1]-1;  
                        // **((***))  
                        if (left>=0&&s.charAt(left)=='('){  
                            dp[i] = dp[i-1]+2;//å½“å‰çš„å‚æ•°è‡³å°‘æ˜¯+2ï¼›  
                            if (left>1){  
                                //å°±æ˜¯leftä»ç¬¬3ä½å¼€å§‹ï¼Œå‰é¢è‡³å°‘è¿˜æœ‰ä¸€å¯¹çš„è¯  
                                dp[i]+=dp[left-1];  
                            }  
  
                        }  
                    }  
                }  
            }  
            ans = Math.max(ans,dp[i]);  
        }  
        return ans;  
    }  
}
```
## å“ˆå¸Œè¡¨é—®é¢˜
### [290. å•è¯è§„å¾‹](https://leetcode.cn/problems/word-pattern/)
ç»™å®šä¸€ç§è§„å¾‹ `pattern` å’Œä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œåˆ¤æ–­ `s` æ˜¯å¦éµå¾ªç›¸åŒçš„è§„å¾‹ã€‚
è¿™é‡Œçš„ **éµå¾ª** æŒ‡å®Œå…¨åŒ¹é…ï¼Œä¾‹å¦‚ï¼Œ `pattern` é‡Œçš„æ¯ä¸ªå­—æ¯å’Œå­—ç¬¦ä¸² `s` ä¸­çš„æ¯ä¸ªéç©ºå•è¯ä¹‹é—´å­˜åœ¨ç€åŒå‘è¿æ¥çš„å¯¹åº”è§„å¾‹ã€‚
**ç¤ºä¾‹1:**

```
è¾“å…¥: pattern = "abba", s = "dog cat cat dog"
è¾“å‡º: true
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥:pattern = "abba", s = "dog cat cat fish"
è¾“å‡º: false
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥: pattern = "aaaa", s = "dog cat cat dog"
è¾“å‡º: false
```

**æç¤º:**

- `1 <= pattern.length <= 300`
- `pattern` åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯
- `1 <= s.length <= 3000`
- `s` åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯å’Œ `' '`
- `s` **ä¸åŒ…å«** ä»»ä½•å‰å¯¼æˆ–å°¾éšå¯¹ç©ºæ ¼
- `s` ä¸­æ¯ä¸ªå•è¯éƒ½è¢« **å•ä¸ªç©ºæ ¼** åˆ†éš”

```java
class Solution {
    public boolean wordPattern(String pattern, String s) {
        //ä¸€ä¸ªå•è¯å°±æ˜¯ä¸€ä¸ªç»„åˆ
        String[] strings = s.split(" ");
        HashMap<Character, String> map = new HashMap<>();
        if (pattern.length()!=strings.length){
            return false;
        }
        for (int i = 0; i < pattern.length(); i++) {
            char key = pattern.charAt(i);
            if (map.containsKey(key)){
                //å¦‚æœé‡åˆ°è¿‡è¿™ä¸ªkey
                if (!map.get(key).equals(strings[i])){
                    return false;
                }
            }else {
                //æ²¡æœ‰é‡åˆ°è¿‡çš„è¯ï¼Œå°±è¦çœ‹è¿™ä¸ªsé‡Œé¢æ˜¯ä¸æ˜¯æœ‰åŒ¹é…çš„keyäº†
                if (map.containsValue(strings[i])){
                    return false;//å¦‚æœæœ‰åŒ¹é…çš„äº†ï¼Œé‚£å°±ç½ªè¿‡äº†
                }
                map.put(key,strings[i]);
            }
        }
        return true;
    }
}
```

### [36. æœ‰æ•ˆçš„æ•°ç‹¬](https://leetcode.cn/problems/valid-sudoku/)
è¯·ä½ åˆ¤æ–­ä¸€ä¸ª `9 x 9` çš„æ•°ç‹¬æ˜¯å¦æœ‰æ•ˆã€‚åªéœ€è¦ **æ ¹æ®ä»¥ä¸‹è§„åˆ™** ï¼ŒéªŒè¯å·²ç»å¡«å…¥çš„æ•°å­—æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚

1. æ•°å­— `1-9` åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
2. æ•°å­— `1-9` åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
3. æ•°å­— `1-9` åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„ `3x3` å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆè¯·å‚è€ƒç¤ºä¾‹å›¾ï¼‰

**æ³¨æ„ï¼š**

- ä¸€ä¸ªæœ‰æ•ˆçš„æ•°ç‹¬ï¼ˆéƒ¨åˆ†å·²è¢«å¡«å……ï¼‰ä¸ä¸€å®šæ˜¯å¯è§£çš„ã€‚
- åªéœ€è¦æ ¹æ®ä»¥ä¸Šè§„åˆ™ï¼ŒéªŒè¯å·²ç»å¡«å…¥çš„æ•°å­—æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚
- ç©ºç™½æ ¼ç”¨ `'.'` è¡¨ç¤ºã€‚

**ç¤ºä¾‹ 1ï¼š**
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1389077/1715474540413-40328d8a-1720-418f-bae9-b1c1333cbee5.png#averageHue=%23cecece&clientId=u3a18be3a-46a6-4&id=cB8k0&originHeight=250&originWidth=250&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14520&status=done&style=none&taskId=uae561bab-a1f7-49a7-943a-0597aec8b3e&title=)
```
è¾“å…¥ï¼šboard = 
[["5","3",".",".","7",".",".",".","."]
,["6",".",".","1","9","5",".",".","."]
,[".","9","8",".",".",".",".","6","."]
,["8",".",".",".","6",".",".",".","3"]
,["4",".",".","8",".","3",".",".","1"]
,["7",".",".",".","2",".",".",".","6"]
,[".","6",".",".",".",".","2","8","."]
,[".",".",".","4","1","9",".",".","5"]
,[".",".",".",".","8",".",".","7","9"]]
è¾“å‡ºï¼štrue
```

```java
class Solution {
    public boolean isValidSudoku(char[][] board) {
        //ç»™æ•°ç‹¬ç¼–å·
        Map<Integer, Set<Integer>> row = new HashMap<>(),col = new HashMap<>(),area = new HashMap<>();
        //åŠ å…¥ä¸‰ä¸ªHashMap
        for (int i = 0; i < 9; i++) {
            row.put(i,new HashSet<>());
            col.put(i,new HashSet<>());
            area.put(i,new HashSet<>());
        }
        for (int i = 0; i < 9; i++) {
            for (int j = 0; j < 9; j++) {
                //è¯»å–9*9çš„å„ä¸ª
                char c = board[i][j];
                if (c=='.') continue;
                int u = c-'0';
                int areaIdx=i/3 * 3+j/3;
                if (row.get(i).contains(u)||
                col.get(j).contains(u)||
                area.get(areaIdx).contains(u))
                    return false;
                row.get(i).add(u);//ç»™æ¯ä¸ªå…ƒç´ åŠ ä¸Š
                col.get(j).add(u);
                area.get(areaIdx).add(u);
            }
        }
        return true;
    }
}
```

### 1. ä¸¤æ•°ä¹‹å’Œ

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚

ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚

**ç¤ºä¾‹:**

ç»™å®š nums = [2, 7, 11, 15], target = 9

å› ä¸º nums[0] + nums[1] = 2 + 7 = 9

æ‰€ä»¥è¿”å› [0, 1]

> mapä¸­çš„å­˜å‚¨ç»“æ„ä¸º {keyï¼šæ•°æ®å…ƒç´ ï¼Œvalueï¼šæ•°ç»„å…ƒç´ å¯¹åº”çš„ä¸‹æ ‡}ã€‚åœ¨éå†æ•°ç»„çš„æ—¶å€™ï¼Œåªéœ€è¦å‘mapå»æŸ¥è¯¢æ˜¯å¦æœ‰å’Œç›®å‰éå†å…ƒç´ åŒ¹é…çš„æ•°å€¼ï¼Œå¦‚æœæœ‰ï¼Œå°±æ‰¾åˆ°çš„åŒ¹é…å¯¹ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±æŠŠç›®å‰éå†çš„å…ƒç´ æ”¾è¿›mapä¸­ï¼Œå› ä¸ºmapå­˜æ”¾çš„å°±æ˜¯æˆ‘ä»¬è®¿é—®è¿‡çš„å…ƒç´ ã€‚


```java
class Solution {
    public int[] twoSum(int[] nums, int target) {
        int[] ans = new int[2];
        if(nums==null||nums.length==0) return ans;
        HashMap<Integer, Integer> map = new HashMap<>();
        for (int i = 0; i < nums.length; i++) {
            int tmp =target-nums[i];
            if(map.containsKey(tmp)) {
                return new int[]{i,map.get(tmp)};
            }
            map.put(nums[i],i);
        }
        return ans;
    }
}
```

### å››æ•°ä¹‹å’ŒII

[åŠ›æ‰£é¢˜ç›®é“¾æ¥](https://leetcode.cn/problems/4sum-ii/)

ç»™å®šå››ä¸ªåŒ…å«æ•´æ•°çš„æ•°ç»„åˆ—è¡¨ A , B , C , D ,è®¡ç®—æœ‰å¤šå°‘ä¸ªå…ƒç»„ (i, j, k, l) ï¼Œä½¿å¾— A[i] + B[j] + C[k] + D[l] = 0ã€‚

ä¸ºäº†ä½¿é—®é¢˜ç®€å•åŒ–ï¼Œæ‰€æœ‰çš„ A, B, C, D å…·æœ‰ç›¸åŒçš„é•¿åº¦ Nï¼Œä¸” 0 â‰¤ N â‰¤ 500 ã€‚æ‰€æœ‰æ•´æ•°çš„èŒƒå›´åœ¨ -2^28 åˆ° 2^28 - 1 ä¹‹é—´ï¼Œæœ€ç»ˆç»“æœä¸ä¼šè¶…è¿‡ 2^31 - 1 ã€‚

**ä¾‹å¦‚:**

è¾“å…¥:

- A = [ 1, 2]
- B = [-2,-1]
- C = [-1, 2]
- D = [ 0, 2]

è¾“å‡º:

2

å®é™…å°±æ˜¯åŒ–ç®€ä¸ºä¸¤ä¸ªæ•°ä¹‹å’Œ

```java
class Solution {
    public int fourSumCount(int[] nums1, int[] nums2, int[] nums3, int[] nums4) {
        HashMap<Integer, Integer> map = new HashMap<>();
        int ans = 0;
        for (int i : nums1) {
            for (int j : nums2) {
                int tmp = i + j;
                map.put(tmp,map.getOrDefault(tmp,0)+1);
            }
        }
        for (int i : nums3) {
            for (int j : nums4) {
                int tmp = i + j;
                // ç›´æ¥å¯»æ‰¾ç›¸å¯¹çš„æ•°æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨å°±ç›´æ¥å¯ä»¥ç®—ä½œæ˜¯ä¸€ç»„æ•°ï¼Œå‡ ä¸ªvalueå°±æ˜¯å‡ ç»„
                if (map.containsKey(0-tmp))
                    ans+=map.get(0-tmp);
            }
        }
        return ans;
    }
}
```

### å“ˆå¸Œæ³•æ±‚è§£ä¸å«é‡å¤å­—ä¸²

```java
class Solution {
    public int lengthOfLongestSubstring(String s) {
        HashMap<Character, Integer> map = new HashMap<>();
        int ans = 0;
        int j = 0;
        // p w w e k
        // j   i
        //æ‰¾åˆ°wä¸Šä¸€æ¬¡çš„ä½ç½®è®¾ç½®ä¸ºæœ€é•¿å­ä¸²çš„èµ·å§‹ç‚¹ã€‚
        if (s.length()==1) return 1;
        for (int i = 0; i < s.length(); i++) {
            if (map.containsKey(s.charAt(i))){
                j = Math.max(j,map.get(s.charAt(i))+1);
            }
            map.put(s.charAt(i),i);
            ans = Math.max(ans,i-j+1);
        }
        return ans;
    }
}
```

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ `strs` ï¼Œå°† **å˜ä½è¯** ç»„åˆåœ¨ä¸€èµ·ã€‚ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç»“æœåˆ—è¡¨ã€‚

**æ³¨æ„ï¼š**è‹¥ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°éƒ½ç›¸åŒï¼Œåˆ™ç§°å®ƒä»¬äº’ä¸ºå˜ä½è¯ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: strs = ["eat", "tea", "tan", "ate", "nat", "bat"]
è¾“å‡º: [["bat"],["nat","tan"],["ate","eat","tea"]]
```

ç”±äºäº’ä¸ºå­—æ¯å¼‚ä½è¯çš„ä¸¤ä¸ªå­—ç¬¦ä¸²åŒ…å«çš„å­—æ¯ç›¸åŒï¼Œå› æ­¤å¯¹ä¸¤ä¸ªå­—ç¬¦ä¸²åˆ†åˆ«è¿›è¡Œæ’åºä¹‹åå¾—åˆ°çš„å­—ç¬¦ä¸²ä¸€å®šæ˜¯ç›¸åŒçš„ï¼Œæ•…å¯ä»¥å°†æ’åºä¹‹åçš„å­—ç¬¦ä¸²ä½œä¸ºå“ˆå¸Œè¡¨çš„é”®ã€‚

```java
class Solution {
    public List<List<String>> groupAnagrams(String[] strs) {
        HashMap<String, List<String>> map = new HashMap<>();
//        mapå­˜æ”¾æ’å¥½åºäº†çš„stringçš„æ•°ç»„
        for (String str : strs) {
            char[] chars = str.toCharArray();
            Arrays.sort(chars);
            String s = new String(chars);//å°†æ’å¥½åºçš„é‡æ–°è½¬åŒ–æˆstring
            List<String> path = map.getOrDefault(s, new ArrayList<>());//å–å‡ºæ¥så¯¹åº”çš„listï¼Œ
            path.add(str);
            map.put(s,path);//é‡æ–°å†æ”¾å›å»
        }
        return new ArrayList<List<String>>(map.values());
    }
}
```

### [249. ç§»ä½å­—ç¬¦ä¸²åˆ†ç»„](https://leetcode.cn/problems/group-shifted-strings/)

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯¹è¯¥å­—ç¬¦ä¸²å¯ä»¥è¿›è¡Œ â€œç§»ä½â€ çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯å°†å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—æ¯éƒ½å˜ä¸ºå…¶åœ¨å­—æ¯è¡¨ä¸­åç»­çš„å­—æ¯ï¼Œæ¯”å¦‚ï¼š`"abc" -> "bcd"`ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æŒç»­è¿›è¡Œ â€œç§»ä½â€ æ“ä½œï¼Œä»è€Œç”Ÿæˆå¦‚ä¸‹ç§»ä½åºåˆ—ï¼š

```
"abc" -> "bcd" -> ... -> "xyz"
```

ç»™å®šä¸€ä¸ªåŒ…å«ä»…å°å†™å­—æ¯å­—ç¬¦ä¸²çš„åˆ—è¡¨ï¼Œå°†è¯¥åˆ—è¡¨ä¸­æ‰€æœ‰æ»¡è¶³ â€œç§»ä½â€ æ“ä½œè§„å¾‹çš„ç»„åˆè¿›è¡Œåˆ†ç»„å¹¶è¿”å›ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼š["abc", "bcd", "acef", "xyz", "az", "ba", "a", "z"]
è¾“å‡ºï¼š
[
  ["abc","bcd","xyz"],
  ["az","ba"],
  ["acef"],
  ["a","z"]
]
è§£é‡Šï¼šå¯ä»¥è®¤ä¸ºå­—æ¯è¡¨é¦–å°¾ç›¸æ¥ï¼Œæ‰€ä»¥ 'z' çš„åç»­ä¸º 'a'ï¼Œæ‰€ä»¥ ["az","ba"] ä¹Ÿæ»¡è¶³ â€œç§»ä½â€ æ“ä½œè§„å¾‹ã€‚
az 0 25
bz
```

```java
class Solution {
    public List<List<String>> groupStrings(String[] strings) {
         if (strings==null || strings.length==0) return new ArrayList<>();
        HashMap<String, List<String>> map = new HashMap<>();//å­˜å‚¨
        for (String string : strings) {
            StringBuilder sb = new StringBuilder();
            for (char c : string.toCharArray()) {
                sb.append("#");
                int shift = (c-string.charAt(0)+26)%26;
                sb.append(shift);
            }
            String key = sb.toString();
            if (!map.containsKey(key)) map.put(key,new ArrayList<String>());
            map.get(key).add(string);
        }
        return new ArrayList<>(map.values());
    }
}
```

```java
HashMap<String,List<String>> map = new HashMap<>();
for(String s:strings){
    StringBuilder sb = new StringBuilder();
    for(char c:s.toCharArray()){
        sb.append("#");
        int shift = (c-s.charAt(0)+26)%26;
    }
}
```

> è®°å½•ç§»åŠ¨çš„ä½ç½®çš„æ—¶å€™ï¼Œå­˜å‚¨æœ‰ä¸€ä¸ªå¾ªç¯çš„ æ—¶å€™æˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ª26å†å¯¹26å–ä¸€ä¸ªæ¨¡
>  
> `int shift = (c-string.charAt(0)+26)%26;` å°±å¯ä»¥å®ç°å¾ªç¯äº†ï¼Œæ¯”å¦‚azå°±æ˜¯baçš„ç›¸ä¼¼çš„

## å•è°ƒæ ˆ

```
/**
 *  å•è°ƒæ ˆåˆ†ä¸ºå•è°ƒé€’å¢æ ˆå’Œå•è°ƒé€’å‡æ ˆï¼Œé€šè¿‡ä½¿ç”¨å•è°ƒæ ˆæˆ‘ä»¬å¯ä»¥è®¿é—®åˆ°æœ€è¿‘ä¸€ä¸ªæ¯”å®ƒå¤§ï¼ˆå°ï¼‰çš„å…ƒç´ ã€‚
 *     å•è°ƒé€’å¢æ ˆï¼šå•è°ƒé€’å¢æ ˆå°±æ˜¯ä»æ ˆåº•åˆ°æ ˆé¡¶æ•°æ®æ˜¯ä¾æ¬¡é€’å¢ï¼Œé€šå¸¸æ˜¯å¯»æ‰¾æŸæ–¹å‘ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„å…ƒç´ ã€‚
 *     å•è°ƒé€’å‡æ ˆï¼šå•è°ƒé€’å‡æ ˆå°±æ˜¯ä»æ ˆåº•åˆ°æ ˆé¡¶æ•°æ®æ˜¯ä¾æ¬¡é€’å‡ï¼Œé€šå¸¸æ˜¯å¯»æ‰¾æŸæ–¹å‘ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„å…ƒç´ ã€‚
 */
```

**é€šå¸¸æ˜¯ä¸€ç»´æ•°ç»„ï¼Œè¦å¯»æ‰¾ä»»ä¸€ä¸ªå…ƒç´ çš„å³è¾¹æˆ–è€…å·¦è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å¤§æˆ–è€…å°çš„å…ƒç´ çš„ä½ç½®ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±è¦æƒ³åˆ°å¯ä»¥ç”¨å•è°ƒæ ˆäº†**ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚

ä¾‹å¦‚æœ¬é¢˜å…¶å®å°±æ˜¯æ‰¾æ‰¾åˆ°ä¸€ä¸ªå…ƒç´ å³è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å¤§çš„å…ƒç´ ï¼Œæ­¤æ—¶å°±åº”è¯¥æƒ³åˆ°ç”¨å•è°ƒæ ˆäº†ã€‚

é‚£ä¹ˆå•è°ƒæ ˆçš„åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸ºä»€ä¹ˆæ—¶é—´å¤æ‚åº¦æ˜¯O(n)å°±å¯ä»¥æ‰¾åˆ°æ¯ä¸€ä¸ªå…ƒç´ çš„å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„å…ƒç´ ä½ç½®å‘¢ï¼Ÿ

**å•è°ƒæ ˆçš„æœ¬è´¨æ˜¯ç©ºé—´æ¢æ—¶é—´**ï¼Œå› ä¸ºåœ¨éå†çš„è¿‡ç¨‹ä¸­éœ€è¦ç”¨ä¸€ä¸ªæ ˆæ¥è®°å½•å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ é«˜çš„å…ƒç´ ï¼Œä¼˜ç‚¹æ˜¯æ•´ä¸ªæ•°ç»„åªéœ€è¦éå†ä¸€æ¬¡ã€‚

**æ›´ç›´ç™½æ¥è¯´ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªæ ˆæ¥è®°å½•æˆ‘ä»¬éå†è¿‡çš„å…ƒç´ **ï¼Œå› ä¸ºæˆ‘ä»¬éå†æ•°ç»„çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸çŸ¥é“ä¹‹å‰éƒ½éå†äº†å“ªäº›å…ƒç´ ï¼Œä»¥è‡³äºéå†ä¸€ä¸ªå…ƒç´ æ‰¾ä¸åˆ°æ˜¯ä¸æ˜¯ä¹‹å‰éå†è¿‡ä¸€ä¸ªæ›´å°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªå®¹å™¨ï¼ˆè¿™é‡Œç”¨å•è°ƒæ ˆï¼‰æ¥è®°å½•æˆ‘ä»¬éå†è¿‡çš„å…ƒç´ ã€‚

åœ¨ä½¿ç”¨å•è°ƒæ ˆçš„æ—¶å€™é¦–å…ˆè¦æ˜ç¡®å¦‚ä¸‹å‡ ç‚¹ï¼š

1. å•è°ƒæ ˆé‡Œå­˜æ”¾çš„å…ƒç´ æ˜¯ä»€ä¹ˆï¼Ÿ

å•è°ƒæ ˆé‡Œåªéœ€è¦å­˜æ”¾å…ƒç´ çš„ä¸‹æ ‡iå°±å¯ä»¥äº†ï¼Œ**å¦‚æœéœ€è¦ä½¿ç”¨å¯¹åº”çš„å…ƒç´ ï¼Œç›´æ¥T[i]å°±å¯ä»¥è·å–ã€‚**

1. å•è°ƒæ ˆé‡Œå…ƒç´ æ˜¯é€’å¢å‘¢ï¼Ÿ è¿˜æ˜¯é€’å‡å‘¢ï¼Ÿ

**é¡ºåºçš„æè¿°ä¸º ä»æ ˆå¤´åˆ°æ ˆåº•çš„é¡ºåº**ï¼Œä»å·¦åˆ°å³æˆ–è€…ä»å‰åˆ°åï¼Œ

è¿™é‡Œæˆ‘ä»¬è¦ä½¿ç”¨é€’å¢å¾ªåºï¼ˆå†å¼ºè°ƒä¸€ä¸‹æ˜¯æŒ‡ä»æ ˆå¤´åˆ°æ ˆåº•çš„é¡ºåºï¼‰ï¼Œå› ä¸ºåªæœ‰é€’å¢çš„æ—¶å€™ï¼Œæ ˆé‡Œè¦åŠ å…¥ä¸€ä¸ªå…ƒç´ içš„æ—¶å€™ï¼Œæ‰çŸ¥é“æ ˆé¡¶å…ƒç´ åœ¨æ•°ç»„ä¸­å³é¢ç¬¬ä¸€ä¸ªæ¯”æ ˆé¡¶å…ƒç´ å¤§çš„å…ƒç´ æ˜¯iã€‚

å³ï¼šå¦‚æœæ±‚ä¸€ä¸ªå…ƒç´ å³è¾¹ç¬¬ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œå•è°ƒæ ˆå°±æ˜¯é€’å¢çš„ï¼Œå¦‚æœæ±‚ä¸€ä¸ªå…ƒç´ å³è¾¹ç¬¬ä¸€ä¸ªæ›´å°å…ƒç´ ï¼Œå•è°ƒæ ˆå°±æ˜¯é€’å‡çš„ã€‚

æ–‡å­—æè¿°ç†è§£èµ·æ¥æœ‰ç‚¹è´¹åŠ²ï¼Œæ¥ä¸‹æ¥æˆ‘ç”»äº†ä¸€ç³»åˆ—çš„å›¾ï¼Œæ¥è®²è§£å•è°ƒæ ˆçš„å·¥ä½œè¿‡ç¨‹ï¼Œå¤§å®¶å†å»æ€è€ƒï¼Œæœ¬é¢˜ä¸ºä»€ä¹ˆæ˜¯é€’å¢æ ˆã€‚

ä½¿ç”¨å•è°ƒæ ˆä¸»è¦æœ‰ä¸‰ä¸ªåˆ¤æ–­æ¡ä»¶ã€‚

- å½“å‰éå†çš„å…ƒç´ T[i]å°äºæ ˆé¡¶å…ƒç´ T[st.top()]çš„æƒ…å†µ
- å½“å‰éå†çš„å…ƒç´ T[i]ç­‰äºæ ˆé¡¶å…ƒç´ T[st.top()]çš„æƒ…å†µ
- å½“å‰éå†çš„å…ƒç´ T[i]å¤§äºæ ˆé¡¶å…ƒç´ T[st.top()]çš„æƒ…å†µ

### LCR 083 å¤©æ°”ï¼š
ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ temperatures ï¼Œè¡¨ç¤ºæ¯å¤©çš„æ¸©åº¦ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ answer ï¼Œå…¶ä¸­ answer[i] æ˜¯æŒ‡å¯¹äºç¬¬ i å¤©ï¼Œä¸‹ä¸€ä¸ªæ›´é«˜æ¸©åº¦å‡ºç°åœ¨å‡ å¤©åã€‚å¦‚æœæ°”æ¸©åœ¨è¿™ä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨ 0 æ¥ä»£æ›¿ã€‚
```
ç¤ºä¾‹ 1:

è¾“å…¥: temperatures = [73,74,75,71,69,72,76,73]
è¾“å‡º: [1,1,4,2,1,1,0,0]
ç¤ºä¾‹ 2:

è¾“å…¥: temperatures = [30,40,50,60]
è¾“å‡º: [1,1,1,0]
ç¤ºä¾‹ 3:

è¾“å…¥: temperatures = [30,60,90]
è¾“å‡º: [1,1,0]
```
```java
class Solution {
    public int[] dailyTemperatures(int[] temperatures) {
        int[] ans = new int[temperatures.length];
        // å•è°ƒæ ˆï¼Œéå†é€’å¢å¾ªåºï¼ˆå†å¼ºè°ƒä¸€ä¸‹æ˜¯æŒ‡ä»æ ˆå¤´åˆ°æ ˆåº•çš„é¡ºåºï¼‰ï¼Œ
        // å› ä¸ºåªæœ‰é€’å¢çš„æ—¶å€™ï¼Œæ ˆé‡Œè¦åŠ å…¥ä¸€ä¸ªå…ƒç´ içš„æ—¶å€™ï¼Œ
        // æ‰çŸ¥é“æ ˆé¡¶å…ƒç´ åœ¨æ•°ç»„ä¸­å³é¢ç¬¬ä¸€ä¸ªæ¯”æ ˆé¡¶å…ƒç´ å¤§çš„å…ƒç´ æ˜¯iã€‚
        ArrayDeque<Integer> deque = new ArrayDeque<>();
        //ä¹Ÿå¯ä»¥ä¸ç”¨é¢å¤–è€ƒè™‘0ï¼›//2024/5/21
        deque.push(0);//å°±æ˜¯åœ¨é˜Ÿåˆ—çš„å·¦è¾¹ï¼Œå¤´éƒ¨ï¼ŒåŠ å…¥äº†åˆå§‹çš„0
        for (int i = 1; i < temperatures.length; i++) {
          //è¿™é‡Œæ˜¯åŠæ—¶å»æ‰æ— ç”¨å…ƒç´ ã€‚
            while (!deque.isEmpty() && temperatures[i]>temperatures[deque.peek()]){
                ans[deque.peek()] = i - deque.peek(); // æœ€å³è¾¹çš„
                deque.pop();
            }
            deque.push(i);
        }
        return ans;
    }
}
```
![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/68747470733a2f2f636f64652d7468696e6b696e672d313235333835353039332e66696c652e6d7971636c6f75642e636f6d2f706963732f32303231303231393132343730303536372e6a7067.jpeg#height=347&id=NJpVS&originHeight=676&originWidth=1098&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=&width=563)
å°±æ˜¯å½“å‰éå†çš„å…ƒç´ å¦‚æœæ¯”stack peekçš„å¤§ï¼Œè¯´æ˜stack peekç¬¬ä¸€ä¸ªæ¯”ä»–å¤§çš„æ‰¾åˆ°äº†ï¼Œå°±ä¸ç”¨ç®¡äº†ã€‚

### [å‰‘æŒ‡ Offer II 039. ç›´æ–¹å›¾æœ€å¤§çŸ©å½¢é¢ç§¯](https://leetcode.cn/problems/0ynMMM/)
ç»™å®šéè´Ÿæ•´æ•°æ•°ç»„ `heights` ï¼Œæ•°ç»„ä¸­çš„æ•°å­—ç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º `1` ã€‚æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚
**ç¤ºä¾‹ 1:**

![](https://assets.leetcode.com/uploads/2021/01/04/histogram.jpg#id=CsHDI&originHeight=242&originWidth=522&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šheights = [2,1,5,6,2,3]
è¾“å‡ºï¼š10
è§£é‡Šï¼šæœ€å¤§çš„çŸ©å½¢ä¸ºå›¾ä¸­çº¢è‰²åŒºåŸŸï¼Œé¢ç§¯ä¸º 10
```

```java
class Solution {
    public int largestRectangleArea(int[] heights) {
        int[] temp = new int[heights.length+2];//å­˜å‚¨å•è°ƒæ ˆ
        System.arraycopy(heights,0,temp,1,heights.length);
        ArrayDeque<Integer> stack = new ArrayDeque<>();
        int area = 0;
        for(int i= 0;i<temp.length;i++){
            while(!stack.isEmpty() && temp[i]<temp[stack.peek()]) {
                //å¦‚æœå½“å‰ä½ç½®çš„é«˜åº¦æ¯”stackçš„å°ï¼Œé‚£ä¹ˆå°±ä¼šæ¼æ°´
                int h = temp[stack.pop()];
                // æ¯”å¦‚ï¼š 2 1 
                // peek ä¸ºåºå· 0 çš„æ•°å­—ä¸º0.tempæ˜¯ 0 2 1 5 6 2 3 
                // æ‰€ä»¥stacké‡Œé¢ä¸€ç›´æœ‰å…ƒç´ 
                area = Math.max(area,h*(i-stack.peek()-1));
                // å½“stackä¸º 1 5 6 æ—¶
                // 2 å°äº 6 ï¼Œæ‰€ä»¥areaæ›´æ–°ä¸º 6
                // å¼¹å‡º 6 ï¼Œ 2å°äº5 æ‰€ä»¥ areaæ›´æ–°ä¸º 5 * ï¼ˆ2ï¼‰ ç­‰äº10
            }
            stack.push(i);
        }
        return area;
    }
}
```

### [å‰‘æŒ‡ Offer II 040. çŸ©é˜µä¸­æœ€å¤§çš„çŸ©å½¢](https://leetcode.cn/problems/PLYXKQ/)

éš¾åº¦å›°éš¾76æ”¶è—åˆ†äº«åˆ‡æ¢ä¸ºè‹±æ–‡æ¥æ”¶åŠ¨æ€åé¦ˆ

ç»™å®šä¸€ä¸ªç”± `0` å’Œ `1` ç»„æˆçš„çŸ©é˜µ `matrix` ï¼Œæ‰¾å‡ºåªåŒ…å« `1` çš„æœ€å¤§çŸ©å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚

**æ³¨æ„ï¼š**æ­¤é¢˜ `matrix` è¾“å…¥æ ¼å¼ä¸ºä¸€ç»´ `01` å­—ç¬¦ä¸²æ•°ç»„ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2020/09/14/maximal.jpg#id=GACmW&originHeight=322&originWidth=402&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šmatrix = ["10100","10111","11111","10010"]
è¾“å‡ºï¼š6
è§£é‡Šï¼šæœ€å¤§çŸ©å½¢å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚
```

çœ‹ä¸‹è¾¹çš„æ©™è‰²çš„éƒ¨åˆ†ï¼Œè¿™å®Œå…¨å°±æ˜¯ä¸Šä¸€é“é¢˜å‘€ï¼
![](https://pic.leetcode-cn.com/aabb1b287134cf950aa80526806ef4025e3920d57d237c0369ed34fae83e2690-image.png#id=s3u8A&originHeight=438&originWidth=437&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

ç®—æ³•æœ‰äº†ï¼Œå°±æ˜¯æ±‚å‡ºæ¯ä¸€å±‚çš„ heights[] ç„¶åä¼ ç»™ä¸Šä¸€é¢˜çš„å‡½æ•°å°±å¯ä»¥äº†ã€‚

```java
class Solution {
    public int maximalRectangle(String[] matrix) {
        if(matrix.length==0) return 0;
        int n = matrix[0].length();
        int[] heights = new int[n];
        int maxArea = 0;
        for(int i = 0;i<matrix.length;i++){
            for(int j = 0;j<n;j++){
                if(matrix[i].charAt(j) == '1'){
                    heights[j] +=1;
                }else{
                    heights[j] = 0;
                }
            }
            maxArea = Math.max(maxArea,largestRectangleArea(heights));
        }
        return maxArea;
    }

    public int largestRectangleArea(int[] heights) {
    int[] temp = new int[heights.length+2];//å­˜å‚¨å•è°ƒæ ˆ
    System.arraycopy(heights,0,temp,1,heights.length);
    ArrayDeque<Integer> stack = new ArrayDeque<>();
    int area = 0;
    for(int i= 0;i<temp.length;i++){
        while(!stack.isEmpty() && temp[i]<temp[stack.peek()]) {
            //å¦‚æœå½“å‰ä½ç½®çš„é«˜åº¦æ¯”stackçš„å°ï¼Œé‚£ä¹ˆå°±ä¼šæ¼æ°´
            int h = temp[stack.pop()];
            // æ¯”å¦‚ï¼š 2 1 
            // peek ä¸ºåºå· 0 çš„æ•°å­—ä¸º0.tempæ˜¯ 0 2 1 5 6 2 3 
            // æ‰€ä»¥stacké‡Œé¢ä¸€ç›´æœ‰å…ƒç´ 
            area = Math.max(area,h*(i-stack.peek()-1));
            // å½“stackä¸º 1 5 6 æ—¶
            // 2 å°äº 6 ï¼Œæ‰€ä»¥areaæ›´æ–°ä¸º 6
            // å¼¹å‡º 6 ï¼Œ 2å°äº5 æ‰€ä»¥ areaæ›´æ–°ä¸º 5 * ï¼ˆ2ï¼‰ ç­‰äº10
        }
        stack.push(i);
    }
    return area;
    }
}
```

## å•è°ƒé˜Ÿåˆ—

### 239.æ»‘åŠ¨çª—å£å±€éƒ¨æœ€å¤§å€¼

```
è¾“å…¥: nums = [1,3,-1,-3,5,3,6,7], å’Œ k = 3 
è¾“å‡º: [3,3,5,5,6,7] 
è§£é‡Š: 
æ»‘åŠ¨çª—å£çš„ä½ç½®                æœ€å¤§å€¼
---------------               -----
[1  3  -1] -3  5  3  6  7       3
 1 [3  -1  -3] 5  3  6  7       3
 1  3 [-1  -3  5] 3  6  7       5
 1  3  -1 [-3  5  3] 6  7       5
 1  3  -1  -3 [5  3  6] 7       6
 1  3  -1  -3  5 [3  6  7]      7
```

è¿™ä¸€é¢˜æ˜¯æ»‘åŠ¨çª—å£ï¼Œæ‰€ä»¥å•è°ƒæ ˆçš„æ„é€ éœ€è¦ç¡®å®šæ˜¯ä¸æ˜¯åœ¨kçš„èŒƒå›´å†…ï¼Œ

![239.æ»‘åŠ¨çª—å£æœ€å¤§å€¼-2](https://code-thinking.cdn.bcebos.com/gifs/239.æ»‘åŠ¨çª—å£æœ€å¤§å€¼-2.gif)

```java
class Solution {
    public int[] maxSlidingWindow(int[] nums, int k) {
        int[] ans = new int[nums.length - k + 1];
        LinkedList<Integer> queue = new LinkedList<>();
        //å‡†å¤‡å•è°ƒé˜Ÿåˆ—
        for (int right = 0; right < nums.length; right++) {
//            é˜Ÿé¦–å…ƒç´ å°±æ˜¯è¯¥çª—å£å†…çš„æœ€å¤§å€¼ã€‚
            while (!queue.isEmpty() && nums[right]>=nums[queue.peekLast()]) {
                queue.removeLast();
//            éç©ºçš„æ—¶å€™ï¼Œå¦‚æœä¿¡èµ–çš„æ¯”queueé¡¶éƒ¨çš„å…ƒç´ å¤§çš„è¯ï¼Œå°±ç§»èµ°è¿™ä¸ª
            }
            queue.addLast(right);
//            å¦‚æœé¦–éƒ¨åæ ‡å°äºleftï¼Œé‚£ä¹ˆå°±åˆ é™¤è¿™ä¸ª
            int left = right-k+1;//æ­¤æ—¶è¿™ä¸ªleftå®é™…ä¹Ÿå°±æ˜¯ä¾æ¬¡é€’å¢çš„
            if (queue.peekFirst()<left){
                queue.removeFirst();
            }
            if (left>=0) {
                ans[left] = nums[queue.peekFirst()];
//                è¿™ä¸ªfirstå¯¹åº”å°±æ˜¯å‰kä¸ªåŒºé—´å†…çš„å¤§çš„æ•°å€¼äº†
            }
        }
    }
}
```



> ```java
> // 2024/6/29 å®é™…å°±æ˜¯ä¸€ä¸ªå•è°ƒé˜Ÿåˆ—ï¼Œå…ˆæ›´æ–°å…¥é˜Ÿåˆ—ï¼Œç„¶åå‡ºé˜Ÿåˆ—ä¸ç¬¦åˆè¦æ±‚çš„ã€‚
> class Solution {
>     public int[] maxSlidingWindow(int[] nums, int k) {
>         LinkedList<Integer> list = new LinkedList<>();
>         int n = nums.length;
>         int[] ans = new int[n-k+1];
>         for (int i = 0; i < n; i++) {
>             //å…¥é˜Ÿåˆ—
>             while (!list.isEmpty()&&nums[list.getLast()]<=nums[i]){
>                 list.removeLast();//å•è°ƒé€’å‡çš„é˜Ÿåˆ—ï¼Œæ–°æ¥çš„å…ƒç´ å¿…é¡»æ¯”å½“å‰å…ƒç´ å°ï¼Œå¦‚æœæ˜¯å¤§äºç­‰äºé˜Ÿå°¾çš„è¯
>                 //ç›´æ¥ç§»èµ°é˜Ÿå°¾ã€‚
>             }
>             list.addLast(i);
>             //å‡ºé˜Ÿåˆ—
>             if (i-list.getFirst()>=k) list.removeFirst();
>             //è®°å½•
>             if (i>=k-1){
>                 ans[i-k+1] = nums[list.getFirst()];
>             }
>         }
>         return ans;
>     }
> }
> ```

## ä¼˜å…ˆçº§é˜Ÿåˆ—



### PriorityQueueçš„ä½œç”¨

**// é»˜è®¤æ˜¯ä»å°åˆ°è¾¾çš„é¡ºåºï¼Œå°é¡¶å †**

```java
PriorityQueue<int[]> queue = new PriorityQueue<>((a,b)->(a[1]-b[1]));
for (Integer key : map.keySet()) {
    if (queue.size()==k){
        if (map.get(key)>queue.peek()[1]){
            queue.poll();
            queue.offer(new int[]{key,map.get(key)});
        }
    }else {
        queue.offer(new int[]{key,map.get(key)});
    }
}
```

PriorityQueue çš„ä¸»è¦ä½œç”¨æ˜¯ç»´æŠ¤ä¸€ç»„æ•°æ®çš„æ’åºï¼Œä½¿å¾—å–å‡ºæ•°æ®æ—¶å¯ä»¥æŒ‰ç…§ä¸€å®šçš„ä¼˜å…ˆçº§é¡ºåºè¿›è¡Œï¼Œå½“æˆ‘ä»¬è°ƒç”¨ poll() æ–¹æ³•æ—¶ï¼Œå®ƒä¼šä»é˜Ÿåˆ—çš„é¡¶éƒ¨å¼¹å‡ºæœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ ã€‚å®ƒåœ¨å¾ˆå¤šåœºæ™¯ä¸‹éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œä¾‹å¦‚ä»»åŠ¡è°ƒåº¦ã€äº‹ä»¶å¤„ç†ç­‰åœºæ™¯ï¼Œä»¥åŠä¸€äº›ç®—æ³•ä¸­éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ’åºçš„åœºæ™¯ã€‚

åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒPriorityQueue ä¹Ÿç»å¸¸ç”¨äºå®ç° Dijkstra ç®—æ³•ã€Prim ç®—æ³•ã€Huffman ç¼–ç ç­‰ç®—æ³•ã€‚è¿™é‡Œç®€å•è¯´ä¸€ä¸‹è¿™å‡ ç§ç®—æ³•çš„ä½œç”¨ï¼Œç†è§£ä¸äº†ä¹Ÿæ²¡å…³ç³»å“ˆã€‚

Dijkstraç®—æ³•æ˜¯ä¸€ç§ç”¨äºè®¡ç®—å¸¦æƒå›¾ä¸­çš„æœ€çŸ­è·¯å¾„çš„ç®—æ³•ã€‚è¯¥ç®—æ³•é‡‡ç”¨è´ªå¿ƒçš„ç­–ç•¥ï¼Œåœ¨éå†å›¾çš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡é€‰å–å½“å‰åˆ°æºç‚¹è·ç¦»æœ€çŸ­çš„ä¸€ä¸ªé¡¶ç‚¹ï¼Œå¹¶ä»¥å®ƒä¸ºä¸­å¿ƒè¿›è¡Œæ‰©å±•ï¼Œæ›´æ–°å…¶ä»–é¡¶ç‚¹çš„è·ç¦»å€¼ã€‚ç»è¿‡å¤šæ¬¡æ‰©å±•ï¼Œå¯ä»¥å¾—åˆ°æºç‚¹åˆ°å…¶å®ƒæ‰€æœ‰é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚

Primç®—æ³•æ˜¯ä¸€ç§ç”¨äºæ±‚è§£æœ€å°ç”Ÿæˆæ ‘çš„ç®—æ³•ï¼Œå¯ä»¥åœ¨åŠ æƒè¿é€šå›¾ä¸­æ‰¾åˆ°ä¸€æ£µç”Ÿæˆæ ‘ï¼Œä½¿å¾—è¿™æ£µç”Ÿæˆæ ‘çš„æ‰€æœ‰è¾¹çš„æƒå€¼ä¹‹å’Œæœ€å°ã€‚è¯¥ç®—æ³•ä»ä»»æ„ä¸€ä¸ªé¡¶ç‚¹å¼€å§‹ï¼Œé€æ¸æ‰©å±•ç”Ÿæˆæ ‘çš„è§„æ¨¡ï¼Œæ¯æ¬¡é€‰æ‹©ä¸€ä¸ªè·ç¦»å·²ç”Ÿæˆæ ‘æœ€è¿‘çš„é¡¶ç‚¹åŠ å…¥åˆ°ç”Ÿæˆæ ‘ä¸­ã€‚

Huffmanç¼–ç æ˜¯ä¸€ç§åŸºäºéœå¤«æ›¼æ ‘çš„å‹ç¼©ç®—æ³•ï¼Œç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºäºŒè¿›åˆ¶ç¼–ç ä»¥è¿›è¡Œå‹ç¼©ã€‚è¯¥ç®—æ³•çš„ä¸»è¦æ€æƒ³æ˜¯é€šè¿‡å»ºç«‹éœå¤«æ›¼æ ‘ï¼Œå°†å‡ºç°é¢‘ç‡è¾ƒé«˜çš„å­—ç¬¦ç”¨è¾ƒçŸ­çš„ç¼–ç è¡¨ç¤ºï¼Œè€Œå‡ºç°é¢‘ç‡è¾ƒä½çš„å­—ç¬¦ç”¨è¾ƒé•¿çš„ç¼–ç è¡¨ç¤ºï¼Œä»è€Œå®ç°å¯¹å­—ç¬¦ä¸²çš„å‹ç¼©ã€‚åœ¨è§£å‹ç¼©æ—¶ï¼Œæ ¹æ®ç¼–ç é€æ­¥è§£æå‡ºåŸå­—ç¬¦ä¸²ã€‚

ç”±äº PriorityQueue çš„åº•å±‚æ˜¯åŸºäºå †å®ç°çš„ï¼Œå› æ­¤åœ¨æ•°æ®é‡æ¯”è¾ƒå¤§æ—¶ï¼Œä½¿ç”¨ PriorityQueue å¯ä»¥è·å¾—è¾ƒå¥½çš„æ—¶é—´å¤æ‚åº¦ã€‚

è¿™é‡Œç‰µæ¶‰åˆ°äº†å¤§å°å…³ç³»ï¼Œ**å…ƒç´ å¤§å°çš„è¯„åˆ¤å¯ä»¥é€šè¿‡å…ƒç´ æœ¬èº«çš„è‡ªç„¶é¡ºåºï¼ˆ*natural ordering*ï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ„é€ æ—¶ä¼ å…¥çš„æ¯”è¾ƒå™¨**ï¼ˆ_Comparator_ï¼Œæˆ–è€…å…ƒç´ è‡ªèº«å®ç° Comparable æ¥å£ï¼‰æ¥å†³å®šã€‚

åœ¨ PriorityQueue ä¸­ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œè¿™ä¸ªä¼˜å…ˆçº§å†³å®šäº†å…ƒç´ åœ¨é˜Ÿåˆ—ä¸­çš„ä½ç½®ã€‚é˜Ÿåˆ—å†…éƒ¨é€šè¿‡å°é¡¶å †ï¼ˆä¹Ÿå¯ä»¥æ˜¯å¤§é¡¶å †ï¼‰çš„æ–¹å¼æ¥ç»´æŠ¤å…ƒç´ çš„ä¼˜å…ˆçº§å…³ç³»ã€‚å…·ä½“æ¥è¯´ï¼Œå°é¡¶å †æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ï¼Œä»»ä½•ä¸€ä¸ªéå¶å­èŠ‚ç‚¹çš„æƒå€¼ï¼Œéƒ½ä¸å¤§äºå…¶å·¦å³å­èŠ‚ç‚¹çš„æƒå€¼ï¼Œè¿™æ ·ä¿è¯äº†é˜Ÿåˆ—çš„é¡¶éƒ¨å…ƒç´ ï¼ˆå †é¡¶ï¼‰ä¸€å®šæ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚



ä¸æŒ‡å®š Comparator æ—¶é»˜è®¤ä¸ºæœ€å°å †, é€šè¿‡ä¼ å…¥è‡ªå®šä¹‰çš„ Comparator å‡½æ•°å¯ä»¥å®ç°å¤§é¡¶å †ã€‚

```java
PriorityQueue<Integer> minHeap = new PriorityQueue<Integer>(); //å°é¡¶å †ï¼Œé»˜è®¤å®¹é‡ä¸º11
PriorityQueue<Integer> maxHeap = new PriorityQueue<Integer>(new Comparator<Integer>(){ //å¤§é¡¶å †ï¼Œå®¹é‡11
    @Override
    public int compare(Integer i1,Integer i2){
        return i2-i1;
    }
});
PriorityQueue<String> priorityQueue = new PriorityQueue<>(Comparator.reverseOrder());
```

è¿™æ˜¯ä¸€é¢—åŒ…å«æ•´æ•° 1, 2, 3, 4, 5, 6, 7 çš„**å°é¡¶å †ï¼š**

```latex
      1
     / \
    2   3
   / \ / \
  4  5 6  7
```

è¿™æ˜¯ä¸€é¢—å¤§é¡¶å †ã€‚

```
            8
          /   \
         7     5
        / \   / \
       6   4 2   1
```

```java
//è‡ªå®šä¹‰æ¯”è¾ƒå™¨ï¼Œé™åºæ’åˆ—
	static Comparator<Integer> cmp = new Comparator<Integer>() {
	      public int compare(Integer e1, Integer e2) {
	        return e2 - e1;  //é™åº
	      }
	    };
	public static void main(String[] args) {
	        //ä¸ç”¨æ¯”è¾ƒå™¨ï¼Œé»˜è®¤å‡åºæ’åˆ—
	        Queue<Integer> q = new PriorityQueue<>();
	        q.add(8);
	        q.add(5);
	        q.add(13);
	        q.add(2);
	        System.out.println("**,********ä¸ä½¿ç”¨æ¯”è¾ƒå™¨********************");
	        while(!q.isEmpty())
	        {
	            System.out.print(q.poll()+" ");
	        }
	        System.out.println();
	        System.out.println("**********ä½¿ç”¨æ¯”è¾ƒå™¨********************");
	        //ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå™¨ï¼Œé™åºæ’åˆ—
	        Queue qq = new PriorityQueue(cmp);
	        qq.add(8);
	        qq.add(5);
	        qq.add(13);
	        qq.add(2);
	        while(!qq.isEmpty())
	        {
	            System.out.print(qq.poll()+" ");
	        }
	}

**********ä¸ä½¿ç”¨æ¯”è¾ƒå™¨********************
2 5 8 13 
**********ä½¿ç”¨æ¯”è¾ƒå™¨********************
13 8 5 2
```

PriorityQueue çš„ iteratorï¼ˆï¼‰ä¸ä¿è¯ä»¥ä»»ä½•ç‰¹å®šé¡ºåºéå†é˜Ÿåˆ—å…ƒç´ ã€‚è‹¥æƒ³æŒ‰ç‰¹å®šé¡ºåºéå†ï¼Œå…ˆå°†é˜Ÿåˆ—è½¬æˆæ•°ç»„ï¼Œç„¶åæ’åºéå†

```java
Queue<Integer> q = new PriorityQueue<>(cmp);
        int[] nums= {2,5,3,4,1,6};
        for(int i:nums)
        {
            q.add(i);
        }
        Object[] nn=q.toArray();
        Arrays.sort(nn);
        for(int i=nn.length-1;i>=0;i--)
            System.out.print((int)nn[i]+" ");
        /**
         * è¾“å‡ºç»“æœ
         * 6 5 4 3 2 1 
         */
```

### [215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ](https://leetcode.cn/problems/kth-largest-element-in-an-array/)

ç»™å®šæ•´æ•°æ•°ç»„ `nums` å’Œæ•´æ•° `k`ï¼Œè¯·è¿”å›æ•°ç»„ä¸­ç¬¬ `**k**` ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚

è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ `k` ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ `k` ä¸ªä¸åŒçš„å…ƒç´ ã€‚

ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: [3,2,1,5,6,4], k = 2
è¾“å‡º: 5
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: [3,2,3,1,2,4,5,5,6], k = 4
è¾“å‡º: 4
```

**æç¤ºï¼š**

- `1 <= k <= nums.length <= 105`
- `-104 <= nums[i] <= 104`

```java
class Solution {
    public int findKthLargest(int[] nums, int k) {
        //ä½¿ç”¨å †çš„æ–¹æ³•
        if (nums==null||nums.length<k ||k==0) return Integer.MIN_VALUE;
        PriorityQueue<Integer> maxQ = new PriorityQueue<>(Collections.reverseOrder());
        for (int num : nums) {
            maxQ.add(num);
        }
        while (k-->1){
            maxQ.poll();
        }
        return maxQ.peek();
    }
}
```

```java
class Solution {
    public int findKthLargest(int[] nums, int k) {
        //ä½¿ç”¨å †çš„æ–¹æ³•
        if (nums==null||nums.length<k ||k==0) return Integer.MIN_VALUE;
        PriorityQueue<Integer> maxQueue = new PriorityQueue<>(
            new Comparator<Integer>(){
                @Override
                public int compare(Integer o1,Integer o2){
                    return o2-o1;
                }
            }
        );
        for(int u: nums){
            maxQueue.add(u);
        }
        for(int i = k; i>1;i--){
            maxQueue.poll();
        }
        return maxQueue.peek();

    }
}
```



```java
class Solution {
    public int findKthLargest(int[] nums, int k) {
        PriorityQueue<Integer> queue = new PriorityQueue<>();
        for (int num : nums) {
            if (queue.size()==k){
                if (num>queue.peek()){
                    queue.poll();
                    queue.offer(num);
                }
            }else {
                queue.offer(num);
            }
        }
        return queue.peek();
    }
}
```







### [å‰‘æŒ‡ Offer II 059. æ•°æ®æµçš„ç¬¬ K å¤§æ•°å€¼](https://leetcode.cn/problems/jBjn9C/)

è®¾è®¡ä¸€ä¸ªæ‰¾åˆ°æ•°æ®æµä¸­ç¬¬ `k` å¤§å…ƒç´ çš„ç±»ï¼ˆclassï¼‰ã€‚æ³¨æ„æ˜¯æ’åºåçš„ç¬¬ `k` å¤§å…ƒç´ ï¼Œä¸æ˜¯ç¬¬ `k` ä¸ªä¸åŒçš„å…ƒç´ ã€‚

è¯·å®ç° `KthLargest` ç±»ï¼š

- `KthLargest(int k, int[] nums)` ä½¿ç”¨æ•´æ•° `k` å’Œæ•´æ•°æµ `nums` åˆå§‹åŒ–å¯¹è±¡ã€‚
- `int add(int val)` å°† `val` æ’å…¥æ•°æ®æµ `nums` åï¼Œè¿”å›å½“å‰æ•°æ®æµä¸­ç¬¬ `k` å¤§çš„å…ƒç´ ã€‚

ç¤ºä¾‹ï¼š

```shell
è¾“å…¥ï¼š
["KthLargest", "add", "add", "add", "add", "add"]
[[3, [4, 5, 8, 2]], [3], [5], [10], [9], [4]]
è¾“å‡ºï¼š
[null, 4, 5, 5, 8, 8]

è§£é‡Šï¼š
KthLargest kthLargest = new KthLargest(3, [4, 5, 8, 2]);
kthLargest.add(3);   // return 4
kthLargest.add(5);   // return 5
kthLargest.add(10);  // return 5
kthLargest.add(9);   // return 8
kthLargest.add(4);   // return 8
```

å…¶å®å°±æ˜¯ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œåšä¸€ä¸ªå°ä¸é˜Ÿ

```java
class KthLargest {
    PriorityQueue<Integer> queue;
    int k;
    public KthLargest(int k, int[] nums) {
        queue = new PriorityQueue<>();
        // é»˜è®¤æ˜¯ä»å°åˆ°è¾¾çš„é¡ºåºï¼Œå°é¡¶å †
        for(int num: nums){
            queue.add(num);
        }
        this.k = k;
    }
    
    public int add(int val) {
        queue.offer(val);
        while(queue.size()>k){
            queue.poll();
        }
        return queue.peek();
    }
}
```

### [å‰‘æŒ‡ Offer II 060. å‡ºç°é¢‘ç‡æœ€é«˜çš„ k ä¸ªæ•°å­—](https://leetcode.cn/problems/g5c51o/) LCR 060.

> å…³é”®ï¼š ä¼˜å…ˆçº§å­˜å‚¨äº†é¢‘ç‡å’Œæ•°å­—ï¼Œç›´æ¥å®šä¸€ä¸ªPriorityQueue<int[ ] >


ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·è¿”å›å…¶ä¸­å‡ºç°é¢‘ç‡å‰ `k` é«˜çš„å…ƒç´ ã€‚å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [1,1,1,2,2,3], k = 2
è¾“å‡º: [1,2]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [1], k = 1
è¾“å‡º: [1]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 105`
- `k` çš„å–å€¼èŒƒå›´æ˜¯ `[1, æ•°ç»„ä¸­ä¸ç›¸åŒçš„å…ƒç´ çš„ä¸ªæ•°]`
- é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆå”¯ä¸€ï¼Œæ¢å¥è¯è¯´ï¼Œæ•°ç»„ä¸­å‰ `k` ä¸ªé«˜é¢‘å…ƒç´ çš„é›†åˆæ˜¯å”¯ä¸€çš„

è¸©å‘è®°å½•ï¼šè¿™é‡Œä¸èƒ½ç›´æ¥å°±æ˜¯

```java
 PriorityQueue<Integer> queue = new PriorityQueue<>();
        for (Integer key : map.keySet()) {
            if (queue.size()==k){
                if (map.get(queue.peek())<map.get(key)){
                    queue.poll();
                    queue.offer(key);
                }
            }else {
                queue.offer(key);
            }
        }
```

è¿™æ ·æ’åºçš„ç®—æ³•æ˜¯æ ¹æ®keyçš„å¤§å°ï¼Œè€Œä¸æ˜¯æ ¹æ®keyçš„é¢‘ç‡æ’åºçš„ã€‚

ç²¾ç®€ç‰ˆï¼š

```java
public int[] topKFrequent(int[] nums, int k) {
    HashMap<Integer, Integer> map = new HashMap<>();
    for (int num : nums) {
        map.merge(num,1,Integer::sum);
    }
    PriorityQueue<int[]> queue = new PriorityQueue<>((a,b)->(a[1]-b[1]));
    for (Integer key : map.keySet()) {
        if (queue.size()==k){
            if (map.get(key)>queue.peek()[1]){
                queue.poll();
                queue.offer(new int[]{key,map.get(key)});
            }
        }else {
            queue.offer(new int[]{key,map.get(key)});
        }
    }
    int[] ans = new int[k];
    for (int i = 0; i < k; i++) {
        ans[i] = queue.poll()[0];
    }
    return ans;
}
```



```java
class Solution {
    public int[] topKFrequent(int[] nums, int k) {
        HashMap<Integer, Integer> map = new HashMap<>();
        for (int num : nums) {
            map.merge(num,1,Integer::sum);
        }
        // int[] çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä»£è¡¨æ•°ç»„çš„å€¼ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä»£è¡¨äº†è¯¥å€¼å‡ºç°çš„æ¬¡æ•°
        PriorityQueue<int[]> queue= new PriorityQueue<>(new Comparator<>(){
            public int compare(int[] a,int[] b){
                return a[1]-b[1];
            }
        });
      	//PriorityQueue<int[]> queue = new PriorityQueue<>((a,b)->(a[1]-b[1]));
        for(Map.Entry<Integer,Integer> entry:map.entrySet()){
            // éå†æ¯ä¸€ä¸ªmapçš„å…ƒç´ 
            int num = entry.getKey(), count = entry.getValue();
            
            if(queue.size()==k){
                if(queue.peek()[1]<count){
                    queue.poll();
                    queue.offer(new int[]{num,count});
                }
            }else{
                queue.offer(new int[]{num,count});
            }
         
            /*ä¹Ÿå¯ä»¥å…¨éƒ¨éƒ½åŠ è¿›å»ï¼Œä¹‹åå†åˆ¤æ–­é˜Ÿåˆ—å¤§å°ï¼Œå¤§äº†çš„éƒ¨åˆ†å°±pollå‡ºå»ã€‚
            for (Map.Entry<Integer, Integer> entry : map.entrySet()) {
                Integer num = entry.getKey();
                Integer value = entry.getValue();
                queue.offer(new int[]{num,value});
            }
            while (queue.size()>k){
                queue.poll();
            }
            */
            
        }
        int[] res = new int[k];
        for(int i = 0;i<k;i++){
            res[i] = queue.poll()[0];
        }
        return res;
    }
}
```

### [373. æŸ¥æ‰¾å’Œæœ€å°çš„ K å¯¹æ•°å­—](https://leetcode.cn/problems/find-k-pairs-with-smallest-sums/)

ç»™å®šä¸¤ä¸ªä»¥ **å‡åºæ’åˆ—** çš„æ•´æ•°æ•°ç»„ `nums1` å’Œ `nums2` , ä»¥åŠä¸€ä¸ªæ•´æ•° `k` ã€‚

å®šä¹‰ä¸€å¯¹å€¼ `(u,v)`ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æ¥è‡ª `nums1`ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ¥è‡ª `nums2` ã€‚

è¯·æ‰¾åˆ°å’Œæœ€å°çš„ `k` ä¸ªæ•°å¯¹ `(u1,v1)`, `(u2,v2)` ... Â `(uk,vk)` ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums1 = [1,7,11], nums2 = [2,4,6], k = 3
è¾“å‡º: [1,2],[1,4],[1,6]
è§£é‡Š: è¿”å›åºåˆ—ä¸­çš„å‰ 3 å¯¹æ•°ï¼š
     [1,2],[1,4],[1,6],[7,2],[7,4],[11,2],[7,6],[11,4],[11,6]
```

ç”±äºæ•°ç»„æ˜¯æœ‰åºçš„ï¼Œ(a[0],b[0]) æ˜¯å’Œæœ€å°çš„æ•°å¯¹ï¼Œè®¡å…¥ç­”æ¡ˆã€‚å¹¶ä¸”æ¬¡å°çš„åªèƒ½æ˜¯ (a[0],b[1]) æˆ– (a[1],b[0])ï¼Œå› ä¸ºå…¶å®ƒæ²¡æœ‰è®¡å…¥ç­”æ¡ˆçš„æ•°å¯¹å’Œä¸ä¼šæ¯”è¿™ä¸¤ä¸ªæ›´å°ã€‚

æ€è·¯ï¼š

åœ¨ (*i*,*j*) å‡ºå †æ—¶ï¼Œåªéœ€å°† (*i*,*j*+1) å…¥å †ï¼Œæ— éœ€å°† (*i*+1,*j*) å…¥å †ã€‚

åˆå§‹ä¸ä»…è¦æŠŠ (0,0) å…¥å †ï¼Œ(1,0),(2,0),â‹¯ è¿™äº›éƒ½è¦å…¥å †ï¼Œè¿™æ ·åé¢å°±èƒ½å…¥ï¼ˆ0ï¼Œ1ï¼‰ï¼Œï¼ˆ0ï¼Œ2ï¼‰ï¼Œä¹Ÿå¯ä»¥å…¥ï¼ˆ1ï¼Œ1ï¼‰ï¼ˆ2ï¼Œ1ï¼‰ç­‰ã€‚

**å¥½ç†è§£çš„ç‰ˆæœ¬ï¼š**

```java
class Solution {
    public List<List<Integer>> kSmallestPairs(int[] nums1, int[] nums2, int k) {
        PriorityQueue<int[]> queue = new PriorityQueue<>((a,b)->(a[0]-b[0]));
        // queueå­˜å‚¨ï¼š nums1[a]+nums2[b],a,b;a,bè¡¨ç¤ºçš„æ˜¯ç´¢å¼•ï¼Œä¸æ˜¯ç›´æ¥çš„å€¼
        for (int i = 0; i < Math.min(k, nums1.length); i++) {
            queue.add(new int[]{nums1[i]+nums2[0],i,0});
        }
        List<List<Integer>> list = new ArrayList<>(k);
        while (k-->0&&!queue.isEmpty()){
            int[] poll = queue.poll();
            int i = poll[1],j = poll[2];
          	//å¿«é€Ÿè·å¾—List
            list.add(List.of(nums1[i],nums2[j]));
          	//è¿™é‡Œæ˜¯å› ä¸ºåœ¨ (*i*,*j*) å‡ºå †æ—¶ï¼Œåªéœ€å°† (*i*,*j*+1) å…¥å †ï¼Œæ— éœ€å°† (*i*+1,*j*) å…¥å †ã€‚
            if (j+1<nums2.length){
                queue.add(new int[]{nums1[i]+nums2[j+1],i,j+1});
            }
        }
        return list;
    }
}
```



```java
class Solution {
    public List<List<Integer>> kSmallestPairs(int[] nums1, int[] nums2, int k) {
        // PriorityQueue<int[]> heap = new PriorityQueue<>((a,b)->nums1[a[0]] + nums2[a[1]] - nums1[b[0]] - nums2[b[1]]);
        PriorityQueue<int[]> heap = new PriorityQueue<>((a, b) -> nums1[a[0]] + nums2[a[1]] - (nums1[b[0]] + nums2[b[1]]));
        for(int i = 0;i<Math.min(k,nums1.length);i++){
            heap.offer(new int[]{i,0});
            //nums1çš„ç´¢å¼•éƒ½æ”¾åˆ°heapé‡Œé¢ï¼Œ
        }
        List<List<Integer>> ans = new ArrayList<>();
        // æœ€å¤šå¼¹å‡º k æ¬¡
        while(k-- >0 && !heap.isEmpty()){
            //å…¶å®å°±æ˜¯å§heapæ•´ç†ä¸€ä¸‹
            //å§æ§½ï¼Œå°±æ˜¯è¯´å¼¹å‡ºkæ¬¡heapå †çš„å †é¡¶ï¼Œè‚¯å®šå°±æ˜¯æœ€å°å€¼
            int[] pos = heap.poll();
            ans.add(Arrays.asList(nums1[pos[0]],nums2[pos[1]]));
            // å°† index2 åŠ  1 ä¹‹åç»§ç»­å…¥é˜Ÿ
            if(++pos[1]<nums2.length){
                heap.offer(pos);
            }
        }
        return ans;
    }
}
```

## TreeSet

Javaä¸­ TreeMapå’ŒTreeSetç®—æ˜¯javaé›†åˆç±»é‡Œé¢æ¯”è¾ƒæœ‰éš¾åº¦çš„æ•°æ®ç»“æ„ã€‚å’Œæ™®é€šçš„HashMapä¸ä¸€æ ·ï¼Œæ™®é€šçš„HashMapå…ƒç´ å­˜å–çš„æ—¶é—´å¤æ‚åº¦ä¸€èˆ¬æ˜¯O(1)çš„èŒƒå›´ï¼Œè€ŒTreeMapå†…éƒ¨å¯¹å…ƒç´ çš„æ“ä½œå¤æ‚åº¦ä¸ºO(logn)ã€‚

è™½ç„¶åœ¨å…ƒç´ çš„å­˜å–æ–¹é¢TreeMapå¹¶ä¸å ä¼˜ï¼Œä½†æ˜¯å®ƒå†…éƒ¨çš„å…ƒç´ éƒ½æ˜¯æ’åºçš„ï¼Œå½“éœ€è¦æŸ¥æ‰¾æŸäº›å…ƒç´ ä»¥åŠé¡ºåºè¾“å‡ºå…ƒç´ çš„æ—¶å€™å®ƒèƒ½å¤Ÿå¸¦æ¥æ¯”è¾ƒç†æƒ³çš„ç»“æœã€‚å¯ä»¥è¯´ï¼Œ**TreeMapæ˜¯ä¸€ä¸ªå†…éƒ¨å…ƒç´ æ’åºç‰ˆçš„HashMapã€‚**åŒæ ·ï¼ŒTreeSetæ˜¯ä¸€ä¸ªå°è£…äº†ä¸€ä¸ªHashSetçš„æˆå‘˜å˜é‡æ¥å®ç°çš„ï¼Œåº•å±‚è¿ç”¨äº†çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„ã€‚

### TreeSet Vs. HashSet

TreeSetå’ŒHashSetéƒ½å®ç°äº†Setæ¥å£ã€‚ç„¶è€Œï¼Œå®ƒä»¬ä¹‹é—´å­˜åœ¨ç€ä¸€äº›åŒºåˆ«ã€‚

- ä¸HashSetä¸åŒï¼ŒTreeSetä¸­çš„å…ƒç´ æ˜¯ä»¥æŸç§é¡ºåºå­˜å‚¨çš„ã€‚è¿™æ˜¯å› ä¸ºTreeSetè¿˜å®ç°äº†SortedSetæ¥å£ã€‚
- TreeSetæä¾›äº†ä¸€äº›æ˜“äºå¯¼èˆªçš„æ–¹æ³•ã€‚ ä¾‹å¦‚first()ï¼Œlast()ï¼ŒheadSet()ï¼ŒtailSet()ç­‰ã€‚è¿™æ˜¯å› ä¸ºTreeSetè¿˜å®ç°äº†NavigableSetæ¥å£ã€‚
- å¯¹äºæ·»åŠ ã€åˆ é™¤ã€åŒ…å«å’Œå¤§å°ç­‰åŸºæœ¬æ“ä½œï¼ŒHashSetæ¯”TreeSetæ›´å¿«ã€‚

### ä½¿ç”¨

ä¸ºäº†åˆ›å»ºæ ‘é›†ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆå¯¼å…¥java.util.TreeSetåŒ…ã€‚

å¯¼å…¥åŒ…ä¹‹åï¼Œä¸‹é¢æ˜¯å¦‚ä½•åœ¨Javaä¸­åˆ›å»ºTreeSetã€‚

```
TreeSet<Integer> numbers = new TreeSet<>();
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å‚æ•°çš„TreeSetã€‚åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼ŒTreeSetä¸­çš„å…ƒç´ è‡ªç„¶æ’åº(å‡åº)ã€‚

ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Comparatoræ¥å£è‡ªå®šä¹‰å…ƒç´ çš„æ’åºã€‚

### [å‰‘æŒ‡ Offer II 057. å€¼å’Œä¸‹æ ‡ä¹‹å·®éƒ½åœ¨ç»™å®šçš„èŒƒå›´å†…](https://leetcode.cn/problems/7WqeDu/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸¤ä¸ªæ•´æ•° `k` å’Œ `t` ã€‚è¯·ä½ åˆ¤æ–­æ˜¯å¦å­˜åœ¨ **ä¸¤ä¸ªä¸åŒä¸‹æ ‡** `i` å’Œ `j`ï¼Œä½¿å¾— `abs(nums[i] - nums[j]) <= t` ï¼ŒåŒæ—¶åˆæ»¡è¶³ `abs(i - j) <= k` ã€‚

å¦‚æœå­˜åœ¨åˆ™è¿”å› `true`ï¼Œä¸å­˜åœ¨è¿”å› `false`ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3,1], k = 3, t = 0
è¾“å‡ºï¼štrue
```

```java
class Solution {

    public boolean containsNearbyAlmostDuplicate(int[] nums, int k, int t) {
        // æ»‘åŠ¨çª—å£ï¼Œçª—å£å¤§å°ä¸ºkï¼Œçª—å£å†…ä¸¤ä¸ªæ•°å­—çš„å¤§å°ç›¸å·®ä¸ºt
        TreeSet<Long> set =  new TreeSet<>();
        for(int i = 0;i<nums.length;i++){
            Long item = nums[i]*1L;
            Long floor = set.floor(item);
            Long ceil = set.ceiling(item);
            // æ¯”è¾ƒceilå’Œfloorä¸€ä¸ªæ˜¯åˆšå¤§äºä¸€ç‚¹ç‚¹itemï¼Œä¸€ä¸ªæ˜¯ç¨å°ä¸€ç‚¹ç‚¹itemçš„å…ƒç´ 
            if(floor!=null && (item-floor<=t)) return true;
            if(ceil!=null && ceil-item<=t)  return true;
            set.add(item);
            //ç§»é™¤å¤§äºçª—å£çš„å…ƒç´ 
            if(i>=k) set.remove(nums[i-k]*1L);
        }
        return false;
    }
}
```

### Method

### first()å’Œlast()æ–¹æ³•

- first() - è¿”å›é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ 
- last() - è¿”å›é›†åˆçš„æœ€åä¸€ä¸ªå…ƒç´ 

ä¾‹å¦‚ï¼Œ

```java
import java.util.TreeSet;

class Main {
    public static void main(String[] args) {
        TreeSet<Integer> numbers = new TreeSet<>();
        numbers.add(2);
        numbers.add(5);
        numbers.add(6);
        System.out.println("TreeSet: " + numbers);

        // ä½¿ç”¨ first() æ–¹æ³•
        int first = numbers.first();
        System.out.println("ç¬¬ä¸€ä¸ªæ•°å­—: " + first);

        // ä½¿ç”¨ last() æ–¹æ³•
        int last = numbers.last();
        System.out.println("æœ€åä¸€ä¸ªæ•°å­—: " + last);
    }
}
```

**è¾“å‡ºç»“æœ**

```
TreeSet: [2, 5, 6]
ç¬¬ä¸€ä¸ªæ•°å­—: 2
æœ€åä¸€ä¸ªæ•°å­—: 6
```

### ceiling()ï¼Œfloor()ï¼Œhigher()å’Œlower()æ–¹æ³•

- **Higher(element)** - è¿”å›å¤§äºæŒ‡å®šå…ƒç´ (element)çš„æœ€å°å…ƒç´ ã€‚
- **lower(element)** - è¿”å›å°äºæŒ‡å®šå…ƒç´ (element)çš„æœ€å¤§å…ƒç´ ã€‚
- **ceiling(element)** - è¿”å›å¤§äºæŒ‡å®šå…ƒç´ (element)çš„é‚£äº›å…ƒç´ ä¸­çš„æœ€å°å…ƒç´ ã€‚å¦‚æœä¼ é€’çš„å…ƒç´ (element)å­˜åœ¨äºæ ‘é›†ä¸­ï¼Œåˆ™è¿”å›ä½œä¸ºå‚æ•°ä¼ é€’çš„å…ƒç´ (element)ã€‚
- **floor(element)** - è¿”å›å°äºæŒ‡å®šå…ƒç´ (element)çš„å…ƒç´ ä¸­æœ€å¤§çš„å…ƒç´ ã€‚å¦‚æœä¼ é€’çš„å…ƒç´ (element)å­˜åœ¨äºæ ‘é›†ä¸­ï¼Œåˆ™è¿”å›ä½œä¸ºå‚æ•°ä¼ é€’çš„å…ƒç´ (element)ã€‚

```java
import java.util.TreeSet;

class Main {
    public static void main(String[] args) {
        TreeSet<Integer> numbers = new TreeSet<>();
        numbers.add(2);
        numbers.add(5);
        numbers.add(4);
        numbers.add(6);
        System.out.println("TreeSet: " + numbers);

        // ä½¿ç”¨ higher()
        System.out.println("ä½¿ç”¨ higher: " + numbers.higher(4));

        // ä½¿ç”¨ lower()
        System.out.println("ä½¿ç”¨ lower: " + numbers.lower(4));

        // ä½¿ç”¨ ceiling()
        System.out.println("ä½¿ç”¨ ceiling: " + numbers.ceiling(4));

        // ä½¿ç”¨ floor()
        System.out.println("ä½¿ç”¨ floor: " + numbers.floor(3));

    }
}
```

**è¾“å‡ºç»“æœ**

```
TreeSet: [2, 4, 5, 6]
ä½¿ç”¨ higher: 5
ä½¿ç”¨ lower: 2
ä½¿ç”¨ ceiling: 4
ä½¿ç”¨ floor: 2
```

> å½“ç„¶ä½œä¸ºåŸºç¡€çš„setä¹Ÿå¯ä»¥å®ç°setçš„æ–¹æ³•ï¼Œæ‰§è¡Œé›†åˆçš„å„ç§æ“ä½œ


> **TreeMap**
>  
>  

```shell
è¾“å…¥:
["MyCalendar","book","book","book"]
[[],[10,20],[15,25],[20,30]]
è¾“å‡º: [null,true,false,true]
è§£é‡Š: 
MyCalendar myCalendar = new MyCalendar();
MyCalendar.book(10, 20); // returns true 
MyCalendar.book(15, 25); // returns false ï¼Œç¬¬äºŒä¸ªæ—¥ç¨‹å®‰æ’ä¸èƒ½æ·»åŠ åˆ°æ—¥å†ä¸­ï¼Œå› ä¸ºæ—¶é—´ 15 å·²ç»è¢«ç¬¬ä¸€ä¸ªæ—¥ç¨‹å®‰æ’é¢„å®šäº†
MyCalendar.book(20, 30); // returns true ï¼Œç¬¬ä¸‰ä¸ªæ—¥ç¨‹å®‰æ’å¯ä»¥æ·»åŠ åˆ°æ—¥å†ä¸­ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªæ—¥ç¨‹å®‰æ’å¹¶ä¸åŒ…å«æ—¶é—´ 20
```
```java

class MyCalendar {
     TreeMap<Integer,Integer> map =null;
    public MyCalendar() {
        map =   new TreeMap<>();
    }
    
    public boolean book(int start, int end) {
        // æŸ¥æ‰¾åˆšåˆšå¥½å¤§äºç­‰äºstartæ—¶é—´çš„æ¡ç›®ï¼›
        Map.Entry<Integer,Integer> event = map.ceilingEntry(start);
        if(event!=null && event.getKey()<end){
            // å¦‚æœåˆšå¤§äºstartï¼Œä½†æ˜¯å¼€å§‹çš„æ¯”è¦æ·»åŠ è¿›å»çš„endè¿˜è¦æ—©ï¼Œå°±é”™äº†
            return false;
        }
        // æŸ¥æ‰¾åˆšåˆšå¥½å°äºç­‰äºstartæ—¶é—´çš„æ¡ç›®ï¼›
        event = map.floorEntry(start);
        // ç»“æŸçš„æ—¶é—´ä¸èƒ½æ¯”è¦æ’å…¥çš„å¼€å§‹çš„æ™šï¼Œ
        if(event!=null && event.getValue()>start){
            return false;
        }
        map.put(start,end);
        return true;

    }
}

/**
 * Your MyCalendar object will be instantiated and called as such:
 * MyCalendar obj = new MyCalendar();
 * boolean param_1 = obj.book(start,end);
 */
```

## å›¾è®º

å‚è€ƒç¬”è®°æ˜¯ [[å›¾è®ºè¯¦è§£]]

### [399. é™¤æ³•æ±‚å€¼](https://leetcode.cn/problems/evaluate-division/)

ç»™ä½ ä¸€ä¸ªå˜é‡å¯¹æ•°ç»„ `equations` å’Œä¸€ä¸ªå®æ•°å€¼æ•°ç»„ `values` ä½œä¸ºå·²çŸ¥æ¡ä»¶ï¼Œå…¶ä¸­ `equations[i] = [Ai, Bi]` å’Œ `values[i]` å…±åŒè¡¨ç¤ºç­‰å¼ `Ai / Bi = values[i]` ã€‚æ¯ä¸ª `Ai` æˆ– `Bi` æ˜¯ä¸€ä¸ªè¡¨ç¤ºå•ä¸ªå˜é‡çš„å­—ç¬¦ä¸²ã€‚

å¦æœ‰ä¸€äº›ä»¥æ•°ç»„ `queries` è¡¨ç¤ºçš„é—®é¢˜ï¼Œå…¶ä¸­ `queries[j] = [Cj, Dj]` è¡¨ç¤ºç¬¬ `j` ä¸ªé—®é¢˜ï¼Œè¯·ä½ æ ¹æ®å·²çŸ¥æ¡ä»¶æ‰¾å‡º `Cj / Dj = ?` çš„ç»“æœä½œä¸ºç­”æ¡ˆã€‚

è¿”å› **æ‰€æœ‰é—®é¢˜çš„ç­”æ¡ˆ** ã€‚å¦‚æœå­˜åœ¨æŸä¸ªæ— æ³•ç¡®å®šçš„ç­”æ¡ˆï¼Œåˆ™ç”¨ `-1.0` æ›¿ä»£è¿™ä¸ªç­”æ¡ˆã€‚å¦‚æœé—®é¢˜ä¸­å‡ºç°äº†ç»™å®šçš„å·²çŸ¥æ¡ä»¶ä¸­æ²¡æœ‰å‡ºç°çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿéœ€è¦ç”¨ `-1.0` æ›¿ä»£è¿™ä¸ªç­”æ¡ˆã€‚

**æ³¨æ„ï¼š**è¾“å…¥æ€»æ˜¯æœ‰æ•ˆçš„ã€‚ä½ å¯ä»¥å‡è®¾é™¤æ³•è¿ç®—ä¸­ä¸ä¼šå‡ºç°é™¤æ•°ä¸º 0 çš„æƒ…å†µï¼Œä¸”ä¸å­˜åœ¨ä»»ä½•çŸ›ç›¾çš„ç»“æœã€‚

**æ³¨æ„ï¼š**æœªåœ¨ç­‰å¼åˆ—è¡¨ä¸­å‡ºç°çš„å˜é‡æ˜¯æœªå®šä¹‰çš„ï¼Œå› æ­¤æ— æ³•ç¡®å®šå®ƒä»¬çš„ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šequations = [["a","b"],["b","c"]], values = [2.0,3.0], queries = [["a","c"],["b","a"],["a","e"],["a","a"],["x","x"]]
è¾“å‡ºï¼š[6.00000,0.50000,-1.00000,1.00000,-1.00000]
è§£é‡Šï¼š
æ¡ä»¶ï¼ša / b = 2.0, b / c = 3.0
é—®é¢˜ï¼ša / c = ?, b / a = ?, a / e = ?, a / a = ?, x / x = ?
ç»“æœï¼š[6.0, 0.5, -1.0, 1.0, -1.0 ]
æ³¨æ„ï¼šx æ˜¯æœªå®šä¹‰çš„ => -1.0
```

è§£é¢˜æ€è·¯ï¼šè¿™æ˜¯ä¸€ä¸ªæœ‰å‘å›¾çš„æœç´¢é—®é¢˜ã€‚æœ¬è´¨ä¸Šå°±æ˜¯æ±‚ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚

é¦–å…ˆå®šä¹‰é‚»æ¥èŠ‚ç‚¹ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªå­—æ®µï¼Œåˆ†è¡¨è¡¨ç¤ºé‚»æ¥èŠ‚ç‚¹çš„åç§°å’Œå½“å‰èŠ‚ç‚¹åˆ°è¾¾é‚»æ¥èŠ‚ç‚¹æ‰€éœ€çš„å€æ•°ï¼›
ç„¶åæ„é€ ä¸€ä¸ªmapæ¥å­˜å‚¨å›¾ï¼Œmapçš„é”®å°±æ˜¯èŠ‚ç‚¹åç§°ï¼Œmapçš„å€¼å°±æ˜¯èŠ‚ç‚¹çš„é‚»æ¥èŠ‚ç‚¹åˆ—è¡¨ï¼›
éå†ç»™å®šæ‰€æœ‰ç®—å¼ï¼Œå°†èŠ‚ç‚¹å’Œå€¼éƒ½å­˜åˆ°mapå½“ä¸­ï¼›
éå†éœ€è¦æ±‚çš„é—®é¢˜ï¼Œæ·±æœæ¯ä¸ªèŠ‚ç‚¹ï¼Œä¸ºäº†é˜²æ­¢è¿›å…¥ç¯ç»•åœˆï¼Œç”¨ä¸€ä¸ªé›†åˆæ¥å­˜å‚¨å·²ç»æœç´¢è¿‡çš„èŠ‚ç‚¹ã€‚

```java
class Node{
    public String id;
    public double num;
    public Node(String i,double n){
        id = i;
        num = n;
    }
}
class Solution {
    Map<String, List<Node>> map;
    public double[] calcEquation(List<List<String>> equations, double[] values, List<List<String>> queries) {
        int n = equations.size();
        map = new HashMap<>();
        double[] ans = new double[queries.size()];
        for (int i = 0; i < n; i++) {
            String divided = equations.get(i).get(0);//è¢«é™¤çš„æ•°
            String divisor = equations.get(i).get(1);//é™¤æ•°
            if (!map.containsKey(divided)) map.put(divided,new ArrayList<>());
            if (!map.containsKey(divisor)) map.put(divisor,new ArrayList<>());
            map.get(divided).add(new Node(divisor,values[i]));
            map.get(divisor).add(new Node(divided,1/values[i]));//ä¿å­˜å’Œå¦ä¸€ä¸ªèŠ‚ç‚¹çš„å€æ•°çš„å…³ç³»
        }
        int cnt = 0;
        for (List<String> query : queries) {
            ans[cnt] = dfs(query.get(0),query.get(1),1.0,new HashSet<>());
            cnt++;
        }
        return ans;
    }

    /**
     * æ·±æœ
     * @param cur è¡¨ç¤ºå½“å‰èŠ‚ç‚¹
     * @param tar è¡¨ç¤ºç›®æ ‡èŠ‚ç‚¹
     * @param k è®¡ç®—çš„å€æ•°
     * @param set ä¿å­˜å·²ç»èµ°è¿‡çš„èŠ‚ç‚¹
     * @return
     */
    double dfs(String cur,String tar,double k,Set<String> set){
        if (!map.containsKey(cur)||set.contains(cur)) return -1.0;
        if (cur.equals(tar)) return k;
        set.add(cur);
        for (Node node : map.get(cur)) {
            //éå†å½“å‰çš„curçš„ç›¸é‚»çš„è¾¹çš„èŠ‚ç‚¹
            double t = dfs(node.id, tar, k * node.num, set);
            if (t!=-1.0) return t;
        }
        return -1.0;
    }
}
```

### [207. è¯¾ç¨‹è¡¨](https://leetcode.cn/problems/course-schedule/)

ä½ è¿™ä¸ªå­¦æœŸå¿…é¡»é€‰ä¿® `numCourses` é—¨è¯¾ç¨‹ï¼Œè®°ä¸º `0` åˆ° `numCourses - 1` ã€‚

åœ¨é€‰ä¿®æŸäº›è¯¾ç¨‹ä¹‹å‰éœ€è¦ä¸€äº›å…ˆä¿®è¯¾ç¨‹ã€‚ å…ˆä¿®è¯¾ç¨‹æŒ‰æ•°ç»„ `prerequisites` ç»™å‡ºï¼Œå…¶ä¸­ `prerequisites[i] = [ai, bi]` ï¼Œè¡¨ç¤ºå¦‚æœè¦å­¦ä¹ è¯¾ç¨‹ `ai` åˆ™ **å¿…é¡»** å…ˆå­¦ä¹ è¯¾ç¨‹ `bi` ã€‚

- ä¾‹å¦‚ï¼Œå…ˆä¿®è¯¾ç¨‹å¯¹ `[0, 1]` è¡¨ç¤ºï¼šæƒ³è¦å­¦ä¹ è¯¾ç¨‹ `0` ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ `1` ã€‚

è¯·ä½ åˆ¤æ–­æ˜¯å¦å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹çš„å­¦ä¹ ï¼Ÿå¦‚æœå¯ä»¥ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0]]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šæ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å®Œæˆè¯¾ç¨‹ 0 ã€‚è¿™æ˜¯å¯èƒ½çš„ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0],[0,1]]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šæ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 0 ï¼›å¹¶ä¸”å­¦ä¹ è¯¾ç¨‹ 0 ä¹‹å‰ï¼Œä½ è¿˜åº”å…ˆå®Œæˆè¯¾ç¨‹ 1 ã€‚è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚
```

**æç¤ºï¼š**

- `1 <= numCourses <= 2000`
- `0 <= prerequisites.length <= 5000`
- `prerequisites[i].length == 2`
- `0 <= ai, bi < numCourses`
- `prerequisites[i]` ä¸­çš„æ‰€æœ‰è¯¾ç¨‹å¯¹ **äº’ä¸ç›¸åŒ**

> è§£æ³•ï¼š

æ–¹æ³•ä¸€ï¼Œæœ‰ç¯å°±ä¸å¯èƒ½å®Œæˆï¼š[[å›¾è®ºè¯¦è§£]]

æ–¹æ³•äºŒï¼Œä¸»è¦æ˜¯ç†è§£é‚»æ¥è¡¨ã€‚

ä¾‹å¦‚ï¼Œ`numCourses = 5, prerequisites = [[2,1],[3,2],[4,1],[4,2],[5,3],[5,4]]` æ—¶ï¼š

é‚»æ¥è¡¨å¦‚ä¸‹ï¼š

- èŠ‚ç‚¹ 1 èƒ½åˆ°èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 4ï¼ŒèŠ‚ç‚¹ 2 èƒ½åˆ°èŠ‚ç‚¹ 3 å’ŒèŠ‚ç‚¹ 4ï¼›
- è¿™å°±è¡¨æ˜èŠ‚ç‚¹ 2ï¼Œ4 çš„å‰ç½®èŠ‚ç‚¹éƒ½ä¸º 1ï¼ŒèŠ‚ç‚¹ 3ï¼Œ4 çš„å‰ç½®èŠ‚ç‚¹éƒ½ä¸º 2ã€‚

```java
å‰ç½®èŠ‚ç‚¹        
    1     |2|  â€”â€”>  |4|

    2     |3|  â€”â€”>  |4|

    3     |5|

    4     |5|

    5
```

åœ¨æ¯æ¬¡ pre å‡ºé˜Ÿæ—¶ï¼Œæ‰§è¡Œ numCourses--ï¼›
è‹¥æ•´ä¸ªè¯¾ç¨‹å®‰æ’å›¾æ˜¯æœ‰å‘æ— ç¯å›¾ï¼ˆå³å¯ä»¥å®‰æ’ï¼‰ï¼Œåˆ™æ‰€æœ‰èŠ‚ç‚¹ä¸€å®šéƒ½å…¥é˜Ÿå¹¶å‡ºé˜Ÿè¿‡ï¼Œå³å®Œæˆæ‹“æ‰‘æ’åºã€‚æ¢ä¸ªè§’åº¦è¯´ï¼Œè‹¥è¯¾ç¨‹å®‰æ’å›¾ä¸­å­˜åœ¨ç¯ï¼Œä¸€å®šæœ‰èŠ‚ç‚¹çš„å…¥åº¦å§‹ç»ˆä¸ä¸º 000ã€‚
å› æ­¤ï¼Œæ‹“æ‰‘æ’åºå‡ºé˜Ÿæ¬¡æ•°ç­‰äºè¯¾ç¨‹ä¸ªæ•°ï¼Œè¿”å› numCourses == 0 åˆ¤æ–­è¯¾ç¨‹æ˜¯å¦å¯ä»¥æˆåŠŸå®‰æ’ã€‚

```java
class Solution {
    public boolean canFinish(int numCourses, int[][] prerequisites) {
        //å…¥åº¦è¡¨
        int[] inDegrees = new int[numCourses];//è®°å½•èŠ‚ç‚¹çš„å…¥åº¦çš„æ•°
        List<List<Integer>> adjacency = new ArrayList<>();//é‚»æ¥è¡¨
        Queue<Integer> queue = new LinkedList<>();
        for (int i = 0; i < numCourses; i++) {
            adjacency.add(new ArrayList<>());
        }
        for (int[] pre : prerequisites) {
            //èŠ‚ç‚¹çš„å…¥åº¦ç­‰äºå°†ä»¥è¯¥èŠ‚ç‚¹ä¸ºç›®æ ‡èŠ‚ç‚¹çš„è¾¹çš„æ•°é‡ã€‚
            inDegrees[pre[0]]++;//ç»Ÿè®¡æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦
            adjacency.get(pre[1]).add(pre[0]);//è®°å½•ä»pre[1]æŒ‡å‘å‡ºå»çš„å€¼
        }
        for (int i = 0; i < numCourses; i++) {
            if (inDegrees[i]==0){
                //ç»Ÿè®¡å…¥åº¦ä¸º0çš„å€¼ï¼Œå­˜å…¥queue
                queue.add(i);//å…¥åº¦ä¸º0ï¼Œè¯´æ˜æ²¡æœ‰å‰æé¢„ä¿®è¯¾ç¨‹
            }
        }
        // numCourses = 5
        // prerequisites = [[2,1],[3,2],[4,1],[4,2],[5,3],[5,4]]
        while (!queue.isEmpty()){
            //éå†æ‰€æœ‰æ²¡æœ‰ä»¥è¯¥èŠ‚ç‚¹ä¸ºç›®æ ‡èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œå…¥åº¦ä¸º0ï¼›
            Integer pre = queue.poll();
            numCourses--;
            for (Integer cur : adjacency.get(pre)) {
                //éå†ä»¥è¯¥èŠ‚ç‚¹ä¸ºé¢„ä¿®è¯¾ç¨‹çš„èŠ‚ç‚¹
                //ç›¸å½“äºæœ¬æ¥æœºæ¢°è®¾è®¡ éœ€è¦ææ–™åŠ›å­¦å’Œç†è®ºåŠ›å­¦ï¼Œæ±½è½¦è®¾è®¡éœ€è¦ç†è®ºåŠ›å­¦ï¼Œç†è®ºåŠ›å­¦æ˜¯å…¥åº¦ä¸º0çš„è¯¾ç¨‹
                // ç°åœ¨çš„preç­‰äºç†è®ºåŠ›å­¦ï¼Œadjacencyé‡Œé¢å­˜å‚¨çš„å°±æ˜¯ ææ–™åŠ›å­¦å’Œç†è®ºåŠ›å­¦ï¼Œ
                inDegrees[cur]--;//æ¶ˆé™¤æ‰å½“å‰é¢„ç§‘å¯¹åº”çš„è¿™ä¸ªå…¥åº¦ï¼Œä¹Ÿå°±æ˜¯ææ–™åŠ›å­¦å’Œç†è®ºåŠ›å­¦çš„å…¥åº¦éƒ½--ï¼›
                if (inDegrees[cur]==0){ //å½“å…¥åº¦ä¸º0çš„æ—¶å€™ï¼Œå®Œæˆäº†æ‰€æœ‰çš„æ½œè´¨çš„è¯¾ç¨‹
                    queue.add(cur);
                }
            }
        }
        return numCourses==0;
    }
}
```


### [210. è¯¾ç¨‹è¡¨ II](https://leetcode.cn/problems/course-schedule-ii/)

ç°åœ¨ä½ æ€»å…±æœ‰ `numCourses` é—¨è¯¾éœ€è¦é€‰ï¼Œè®°ä¸º `0` åˆ° `numCourses - 1`ã€‚ç»™ä½ ä¸€ä¸ªæ•°ç»„ `prerequisites` ï¼Œå…¶ä¸­ `prerequisites[i] = [ai, bi]` ï¼Œè¡¨ç¤ºåœ¨é€‰ä¿®è¯¾ç¨‹ `ai` å‰ **å¿…é¡»** å…ˆé€‰ä¿® `bi` ã€‚

- ä¾‹å¦‚ï¼Œæƒ³è¦å­¦ä¹ è¯¾ç¨‹ `0` ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ `1` ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªåŒ¹é…æ¥è¡¨ç¤ºï¼š`[0,1]` ã€‚

è¿”å›ä½ ä¸ºäº†å­¦å®Œæ‰€æœ‰è¯¾ç¨‹æ‰€å®‰æ’çš„å­¦ä¹ é¡ºåºã€‚å¯èƒ½ä¼šæœ‰å¤šä¸ªæ­£ç¡®çš„é¡ºåºï¼Œä½ åªè¦è¿”å› **ä»»æ„ä¸€ç§** å°±å¯ä»¥äº†ã€‚å¦‚æœä¸å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹ï¼Œè¿”å› **ä¸€ä¸ªç©ºæ•°ç»„** ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0]]
è¾“å‡ºï¼š[0,1]
è§£é‡Šï¼šæ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚è¦å­¦ä¹ è¯¾ç¨‹ 1ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 0ã€‚å› æ­¤ï¼Œæ­£ç¡®çš„è¯¾ç¨‹é¡ºåºä¸º [0,1] ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnumCourses = 4, prerequisites = [[1,0],[2,0],[3,1],[3,2]]
è¾“å‡ºï¼š[0,2,1,3]
è§£é‡Šï¼šæ€»å…±æœ‰ 4 é—¨è¯¾ç¨‹ã€‚è¦å­¦ä¹ è¯¾ç¨‹ 3ï¼Œä½ åº”è¯¥å…ˆå®Œæˆè¯¾ç¨‹ 1 å’Œè¯¾ç¨‹ 2ã€‚å¹¶ä¸”è¯¾ç¨‹ 1 å’Œè¯¾ç¨‹ 2 éƒ½åº”è¯¥æ’åœ¨è¯¾ç¨‹ 0 ä¹‹åã€‚
å› æ­¤ï¼Œä¸€ä¸ªæ­£ç¡®çš„è¯¾ç¨‹é¡ºåºæ˜¯ [0,1,2,3] ã€‚å¦ä¸€ä¸ªæ­£ç¡®çš„æ’åºæ˜¯ [0,2,1,3] ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnumCourses = 1, prerequisites = []
è¾“å‡ºï¼š[0]
```

```java
class Solution {
    public int[] findOrder(int numCourses, int[][] prerequisites) {
        //å…¥åº¦è¡¨
        int[] inDegrees = new int[numCourses];//è®°å½•èŠ‚ç‚¹çš„å…¥åº¦çš„æ•°
        List<List<Integer>> adjacency = new ArrayList<>();//é‚»æ¥è¡¨
        Queue<Integer> queue = new LinkedList<>();
        for (int i = 0; i < numCourses; i++) {
            adjacency.add(new ArrayList<>());
        }
        for (int[] pre : prerequisites) {
            //èŠ‚ç‚¹çš„å…¥åº¦ç­‰äºå°†ä»¥è¯¥èŠ‚ç‚¹ä¸ºç›®æ ‡èŠ‚ç‚¹çš„è¾¹çš„æ•°é‡ã€‚
            inDegrees[pre[0]]++;//ç»Ÿè®¡æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦
            adjacency.get(pre[1]).add(pre[0]);//è®°å½•ä»pre[1]æŒ‡å‘å‡ºå»çš„å€¼
        }
        for (int i = 0; i < numCourses; i++) {
            if (inDegrees[i]==0){
                //ç»Ÿè®¡å…¥åº¦ä¸º0çš„å€¼ï¼Œå­˜å…¥queue
                queue.add(i);//å…¥åº¦ä¸º0ï¼Œè¯´æ˜æ²¡æœ‰å‰æé¢„ä¿®è¯¾ç¨‹
            }
        }
        int idx = 0;
        int[] ans = new int[numCourses];
        // numCourses = 5
        // prerequisites = [[2,1],[3,2],[4,1],[4,2],[5,3],[5,4]]
        while (!queue.isEmpty()){
            //éå†æ‰€æœ‰æ²¡æœ‰ä»¥è¯¥èŠ‚ç‚¹ä¸ºç›®æ ‡èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œå…¥åº¦ä¸º0ï¼›
            Integer pre = queue.poll();
            ans[idx++] = pre;
            for (Integer cur : adjacency.get(pre)) {
                //éå†ä»¥è¯¥èŠ‚ç‚¹ä¸ºé¢„ä¿®è¯¾ç¨‹çš„èŠ‚ç‚¹
                //ç›¸å½“äºæœ¬æ¥æœºæ¢°è®¾è®¡ éœ€è¦ææ–™åŠ›å­¦å’Œç†è®ºåŠ›å­¦ï¼Œæ±½è½¦è®¾è®¡éœ€è¦ç†è®ºåŠ›å­¦ï¼Œç†è®ºåŠ›å­¦æ˜¯å…¥åº¦ä¸º0çš„è¯¾ç¨‹
                // ç°åœ¨çš„preç­‰äºç†è®ºåŠ›å­¦ï¼Œadjacencyé‡Œé¢å­˜å‚¨çš„å°±æ˜¯ ææ–™åŠ›å­¦å’Œç†è®ºåŠ›å­¦ï¼Œ
                inDegrees[cur]--;//æ¶ˆé™¤æ‰å½“å‰é¢„ç§‘å¯¹åº”çš„è¿™ä¸ªå…¥åº¦ï¼Œä¹Ÿå°±æ˜¯ææ–™åŠ›å­¦å’Œç†è®ºåŠ›å­¦çš„å…¥åº¦éƒ½--ï¼›
                if (inDegrees[cur]==0){ //å½“å…¥åº¦ä¸º0çš„æ—¶å€™ï¼Œå®Œæˆäº†æ‰€æœ‰çš„æ½œè´¨çš„è¯¾ç¨‹
                    queue.add(cur);
                }
            }
        }
        if (idx==numCourses) return ans;
        return new int[0];
    }
}
```

### PRIMç®—æ³•-æœ€å°ç”Ÿæˆæ ‘

é¢˜ç›®æè¿°ï¼š

åœ¨ä¸–ç•Œçš„æŸä¸ªåŒºåŸŸï¼Œæœ‰ä¸€äº›åˆ†æ•£çš„ç¥ç§˜å²›å±¿ï¼Œæ¯ä¸ªå²›å±¿ä¸Šéƒ½æœ‰ä¸€ç§çç¨€çš„èµ„æºæˆ–è€…å®è—ã€‚ä½ æ˜¯ä¸€åæ¢é™©è€…ï¼Œå†³å®šå‰å¾€è¿™äº›å²›å±¿ï¼Œä½†ä¸ºäº†èŠ‚çœæ—¶é—´å’Œèµ„æºï¼Œä½ å¸Œæœ›è§„åˆ’ä¸€æ¡æœ€çŸ­çš„è·¯å¾„ï¼Œä»¥ä¾¿åœ¨æ¢ç´¢è¿™äº›å²›å±¿æ—¶å°½é‡å‡å°‘æ—…è¡Œçš„è·ç¦»ã€‚

ç»™å®šä¸€å¼ åœ°å›¾ï¼Œå…¶ä¸­åŒ…æ‹¬äº†æ‰€æœ‰çš„å²›å±¿ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„è·ç¦»ã€‚æ¯ä¸ªå²›å±¿éƒ½éœ€è¦è¢«è‡³å°‘è®¿é—®ä¸€æ¬¡ï¼Œä½ çš„ç›®æ ‡æ˜¯è§„åˆ’ä¸€æ¡æœ€çŸ­è·¯å¾„ï¼Œä»¥æœ€å°åŒ–æ¢ç´¢è·¯å¾„çš„æ€»è·ç¦»ï¼ŒåŒæ—¶ç¡®ä¿è®¿é—®äº†æ‰€æœ‰å²›å±¿ã€‚

è¾“å…¥æè¿°ï¼š

ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°V å’Œ Eï¼ŒVä»£è¡¨é¡¶ç‚¹æ•°ï¼ŒEä»£è¡¨è¾¹æ•° ã€‚é¡¶ç‚¹ç¼–å·æ˜¯ä»1åˆ°Vã€‚ä¾‹å¦‚ï¼šV=2ï¼Œä¸€ä¸ªæœ‰ä¸¤ä¸ªé¡¶ç‚¹ï¼Œåˆ†åˆ«æ˜¯1å’Œ2ã€‚

æ¥ä¸‹æ¥å…±æœ‰ E è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•° v1ï¼Œv2 å’Œ valï¼Œv1 å’Œ v2 ä¸ºè¾¹çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œvalä»£è¡¨è¾¹çš„æƒå€¼ã€‚

è¾“å‡ºæè¿°ï¼š

è¾“å‡ºè”é€šæ‰€æœ‰å²›å±¿çš„æœ€å°è·¯å¾„æ€»è·ç¦»

è¾“å…¥ç¤ºä¾‹ï¼š

```
7 11
1 2 1
1 3 1
1 5 2
2 6 1
2 4 2
2 3 2
3 4 1
4 5 1
5 6 2
5 7 1
6 7 1
```

è¾“å‡ºç¤ºä¾‹ï¼š

6

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/640.jpg#id=GWALR&originHeight=499&originWidth=1080&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

**è§£ç­”ï¼š**

æœ€å°ç”Ÿæˆæ ‘æ˜¯æ‰€æœ‰èŠ‚ç‚¹çš„æœ€å°è¿é€šå­å›¾ï¼Œ å³ï¼šä»¥æœ€å°çš„æˆæœ¬ï¼ˆè¾¹çš„æƒå€¼ï¼‰å°†å›¾ä¸­æ‰€æœ‰èŠ‚ç‚¹é“¾æ¥åˆ°ä¸€èµ·ã€‚

å›¾ä¸­æœ‰nä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆä¸€å®šå¯ä»¥ç”¨ n - 1 æ¡è¾¹å°†æ‰€æœ‰èŠ‚ç‚¹è¿æ¥åˆ°ä¸€èµ·ã€‚

é‚£ä¹ˆå¦‚ä½•é€‰æ‹© è¿™ n-1 æ¡è¾¹ å°±æ˜¯ æœ€å°ç”Ÿæˆæ ‘ç®—æ³•çš„ä»»åŠ¡æ‰€åœ¨ã€‚

ï¼ˆå›¾ä¸­ä¸ºnä¸º7ï¼Œå³7ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåªéœ€è¦ n-1 å³ 6æ¡è¾¹å°±å¯ä»¥è®²æ‰€æœ‰é¡¶ç‚¹è¿æ¥åˆ°ä¸€èµ·ï¼‰

primç®—æ³• æ˜¯ä»èŠ‚ç‚¹çš„è§’åº¦ é‡‡ç”¨è´ªå¿ƒçš„ç­–ç•¥ æ¯æ¬¡å¯»æ‰¾è·ç¦» æœ€å°ç”Ÿæˆæ ‘æœ€è¿‘çš„èŠ‚ç‚¹ å¹¶åŠ å…¥åˆ°æœ€å°ç”Ÿæˆæ ‘ä¸­ã€‚

primç®—æ³•æ ¸å¿ƒå°±æ˜¯ä¸‰æ­¥ï¼Œæˆ‘ç§°ä¸º**primä¸‰éƒ¨æ›²**ï¼Œå¤§å®¶ä¸€å®šè¦ç†Ÿæ‚‰è¿™ä¸‰æ­¥ï¼Œä»£ç ç›¸å¯¹ä¼šå¥½äº›å¾ˆå¤šï¼š

1. ç¬¬ä¸€æ­¥ï¼Œé€‰è·ç¦»ç”Ÿæˆæ ‘æœ€è¿‘èŠ‚ç‚¹
2. ç¬¬äºŒæ­¥ï¼Œæœ€è¿‘èŠ‚ç‚¹åŠ å…¥ç”Ÿæˆæ ‘
3. ç¬¬ä¸‰æ­¥ï¼Œæ›´æ–°éç”Ÿæˆæ ‘èŠ‚ç‚¹åˆ°ç”Ÿæˆæ ‘çš„è·ç¦»ï¼ˆå³æ›´æ–°minDistæ•°ç»„ï¼‰

åœ¨primç®—æ³•ä¸­ï¼Œæœ‰ä¸€ä¸ªæ•°ç»„ç‰¹åˆ«é‡è¦ï¼Œè¿™é‡Œèµ·åä¸ºï¼šminDistã€‚

ï¼ˆ**ç¤ºä¾‹ä¸­èŠ‚ç‚¹ç¼–å·æ˜¯ä»1å¼€å§‹ï¼Œæ‰€ä»¥ä¸ºäº†è®©å¤§å®¶çœ‹çš„ä¸æ™•ï¼ŒminDistæ•°ç»„ä¸‹æ ‡æˆ‘ä¹Ÿä» 1 å¼€å§‹è®¡æ•°ï¼Œä¸‹æ ‡0 å°±ä¸ä½¿ç”¨äº†ï¼Œè¿™æ · ä¸‹æ ‡å’ŒèŠ‚ç‚¹æ ‡å·å°±å¯ä»¥å¯¹åº”ä¸Šäº†ï¼Œé¿å…å¤§å®¶ææ··**ï¼‰

minDist æ•°ç»„ é‡Œçš„æ•°å€¼åˆå§‹åŒ–ä¸º æœ€å¤§æ•°ï¼Œå› ä¸ºæœ¬é¢˜ èŠ‚ç‚¹è·ç¦»ä¸ä¼šè¶…è¿‡ 10000ï¼Œæ‰€ä»¥ åˆå§‹åŒ–æœ€å¤§æ•°ä¸º 10001å°±å¯ä»¥ã€‚

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/640-20240407155813334.jpg#id=nQhR3&originHeight=664&originWidth=1080&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```java
import java.util.Scanner;
import java.util.Arrays;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int v = scanner.nextInt();
        int e = scanner.nextInt();

        int x, y, k;
        int[][] grid = new int[v + 1][v + 1];
        for (int i = 0; i <= v; i++) {
            Arrays.fill(grid[i], 10001);
        }

        while (e-- > 0) {
            x = scanner.nextInt();
            y = scanner.nextInt();
            k = scanner.nextInt();
            grid[x][y] = k;
            grid[y][x] = k;
        }

        int[] minDist = new int[v + 1];
        Arrays.fill(minDist, 10001);

        boolean[] isInTree = new boolean[v + 1];

        for (int i = 1; i < v; i++) {
            int cur = -1;
            for (int j = 1; j <= v; j++) // 1 - vï¼Œé¡¶ç‚¹ç¼–å·ï¼Œè¿™é‡Œä¸‹æ ‡ä»1å¼€å§‹
              //  é€‰å–æœ€å°ç”Ÿæˆæ ‘èŠ‚ç‚¹çš„æ¡ä»¶ï¼š
              //  ï¼ˆ1ï¼‰ä¸åœ¨æœ€å°ç”Ÿæˆæ ‘é‡Œ
              //  ï¼ˆ2ï¼‰è·ç¦»æœ€å°ç”Ÿæˆæ ‘æœ€è¿‘çš„èŠ‚ç‚¹
              //  ï¼ˆ3ï¼‰åªè¦ä¸åœ¨æœ€å°ç”Ÿæˆæ ‘é‡Œï¼Œå…ˆé»˜è®¤é€‰ä¸€ä¸ªèŠ‚ç‚¹ ï¼Œåœ¨æ¯”è¾ƒ å“ªä¸€ä¸ªæ˜¯æœ€å°çš„
              //  ç†è§£æ¡ä»¶3 å¾ˆé‡è¦ï¼Œæ‰èƒ½ç†è§£è¿™æ®µä»£ç ï¼š(cur == -1 || minDist[j] < minDist[cur])
                if (!isInTree[j] && (cur == -1 || minDist[j] < minDist[cur])) {
                    cur = j;
                }
            }

            isInTree[cur] = true;

            for (int j = 1; j <= v; j++) {
                if (!isInTree[j] && grid[cur][j] < minDist[j]) {
                    minDist[j] = grid[cur][j];
                }
            }
        }

        int result = 0;
        for (int i = 2; i <= v; i++) {
            result += minDist[i];
        }
        
        System.out.println(result);
    }
}
```

### [743. ç½‘ç»œå»¶è¿Ÿæ—¶é—´](https://leetcode.cn/problems/network-delay-time/)

æœ‰ `n` ä¸ªç½‘ç»œèŠ‚ç‚¹ï¼Œæ ‡è®°ä¸º `1` åˆ° `n`ã€‚

ç»™ä½ ä¸€ä¸ªåˆ—è¡¨ `times`ï¼Œè¡¨ç¤ºä¿¡å·ç»è¿‡ **æœ‰å‘** è¾¹çš„ä¼ é€’æ—¶é—´ã€‚ `times[i] = (ui, vi, wi)`ï¼Œå…¶ä¸­ `ui` æ˜¯æºèŠ‚ç‚¹ï¼Œ`vi` æ˜¯ç›®æ ‡èŠ‚ç‚¹ï¼Œ `wi` æ˜¯ä¸€ä¸ªä¿¡å·ä»æºèŠ‚ç‚¹ä¼ é€’åˆ°ç›®æ ‡èŠ‚ç‚¹çš„æ—¶é—´ã€‚

ç°åœ¨ï¼Œä»æŸä¸ªèŠ‚ç‚¹ `K` å‘å‡ºä¸€ä¸ªä¿¡å·ã€‚éœ€è¦å¤šä¹…æ‰èƒ½ä½¿æ‰€æœ‰èŠ‚ç‚¹éƒ½æ”¶åˆ°ä¿¡å·ï¼Ÿå¦‚æœä¸èƒ½ä½¿æ‰€æœ‰èŠ‚ç‚¹æ”¶åˆ°ä¿¡å·ï¼Œè¿”å› `-1` ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/931_example_1.png#id=coVl1&originHeight=239&originWidth=217&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼štimes = [[2,1,1],[2,3,1],[3,4,1]], n = 4, k = 2
è¾“å‡ºï¼š2
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼štimes = [[1,2,1]], n = 2, k = 1
è¾“å‡ºï¼š1
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼štimes = [[1,2,1]], n = 2, k = 2
è¾“å‡ºï¼š-1
```

```java
int N = 110,M = 6010;
int[][] w = new int[N][N];
int INF = 0x3f3f3f;
int n,k;
public int networkDelayTime(int[][] times, int n, int k) {
    this.n = n;
    this.k = k;
    for (int i = 1; i < n + 1; i++) {
        for (int j = 1; j < n + 1; j++) {
            w[i][j]=w[j][i]=i==j?0:INF;
        }
    }
    for (int[] time : times) {
        w[time[0]][time[1]]=time[2];
    }
    floyd();
    int ans = 0;
    for (int i = 1; i < n + 1; i++) {
        ans = Math.max(ans,w[k][i]);
    }
    return ans>=INF/2?-1:ans;

}
void floyd(){
    // floyd åŸºæœ¬æµç¨‹ä¸ºä¸‰å±‚å¾ªç¯ï¼š
    // æšä¸¾ä¸­è½¬ç‚¹ - æšä¸¾èµ·ç‚¹ - æšä¸¾ç»ˆç‚¹ - æ¾å¼›æ“ä½œ   
    for (int p = 1; p < n + 1; p++) {
        for (int i = 1; i <= n; i++) {
            for (int j = 1; j < n + 1; j++) {
                //å…ˆæšä¸¾çš„ä¸­è½¬ç‚¹ï¼Œå†æšä¸¾èµ·ç‚¹iï¼Œç»ˆç‚¹j
                w[i][j]=Math.min(w[i][j],w[i][p]+w[p][j]);
            }
        }
    }
}
```

## å¤šå‰æ ‘

### [208. å®ç° Trie (å‰ç¼€æ ‘)](https://leetcode.cn/problems/implement-trie-prefix-tree/)

[**Trie**](https://baike.baidu.com/item/%E5%AD%97%E5%85%B8%E6%A0%91/9825209?fr=aladdin)ï¼ˆå‘éŸ³ç±»ä¼¼ "try"ï¼‰æˆ–è€…è¯´ **å‰ç¼€æ ‘** æ˜¯ä¸€ç§æ ‘å½¢æ•°æ®ç»“æ„ï¼Œç”¨äºé«˜æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢å­—ç¬¦ä¸²æ•°æ®é›†ä¸­çš„é”®ã€‚è¿™ä¸€æ•°æ®ç»“æ„æœ‰ç›¸å½“å¤šçš„åº”ç”¨æƒ…æ™¯ï¼Œä¾‹å¦‚è‡ªåŠ¨è¡¥å®Œå’Œæ‹¼å†™æ£€æŸ¥ã€‚

è¯·ä½ å®ç° Trie ç±»ï¼š

- `Trie()` åˆå§‹åŒ–å‰ç¼€æ ‘å¯¹è±¡ã€‚
- `void insert(String word)` å‘å‰ç¼€æ ‘ä¸­æ’å…¥å­—ç¬¦ä¸² `word` ã€‚
- `boolean search(String word)` å¦‚æœå­—ç¬¦ä¸² `word` åœ¨å‰ç¼€æ ‘ä¸­ï¼Œè¿”å› `true`ï¼ˆå³ï¼Œåœ¨æ£€ç´¢ä¹‹å‰å·²ç»æ’å…¥ï¼‰ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚
- `boolean startsWith(String prefix)` å¦‚æœä¹‹å‰å·²ç»æ’å…¥çš„å­—ç¬¦ä¸² `word` çš„å‰ç¼€ä¹‹ä¸€ä¸º `prefix` ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥
["Trie", "insert", "search", "search", "startsWith", "insert", "search"]
[[], ["apple"], ["apple"], ["app"], ["app"], ["app"], ["app"]]
è¾“å‡º
[null, null, true, false, true, null, true]

è§£é‡Š
Trie trie = new Trie();
trie.insert("apple");
trie.search("apple");   // è¿”å› True
trie.search("app");     // è¿”å› False
trie.startsWith("app"); // è¿”å› True
trie.insert("app");
trie.search("app");     // è¿”å› True
```

Trie æ ‘
TrieTrieTrie æ ‘ï¼ˆåˆå«ã€Œå‰ç¼€æ ‘ã€æˆ–ã€Œå­—å…¸æ ‘ã€ï¼‰æ˜¯ä¸€ç§ç”¨äºå¿«é€ŸæŸ¥è¯¢ã€ŒæŸä¸ªå­—ç¬¦ä¸²/å­—ç¬¦å‰ç¼€ã€æ˜¯å¦å­˜åœ¨çš„æ•°æ®ç»“æ„ã€‚

å…¶æ ¸å¿ƒæ˜¯ä½¿ç”¨ã€Œè¾¹ã€æ¥ä»£è¡¨æœ‰æ— å­—ç¬¦ï¼Œä½¿ç”¨ã€Œç‚¹ã€æ¥è®°å½•æ˜¯å¦ä¸ºã€Œå•è¯ç»“å°¾ã€ä»¥åŠã€Œå…¶åç»­å­—ç¬¦ä¸²çš„å­—ç¬¦æ˜¯ä»€ä¹ˆã€ã€‚

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/1618369228-slAfrQ-IMG_1659.png#id=rsOnW&originHeight=583&originWidth=1024&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```java
class Trie {
    class TrieNode{
        // Trie çš„æ¯ä¸ªç»“ç‚¹ä¸­éƒ½ä¿ç•™ç€ä¸€ä¸ªå­—æ¯è¡¨ï¼Œè¿™æ˜¯å¾ˆè€—è´¹ç©ºé—´çš„ã€‚
        boolean end;
        TrieNode[] tns = new TrieNode[26];
    }
    TrieNode root;
    public Trie() {
        root = new TrieNode();
    }
    
    public void insert(String word) {
        TrieNode p = root;
        /**
         * é¦–å…ˆä»æ ¹ç»“ç‚¹çš„å­ç»“ç‚¹å¼€å§‹ä¸ word ç¬¬ä¸€ä¸ªå­—ç¬¦è¿›è¡ŒåŒ¹é…ï¼Œ
         * ä¸€ç›´åŒ¹é…åˆ°å‰ç¼€é“¾ä¸Šæ²¡æœ‰å¯¹åº”çš„å­—ç¬¦ï¼Œ
         * è¿™æ—¶å¼€å§‹ä¸æ–­å¼€è¾Ÿæ–°çš„ç»“ç‚¹ï¼Œç›´åˆ°æ’å…¥å®Œ word çš„æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œ
         * åŒæ—¶è¿˜è¦å°†æœ€åä¸€ä¸ªç»“ç‚¹isEnd = true;ï¼Œè¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ªå•è¯çš„æœ«å°¾ã€‚
         */
        for (char c : word.toCharArray()) {
            int u = c - 'a';
            if (p.tns[u]==null) p.tns[u] = new TrieNode();
            p = p.tns[u];//26å‰æ ‘
        }
        p.end = true;
    }
    
    public boolean search(String word) {
        TrieNode p = root;
        /**
         * ä»æ ¹ç»“ç‚¹çš„å­ç»“ç‚¹å¼€å§‹ï¼Œä¸€ç›´å‘ä¸‹åŒ¹é…å³å¯ï¼Œ
         * å¦‚æœå‡ºç°ç»“ç‚¹å€¼ä¸ºç©ºå°±è¿”å› falseï¼Œ
         * å¦‚æœåŒ¹é…åˆ°äº†æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œé‚£æˆ‘ä»¬åªéœ€åˆ¤æ–­ node->isEndå³å¯ã€‚
         */
        for (char c : word.toCharArray()) {
            int u = c - 'a';
            if (p.tns[u]==null) return false;
            p = p.tns[u];//26å‰æ ‘
        }
        return p.end;
    }

    /**
     * åˆ¤æ–­ Trie ä¸­æ˜¯æˆ–æœ‰ä»¥ prefix ä¸ºå‰ç¼€çš„å•è¯
     * @param prefix
     * @return
     */
    public boolean startsWith(String prefix) {
        TrieNode p = root;
        for (char c : prefix.toCharArray()) {
            int u = c - 'a';
            if (p.tns[u]==null) return false;
            p = p.tns[u];//26å‰æ ‘
        }
        return true;
    }
}
```

### [211. æ·»åŠ ä¸æœç´¢å•è¯ - æ•°æ®ç»“æ„è®¾è®¡](https://leetcode.cn/problems/design-add-and-search-words-data-structure/)

è¯·ä½ è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œæ”¯æŒ æ·»åŠ æ–°å•è¯ å’Œ æŸ¥æ‰¾å­—ç¬¦ä¸²æ˜¯å¦ä¸ä»»ä½•å…ˆå‰æ·»åŠ çš„å­—ç¬¦ä¸²åŒ¹é… ã€‚

å®ç°è¯å…¸ç±» `WordDictionary` ï¼š

- `WordDictionary()` åˆå§‹åŒ–è¯å…¸å¯¹è±¡
- `void addWord(word)` å°† `word` æ·»åŠ åˆ°æ•°æ®ç»“æ„ä¸­ï¼Œä¹‹åå¯ä»¥å¯¹å®ƒè¿›è¡ŒåŒ¹é…
- `bool search(word)` å¦‚æœæ•°æ®ç»“æ„ä¸­å­˜åœ¨å­—ç¬¦ä¸²ä¸ `word` åŒ¹é…ï¼Œåˆ™è¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚`word` ä¸­å¯èƒ½åŒ…å«ä¸€äº› `'.'` ï¼Œæ¯ä¸ª `.` éƒ½å¯ä»¥è¡¨ç¤ºä»»ä½•ä¸€ä¸ªå­—æ¯ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼š
["WordDictionary","addWord","addWord","addWord","search","search","search","search"]
[[],["bad"],["dad"],["mad"],["pad"],["bad"],[".ad"],["b.."]]
è¾“å‡ºï¼š
[null,null,null,null,false,true,true,true]

è§£é‡Šï¼š
WordDictionary wordDictionary = new WordDictionary();
wordDictionary.addWord("bad");
wordDictionary.addWord("dad");
wordDictionary.addWord("mad");
wordDictionary.search("pad"); // è¿”å› False
wordDictionary.search("bad"); // è¿”å› True
wordDictionary.search(".ad"); // è¿”å› True
wordDictionary.search("b.."); // è¿”å› True
```

```java
class WordDictionary {
    class TrieNode{
        boolean isWord;
        TrieNode[] tns = new TrieNode[26];
    }
    TrieNode root;

    public WordDictionary() {
        root = new TrieNode();
    }
    
    public void addWord(String word) {
        TrieNode p = root;
        for (char c : word.toCharArray()) {
            int u = c - 'a';
            if (p.tns[u]==null) p.tns[u]= new TrieNode();
            p = p.tns[u];//å°±æ˜¯æ’å…¥ä¸€ä¸ªuçš„ä¸‹æ ‡çš„å…ƒç´ 
        }
        p.isWord = true;
    }
    
    public boolean search(String word) {
        return dfs(word,root,0);
    }
  //dfsæ·±åº¦æœç´¢
    boolean dfs(String s,TrieNode p,int idx){
        if (idx==s.length()) return p.isWord;
        char c = s.charAt(idx);
        if (c=='.'){
            for (int i = 0; i < 26; i++) {
                //éå†ä¸€ä¸‹æ‰€æœ‰çš„26ä¸ªå­—æ¯ï¼Œå¦‚æœä¸ç­‰äºnullï¼Œç»§ç»­å›æº¯éå†
                if (p.tns[i]!=null && dfs(s,p.tns[i],idx+1)) return true;
            }
            return false;
        }else {
            if (p.tns[c-'a']==null) return false;
            return dfs(s,p.tns[c-'a'],idx+1);//ç»§ç»­éå†ä¸‹ä¸€ä¸ªã€‚
        }
    }
}
```

### [212. å•è¯æœç´¢ II](https://leetcode.cn/problems/word-search-ii/)

ç»™å®šä¸€ä¸ª `m x n` äºŒç»´å­—ç¬¦ç½‘æ ¼ `board` å’Œä¸€ä¸ªå•è¯ï¼ˆå­—ç¬¦ä¸²ï¼‰åˆ—è¡¨ `words`ï¼Œ _è¿”å›æ‰€æœ‰äºŒç»´ç½‘æ ¼ä¸Šçš„å•è¯_ ã€‚

å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ **ç›¸é‚»çš„å•å…ƒæ ¼** å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯åœ¨ä¸€ä¸ªå•è¯ä¸­ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2020/11/07/search1.jpg#id=kSK9o&originHeight=322&originWidth=322&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šboard = [["o","a","a","n"],["e","t","a","e"],["i","h","k","r"],["i","f","l","v"]], words = ["oath","pea","eat","rain"]
è¾“å‡ºï¼š["eat","oath"]
```

**ç¤ºä¾‹ 2ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/search2.jpg#id=WlrhK&originHeight=162&originWidth=162&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šboard = [["a","b"],["c","d"]], words = ["abcb"]
è¾“å‡ºï¼š[]
```

**æç¤ºï¼š**

- `m == board.length`
- `n == board[i].length`
- `1 <= m, n <= 12`
- `board[i][j]` æ˜¯ä¸€ä¸ªå°å†™è‹±æ–‡å­—æ¯
- `1 <= words.length <= 3 * 104`
- `1 <= words[i].length <= 10`

```java
class Solution {
    class TrieNode{
        String s;
        TrieNode[] tns= new TrieNode[26];
    }
    void insert(String s){
        TrieNode p = root;
        for (char c : s.toCharArray()) {
            int u = c - 'a';
            if (p.tns[u]==null) p.tns[u] = new TrieNode();
            p = p.tns[u];
        }
        p.s = s;//å­˜å‚¨å½“å‰çš„å•è¯
    }
    Set<String> set = new HashSet<>();
    char[][] board;
    int m,n;//æ–¹å—çš„å¤§å°å°äº 12
    TrieNode root = new TrieNode();
    int[][] dirs = new int[][]{{1,0},{-1,0},{0,1},{0,-1}};
    boolean[][] vis = new boolean[15][15];//15å¤Ÿç”¨äº†
    public List<String> findWords(char[][] board, String[] words) {
        this.board = board;
        m = board.length;
        n = board[0].length;
        for (String word : words) {
            insert(word);//å°†æ‰€æœ‰çš„å•è¯å­˜è¿›å»å­—å…¸æ ‘é‡Œé¢ï¼Œå¦‚æœéå†åˆ°æœ‰å•è¯çš„æ—¶å€™ï¼Œå°±ç›´æ¥æ·»åŠ åˆ°ç»“æœ
        }
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                int u = board[i][j] - 'a';
                if (root.tns[u]!=null){
                    //å½“å‰æ£‹ç›˜å½“å‰ä½ç½®èƒ½å¤Ÿåœ¨å­—å…¸æ ‘æ‰¾åˆ°å¯¹åº”çš„å­—æ¯å°±ç»§ç»­å¼€å§‹å¯»æ‰¾
                    vis[i][j]=true;
                    dfs(i,j,root.tns[u]);
                    vis[i][j] = false;
                }
            }
        }
        List<String> ans = new ArrayList<>();
        for (String s : set) {
            ans.add(s);
        }
        return ans;
    }
    void dfs(int i,int j,TrieNode node){
        if (node.s!=null) set.add(node.s);
        for (int[] dir : dirs) {
            int dx = i+dir[0],dy = j+dir[1];
            if (dx<0||dx>=m||dy<0||dy>=n) continue;//è¶…é™çš„å°±ä¸éå†äº†
            if (vis[dx][dy]) continue;//éå†è¿‡çš„å°±ä¸éå†äº†ã€‚
            int u = board[dx][dy] - 'a';
            if (node.tns[u]!=null){
                vis[dx][dy]=true;
                dfs(dx,dy,node.tns[u]);
                vis[dx][dy] = false;
            }
        }
    }
}
```

## å †/ä¼˜å…ˆé˜Ÿåˆ—



# äºŒã€ç®—æ³•é—®é¢˜

## æ’åºç®—æ³•

[ç›¸å¯¹è·¯å¾„](%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95.md)

## åŒæŒ‡é’ˆç®—æ³•
### [11. ç››æœ€å¤šæ°´çš„å®¹å™¨](https://leetcode.cn/problems/container-with-most-water/)
ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ height ã€‚æœ‰ n æ¡å‚çº¿ï¼Œç¬¬ i æ¡çº¿çš„ä¸¤ä¸ªç«¯ç‚¹æ˜¯ (i, 0) å’Œ (i, height[i]) ã€‚
æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ x è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚
è¿”å›å®¹å™¨å¯ä»¥å‚¨å­˜çš„æœ€å¤§æ°´é‡ã€‚
è¯´æ˜ï¼šä½ ä¸èƒ½å€¾æ–œå®¹å™¨ã€‚

**ç¤ºä¾‹ 1ï¼š**
![](https://cdn.nlark.com/yuque/0/2024/jpeg/1389077/1714622261324-1a52b70b-56be-4f9d-9722-4721aee20f02.jpeg#averageHue=%234a4b49&clientId=ud7ca9d0f-538b-4&from=paste&id=uf5783842&originHeight=383&originWidth=801&originalType=url&ratio=2&rotation=0&showTitle=false&status=done&style=none&taskId=u76aa2da2-8f22-436d-b9bb-806d071afff&title=)
```
è¾“å…¥ï¼š[1,8,6,2,5,4,8,3,7]
è¾“å‡ºï¼š49 
è§£é‡Šï¼šå›¾ä¸­å‚ç›´çº¿ä»£è¡¨è¾“å…¥æ•°ç»„ [1,8,6,2,5,4,8,3,7]ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå®¹å™¨èƒ½å¤Ÿå®¹çº³æ°´ï¼ˆè¡¨ç¤ºä¸ºè“è‰²éƒ¨åˆ†ï¼‰çš„æœ€å¤§å€¼ä¸º 49ã€‚
```
**ç¤ºä¾‹ 2ï¼š**
```
è¾“å…¥ï¼šheight = [1,1]
è¾“å‡ºï¼š1
```

è¿™é“é¢˜ç›®çœ‹ä¼¼ç®€å•ï¼Œåšèµ·æ¥æ‰å‘ç°ä¸å®¹æ˜“ã€‚åˆ†æ²»æ³•ã€åŠ¨æ€è§„åˆ’éƒ½ç”¨ä¸ä¸Šï¼Œè¦æƒ³å¾—åˆ° O(n)O(n)O(n) çš„è§£æ³•åªæœ‰ä½¿ç”¨åŒæŒ‡é’ˆä¸€æ¡è·¯ã€‚å³ä½¿çœ‹äº†ç­”æ¡ˆçŸ¥é“äº†åŒæŒ‡é’ˆè§£æ³•ï¼Œä½ ä¹Ÿå¯èƒ½å¹¶ä¸æ¸…æ¥šè¿™ä¸ªè§£æ³•ä¸ºä»€ä¹ˆæ­£ç¡®ã€‚ä¸ºä»€ä¹ˆåŒæŒ‡é’ˆå¾€ä¸­é—´ç§»åŠ¨æ—¶ï¼Œä¸ä¼šæ¼æ‰æŸäº›æƒ…å†µå‘¢ï¼Ÿ
ç”¨ä¸€å¥è¯æ¦‚æ‹¬åŒæŒ‡é’ˆè§£æ³•çš„è¦ç‚¹ï¼šæŒ‡é’ˆæ¯ä¸€æ¬¡ç§»åŠ¨ï¼Œéƒ½æ„å‘³ç€æ’é™¤æ‰äº†ä¸€ä¸ªæŸ±å­ã€‚
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬è€ƒè™‘ç›¸è·æœ€è¿œçš„ä¸¤ä¸ªæŸ±å­æ‰€èƒ½å®¹çº³æ°´çš„é¢ç§¯ã€‚æ°´çš„å®½åº¦æ˜¯ä¸¤æ ¹æŸ±å­ä¹‹é—´çš„è·ç¦» _d_=8ï¼›æ°´çš„é«˜åº¦å–å†³äºä¸¤æ ¹æŸ±å­ä¹‹é—´è¾ƒçŸ­çš„é‚£ä¸ªï¼Œå³å·¦è¾¹æŸ±å­çš„é«˜åº¦ _h_=3ã€‚æ°´çš„é¢ç§¯å°±æ˜¯ 3Ã—8=24ã€‚
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1389077/1714622419051-4cf9cc23-a95f-4200-8de7-4a4420088e87.png#averageHue=%23e7e4e2&clientId=ud7ca9d0f-538b-4&from=paste&height=250&id=u26337615&originHeight=500&originWidth=1200&originalType=binary&ratio=2&rotation=0&showTitle=false&size=29729&status=done&style=none&taskId=ue8a7337e-ce13-4379-843e-b184d82e692&title=&width=600)
å¦‚æœé€‰æ‹©å›ºå®šä¸€æ ¹æŸ±å­ï¼Œå¦å¤–ä¸€æ ¹å˜åŒ–ï¼Œæ°´çš„é¢ç§¯ä¼šæœ‰ä»€ä¹ˆå˜åŒ–å—ï¼Ÿç¨åŠ æ€è€ƒå¯å¾—ï¼š

- å½“å‰æŸ±å­æ˜¯æœ€ä¸¤ä¾§çš„æŸ±å­ï¼Œæ°´çš„å®½åº¦ ddd ä¸ºæœ€å¤§ï¼Œå…¶ä»–çš„ç»„åˆï¼Œæ°´çš„å®½åº¦éƒ½æ¯”è¿™ä¸ªå°ã€‚
- å·¦è¾¹æŸ±å­è¾ƒçŸ­ï¼Œå†³å®šäº†æ°´çš„é«˜åº¦ä¸º `3`ã€‚å¦‚æœç§»åŠ¨å·¦è¾¹çš„æŸ±å­ï¼Œæ–°çš„æ°´é¢é«˜åº¦ä¸ç¡®å®šï¼Œä¸€å®šä¸ä¼šè¶…è¿‡å³è¾¹çš„æŸ±å­é«˜åº¦ 7ã€‚
- å¦‚æœç§»åŠ¨å³è¾¹çš„æŸ±å­ï¼Œæ–°çš„æ°´é¢é«˜åº¦ä¸€å®šä¸ä¼šè¶…è¿‡å·¦è¾¹çš„æŸ±å­é«˜åº¦ `3`ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šè¶…è¿‡ç°åœ¨çš„æ°´é¢é«˜åº¦ã€‚

![image.jpg](https://cdn.nlark.com/yuque/0/2024/jpeg/1389077/1714622445083-b601c4d3-610f-4df6-be49-4dd24ca4010f.jpeg#averageHue=%23ede9e5&clientId=u9235c46d-065e-4&from=paste&id=ue8a472f3&originHeight=500&originWidth=1200&originalType=url&ratio=1&rotation=0&showTitle=false&size=76713&status=done&style=none&taskId=ua2393a4e-5439-4f35-aaf0-fe3d326ccbb&title=)
ç”±æ­¤å¯è§ï¼Œå¦‚æœå›ºå®šå·¦è¾¹çš„æŸ±å­ï¼Œç§»åŠ¨å³è¾¹çš„æŸ±å­ï¼Œé‚£ä¹ˆæ°´çš„é«˜åº¦ä¸€å®šä¸ä¼šå¢åŠ ï¼Œä¸”å®½åº¦ä¸€å®šå‡å°‘ï¼Œæ‰€ä»¥æ°´çš„é¢ç§¯ä¸€å®šå‡å°‘ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå·¦è¾¹çš„æŸ±å­å’Œä»»æ„ä¸€ä¸ªå…¶ä»–æŸ±å­çš„ç»„åˆï¼Œå…¶å®éƒ½å¯ä»¥æ’é™¤äº†ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥æ’é™¤æ‰å·¦è¾¹çš„æŸ±å­äº†ã€‚
è¿™ä¸ªæ’é™¤æ‰å·¦è¾¹æŸ±å­çš„æ“ä½œï¼Œå°±æ˜¯åŒæŒ‡é’ˆä»£ç é‡Œçš„ `i++`ã€‚`i` å’Œ `j` ä¸¤ä¸ªæŒ‡é’ˆä¸­é—´çš„åŒºåŸŸéƒ½æ˜¯è¿˜æœªæ’é™¤æ‰çš„åŒºåŸŸã€‚éšç€ä¸æ–­çš„æ’é™¤ï¼Œ`i` å’Œ `j` éƒ½ä¼šå¾€ä¸­é—´ç§»åŠ¨ã€‚å½“ `i` å’Œ `j` ç›¸é‡ï¼Œç®—æ³•å°±ç»“æŸäº†ã€‚

```java
public int maxArea(int[] height) {
    //åŒæŒ‡é’ˆè´ªå¿ƒç®—æ³•
    int left = 0;
    int right = height.length-1;
    int res  =0;
    while (left<right){
        if (height[left]<height[right]){
            //æ°´æ˜¯çŸ­æ¿æ•ˆåº”ã€‚
            //è¿™ä¸ªæ—¶å€™leftçš„æŸ±å­å°±æ˜¯ä»£è¡¨è¿™ä¸ªå®½åº¦é‡Œé¢æœ€å¤§é¢è¯•çš„æ°´äº†
            //æ— è®ºæ€ä¹ˆå³è¾¹æŸ±å­æ€ä¹ˆç§»åŠ¨ï¼Œæ°´åªèƒ½åˆ°leftè¿™ä¸ªé«˜åº¦ï¼Œè€Œä¸”å®½åº¦è¿˜ä¼šé™ä½
            res = Math.max(res,(right-left)*height[left]);
            left++;
        }else {
            res = Math.max(res,(right-left)*height[right]);
            right--;
        }
    }
    return res;
}
```
