---
author: MCXW
shortTitle: ç®—æ³•ç¬”è®°
---
Copyè‡ªï¼š[ç®—æ³•ç¬”è®°](ç®—æ³•ç¬”è®°.md) é‡æ–°ä¿®è®¢

è¯¥æ–‡æ¡£ä½œä¸ºç®—æ³•é¢˜é¢˜å½•ï¼Œåšè¿‡çš„æ¯”è¾ƒå¥½çš„éƒ½æ”¶å½•äºæ­¤ã€‚

# 758ã€å­—ç¬¦ä¸²ä¸­çš„åŠ ç²—å•è¯
ç»™å®šä¸€ä¸ªå…³é”®è¯é›†åˆ `words` å’Œä¸€ä¸ªå­—ç¬¦ä¸² `s`ã€‚
è¦æ±‚ï¼šåœ¨æ‰€æœ‰ `s` ä¸­å‡ºç°çš„å…³é”®è¯å‰åä½ç½®ä¸Šæ·»åŠ åŠ ç²—é—­åˆæ ‡ç­¾ `<b>` å’Œ `</b>`ã€‚å¦‚æœä¸¤ä¸ªå­ä¸²æœ‰é‡å éƒ¨åˆ†ï¼Œåˆ™å°†å®ƒä»¬ä¸€èµ·ç”¨ä¸€å¯¹é—­åˆæ ‡ç­¾åŒ…å›´èµ·æ¥ã€‚åŒç†ï¼Œå¦‚æœä¸¤ä¸ªå­å­—ç¬¦ä¸²è¿ç»­è¢«åŠ ç²—ï¼Œé‚£ä¹ˆä½ ä¹Ÿéœ€è¦æŠŠå®ƒä»¬åˆèµ·æ¥ç”¨ä¸€å¯¹åŠ ç²—æ ‡ç­¾åŒ…å›´ã€‚æœ€åè¿”å›æ·»åŠ åŠ ç²—æ ‡ç­¾åçš„å­—ç¬¦ä¸² `s`ã€‚

æ€è·¯ï¼š
å…ˆä½¿ç”¨ä¸€ä¸ªæ•°ç»„isBoldä¿å­˜Sä¸­çš„æ¯ä¸ªå­—ç¬¦æ˜¯å¦åº”è¯¥åŠ ç²—ï¼Œåˆ¤æ–­çš„æ–¹å¼æ˜¯ï¼Œéå†wordsä¸­çš„æ¯ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºSä¸­æœ‰å“ªäº›ä½ç½®å’Œå®ƒåŒ¹é…ã€‚
æ˜¯å¦å¢åŠ æ ‡ç­¾<b>çš„æ–¹æ³•æ˜¯å½“å‰å­—ç¬¦éœ€è¦åŠ ç²—ï¼Œä½†æ˜¯å…¶å‰é¢çš„å­—ç¬¦ä¸ç”¨åŠ ç²—ï¼Œæˆ–è€…å½“å‰å­—ç¬¦æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚ æ˜¯å¦å¢åŠ æ ‡ç­¾</b>çš„æ–¹æ³•æ˜¯å½“å‰å­—ç¬¦éœ€è¦åŠ ç²—ï¼Œä½†æ˜¯å…¶åé¢çš„å­—ç¬¦ä¸ç”¨åŠ ç²—ï¼Œæˆ–è€…å½“å‰å­—ç¬¦æ˜¯æœ€åä¸€ä¸ªå­—ç¬¦ã€‚

```java
public class Huawei {
    public static void main(String[] args) {
        String[] words = {"asas","dsw","12"};
        String s = "asasdsdasd12121";
        new Huawei().BoldWords(words,s);
    }
    static void BoldWords(String[] words,String s){
        int len = s.length();
        boolean[] isBold = new boolean[len+1];
        for (String word : words) {
            for (int i = 0; i < len-word.length(); i++) {
                String subs = s.substring(i, i+word.length());
                if (subs.equals(word)){
                    for (int j = i; j < i + word.length(); j++) {
                        isBold[j] = true;
                    }
                }
            }
        }
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < len; i++) {
            if (isBold[i]&&(i==0||!isBold[i-1])) sb.append("<br>");
            //å¦‚æœå½“å‰ä¸ºåŠ é†‹ï¼Œå‰é¢ä¸æ˜¯åŠ ç²—ï¼Œæˆ–è€…å‰é¢æ˜¯i==0ï¼›
            sb.append(s.charAt(i));
            if (isBold[i]&&(i==len-1||!isBold[i+1])) sb.append("</br>");
        }
        System.out.println(sb.toString());
    }
}

```
è¿è¡Œç»“æœï¼š
```latex
<br>asas</br>dsdasd<br>1212</br>1
```


# ä¸€ã€æ•°æ®ç»“æ„é—®é¢˜
## å­—ç¬¦ä¸²ç›¸å…³é—®é¢˜
> æ¯éš”8ä¸ªè¾“å‡ºä¸€ä¸‹

```java
String ss = sb.toString();
while (ss.length()>0) {
    System.out.println(ss.substring(0,8));
    ss = ss.substring(8);
}
```

### HJ4 å­—ç¬¦ä¸²åˆ†éš”
æè¿°
â€¢è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·æŒ‰é•¿åº¦ä¸º8æ‹†åˆ†æ¯ä¸ªè¾“å…¥å­—ç¬¦ä¸²å¹¶è¿›è¡Œè¾“å‡ºï¼›
â€¢é•¿åº¦ä¸æ˜¯8æ•´æ•°å€çš„å­—ç¬¦ä¸²è¯·åœ¨åé¢è¡¥æ•°å­—0ï¼Œç©ºå­—ç¬¦ä¸²ä¸å¤„ç†ã€‚
è¾“å…¥æè¿°ï¼š
è¿ç»­è¾“å…¥å­—ç¬¦ä¸²(æ¯ä¸ªå­—ç¬¦ä¸²é•¿åº¦å°äºç­‰äº100)
è¾“å‡ºæè¿°ï¼š
ä¾æ¬¡è¾“å‡ºæ‰€æœ‰åˆ†å‰²åçš„é•¿åº¦ä¸º8çš„æ–°å­—ç¬¦ä¸²
ç¤ºä¾‹1
è¾“å…¥ï¼š
```
abc
```

è¾“å‡ºï¼š
```
abc00000
```

```java
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        // æ³¨æ„ hasNext å’Œ hasNextLine çš„åŒºåˆ«
        while (in.hasNext()) { // æ³¨æ„ while å¤„ç†å¤šä¸ª case
            String s = in.next();
            StringBuilder sb = new StringBuilder();
            sb.append(s);
            int addZeroNum = 8-sb.length()%8;
            while (addZeroNum>0&&addZeroNum<8) {
                sb.append('0');
                addZeroNum--;
            }
            String ss = sb.toString();
            while (ss.length()>0) {
                System.out.println(ss.substring(0,8));
                ss = ss.substring(8);
            }
        }
    }
```

## æ•°ç»„é—®é¢˜

### 41. ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•´æ•°

ç»™ä½ ä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ `nums` ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­æ²¡æœ‰å‡ºç°çš„æœ€å°çš„æ­£æ•´æ•°ã€‚

è¯·ä½ å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(n)` å¹¶ä¸”åªä½¿ç”¨å¸¸æ•°çº§åˆ«é¢å¤–ç©ºé—´çš„è§£å†³æ–¹æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,0]
è¾“å‡ºï¼š3
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [3,4,-1,1]
è¾“å‡ºï¼š2
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [7,8,9,11,12]
è¾“å‡ºï¼š1
```

```java
class Solution {
    public int firstMissingPositive(int[] nums) {
        //æœ€å°çš„æ­£æ•´æ•°ï¼Œéå†
        int len = nums.length;
        for (int i = 0; i < len; i++) {
            while (nums[i]>0 && nums[i]<=len && nums[i]!=nums[nums[i]-1]){
                //  1 2 3 0 4
                //  - - - ! -
                // 4åº”è¯¥åœ¨ä¸‹æ ‡3çš„ä½ç½®
                int j = nums[i] - 1;
                int temp = nums[i];
                nums[i] = nums[j];
                nums[j] = temp;
            }
        }
        for (int i = 0; i < len; i++) {
            if (nums[i]!=i+1){
                return i+1;//å¦‚æœå½“å‰ä½ç½®ä¸å­˜åœ¨å¯¹åº”çš„åˆç†çš„å€¼ï¼Œå°±è¿”å›
            }
        }
        return len+1;
    }
}
```

### HJ3.**æ˜æ˜çš„éšæœºæ•°**

æè¿°

æ˜æ˜ç”Ÿæˆäº†ï¿½_N_ä¸ª1åˆ°500ä¹‹é—´çš„éšæœºæ•´æ•°ã€‚è¯·ä½ åˆ å»å…¶ä¸­é‡å¤çš„æ•°å­—ï¼Œå³ç›¸åŒçš„æ•°å­—åªä¿ç•™ä¸€ä¸ªï¼ŒæŠŠå…¶ä½™ç›¸åŒçš„æ•°å»æ‰ï¼Œç„¶åå†æŠŠè¿™äº›æ•°ä»å°åˆ°å¤§æ’åºï¼ŒæŒ‰ç…§æ’å¥½çš„é¡ºåºè¾“å‡ºã€‚

æ•°æ®èŒƒå›´ï¼š 1â‰¤ï¿½â‰¤1000 1â‰¤_n_â‰¤1000 ï¼Œè¾“å…¥çš„æ•°å­—å¤§å°æ»¡è¶³ 1â‰¤ï¿½ï¿½ï¿½â‰¤500 1â‰¤_v**a**l_â‰¤500

è¾“å…¥æè¿°ï¼š

ç¬¬ä¸€è¡Œå…ˆè¾“å…¥éšæœºæ•´æ•°çš„ä¸ªæ•° N ã€‚ æ¥ä¸‹æ¥çš„ N è¡Œæ¯è¡Œè¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼Œä»£è¡¨æ˜æ˜ç”Ÿæˆçš„éšæœºæ•°ã€‚ å…·ä½“æ ¼å¼å¯ä»¥å‚è€ƒä¸‹é¢çš„"ç¤ºä¾‹"ã€‚

è¾“å‡ºæè¿°ï¼š

è¾“å‡ºå¤šè¡Œï¼Œè¡¨ç¤ºè¾“å…¥æ•°æ®å¤„ç†åçš„ç»“æœ

ç¤ºä¾‹1

è¾“å…¥ï¼š

```
3
2
2
1
```

è¾“å‡ºï¼š

```
1
2
```

è¯´æ˜ï¼š

```
è¾“å…¥è§£é‡Šï¼š
ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯3ï¼Œä¹Ÿå³è¿™ä¸ªå°æ ·ä¾‹çš„N=3ï¼Œè¯´æ˜ç”¨è®¡ç®—æœºç”Ÿæˆäº†3ä¸ª1åˆ°500ä¹‹é—´çš„éšæœºæ•´æ•°ï¼Œæ¥ä¸‹æ¥æ¯è¡Œä¸€ä¸ªéšæœºæ•°å­—ï¼Œå…±3è¡Œï¼Œä¹Ÿå³è¿™3ä¸ªéšæœºæ•°å­—ä¸ºï¼š
2
2
1
æ‰€ä»¥æ ·ä¾‹çš„è¾“å‡ºä¸ºï¼š
1
2
```

```java
public class Main {
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        // æ³¨æ„ hasNext å’Œ hasNextLine çš„åŒºåˆ«
        while (in.hasNext()) { // æ³¨æ„ while å¤„ç†å¤šä¸ª case
            int n = in.nextInt();
            int[] nums = new int[501];
            for(int i = 0;i<n;i++){
                int next = in.nextInt();
                // System.out.println(next);
                nums[next] =1 ;
            }
            for(int i = 0;i<501;i++){
                if (nums[i]==1) {
                    System.out.println(i);
                }
            }
            
        }
    }
}
```

## é“¾è¡¨é—®é¢˜

> LRUç¼“å­˜ï¼š`**int oldestKey = cache.keySet().iterator().next();**`ï¼š è¿™ä¸€è¡Œä»£ç å®šä¹‰äº†ä¸€ä¸ªåä¸º`oldestKey`çš„æ•´å‹å˜é‡ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸º`cache`é”®é›†çš„ç¬¬ä¸€ä¸ªé”®ã€‚è¿™é‡Œçš„å˜é‡å`oldestKey`æš—ç¤ºç€è¿™ä¸ªé”®æ˜¯â€œæœ€æ—§â€çš„ï¼Œå¯èƒ½æ˜¯æŒ‰æ’å…¥é¡ºåºæ¥çœ‹çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨`LinkedHashMap`è¿™æ ·å¯ä»¥ä¿æŒæ’å…¥é¡ºåºçš„`Map`å®ç°æ—¶ã€‚ä¸è¿‡ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯`HashMap`ï¼Œåˆ™ä¸èƒ½ä¿è¯è¿™ä¸ªé”®æ˜¯æœ€æ—§çš„ï¼Œå› ä¸º`HashMap`ä¸ä¿è¯ä»»ä½•é¡ºåºã€‚


### [146. LRU ç¼“å­˜](https://leetcode.cn/problems/lru-cache/)

è¯·ä½ è®¾è®¡å¹¶å®ç°ä¸€ä¸ªæ»¡è¶³ [LRU (æœ€è¿‘æœ€å°‘ä½¿ç”¨) ç¼“å­˜](https://baike.baidu.com/item/LRU) çº¦æŸçš„æ•°æ®ç»“æ„ã€‚

å®ç° `LRUCache` ç±»ï¼š

- `LRUCache(int capacity)` ä»¥ **æ­£æ•´æ•°** ä½œä¸ºå®¹é‡ `capacity` åˆå§‹åŒ– LRU ç¼“å­˜
- `int get(int key)` å¦‚æœå…³é”®å­— `key` å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™è¿”å›å…³é”®å­—çš„å€¼ï¼Œå¦åˆ™è¿”å› `-1` ã€‚
- `void put(int key, int value)` å¦‚æœå…³é”®å­— `key` å·²ç»å­˜åœ¨ï¼Œåˆ™å˜æ›´å…¶æ•°æ®å€¼ `value` ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å‘ç¼“å­˜ä¸­æ’å…¥è¯¥ç»„ `key-value` ã€‚å¦‚æœæ’å…¥æ“ä½œå¯¼è‡´å…³é”®å­—æ•°é‡è¶…è¿‡ `capacity` ï¼Œåˆ™åº”è¯¥ **é€å‡º** æœ€ä¹…æœªä½¿ç”¨çš„å…³é”®å­—ã€‚

å‡½æ•° `get` å’Œ `put` å¿…é¡»ä»¥ `O(1)` çš„å¹³å‡æ—¶é—´å¤æ‚åº¦è¿è¡Œã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥
["LRUCache", "put", "put", "get", "put", "get", "put", "get", "get", "get"]
[[2], [1, 1], [2, 2], [1], [3, 3], [2], [4, 4], [1], [3], [4]]
è¾“å‡º
[null, null, null, 1, null, -1, null, -1, 3, 4]

è§£é‡Š
LRUCache lRUCache = new LRUCache(2);
lRUCache.put(1, 1); // ç¼“å­˜æ˜¯ {1=1}
lRUCache.put(2, 2); // ç¼“å­˜æ˜¯ {1=1, 2=2}
lRUCache.get(1);    // è¿”å› 1
lRUCache.put(3, 3); // è¯¥æ“ä½œä¼šä½¿å¾—å…³é”®å­— 2 ä½œåºŸï¼Œç¼“å­˜æ˜¯ {1=1, 3=3}
lRUCache.get(2);    // è¿”å› -1 (æœªæ‰¾åˆ°)
lRUCache.put(4, 4); // è¯¥æ“ä½œä¼šä½¿å¾—å…³é”®å­— 1 ä½œåºŸï¼Œç¼“å­˜æ˜¯ {4=4, 3=3}
lRUCache.get(1);    // è¿”å› -1 (æœªæ‰¾åˆ°)
lRUCache.get(3);    // è¿”å› 3
lRUCache.get(4);    // è¿”å› 4
```

è¦è®© put å’Œ get æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡º cache è¿™ä¸ªæ•°æ®ç»“æ„å¿…è¦çš„æ¡ä»¶ï¼š

1ã€æ˜¾ç„¶ cache ä¸­çš„å…ƒç´ å¿…é¡»æœ‰æ—¶åºï¼Œä»¥åŒºåˆ†æœ€è¿‘ä½¿ç”¨çš„å’Œä¹…æœªä½¿ç”¨çš„æ•°æ®ï¼Œå½“å®¹é‡æ»¡äº†ä¹‹åè¦åˆ é™¤æœ€ä¹…æœªä½¿ç”¨çš„é‚£ä¸ªå…ƒç´ è…¾ä½ç½®ã€‚

2ã€æˆ‘ä»¬è¦åœ¨ cache ä¸­å¿«é€Ÿæ‰¾æŸä¸ª key æ˜¯å¦å·²å­˜åœ¨å¹¶å¾—åˆ°å¯¹åº”çš„ valï¼›

3ã€æ¯æ¬¡è®¿é—® cache ä¸­çš„æŸä¸ª keyï¼Œéœ€è¦å°†è¿™ä¸ªå…ƒç´ å˜ä¸ºæœ€è¿‘ä½¿ç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ cache è¦æ”¯æŒåœ¨ä»»æ„ä½ç½®å¿«é€Ÿæ’å…¥å’Œåˆ é™¤å…ƒç´ ã€‚

é‚£ä¹ˆï¼Œä»€ä¹ˆæ•°æ®ç»“æ„åŒæ—¶ç¬¦åˆä¸Šè¿°æ¡ä»¶å‘¢ï¼Ÿ**å“ˆå¸Œè¡¨æŸ¥æ‰¾å¿«ï¼Œä½†æ˜¯æ•°æ®æ— å›ºå®šé¡ºåºï¼›é“¾è¡¨æœ‰é¡ºåºä¹‹åˆ†ï¼Œæ’å…¥åˆ é™¤å¿«ï¼Œä½†æ˜¯æŸ¥æ‰¾æ…¢ã€‚**æ‰€ä»¥ç»“åˆä¸€ä¸‹ï¼Œå½¢æˆä¸€ç§æ–°çš„æ•°æ®ç»“æ„ï¼š`å“ˆå¸Œé“¾è¡¨ LinkedHashMap`ã€‚

```java
class LRUCache {
    int cap;
    LinkedHashMap<Integer,Integer> cache = new LinkedHashMap<>();
    public LRUCache(int capacity) {
        this.cap = capacity;
    }
    
    public int get(int key) {
        if(!cache.containsKey(key)){
            return -1;
        }
        int val = cache.get(key);
        cache.remove(key);
        cache.put(key,val);//å†æ¬¡æ’å…¥å°±å®ç°äº†æœ€æ–°çš„ä½¿ç”¨çš„æ ‡è®°
        return cache.get(key);
    }
    
    public void put(int key, int value) {
        if(cache.containsKey(key)){
            cache.put(key,value);
            int val = cache.get(key);
            cache.remove(key);
            cache.put(key,val);//å†æ¬¡æ’å…¥
            return;
        }
        if(cache.size()>=cap){
            //ä½¿ç”¨iterator()æ–¹æ³•è·å–è¿­ä»£å™¨ï¼Œå¯ä»¥éå†é›†åˆä¸­çš„å…ƒç´ ã€‚next()æ–¹æ³•ç”¨äºè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå³è·å–æœ€æ—©çš„é”®ã€‚
            int oldestKey = cache.keySet().iterator().next();
            cache.remove(oldestKey);
        }
        cache.put(key,value);
        return;
    }
}
```

> ç”¨ LinkedHashMap å¯ä»¥å¾ˆå®¹æ˜“å®ç° LRU ç¼“å­˜ï¼Œä¸è¿‡é¢è¯•çš„æ—¶å€™ä¼°è®¡è¿™æ ·ä¸å¥½ï¼Œè¿˜æ˜¯å°½é‡è‡ªå·±å®ç°æ•°æ®ç»“æ„å§ğŸ¤£
>  
> ä¸»è¦æƒ³æ³•æ˜¯ä½¿ç”¨ JDK æä¾›çš„ HashMapï¼Œç„¶åè‡ªå·±å†™ä¸€ä¸ª Node èŠ‚ç‚¹ç±»ï¼Œç”¨æ¥ä¿å­˜ value ï¼Œå¹¶ä¸”é€šè¿‡è¿™ä¸ª Node é‡Œé¢çš„ prevã€next æŒ‡é’ˆå°†å„ä¸ªå€¼ä¸²è”èµ·æ¥ï¼Œè¿™æ ·å°±ç»´æŠ¤äº†é¡ºåºã€‚
>  
> å¾ˆé‡è¦çš„ä¸€ä¸ªç»†èŠ‚æ˜¯ï¼ŒNode é‡Œé¢è¿˜è¦åŠ ä¸Š key ï¼ˆå°½ç®¡ HashMap æœ¬æ¥å°±å­˜äº†ä¸€ä»½ï¼‰ã€‚
>  
> åŸå› æ˜¯å½“ç¼“å­˜è¾¾åˆ°å®¹é‡ä¸Šé™æ—¶ï¼Œå°±è¦å…ˆç§»é™¤å°¾éƒ¨çš„èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœåªç§»é™¤é“¾è¡¨çš„ tail èŠ‚ç‚¹ï¼Œå¿½ç•¥äº† HasmMap ä¹Ÿè¦ remove ï¼Œåé¢å†è®¿é—®è¿™ä¸ªè¢«ç§»é™¤çš„ key å°±ä¼šé€ æˆç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ï¼ï¼
>  
> æ‰€ä»¥æˆ‘ä»¬åœ¨ Node èŠ‚ç‚¹é‡Œé¢åŠ ä¸Š key ï¼Œåˆ æ‰ tail ä¹‹å‰å…ˆ remove æ‰ HasmMap çš„è¿™ä¸ª keyï¼Œå°±å¾ˆæ–¹ä¾¿äº†ã€‚
>  
> ä¸é€‚ç”¨LinkedList:
>  

```java
import java.util.*;
public class Solution {
    private int capacity;
    private Map<Integer,Node> map;
    private Node head;
    private Node tail;
    private int used;
    class Node{
        int key;
        int value;
        Node prev;
        Node next;
        Node(int key,int value,Node prev,Node next){
            this.key = key;
            this.value = value;
            this.prev = prev;
            this.next = next;
        }
    }
 public Solution(int capacity) {
    //æ„é€ å‡½æ•°
    this.capacity = capacity;
    this.map =  new HashMap<>();
    this.used= 0;
 }
 public int get(int key) {
 // write code here
    if(!map.containsKey(key)){
        return -1;
    }
    makeRecently(key);
    return map.get(key).value;
 }
 public void set(int key, int value) {
 // write code here
    if(map.containsKey(key)){
        map.get(key).value = value;
        makeRecently(key);
        return;
    }
    if(used==capacity){
        map.remove(tail.key);
        tail = tail.prev;
        tail.next = null;
        used--;
    }
    if(head==null){
        head = new Node(key,value,null,null);
        tail = head;
    }
    else{
        //headä¸ä¸ºç©º
        Node t = new Node(key,value,null,head);
        head.prev = t;
        head = t;
    }
    map.put(key,head);
    used++;
 }
 private void makeRecently(int key){
    Node t = map.get(key);
    if(t!=head){
        if(t==tail){
            tail = tail.prev;
            tail.next = null;
        }else{
            t.prev.next = t.next;//å°†tè·³è¿‡äº†
            t.next.prev = t.prev;//å°†nextçš„å‘å‰æŒ‡çš„é¡ºåºçº æ­£
        }
        t.prev = null;
        t.next = head;
        head.prev = t;
        head =t;
    }
 }
}
```

### å®ç°ä¸€ä¸ªcacheï¼ŒåŒ…æ‹¬LRUç®—æ³•å’Œåœ¨xç§’åè¿‡æœŸ

```java
import java.util.LinkedHashMap;  
import java.util.Map;  
import java.util.concurrent.ScheduledExecutorService;  
import java.util.concurrent.Executors;  
import java.util.concurrent.TimeUnit;  
  
public class LRUCacheWithExpiration<K, V> {  
    // ç¼“å­˜çš„æœ€å¤§å®¹é‡  
    private final int capacity;  
    // ç¼“å­˜é¡¹çš„è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰  
    private final long expirationTimeInSeconds;  
    // ä½¿ç”¨LinkedHashMapå®ç°LRUç¼“å­˜ï¼ŒaccessOrderè®¾ç½®ä¸ºtrueä»¥å¯ç”¨LRUé¡ºåº  
    private final LinkedHashMap<K, CacheEntry<V>> cacheMap;  
    // å®šæ—¶ä»»åŠ¡æ‰§è¡Œå™¨ï¼Œç”¨äºæ¸…ç†è¿‡æœŸçš„ç¼“å­˜é¡¹  
    private final ScheduledExecutorService expirationExecutor;  
  
    // å†…éƒ¨ç±»CacheEntryï¼Œç”¨äºå­˜å‚¨ç¼“å­˜å€¼å’Œè¿‡æœŸæ—¶é—´  
    private static class CacheEntry<V> {  
        V value;  
        long expirationTime;  
  
        CacheEntry(V value, long expirationTime) {  
            this.value = value;  
            this.expirationTime = expirationTime;  
        }  
    }  
  
    // æ„é€ å‡½æ•°  
    public LRUCacheWithExpiration(int capacity, long expirationTimeInSeconds) {  
        this.capacity = capacity;  
        this.expirationTimeInSeconds = expirationTimeInSeconds;  
        // åˆå§‹åŒ–LRUç¼“å­˜ï¼Œè®¾ç½®accessOrderä¸ºtrueï¼Œä»¥ä¾¿æŒ‰è®¿é—®é¡ºåºè¿›è¡ŒLRUæ“ä½œ  
        this.cacheMap = new LinkedHashMap<>(capacity, 0.75f, true) {  
            // é‡å†™removeEldestEntryæ–¹æ³•ï¼Œå½“Mapå¤§å°è¶…è¿‡æŒ‡å®šå®¹é‡æ—¶ï¼Œåˆ é™¤æœ€è€çš„å…ƒç´   
            @Override  
            protected boolean removeEldestEntry(Map.Entry<K, CacheEntry<V>> eldest) {  
                return size() > LRUCacheWithExpiration.this.capacity;  
            }  
        };  
        // åˆå§‹åŒ–å®šæ—¶ä»»åŠ¡æ‰§è¡Œå™¨  
        this.expirationExecutor = Executors.newSingleThreadScheduledExecutor();  
        // å®‰æ’å®šæ—¶ä»»åŠ¡ï¼Œæ¯éš”expirationTimeInSecondsç§’æ‰§è¡Œä¸€æ¬¡æ¸…ç†è¿‡æœŸç¼“å­˜é¡¹çš„æ“ä½œ  
        this.expirationExecutor.scheduleAtFixedRate(this::evictExpiredEntries, expirationTimeInSeconds, expirationTimeInSeconds, TimeUnit.SECONDS);  
    }  
  
    // è·å–ç¼“å­˜é¡¹  
    public synchronized V get(K key) {  
        CacheEntry<V> entry = cacheMap.get(key);  
        if (entry == null || isExpired(entry.expirationTime)) {  
            // ç¼“å­˜é¡¹ä¸å­˜åœ¨æˆ–å·²è¿‡æœŸï¼Œè¿”å›null  
            return null;  
        }  
        // æ›´æ–°ç¼“å­˜é¡¹çš„è®¿é—®é¡ºåºï¼ˆç§»åˆ°å°¾éƒ¨ï¼Œè¡¨ç¤ºæœ€è¿‘è®¿é—®ï¼‰  
        cacheMap.remove(key);  
        cacheMap.put(key, entry);  
        // è¿”å›ç¼“å­˜å€¼  
        return entry.value;  
    }  
  
    // æ·»åŠ æˆ–æ›´æ–°ç¼“å­˜é¡¹  
    public synchronized void put(K key, V value) {  
        // åˆ›å»ºæ–°çš„ç¼“å­˜é¡¹ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´  
        CacheEntry<V> newEntry = new CacheEntry<>(value, System.currentTimeMillis() + (expirationTimeInSeconds * 1000));  
        // å°†æ–°çš„ç¼“å­˜é¡¹æ·»åŠ åˆ°LRUç¼“å­˜ä¸­ï¼Œå¦‚æœç¼“å­˜å·²æ»¡ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ é™¤æœ€è€çš„å…ƒç´   
        cacheMap.put(key, newEntry);  
    }  
  
    // æ¸…ç†è¿‡æœŸç¼“å­˜é¡¹çš„æ–¹æ³•  
    private void evictExpiredEntries() {  
        long currentTime = System.currentTimeMillis();  
        // éå†ç¼“å­˜ï¼Œç§»é™¤å·²è¿‡æœŸçš„ç¼“å­˜é¡¹  
        cacheMap.entrySet().removeIf(entry -> isExpired(entry.getValue().expirationTime));  
    }  
  
    // åˆ¤æ–­ç¼“å­˜é¡¹æ˜¯å¦è¿‡æœŸ  
    private boolean isExpired(long expirationTime) {  
        return expirationTime <= System.currentTimeMillis();  
    }  
  
    // å…³é—­ç¼“å­˜ï¼Œåœæ­¢å®šæ—¶ä»»åŠ¡æ‰§è¡Œå™¨  
    public void close() {  
        expirationExecutor.shutdown();  
        try {  
            if (!expirationExecutor.awaitTermination(60, TimeUnit.SECONDS)) {  
                expirationExecutor.shutdownNow();  
            }  
        } catch (InterruptedException e) {  
            expirationExecutor.shutdownNow();  
            Thread.currentThread().interrupt();  
        }  
    }  
}
```

### [61. æ—‹è½¬é“¾è¡¨](https://leetcode.cn/problems/rotate-list/)

ç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ï¼Œæ—‹è½¬é“¾è¡¨ï¼Œå°†é“¾è¡¨æ¯ä¸ªèŠ‚ç‚¹å‘å³ç§»åŠ¨ `k` ä¸ªä½ç½®ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/rotate1.jpg#id=bmYtW&originHeight=302&originWidth=712&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šhead = [1,2,3,4,5], k = 2
è¾“å‡ºï¼š[4,5,1,2,3]
```

```java
class Solution {
    public ListNode rotateRight(ListNode head, int k) {
        if(head==null) return head;
        int n = 1;
        ListNode tail = head;
        while(tail.next!=null){
            tail = tail.next;
            n++;// length
        }
        k = k%n;//é˜²æ­¢é‡å¤ç§»åŠ¨
        if(k<1) return head;
        ListNode fast = head;
        ListNode slow = head;
        while(k-->0){
            fast = fast.next;
        }
        
        while(fast.next!=null){
            fast= fast.next;
            slow = slow.next;
        }
        ListNode newHead = slow.next;
        slow.next = null;
        tail.next = head;
        return newHead;
    }
}
```

### [138. éšæœºé“¾è¡¨çš„å¤åˆ¶](https://leetcode.cn/problems/copy-list-with-random-pointer/)

ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„é“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸€ä¸ªé¢å¤–å¢åŠ çš„éšæœºæŒ‡é’ˆ `random` ï¼Œè¯¥æŒ‡é’ˆå¯ä»¥æŒ‡å‘é“¾è¡¨ä¸­çš„ä»»ä½•èŠ‚ç‚¹æˆ–ç©ºèŠ‚ç‚¹ã€‚

æ„é€ è¿™ä¸ªé“¾è¡¨çš„ [**æ·±æ‹·è´**](https://baike.baidu.com/item/%E6%B7%B1%E6%8B%B7%E8%B4%9D/22785317?fr=aladdin)ã€‚ æ·±æ‹·è´åº”è¯¥æ­£å¥½ç”± `n` ä¸ª **å…¨æ–°** èŠ‚ç‚¹ç»„æˆï¼Œå…¶ä¸­æ¯ä¸ªæ–°èŠ‚ç‚¹çš„å€¼éƒ½è®¾ä¸ºå…¶å¯¹åº”çš„åŸèŠ‚ç‚¹çš„å€¼ã€‚æ–°èŠ‚ç‚¹çš„ `next` æŒ‡é’ˆå’Œ `random` æŒ‡é’ˆä¹Ÿéƒ½åº”æŒ‡å‘å¤åˆ¶é“¾è¡¨ä¸­çš„æ–°èŠ‚ç‚¹ï¼Œå¹¶ä½¿åŸé“¾è¡¨å’Œå¤åˆ¶é“¾è¡¨ä¸­çš„è¿™äº›æŒ‡é’ˆèƒ½å¤Ÿè¡¨ç¤ºç›¸åŒçš„é“¾è¡¨çŠ¶æ€ã€‚**å¤åˆ¶é“¾è¡¨ä¸­çš„æŒ‡é’ˆéƒ½ä¸åº”æŒ‡å‘åŸé“¾è¡¨ä¸­çš„èŠ‚ç‚¹** ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœåŸé“¾è¡¨ä¸­æœ‰ `X` å’Œ `Y` ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå…¶ä¸­ `X.random --> Y` ã€‚é‚£ä¹ˆåœ¨å¤åˆ¶é“¾è¡¨ä¸­å¯¹åº”çš„ä¸¤ä¸ªèŠ‚ç‚¹ `x` å’Œ `y` ï¼ŒåŒæ ·æœ‰ `x.random --> y` ã€‚

è¿”å›å¤åˆ¶é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚

ç”¨ä¸€ä¸ªç”± `n` ä¸ªèŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨æ¥è¡¨ç¤ºè¾“å…¥/è¾“å‡ºä¸­çš„é“¾è¡¨ã€‚æ¯ä¸ªèŠ‚ç‚¹ç”¨ä¸€ä¸ª `[val, random_index]` è¡¨ç¤ºï¼š

- `val`ï¼šä¸€ä¸ªè¡¨ç¤º `Node.val` çš„æ•´æ•°ã€‚
- `random_index`ï¼šéšæœºæŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹ç´¢å¼•ï¼ˆèŒƒå›´ä» `0` åˆ° `n-1`ï¼‰ï¼›å¦‚æœä¸æŒ‡å‘ä»»ä½•èŠ‚ç‚¹ï¼Œåˆ™ä¸º `null` ã€‚

ä½ çš„ä»£ç  **åª** æ¥å—åŸé“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ä½œä¸ºä¼ å…¥å‚æ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/e1.png#id=z1UVT&originHeight=386&originWidth=1900&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šhead = [[7,null],[13,0],[11,4],[10,2],[1,0]]
è¾“å‡ºï¼š[[7,null],[13,0],[11,4],[10,2],[1,0]]
```

åˆ©ç”¨å“ˆå¸Œè¡¨çš„æŸ¥è¯¢ç‰¹ç‚¹ï¼Œè€ƒè™‘æ„å»º åŸé“¾è¡¨èŠ‚ç‚¹ å’Œ æ–°é“¾è¡¨å¯¹åº”èŠ‚ç‚¹ çš„é”®å€¼å¯¹æ˜ å°„å…³ç³»ï¼Œå†éå†æ„å»ºæ–°é“¾è¡¨å„èŠ‚ç‚¹çš„ next å’Œ random å¼•ç”¨æŒ‡å‘å³å¯ã€‚

ç®—æ³•æµç¨‹ï¼š

- è‹¥å¤´èŠ‚ç‚¹ head ä¸ºç©ºèŠ‚ç‚¹ï¼Œç›´æ¥è¿”å› null ã€‚
- åˆå§‹åŒ–ï¼š å“ˆå¸Œè¡¨ dic ï¼Œ èŠ‚ç‚¹ cur æŒ‡å‘å¤´èŠ‚ç‚¹ã€‚
- å¤åˆ¶é“¾è¡¨ï¼š
å»ºç«‹æ–°èŠ‚ç‚¹ï¼Œå¹¶å‘ dic æ·»åŠ é”®å€¼å¯¹ (åŸ cur èŠ‚ç‚¹, æ–° cur èŠ‚ç‚¹ï¼‰ ã€‚
cur éå†è‡³åŸé“¾è¡¨ä¸‹ä¸€èŠ‚ç‚¹ã€‚
- æ„å»ºæ–°é“¾è¡¨çš„å¼•ç”¨æŒ‡å‘ï¼š
æ„å»ºæ–°èŠ‚ç‚¹çš„ next å’Œ random å¼•ç”¨æŒ‡å‘ã€‚
cur éå†è‡³åŸé“¾è¡¨ä¸‹ä¸€èŠ‚ç‚¹ã€‚
- è¿”å›å€¼ï¼š æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹ dic[cur] ã€‚

```java
class Solution {
    public Node copyRandomList(Node head) {
        if(head==null) return null;
        Node cur = head;
        Map<Node,Node> map = new HashMap<>();
        while(cur!=null){
            //map storage the new Node
            map.put(cur,new Node(cur.val));
            cur = cur.next;
        }
        cur = head;
        while(cur!=null){
            map.get(cur).next = map.get(cur.next);
            map.get(cur).random = map.get(cur.random);
            cur = cur.next;
        }
        return map.get(head);
    }
}
```

### [å‰‘æŒ‡ Offer II 025. é“¾è¡¨ä¸­çš„ä¸¤æ•°ç›¸åŠ ](https://leetcode.cn/problems/lMSNwu/)

ç»™å®šä¸¤ä¸ª **éç©ºé“¾è¡¨** `l1`å’Œ `l2` æ¥ä»£è¡¨ä¸¤ä¸ªéè´Ÿæ•´æ•°ã€‚æ•°å­—æœ€é«˜ä½ä½äºé“¾è¡¨å¼€å§‹ä½ç½®ã€‚å®ƒä»¬çš„æ¯ä¸ªèŠ‚ç‚¹åªå­˜å‚¨ä¸€ä½æ•°å­—ã€‚å°†è¿™ä¸¤æ•°ç›¸åŠ ä¼šè¿”å›ä¸€ä¸ªæ–°çš„é“¾è¡¨ã€‚

å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°å­—éƒ½ä¸ä¼šä»¥é›¶å¼€å¤´ã€‚

**ç¤ºä¾‹1ï¼š**

![image.png](https://cdn.nlark.com/yuque/0/2024/png/1389077/1715474951264-007e6f63-e6f1-4523-be84-8beadab56301.png#averageHue=%23f3f3f3&clientId=u3a18be3a-46a6-4&id=dKGpc&originHeight=342&originWidth=523&originalType=binary&ratio=1&rotation=0&showTitle=false&size=32741&status=done&style=none&taskId=ue2088a6f-5d0d-4adf-a1e6-650ab01b41b&title=)

```
è¾“å…¥ï¼šl1 = [7,2,4,3], l2 = [5,6,4]
è¾“å‡ºï¼š[7,8,0,7]
```

```java
class Solution {
    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {
//        ä½¿ç”¨ä¸¤ä¸ªè¾…åŠ©æ ˆ
        ArrayDeque<Integer> stk1 = new ArrayDeque<>();
        ArrayDeque<Integer> stk2 = new ArrayDeque<>();
        while (l1!=null){
            stk1.push(l1.val);
            l1 = l1.next;
        }
        while (l2!=null){
            stk2.push(l2.val);
            l2 = l2.next;
        }
        int carry = 0;//å‚¨å­˜è¿›ä½
        ListNode res = null;//å‚¨å­˜ç»“æœ
        while (!stk1.isEmpty()||!stk2.isEmpty()||carry!=0) {
            int digit1 = stk1.isEmpty()?0:stk1.pop();
            int digit2 = stk2.isEmpty()?0:stk2.pop();
            int sum = digit1+digit2+carry;
            carry = sum/10;
            sum = sum%10;
            ListNode tmp = new ListNode(sum);
            tmp.next = res;
            res = tmp;
        }
        return res;
    }
}
```

### [25. K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨](https://leetcode.cn/problems/reverse-nodes-in-k-group/)
ç»™ä½ é“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ï¼Œæ¯ `k` ä¸ªèŠ‚ç‚¹ä¸€ç»„è¿›è¡Œç¿»è½¬ï¼Œè¯·ä½ è¿”å›ä¿®æ”¹åçš„é“¾è¡¨ã€‚
`k` æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºé“¾è¡¨çš„é•¿åº¦ã€‚å¦‚æœèŠ‚ç‚¹æ€»æ•°ä¸æ˜¯ `k` çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆè¯·å°†æœ€åå‰©ä½™çš„èŠ‚ç‚¹ä¿æŒåŸæœ‰é¡ºåºã€‚
ä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚
**ç¤ºä¾‹ 1ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/reverse_ex1.jpg#id=WF3kZ&originHeight=222&originWidth=542&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šhead = [1,2,3,4,5], k = 2
è¾“å‡ºï¼š[2,1,4,3,5]
```

```java
class Solution {
    public ListNode reverseKGroup(ListNode head, int k) {
        if (head==null||head.next ==null) return head;
        ListNode tail = head;
        for(int i = 0;i<k;i++){
            if(tail==null) return head;
            tail = tail.next;
        }
        ListNode newHead = reverse(head,tail);
        head.next = reverseKGroup(tail,k);//è¿™ä¸ªæ—¶å€™çš„headå°±æ˜¯åè½¬å¥½çš„é˜Ÿå°¾äº†
        return newHead;
    }
    private ListNode reverse(ListNode head,ListNode tail){
        ListNode prev = null;
        ListNode next = null;
        while(head!=tail){
            next = head.next;
            head.next = prev;
            prev = head;
            head = next;
        }
        return prev;//è¿”å›å¤´éƒ¨ï¼Œå°±æ˜¯åè½¬çš„å¤´éƒ¨äº†
    }
}
```

![](https://cdn.jsdelivr.net/gh/52chen/imagebed2023@main/picgo/image-20240320134441671.png#id=o3Znu&originHeight=474&originWidth=828&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

### [å‰‘æŒ‡ Offer II 026. é‡æ’é“¾è¡¨](https://leetcode.cn/problems/LGjMqU/)

ç»™å®šä¸€ä¸ªå•é“¾è¡¨ `L` çš„å¤´èŠ‚ç‚¹ `head` ï¼Œå•é“¾è¡¨ `L` è¡¨ç¤ºä¸ºï¼š

`L0 â†’ L1 â†’ â€¦ â†’ Ln-1 â†’ Ln`
è¯·å°†å…¶é‡æ–°æ’åˆ—åå˜ä¸ºï¼š

```
L0 â†’ Ln â†’ L1 â†’ Ln-1 â†’ L2 â†’ Ln-2 â†’ â€¦
```

ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…çš„è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚
**ç¤ºä¾‹ 1:**

![](https://pic.leetcode-cn.com/1626420311-PkUiGI-image.png#id=G9bQk&originHeight=222&originWidth=422&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥: head = [1,2,3,4]
è¾“å‡º: [1,4,2,3]
```

```java
class Solution {
    public void reorderList(ListNode head) {
        ////å°†ä¸»é“¾è¡¨åˆ’åˆ†ä¸º å‰ä¸€æ®µå­é“¾è¡¨å’Œåä¸€æ®µå­é“¾è¡¨ï¼Œ
        // å¯¹äºåä¸€æ®µå­é“¾è¡¨è¿›è¡Œç¿»è½¬ï¼ŒåŒæ—¶å¯¹äºè¿™ä¸¤æ¡é“¾è¡¨è¿›è¡Œé‡æ„;
        ArrayDeque<ListNode> deque = new ArrayDeque<ListNode>();
        ListNode dummy = new ListNode(-1);
        dummy.next = head;
        while (head!=null) {
            ListNode next = head.next;
            head.next = null;
            deque.add(head);
            head = next;
        }
        ListNode curr = dummy;
        while (!deque.isEmpty()) {
            ListNode start = deque.pollFirst();
            curr.next = start;
            //å¾ªç¯éå†dequeåŒç«¯ï¼Œç›´è‡³é˜Ÿåˆ—ä¸ºç©º
            if (!deque.isEmpty()){
                ListNode last = deque.pollLast();
                start.next = last;//curr-ã€‹start-ã€‹last
                curr = last;//currä¸“ç¨‹last
            }else {
                start.next = null;
            }
        }
        return;
    }
}
```

### ä¸¤ä¸ªé“¾è¡¨åˆå¹¶

```java
public ListNode mergeTwoLists(ListNode a, ListNode b) {
    if (a == null || b == null) {
        return a != null ? a : b;
    }
    ListNode head = new ListNode(0);
    ListNode tail = head, la = a, lb = b;
    while (la != null && lb != null) {
        if (la.val < lb.val) {
            tail.next = la;
            la = la.next;
        } else {
            tail.next = lb;
            lb = lb.next;
        }
        tail = tail.next;
    }
    tail.next = (la != null ? la : lb);
    return head.next;
}
```

> å¤šä¸ªé“¾è¡¨åˆå¹¶å¯ä»¥éå†ï¼Œ
>  

```java
public ListNode mergeKLists(ListNode[] lists) {
    ListNode ans = null;
    for (ListNode list : lists) {
        ans = mergeTwoLists(ans,list);
    }
    return ans;
}
```

### [92. åè½¬é“¾è¡¨ II](https://leetcode.cn/problems/reverse-linked-list-ii/)

ç»™ä½ å•é“¾è¡¨çš„å¤´æŒ‡é’ˆ `head` å’Œä¸¤ä¸ªæ•´æ•° `left` å’Œ `right` ï¼Œå…¶ä¸­ `left <= right` ã€‚è¯·ä½ åè½¬ä»ä½ç½® `left` åˆ°ä½ç½® `right` çš„é“¾è¡¨èŠ‚ç‚¹ï¼Œè¿”å› **åè½¬åçš„é“¾è¡¨** ã€‚

**ç¤ºä¾‹ 1ï¼š**
![](https://raw.githubusercontent.com/52chen/imagebed2023/main/rev2ex2.jpg#id=bT9HK&originHeight=222&originWidth=542&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šhead = [1,2,3,4,5], left = 2, right = 4
è¾“å‡ºï¼š[1,4,3,2,5]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šhead = [5], left = 1, right = 1
è¾“å‡ºï¼š[5]
```

**æç¤ºï¼š**

- é“¾è¡¨ä¸­èŠ‚ç‚¹æ•°ç›®ä¸º `n`
- `1 <= n <= 500`
- `-500 <= Node.val <= 500`
- `1 <= left <= right <= n`

```java
class Solution {
    public ListNode reverseBetween(ListNode head, int left, int right) {
        ListNode dummy = new ListNode(-1,head);
        ListNode prev = dummy;
        ListNode curr = head;

        //ç›´æ¥æ‰¾åˆ°å¯¹åº”çš„ä½ç½®ï¼Œç„¶åå†åˆ‡æ–­å†åè½¬å†æ¥ä¸Š
        for (int i = 1; i < left; i++) {
            prev = curr;
            curr = curr.next;
        }
        for (int i = 0; i < right - left; i++) {
            ListNode tmp = curr.next;
            curr.next = tmp.next;//curræŒ‡å‘tmpåé¢
            tmp.next = prev.next;//æŠŠtmpæ¥é¾™ï¼Œæ¥åˆ°è¦é€†å‘çš„prevçš„åé¢
            prev.next = tmp;//è¿™ä¸‰éƒ¨=éƒ¨åˆ†ä¸èƒ½è°ƒæ¢é¡ºåºï¼Œå› ä¸ºcurrè¦ç”¨tmp
            //tmpè¦ç”¨prevï¼Œæœ€åæ‰å¯ä»¥åˆ‡æ¢prevçš„next
        }
        return dummy.next;
    }

}
```

### ä¸¤ä¸¤äº¤æ¢é“¾è¡¨
ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œä¸¤ä¸¤äº¤æ¢å…¶ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚ä½ å¿…é¡»åœ¨ä¸ä¿®æ”¹èŠ‚ç‚¹å†…éƒ¨çš„å€¼çš„æƒ…å†µä¸‹å®Œæˆæœ¬é¢˜ï¼ˆå³ï¼Œåªèƒ½è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ï¼‰ã€‚
**ç¤ºä¾‹ 1ï¼š**
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1389077/1714876109933-7fa8e0af-facf-433a-b974-57769ebd91ba.png#averageHue=%23f5f5f5&clientId=uae8ec878-cd5c-4&from=paste&id=u95f8df60&originHeight=222&originWidth=422&originalType=url&ratio=2&rotation=0&showTitle=false&size=36253&status=done&style=none&taskId=ufbe88286-0066-4003-a348-0e7f34819b2&title=)
```
è¾“å…¥ï¼šhead = [1,2,3,4]
è¾“å‡ºï¼š[2,1,4,3]
```
**ç¤ºä¾‹ 2ï¼š**
![](https://cdn.nlark.com/yuque/0/2024/jpeg/1389077/1714876219992-f689ea3c-7742-4ce9-958a-1cb17d403f3b.jpeg)
```java
public ListNode swapPairs(ListNode head) {
    ListNode dummy = new ListNode(-1,head);
    ListNode prev = dummy;
    ListNode cur = head;
    while (cur!=null&&cur.next!=null){
        ListNode tmp = cur.next.next;
        prev.next = cur.next;
        cur.next.next = cur;
        cur.next = tmp;
        cur = cur.next;
        prev = prev.next.next;
    }
    return dummy.next;
}
```
## æ ˆçš„ä½¿ç”¨



### é€†æ³¢å…°ç®—æ³•

### [å‰‘æŒ‡ Offer II 036. åç¼€è¡¨è¾¾å¼](https://leetcode.cn/problems/8Zf90G/)

æ ¹æ®[ é€†æ³¢å…°è¡¨ç¤ºæ³•](https://baike.baidu.com/item/%E9%80%86%E6%B3%A2%E5%85%B0%E5%BC%8F/128437)ï¼Œæ±‚è¯¥åç¼€è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœã€‚

æœ‰æ•ˆçš„ç®—ç¬¦åŒ…æ‹¬ `+`ã€`-`ã€`*`ã€`/` ã€‚æ¯ä¸ªè¿ç®—å¯¹è±¡å¯ä»¥æ˜¯æ•´æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªé€†æ³¢å…°è¡¨è¾¾å¼ã€‚

**è¯´æ˜ï¼š**

- æ•´æ•°é™¤æ³•åªä¿ç•™æ•´æ•°éƒ¨åˆ†ã€‚
- ç»™å®šé€†æ³¢å…°è¡¨è¾¾å¼æ€»æ˜¯æœ‰æ•ˆçš„ã€‚æ¢å¥è¯è¯´ï¼Œè¡¨è¾¾å¼æ€»ä¼šå¾—å‡ºæœ‰æ•ˆæ•°å€¼ä¸”ä¸å­˜åœ¨é™¤æ•°ä¸º 0 çš„æƒ…å†µã€‚

**ç¤ºä¾‹ 1ï¼š**

```shell
è¾“å…¥ï¼štokens = ["2","1","+","3","*"]
è¾“å‡ºï¼š9
è§£é‡Šï¼šè¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š((2 + 1) * 3) = 9
```

é€†æ³¢å…°è¡¨è¾¾å¼ï¼š

é€†æ³¢å…°è¡¨è¾¾å¼æ˜¯ä¸€ç§åç¼€è¡¨è¾¾å¼ï¼Œæ‰€è°“åç¼€å°±æ˜¯æŒ‡ç®—ç¬¦å†™åœ¨åé¢ã€‚

å¹³å¸¸ä½¿ç”¨çš„ç®—å¼åˆ™æ˜¯ä¸€ç§ä¸­ç¼€è¡¨è¾¾å¼ï¼Œå¦‚ ( 1 + 2 ) * ( 3 + 4 ) ã€‚
è¯¥ç®—å¼çš„é€†æ³¢å…°è¡¨è¾¾å¼å†™æ³•ä¸º ( ( 1 2 + ) ( 3 4 + ) * ) ã€‚
é€†æ³¢å…°è¡¨è¾¾å¼ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªä¼˜ç‚¹ï¼š

å»æ‰æ‹¬å·åè¡¨è¾¾å¼æ— æ­§ä¹‰ï¼Œä¸Šå¼å³ä¾¿å†™æˆ 1 2 + 3 4 + * ä¹Ÿå¯ä»¥ä¾æ®æ¬¡åºè®¡ç®—å‡ºæ­£ç¡®ç»“æœã€‚
é€‚åˆç”¨æ ˆæ“ä½œè¿ç®—ï¼šé‡åˆ°æ•°å­—åˆ™å…¥æ ˆï¼›é‡åˆ°ç®—ç¬¦åˆ™å–å‡ºæ ˆé¡¶ä¸¤ä¸ªæ•°å­—è¿›è¡Œè®¡ç®—ï¼Œå¹¶å°†ç»“æœå‹å…¥æ ˆä¸­ã€‚

```java
class Solution {
    public int evalRPN(String[] tokens) {
        Deque<Integer> stack = new LinkedList<>();
        for(int i = 0;i<tokens.length;i++){
            String token = tokens[i];
            if(isNumber(token)) {
                stack.push(Integer.parseInt(token));//å‹å…¥æ•°å­—åˆ°æ ˆå˜ç±³
            }else{
                int num2 = stack.pop();
                int num1 = stack.pop();//å¼¹å‡ºä¸¤ä¸ªå°±æ˜¯æ•°ç»„
                switch(token){
                    case "+":{
                        stack.push(num1+num2);
                        break;
                    }
                    case "-":{
                        stack.push(num1-num2);
                        break;
                    }
                    case "*":{
                        stack.push(num1*num2);
                        break;
                    }
                    case "/":{
                        stack.push(num1/num2);
                        break;
                    }
                }
            }
        }
        return stack.pop();
    }
    public boolean isNumber(String s){
        return !("+".equals(s)||"-".equals(s)||"*".equals(s)||"/".equals(s));
        // æ—¢ä¸æ˜¯åŠ å‡ä¹˜é™¤å°±æ˜¯å¯¹çš„æ•°å­—äº†
    }
}
```

> ä½ æƒ³å“ˆï¼Œè¿™ä¸ªæ•°å­—å¯èƒ½æ˜¯å‡ ç™¾ä¸Šåƒçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½è¯´ç”¨åˆ¤æ–­0åˆ°9å°±è¡Œäº†


### [32. æœ€é•¿æœ‰æ•ˆæ‹¬å·-æ ˆå­˜å‚¨-ä»¥åŠåŠ¨æ€è§„åˆ’](https://leetcode.cn/problems/longest-valid-parentheses/)

ç»™ä½ ä¸€ä¸ªåªåŒ…å« `'('` å’Œ `')'` çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿æœ‰æ•ˆï¼ˆæ ¼å¼æ­£ç¡®ä¸”è¿ç»­ï¼‰æ‹¬å·å­ä¸²çš„é•¿åº¦ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "(()"
è¾“å‡ºï¼š2
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = ")()())"
è¾“å‡ºï¼š4
è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ "()()"
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šs = ""
è¾“å‡ºï¼š0
```

**æç¤ºï¼š**

- `0 <= s.length <= 3 * 104`
- `s[i]` ä¸º `'('` æˆ– `')'`

éå†å­—ç¬¦ä¸²ï¼šæ¥ç€ï¼Œéå†å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦ï¼š

å¦‚æœé‡åˆ°å·¦æ‹¬å· '('ï¼Œå°†å®ƒçš„ç´¢å¼•å‹å…¥æ ˆä¸­ã€‚
å¦‚æœé‡åˆ°å³æ‹¬å· ')'ï¼š
é¦–å…ˆå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œè¡¨ç¤ºåŒ¹é…äº†ä¸€ä¸ªå·¦æ‹¬å·ã€‚
å¦‚æœæ ˆå˜ç©ºäº†ï¼Œå°†å½“å‰å³æ‹¬å·çš„ç´¢å¼•å‹å…¥æ ˆä¸­ã€‚
å¦‚æœæ ˆä¸ä¸ºç©ºï¼Œè®¡ç®—å½“å‰æœ‰æ•ˆå­ä¸²çš„é•¿åº¦ï¼Œå³ å½“å‰ç´¢å¼• - æ ˆé¡¶å…ƒç´ ï¼Œå¹¶æ›´æ–°æœ€å¤§é•¿åº¦ã€‚

```java
import java.util.ArrayDeque;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    public int longestValidParentheses(String s) {
        if (s.length()<1) return 0;
        int ans  = 0;
        ArrayDeque<Integer> stack = new ArrayDeque<>();
        stack.push(-1);
        int count = 0;
        for (int i = 0; i < s.length(); i++) {
            if (s.charAt(i)=='('){
                stack.push(i);//å·¦è¾¹çš„å°±å­˜å…¥
            }
            else {
                stack.pop();
                //peekå­˜çš„æ˜¯æ²¡æœ‰é…å¯¹çš„æœ€å°çš„å…ƒç´ 
                if (!stack.isEmpty()) ans = Math.max(ans,i-stack.peek());
                else stack.push(i);
            }
        }
        return ans;
    }
}
```

åŠ¨æ€è§„åˆ’
```java
class Solution {  
    public int longestValidParentheses(String s) {  
        int ans  = 0;  
        int[] dp = new int[s.length()];  
        for (int i = 1; i < s.length(); i++) {  
            if (s.charAt(i)==')'){  
                if (s.charAt(i-1)=='('){  
                    if (i<2) dp[i] = 2;  
                    else dp[i] = dp[i-2]+2;  
                }else{  
                    // ***))  
                    if (dp[i-1]>0){  
                        int left = i-dp[i-1]-1;  
                        // **((***))  
                        if (left>=0&&s.charAt(left)=='('){  
                            dp[i] = dp[i-1]+2;//å½“å‰çš„å‚æ•°è‡³å°‘æ˜¯+2ï¼›  
                            if (left>1){  
                                //å°±æ˜¯leftä»ç¬¬3ä½å¼€å§‹ï¼Œå‰é¢è‡³å°‘è¿˜æœ‰ä¸€å¯¹çš„è¯  
                                dp[i]+=dp[left-1];  
                            }  
  
                        }  
                    }  
                }  
            }  
            ans = Math.max(ans,dp[i]);  
        }  
        return ans;  
    }  
}
```
## å“ˆå¸Œè¡¨é—®é¢˜
### [290. å•è¯è§„å¾‹](https://leetcode.cn/problems/word-pattern/)
ç»™å®šä¸€ç§è§„å¾‹ `pattern` å’Œä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œåˆ¤æ–­ `s` æ˜¯å¦éµå¾ªç›¸åŒçš„è§„å¾‹ã€‚
è¿™é‡Œçš„ **éµå¾ª** æŒ‡å®Œå…¨åŒ¹é…ï¼Œä¾‹å¦‚ï¼Œ `pattern` é‡Œçš„æ¯ä¸ªå­—æ¯å’Œå­—ç¬¦ä¸² `s` ä¸­çš„æ¯ä¸ªéç©ºå•è¯ä¹‹é—´å­˜åœ¨ç€åŒå‘è¿æ¥çš„å¯¹åº”è§„å¾‹ã€‚
**ç¤ºä¾‹1:**

```
è¾“å…¥: pattern = "abba", s = "dog cat cat dog"
è¾“å‡º: true
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥:pattern = "abba", s = "dog cat cat fish"
è¾“å‡º: false
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥: pattern = "aaaa", s = "dog cat cat dog"
è¾“å‡º: false
```

**æç¤º:**

- `1 <= pattern.length <= 300`
- `pattern` åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯
- `1 <= s.length <= 3000`
- `s` åªåŒ…å«å°å†™è‹±æ–‡å­—æ¯å’Œ `' '`
- `s` **ä¸åŒ…å«** ä»»ä½•å‰å¯¼æˆ–å°¾éšå¯¹ç©ºæ ¼
- `s` ä¸­æ¯ä¸ªå•è¯éƒ½è¢« **å•ä¸ªç©ºæ ¼** åˆ†éš”

```java
class Solution {
    public boolean wordPattern(String pattern, String s) {
        //ä¸€ä¸ªå•è¯å°±æ˜¯ä¸€ä¸ªç»„åˆ
        String[] strings = s.split(" ");
        HashMap<Character, String> map = new HashMap<>();
        if (pattern.length()!=strings.length){
            return false;
        }
        for (int i = 0; i < pattern.length(); i++) {
            char key = pattern.charAt(i);
            if (map.containsKey(key)){
                //å¦‚æœé‡åˆ°è¿‡è¿™ä¸ªkey
                if (!map.get(key).equals(strings[i])){
                    return false;
                }
            }else {
                //æ²¡æœ‰é‡åˆ°è¿‡çš„è¯ï¼Œå°±è¦çœ‹è¿™ä¸ªsé‡Œé¢æ˜¯ä¸æ˜¯æœ‰åŒ¹é…çš„keyäº†
                if (map.containsValue(strings[i])){
                    return false;//å¦‚æœæœ‰åŒ¹é…çš„äº†ï¼Œé‚£å°±ç½ªè¿‡äº†
                }
                map.put(key,strings[i]);
            }
        }
        return true;
    }
}
```

### [36. æœ‰æ•ˆçš„æ•°ç‹¬](https://leetcode.cn/problems/valid-sudoku/)
è¯·ä½ åˆ¤æ–­ä¸€ä¸ª `9 x 9` çš„æ•°ç‹¬æ˜¯å¦æœ‰æ•ˆã€‚åªéœ€è¦ **æ ¹æ®ä»¥ä¸‹è§„åˆ™** ï¼ŒéªŒè¯å·²ç»å¡«å…¥çš„æ•°å­—æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚

1. æ•°å­— `1-9` åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
2. æ•°å­— `1-9` åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚
3. æ•°å­— `1-9` åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„ `3x3` å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆè¯·å‚è€ƒç¤ºä¾‹å›¾ï¼‰

**æ³¨æ„ï¼š**

- ä¸€ä¸ªæœ‰æ•ˆçš„æ•°ç‹¬ï¼ˆéƒ¨åˆ†å·²è¢«å¡«å……ï¼‰ä¸ä¸€å®šæ˜¯å¯è§£çš„ã€‚
- åªéœ€è¦æ ¹æ®ä»¥ä¸Šè§„åˆ™ï¼ŒéªŒè¯å·²ç»å¡«å…¥çš„æ•°å­—æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚
- ç©ºç™½æ ¼ç”¨ `'.'` è¡¨ç¤ºã€‚

**ç¤ºä¾‹ 1ï¼š**
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1389077/1715474540413-40328d8a-1720-418f-bae9-b1c1333cbee5.png#averageHue=%23cecece&clientId=u3a18be3a-46a6-4&id=cB8k0&originHeight=250&originWidth=250&originalType=binary&ratio=1&rotation=0&showTitle=false&size=14520&status=done&style=none&taskId=uae561bab-a1f7-49a7-943a-0597aec8b3e&title=)
```
è¾“å…¥ï¼šboard = 
[["5","3",".",".","7",".",".",".","."]
,["6",".",".","1","9","5",".",".","."]
,[".","9","8",".",".",".",".","6","."]
,["8",".",".",".","6",".",".",".","3"]
,["4",".",".","8",".","3",".",".","1"]
,["7",".",".",".","2",".",".",".","6"]
,[".","6",".",".",".",".","2","8","."]
,[".",".",".","4","1","9",".",".","5"]
,[".",".",".",".","8",".",".","7","9"]]
è¾“å‡ºï¼štrue
```

```java
class Solution {
    public boolean isValidSudoku(char[][] board) {
        //ç»™æ•°ç‹¬ç¼–å·
        Map<Integer, Set<Integer>> row = new HashMap<>(),col = new HashMap<>(),area = new HashMap<>();
        //åŠ å…¥ä¸‰ä¸ªHashMap
        for (int i = 0; i < 9; i++) {
            row.put(i,new HashSet<>());
            col.put(i,new HashSet<>());
            area.put(i,new HashSet<>());
        }
        for (int i = 0; i < 9; i++) {
            for (int j = 0; j < 9; j++) {
                //è¯»å–9*9çš„å„ä¸ª
                char c = board[i][j];
                if (c=='.') continue;
                int u = c-'0';
                int areaIdx=i/3 * 3+j/3;
                if (row.get(i).contains(u)||
                col.get(j).contains(u)||
                area.get(areaIdx).contains(u))
                    return false;
                row.get(i).add(u);//ç»™æ¯ä¸ªå…ƒç´ åŠ ä¸Š
                col.get(j).add(u);
                area.get(areaIdx).add(u);
            }
        }
        return true;
    }
}
```

### 1. ä¸¤æ•°ä¹‹å’Œ

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚

ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚

**ç¤ºä¾‹:**

ç»™å®š nums = [2, 7, 11, 15], target = 9

å› ä¸º nums[0] + nums[1] = 2 + 7 = 9

æ‰€ä»¥è¿”å› [0, 1]

> mapä¸­çš„å­˜å‚¨ç»“æ„ä¸º {keyï¼šæ•°æ®å…ƒç´ ï¼Œvalueï¼šæ•°ç»„å…ƒç´ å¯¹åº”çš„ä¸‹æ ‡}ã€‚åœ¨éå†æ•°ç»„çš„æ—¶å€™ï¼Œåªéœ€è¦å‘mapå»æŸ¥è¯¢æ˜¯å¦æœ‰å’Œç›®å‰éå†å…ƒç´ åŒ¹é…çš„æ•°å€¼ï¼Œå¦‚æœæœ‰ï¼Œå°±æ‰¾åˆ°çš„åŒ¹é…å¯¹ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±æŠŠç›®å‰éå†çš„å…ƒç´ æ”¾è¿›mapä¸­ï¼Œå› ä¸ºmapå­˜æ”¾çš„å°±æ˜¯æˆ‘ä»¬è®¿é—®è¿‡çš„å…ƒç´ ã€‚


```java
class Solution {
    public int[] twoSum(int[] nums, int target) {
        int[] ans = new int[2];
        if(nums==null||nums.length==0) return ans;
        HashMap<Integer, Integer> map = new HashMap<>();
        for (int i = 0; i < nums.length; i++) {
            int tmp =target-nums[i];
            if(map.containsKey(tmp)) {
                return new int[]{i,map.get(tmp)};
            }
            map.put(nums[i],i);
        }
        return ans;
    }
}
```

### å››æ•°ä¹‹å’ŒII

[åŠ›æ‰£é¢˜ç›®é“¾æ¥](https://leetcode.cn/problems/4sum-ii/)

ç»™å®šå››ä¸ªåŒ…å«æ•´æ•°çš„æ•°ç»„åˆ—è¡¨ A , B , C , D ,è®¡ç®—æœ‰å¤šå°‘ä¸ªå…ƒç»„ (i, j, k, l) ï¼Œä½¿å¾— A[i] + B[j] + C[k] + D[l] = 0ã€‚

ä¸ºäº†ä½¿é—®é¢˜ç®€å•åŒ–ï¼Œæ‰€æœ‰çš„ A, B, C, D å…·æœ‰ç›¸åŒçš„é•¿åº¦ Nï¼Œä¸” 0 â‰¤ N â‰¤ 500 ã€‚æ‰€æœ‰æ•´æ•°çš„èŒƒå›´åœ¨ -2^28 åˆ° 2^28 - 1 ä¹‹é—´ï¼Œæœ€ç»ˆç»“æœä¸ä¼šè¶…è¿‡ 2^31 - 1 ã€‚

**ä¾‹å¦‚:**

è¾“å…¥:

- A = [ 1, 2]
- B = [-2,-1]
- C = [-1, 2]
- D = [ 0, 2]

è¾“å‡º:

2

å®é™…å°±æ˜¯åŒ–ç®€ä¸ºä¸¤ä¸ªæ•°ä¹‹å’Œ

```java
class Solution {
    public int fourSumCount(int[] nums1, int[] nums2, int[] nums3, int[] nums4) {
        HashMap<Integer, Integer> map = new HashMap<>();
        int ans = 0;
        for (int i : nums1) {
            for (int j : nums2) {
                int tmp = i + j;
                map.put(tmp,map.getOrDefault(tmp,0)+1);
            }
        }
        for (int i : nums3) {
            for (int j : nums4) {
                int tmp = i + j;
                // ç›´æ¥å¯»æ‰¾ç›¸å¯¹çš„æ•°æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨å°±ç›´æ¥å¯ä»¥ç®—ä½œæ˜¯ä¸€ç»„æ•°ï¼Œå‡ ä¸ªvalueå°±æ˜¯å‡ ç»„
                if (map.containsKey(0-tmp))
                    ans+=map.get(0-tmp);
            }
        }
        return ans;
    }
}
```

### å“ˆå¸Œæ³•æ±‚è§£ä¸å«é‡å¤å­—ä¸²

```java
class Solution {
    public int lengthOfLongestSubstring(String s) {
        HashMap<Character, Integer> map = new HashMap<>();
        int ans = 0;
        int j = 0;
        // p w w e k
        // j   i
        //æ‰¾åˆ°wä¸Šä¸€æ¬¡çš„ä½ç½®è®¾ç½®ä¸ºæœ€é•¿å­ä¸²çš„èµ·å§‹ç‚¹ã€‚
        if (s.length()==1) return 1;
        for (int i = 0; i < s.length(); i++) {
            if (map.containsKey(s.charAt(i))){
                j = Math.max(j,map.get(s.charAt(i))+1);
            }
            map.put(s.charAt(i),i);
            ans = Math.max(ans,i-j+1);
        }
        return ans;
    }
}
```

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ `strs` ï¼Œå°† **å˜ä½è¯** ç»„åˆåœ¨ä¸€èµ·ã€‚ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç»“æœåˆ—è¡¨ã€‚

**æ³¨æ„ï¼š**è‹¥ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°éƒ½ç›¸åŒï¼Œåˆ™ç§°å®ƒä»¬äº’ä¸ºå˜ä½è¯ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: strs = ["eat", "tea", "tan", "ate", "nat", "bat"]
è¾“å‡º: [["bat"],["nat","tan"],["ate","eat","tea"]]
```

ç”±äºäº’ä¸ºå­—æ¯å¼‚ä½è¯çš„ä¸¤ä¸ªå­—ç¬¦ä¸²åŒ…å«çš„å­—æ¯ç›¸åŒï¼Œå› æ­¤å¯¹ä¸¤ä¸ªå­—ç¬¦ä¸²åˆ†åˆ«è¿›è¡Œæ’åºä¹‹åå¾—åˆ°çš„å­—ç¬¦ä¸²ä¸€å®šæ˜¯ç›¸åŒçš„ï¼Œæ•…å¯ä»¥å°†æ’åºä¹‹åçš„å­—ç¬¦ä¸²ä½œä¸ºå“ˆå¸Œè¡¨çš„é”®ã€‚

```java
class Solution {
    public List<List<String>> groupAnagrams(String[] strs) {
        HashMap<String, List<String>> map = new HashMap<>();
//        mapå­˜æ”¾æ’å¥½åºäº†çš„stringçš„æ•°ç»„
        for (String str : strs) {
            char[] chars = str.toCharArray();
            Arrays.sort(chars);
            String s = new String(chars);//å°†æ’å¥½åºçš„é‡æ–°è½¬åŒ–æˆstring
            List<String> path = map.getOrDefault(s, new ArrayList<>());//å–å‡ºæ¥så¯¹åº”çš„listï¼Œ
            path.add(str);
            map.put(s,path);//é‡æ–°å†æ”¾å›å»
        }
        return new ArrayList<List<String>>(map.values());
    }
}
```

### [249. ç§»ä½å­—ç¬¦ä¸²åˆ†ç»„](https://leetcode.cn/problems/group-shifted-strings/)

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯¹è¯¥å­—ç¬¦ä¸²å¯ä»¥è¿›è¡Œ â€œç§»ä½â€ çš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯å°†å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—æ¯éƒ½å˜ä¸ºå…¶åœ¨å­—æ¯è¡¨ä¸­åç»­çš„å­—æ¯ï¼Œæ¯”å¦‚ï¼š`"abc" -> "bcd"`ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æŒç»­è¿›è¡Œ â€œç§»ä½â€ æ“ä½œï¼Œä»è€Œç”Ÿæˆå¦‚ä¸‹ç§»ä½åºåˆ—ï¼š

```
"abc" -> "bcd" -> ... -> "xyz"
```

ç»™å®šä¸€ä¸ªåŒ…å«ä»…å°å†™å­—æ¯å­—ç¬¦ä¸²çš„åˆ—è¡¨ï¼Œå°†è¯¥åˆ—è¡¨ä¸­æ‰€æœ‰æ»¡è¶³ â€œç§»ä½â€ æ“ä½œè§„å¾‹çš„ç»„åˆè¿›è¡Œåˆ†ç»„å¹¶è¿”å›ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼š["abc", "bcd", "acef", "xyz", "az", "ba", "a", "z"]
è¾“å‡ºï¼š
[
  ["abc","bcd","xyz"],
  ["az","ba"],
  ["acef"],
  ["a","z"]
]
è§£é‡Šï¼šå¯ä»¥è®¤ä¸ºå­—æ¯è¡¨é¦–å°¾ç›¸æ¥ï¼Œæ‰€ä»¥ 'z' çš„åç»­ä¸º 'a'ï¼Œæ‰€ä»¥ ["az","ba"] ä¹Ÿæ»¡è¶³ â€œç§»ä½â€ æ“ä½œè§„å¾‹ã€‚
az 0 25
bz
```

```java
class Solution {
    public List<List<String>> groupStrings(String[] strings) {
         if (strings==null || strings.length==0) return new ArrayList<>();
        HashMap<String, List<String>> map = new HashMap<>();//å­˜å‚¨
        for (String string : strings) {
            StringBuilder sb = new StringBuilder();
            for (char c : string.toCharArray()) {
                sb.append("#");
                int shift = (c-string.charAt(0)+26)%26;
                sb.append(shift);
            }
            String key = sb.toString();
            if (!map.containsKey(key)) map.put(key,new ArrayList<String>());
            map.get(key).add(string);
        }
        return new ArrayList<>(map.values());
    }
}
```

```java
HashMap<String,List<String>> map = new HashMap<>();
for(String s:strings){
    StringBuilder sb = new StringBuilder();
    for(char c:s.toCharArray()){
        sb.append("#");
        int shift = (c-s.charAt(0)+26)%26;
    }
}
```

> è®°å½•ç§»åŠ¨çš„ä½ç½®çš„æ—¶å€™ï¼Œå­˜å‚¨æœ‰ä¸€ä¸ªå¾ªç¯çš„ æ—¶å€™æˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ª26å†å¯¹26å–ä¸€ä¸ªæ¨¡
>  
> `int shift = (c-string.charAt(0)+26)%26;` å°±å¯ä»¥å®ç°å¾ªç¯äº†ï¼Œæ¯”å¦‚azå°±æ˜¯baçš„ç›¸ä¼¼çš„

## å•è°ƒæ ˆ

```
/**
 *  å•è°ƒæ ˆåˆ†ä¸ºå•è°ƒé€’å¢æ ˆå’Œå•è°ƒé€’å‡æ ˆï¼Œé€šè¿‡ä½¿ç”¨å•è°ƒæ ˆæˆ‘ä»¬å¯ä»¥è®¿é—®åˆ°æœ€è¿‘ä¸€ä¸ªæ¯”å®ƒå¤§ï¼ˆå°ï¼‰çš„å…ƒç´ ã€‚
 *     å•è°ƒé€’å¢æ ˆï¼šå•è°ƒé€’å¢æ ˆå°±æ˜¯ä»æ ˆåº•åˆ°æ ˆé¡¶æ•°æ®æ˜¯ä¾æ¬¡é€’å¢ï¼Œé€šå¸¸æ˜¯å¯»æ‰¾æŸæ–¹å‘ç¬¬ä¸€ä¸ªæ¯”å®ƒå°çš„å…ƒç´ ã€‚
 *     å•è°ƒé€’å‡æ ˆï¼šå•è°ƒé€’å‡æ ˆå°±æ˜¯ä»æ ˆåº•åˆ°æ ˆé¡¶æ•°æ®æ˜¯ä¾æ¬¡é€’å‡ï¼Œé€šå¸¸æ˜¯å¯»æ‰¾æŸæ–¹å‘ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„å…ƒç´ ã€‚
 */
```

**é€šå¸¸æ˜¯ä¸€ç»´æ•°ç»„ï¼Œè¦å¯»æ‰¾ä»»ä¸€ä¸ªå…ƒç´ çš„å³è¾¹æˆ–è€…å·¦è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å¤§æˆ–è€…å°çš„å…ƒç´ çš„ä½ç½®ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±è¦æƒ³åˆ°å¯ä»¥ç”¨å•è°ƒæ ˆäº†**ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚

ä¾‹å¦‚æœ¬é¢˜å…¶å®å°±æ˜¯æ‰¾æ‰¾åˆ°ä¸€ä¸ªå…ƒç´ å³è¾¹ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å¤§çš„å…ƒç´ ï¼Œæ­¤æ—¶å°±åº”è¯¥æƒ³åˆ°ç”¨å•è°ƒæ ˆäº†ã€‚

é‚£ä¹ˆå•è°ƒæ ˆçš„åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸ºä»€ä¹ˆæ—¶é—´å¤æ‚åº¦æ˜¯O(n)å°±å¯ä»¥æ‰¾åˆ°æ¯ä¸€ä¸ªå…ƒç´ çš„å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å®ƒå¤§çš„å…ƒç´ ä½ç½®å‘¢ï¼Ÿ

**å•è°ƒæ ˆçš„æœ¬è´¨æ˜¯ç©ºé—´æ¢æ—¶é—´**ï¼Œå› ä¸ºåœ¨éå†çš„è¿‡ç¨‹ä¸­éœ€è¦ç”¨ä¸€ä¸ªæ ˆæ¥è®°å½•å³è¾¹ç¬¬ä¸€ä¸ªæ¯”å½“å‰å…ƒç´ é«˜çš„å…ƒç´ ï¼Œä¼˜ç‚¹æ˜¯æ•´ä¸ªæ•°ç»„åªéœ€è¦éå†ä¸€æ¬¡ã€‚

**æ›´ç›´ç™½æ¥è¯´ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªæ ˆæ¥è®°å½•æˆ‘ä»¬éå†è¿‡çš„å…ƒç´ **ï¼Œå› ä¸ºæˆ‘ä»¬éå†æ•°ç»„çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸çŸ¥é“ä¹‹å‰éƒ½éå†äº†å“ªäº›å…ƒç´ ï¼Œä»¥è‡³äºéå†ä¸€ä¸ªå…ƒç´ æ‰¾ä¸åˆ°æ˜¯ä¸æ˜¯ä¹‹å‰éå†è¿‡ä¸€ä¸ªæ›´å°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªå®¹å™¨ï¼ˆè¿™é‡Œç”¨å•è°ƒæ ˆï¼‰æ¥è®°å½•æˆ‘ä»¬éå†è¿‡çš„å…ƒç´ ã€‚

åœ¨ä½¿ç”¨å•è°ƒæ ˆçš„æ—¶å€™é¦–å…ˆè¦æ˜ç¡®å¦‚ä¸‹å‡ ç‚¹ï¼š

1. å•è°ƒæ ˆé‡Œå­˜æ”¾çš„å…ƒç´ æ˜¯ä»€ä¹ˆï¼Ÿ

å•è°ƒæ ˆé‡Œåªéœ€è¦å­˜æ”¾å…ƒç´ çš„ä¸‹æ ‡iå°±å¯ä»¥äº†ï¼Œ**å¦‚æœéœ€è¦ä½¿ç”¨å¯¹åº”çš„å…ƒç´ ï¼Œç›´æ¥T[i]å°±å¯ä»¥è·å–ã€‚**

1. å•è°ƒæ ˆé‡Œå…ƒç´ æ˜¯é€’å¢å‘¢ï¼Ÿ è¿˜æ˜¯é€’å‡å‘¢ï¼Ÿ

**é¡ºåºçš„æè¿°ä¸º ä»æ ˆå¤´åˆ°æ ˆåº•çš„é¡ºåº**ï¼Œä»å·¦åˆ°å³æˆ–è€…ä»å‰åˆ°åï¼Œ

è¿™é‡Œæˆ‘ä»¬è¦ä½¿ç”¨é€’å¢å¾ªåºï¼ˆå†å¼ºè°ƒä¸€ä¸‹æ˜¯æŒ‡ä»æ ˆå¤´åˆ°æ ˆåº•çš„é¡ºåºï¼‰ï¼Œå› ä¸ºåªæœ‰é€’å¢çš„æ—¶å€™ï¼Œæ ˆé‡Œè¦åŠ å…¥ä¸€ä¸ªå…ƒç´ içš„æ—¶å€™ï¼Œæ‰çŸ¥é“æ ˆé¡¶å…ƒç´ åœ¨æ•°ç»„ä¸­å³é¢ç¬¬ä¸€ä¸ªæ¯”æ ˆé¡¶å…ƒç´ å¤§çš„å…ƒç´ æ˜¯iã€‚

å³ï¼šå¦‚æœæ±‚ä¸€ä¸ªå…ƒç´ å³è¾¹ç¬¬ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œå•è°ƒæ ˆå°±æ˜¯é€’å¢çš„ï¼Œå¦‚æœæ±‚ä¸€ä¸ªå…ƒç´ å³è¾¹ç¬¬ä¸€ä¸ªæ›´å°å…ƒç´ ï¼Œå•è°ƒæ ˆå°±æ˜¯é€’å‡çš„ã€‚

æ–‡å­—æè¿°ç†è§£èµ·æ¥æœ‰ç‚¹è´¹åŠ²ï¼Œæ¥ä¸‹æ¥æˆ‘ç”»äº†ä¸€ç³»åˆ—çš„å›¾ï¼Œæ¥è®²è§£å•è°ƒæ ˆçš„å·¥ä½œè¿‡ç¨‹ï¼Œå¤§å®¶å†å»æ€è€ƒï¼Œæœ¬é¢˜ä¸ºä»€ä¹ˆæ˜¯é€’å¢æ ˆã€‚

ä½¿ç”¨å•è°ƒæ ˆä¸»è¦æœ‰ä¸‰ä¸ªåˆ¤æ–­æ¡ä»¶ã€‚

- å½“å‰éå†çš„å…ƒç´ T[i]å°äºæ ˆé¡¶å…ƒç´ T[st.top()]çš„æƒ…å†µ
- å½“å‰éå†çš„å…ƒç´ T[i]ç­‰äºæ ˆé¡¶å…ƒç´ T[st.top()]çš„æƒ…å†µ
- å½“å‰éå†çš„å…ƒç´ T[i]å¤§äºæ ˆé¡¶å…ƒç´ T[st.top()]çš„æƒ…å†µ

### LCR 083 å¤©æ°”ï¼š
ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ temperatures ï¼Œè¡¨ç¤ºæ¯å¤©çš„æ¸©åº¦ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ answer ï¼Œå…¶ä¸­ answer[i] æ˜¯æŒ‡å¯¹äºç¬¬ i å¤©ï¼Œä¸‹ä¸€ä¸ªæ›´é«˜æ¸©åº¦å‡ºç°åœ¨å‡ å¤©åã€‚å¦‚æœæ°”æ¸©åœ¨è¿™ä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨ 0 æ¥ä»£æ›¿ã€‚
```
ç¤ºä¾‹ 1:

è¾“å…¥: temperatures = [73,74,75,71,69,72,76,73]
è¾“å‡º: [1,1,4,2,1,1,0,0]
ç¤ºä¾‹ 2:

è¾“å…¥: temperatures = [30,40,50,60]
è¾“å‡º: [1,1,1,0]
ç¤ºä¾‹ 3:

è¾“å…¥: temperatures = [30,60,90]
è¾“å‡º: [1,1,0]
```
```java
class Solution {
    public int[] dailyTemperatures(int[] temperatures) {
        int[] ans = new int[temperatures.length];
        // å•è°ƒæ ˆï¼Œéå†é€’å¢å¾ªåºï¼ˆå†å¼ºè°ƒä¸€ä¸‹æ˜¯æŒ‡ä»æ ˆå¤´åˆ°æ ˆåº•çš„é¡ºåºï¼‰ï¼Œ
        // å› ä¸ºåªæœ‰é€’å¢çš„æ—¶å€™ï¼Œæ ˆé‡Œè¦åŠ å…¥ä¸€ä¸ªå…ƒç´ içš„æ—¶å€™ï¼Œ
        // æ‰çŸ¥é“æ ˆé¡¶å…ƒç´ åœ¨æ•°ç»„ä¸­å³é¢ç¬¬ä¸€ä¸ªæ¯”æ ˆé¡¶å…ƒç´ å¤§çš„å…ƒç´ æ˜¯iã€‚
        ArrayDeque<Integer> deque = new ArrayDeque<>();
        //ä¹Ÿå¯ä»¥ä¸ç”¨é¢å¤–è€ƒè™‘0ï¼›//2024/5/21
        deque.push(0);//å°±æ˜¯åœ¨é˜Ÿåˆ—çš„å·¦è¾¹ï¼Œå¤´éƒ¨ï¼ŒåŠ å…¥äº†åˆå§‹çš„0
        for (int i = 1; i < temperatures.length; i++) {
          //è¿™é‡Œæ˜¯åŠæ—¶å»æ‰æ— ç”¨å…ƒç´ ã€‚
            while (!deque.isEmpty() && temperatures[i]>temperatures[deque.peek()]){
                ans[deque.peek()] = i - deque.peek(); // æœ€å³è¾¹çš„
                deque.pop();
            }
            deque.push(i);
        }
        return ans;
    }
}
```
![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/68747470733a2f2f636f64652d7468696e6b696e672d313235333835353039332e66696c652e6d7971636c6f75642e636f6d2f706963732f32303231303231393132343730303536372e6a7067.jpeg#height=347&id=NJpVS&originHeight=676&originWidth=1098&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=&width=563)
å°±æ˜¯å½“å‰éå†çš„å…ƒç´ å¦‚æœæ¯”stack peekçš„å¤§ï¼Œè¯´æ˜stack peekç¬¬ä¸€ä¸ªæ¯”ä»–å¤§çš„æ‰¾åˆ°äº†ï¼Œå°±ä¸ç”¨ç®¡äº†ã€‚

### [å‰‘æŒ‡ Offer II 039. ç›´æ–¹å›¾æœ€å¤§çŸ©å½¢é¢ç§¯](https://leetcode.cn/problems/0ynMMM/)
ç»™å®šéè´Ÿæ•´æ•°æ•°ç»„ `heights` ï¼Œæ•°ç»„ä¸­çš„æ•°å­—ç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º `1` ã€‚æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚
**ç¤ºä¾‹ 1:**

![](https://assets.leetcode.com/uploads/2021/01/04/histogram.jpg#id=CsHDI&originHeight=242&originWidth=522&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šheights = [2,1,5,6,2,3]
è¾“å‡ºï¼š10
è§£é‡Šï¼šæœ€å¤§çš„çŸ©å½¢ä¸ºå›¾ä¸­çº¢è‰²åŒºåŸŸï¼Œé¢ç§¯ä¸º 10
```

```java
class Solution {
    public int largestRectangleArea(int[] heights) {
        int[] temp = new int[heights.length+2];//å­˜å‚¨å•è°ƒæ ˆ
        System.arraycopy(heights,0,temp,1,heights.length);
        ArrayDeque<Integer> stack = new ArrayDeque<>();
        int area = 0;
        for(int i= 0;i<temp.length;i++){
            while(!stack.isEmpty() && temp[i]<temp[stack.peek()]) {
                //å¦‚æœå½“å‰ä½ç½®çš„é«˜åº¦æ¯”stackçš„å°ï¼Œé‚£ä¹ˆå°±ä¼šæ¼æ°´
                int h = temp[stack.pop()];
                // æ¯”å¦‚ï¼š 2 1 
                // peek ä¸ºåºå· 0 çš„æ•°å­—ä¸º0.tempæ˜¯ 0 2 1 5 6 2 3 
                // æ‰€ä»¥stacké‡Œé¢ä¸€ç›´æœ‰å…ƒç´ 
                area = Math.max(area,h*(i-stack.peek()-1));
                // å½“stackä¸º 1 5 6 æ—¶
                // 2 å°äº 6 ï¼Œæ‰€ä»¥areaæ›´æ–°ä¸º 6
                // å¼¹å‡º 6 ï¼Œ 2å°äº5 æ‰€ä»¥ areaæ›´æ–°ä¸º 5 * ï¼ˆ2ï¼‰ ç­‰äº10
            }
            stack.push(i);
        }
        return area;
    }
}
```

### [å‰‘æŒ‡ Offer II 040. çŸ©é˜µä¸­æœ€å¤§çš„çŸ©å½¢](https://leetcode.cn/problems/PLYXKQ/)

éš¾åº¦å›°éš¾76æ”¶è—åˆ†äº«åˆ‡æ¢ä¸ºè‹±æ–‡æ¥æ”¶åŠ¨æ€åé¦ˆ

ç»™å®šä¸€ä¸ªç”± `0` å’Œ `1` ç»„æˆçš„çŸ©é˜µ `matrix` ï¼Œæ‰¾å‡ºåªåŒ…å« `1` çš„æœ€å¤§çŸ©å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚

**æ³¨æ„ï¼š**æ­¤é¢˜ `matrix` è¾“å…¥æ ¼å¼ä¸ºä¸€ç»´ `01` å­—ç¬¦ä¸²æ•°ç»„ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2020/09/14/maximal.jpg#id=GACmW&originHeight=322&originWidth=402&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šmatrix = ["10100","10111","11111","10010"]
è¾“å‡ºï¼š6
è§£é‡Šï¼šæœ€å¤§çŸ©å½¢å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚
```

çœ‹ä¸‹è¾¹çš„æ©™è‰²çš„éƒ¨åˆ†ï¼Œè¿™å®Œå…¨å°±æ˜¯ä¸Šä¸€é“é¢˜å‘€ï¼
![](https://pic.leetcode-cn.com/aabb1b287134cf950aa80526806ef4025e3920d57d237c0369ed34fae83e2690-image.png#id=s3u8A&originHeight=438&originWidth=437&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

ç®—æ³•æœ‰äº†ï¼Œå°±æ˜¯æ±‚å‡ºæ¯ä¸€å±‚çš„ heights[] ç„¶åä¼ ç»™ä¸Šä¸€é¢˜çš„å‡½æ•°å°±å¯ä»¥äº†ã€‚

```java
class Solution {
    public int maximalRectangle(String[] matrix) {
        if(matrix.length==0) return 0;
        int n = matrix[0].length();
        int[] heights = new int[n];
        int maxArea = 0;
        for(int i = 0;i<matrix.length;i++){
            for(int j = 0;j<n;j++){
                if(matrix[i].charAt(j) == '1'){
                    heights[j] +=1;
                }else{
                    heights[j] = 0;
                }
            }
            maxArea = Math.max(maxArea,largestRectangleArea(heights));
        }
        return maxArea;
    }

    public int largestRectangleArea(int[] heights) {
    int[] temp = new int[heights.length+2];//å­˜å‚¨å•è°ƒæ ˆ
    System.arraycopy(heights,0,temp,1,heights.length);
    ArrayDeque<Integer> stack = new ArrayDeque<>();
    int area = 0;
    for(int i= 0;i<temp.length;i++){
        while(!stack.isEmpty() && temp[i]<temp[stack.peek()]) {
            //å¦‚æœå½“å‰ä½ç½®çš„é«˜åº¦æ¯”stackçš„å°ï¼Œé‚£ä¹ˆå°±ä¼šæ¼æ°´
            int h = temp[stack.pop()];
            // æ¯”å¦‚ï¼š 2 1 
            // peek ä¸ºåºå· 0 çš„æ•°å­—ä¸º0.tempæ˜¯ 0 2 1 5 6 2 3 
            // æ‰€ä»¥stacké‡Œé¢ä¸€ç›´æœ‰å…ƒç´ 
            area = Math.max(area,h*(i-stack.peek()-1));
            // å½“stackä¸º 1 5 6 æ—¶
            // 2 å°äº 6 ï¼Œæ‰€ä»¥areaæ›´æ–°ä¸º 6
            // å¼¹å‡º 6 ï¼Œ 2å°äº5 æ‰€ä»¥ areaæ›´æ–°ä¸º 5 * ï¼ˆ2ï¼‰ ç­‰äº10
        }
        stack.push(i);
    }
    return area;
    }
}
```

## å•è°ƒé˜Ÿåˆ—

### 239.æ»‘åŠ¨çª—å£å±€éƒ¨æœ€å¤§å€¼

```
è¾“å…¥: nums = [1,3,-1,-3,5,3,6,7], å’Œ k = 3 
è¾“å‡º: [3,3,5,5,6,7] 
è§£é‡Š: 
æ»‘åŠ¨çª—å£çš„ä½ç½®                æœ€å¤§å€¼
---------------               -----
[1  3  -1] -3  5  3  6  7       3
 1 [3  -1  -3] 5  3  6  7       3
 1  3 [-1  -3  5] 3  6  7       5
 1  3  -1 [-3  5  3] 6  7       5
 1  3  -1  -3 [5  3  6] 7       6
 1  3  -1  -3  5 [3  6  7]      7
```

è¿™ä¸€é¢˜æ˜¯æ»‘åŠ¨çª—å£ï¼Œæ‰€ä»¥å•è°ƒæ ˆçš„æ„é€ éœ€è¦ç¡®å®šæ˜¯ä¸æ˜¯åœ¨kçš„èŒƒå›´å†…ï¼Œ

![239.æ»‘åŠ¨çª—å£æœ€å¤§å€¼-2](https://code-thinking.cdn.bcebos.com/gifs/239.æ»‘åŠ¨çª—å£æœ€å¤§å€¼-2.gif)

```java
class Solution {
    public int[] maxSlidingWindow(int[] nums, int k) {
        int[] ans = new int[nums.length - k + 1];
        LinkedList<Integer> queue = new LinkedList<>();
        //å‡†å¤‡å•è°ƒé˜Ÿåˆ—
        for (int right = 0; right < nums.length; right++) {
//            é˜Ÿé¦–å…ƒç´ å°±æ˜¯è¯¥çª—å£å†…çš„æœ€å¤§å€¼ã€‚
            while (!queue.isEmpty() && nums[right]>=nums[queue.peekLast()]) {
                queue.removeLast();
//            éç©ºçš„æ—¶å€™ï¼Œå¦‚æœä¿¡èµ–çš„æ¯”queueé¡¶éƒ¨çš„å…ƒç´ å¤§çš„è¯ï¼Œå°±ç§»èµ°è¿™ä¸ª
            }
            queue.addLast(right);
//            å¦‚æœé¦–éƒ¨åæ ‡å°äºleftï¼Œé‚£ä¹ˆå°±åˆ é™¤è¿™ä¸ª
            int left = right-k+1;//æ­¤æ—¶è¿™ä¸ªleftå®é™…ä¹Ÿå°±æ˜¯ä¾æ¬¡é€’å¢çš„
            if (queue.peekFirst()<left){
                queue.removeFirst();
            }
            if (left>=0) {
                ans[left] = nums[queue.peekFirst()];
//                è¿™ä¸ªfirstå¯¹åº”å°±æ˜¯å‰kä¸ªåŒºé—´å†…çš„å¤§çš„æ•°å€¼äº†
            }
        }
    }
}
```



> ```java
> // 2024/6/29 å®é™…å°±æ˜¯ä¸€ä¸ªå•è°ƒé˜Ÿåˆ—ï¼Œå…ˆæ›´æ–°å…¥é˜Ÿåˆ—ï¼Œç„¶åå‡ºé˜Ÿåˆ—ä¸ç¬¦åˆè¦æ±‚çš„ã€‚
> class Solution {
>     public int[] maxSlidingWindow(int[] nums, int k) {
>         LinkedList<Integer> list = new LinkedList<>();
>         int n = nums.length;
>         int[] ans = new int[n-k+1];
>         for (int i = 0; i < n; i++) {
>             //å…¥é˜Ÿåˆ—
>             while (!list.isEmpty()&&nums[list.getLast()]<=nums[i]){
>                 list.removeLast();//å•è°ƒé€’å‡çš„é˜Ÿåˆ—ï¼Œæ–°æ¥çš„å…ƒç´ å¿…é¡»æ¯”å½“å‰å…ƒç´ å°ï¼Œå¦‚æœæ˜¯å¤§äºç­‰äºé˜Ÿå°¾çš„è¯
>                 //ç›´æ¥ç§»èµ°é˜Ÿå°¾ã€‚
>             }
>             list.addLast(i);
>             //å‡ºé˜Ÿåˆ—
>             if (i-list.getFirst()>=k) list.removeFirst();
>             //è®°å½•
>             if (i>=k-1){
>                 ans[i-k+1] = nums[list.getFirst()];
>             }
>         }
>         return ans;
>     }
> }
> ```

## ä¼˜å…ˆçº§é˜Ÿåˆ—

### PriorityQueueçš„ä½œç”¨

PriorityQueue çš„ä¸»è¦ä½œç”¨æ˜¯ç»´æŠ¤ä¸€ç»„æ•°æ®çš„æ’åºï¼Œä½¿å¾—å–å‡ºæ•°æ®æ—¶å¯ä»¥æŒ‰ç…§ä¸€å®šçš„ä¼˜å…ˆçº§é¡ºåºè¿›è¡Œï¼Œå½“æˆ‘ä»¬è°ƒç”¨ poll() æ–¹æ³•æ—¶ï¼Œå®ƒä¼šä»é˜Ÿåˆ—çš„é¡¶éƒ¨å¼¹å‡ºæœ€é«˜ä¼˜å…ˆçº§çš„å…ƒç´ ã€‚å®ƒåœ¨å¾ˆå¤šåœºæ™¯ä¸‹éƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œä¾‹å¦‚ä»»åŠ¡è°ƒåº¦ã€äº‹ä»¶å¤„ç†ç­‰åœºæ™¯ï¼Œä»¥åŠä¸€äº›ç®—æ³•ä¸­éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ’åºçš„åœºæ™¯ã€‚

åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒPriorityQueue ä¹Ÿç»å¸¸ç”¨äºå®ç° Dijkstra ç®—æ³•ã€Prim ç®—æ³•ã€Huffman ç¼–ç ç­‰ç®—æ³•ã€‚è¿™é‡Œç®€å•è¯´ä¸€ä¸‹è¿™å‡ ç§ç®—æ³•çš„ä½œç”¨ï¼Œç†è§£ä¸äº†ä¹Ÿæ²¡å…³ç³»å“ˆã€‚

Dijkstraç®—æ³•æ˜¯ä¸€ç§ç”¨äºè®¡ç®—å¸¦æƒå›¾ä¸­çš„æœ€çŸ­è·¯å¾„çš„ç®—æ³•ã€‚è¯¥ç®—æ³•é‡‡ç”¨è´ªå¿ƒçš„ç­–ç•¥ï¼Œåœ¨éå†å›¾çš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡é€‰å–å½“å‰åˆ°æºç‚¹è·ç¦»æœ€çŸ­çš„ä¸€ä¸ªé¡¶ç‚¹ï¼Œå¹¶ä»¥å®ƒä¸ºä¸­å¿ƒè¿›è¡Œæ‰©å±•ï¼Œæ›´æ–°å…¶ä»–é¡¶ç‚¹çš„è·ç¦»å€¼ã€‚ç»è¿‡å¤šæ¬¡æ‰©å±•ï¼Œå¯ä»¥å¾—åˆ°æºç‚¹åˆ°å…¶å®ƒæ‰€æœ‰é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚

Primç®—æ³•æ˜¯ä¸€ç§ç”¨äºæ±‚è§£æœ€å°ç”Ÿæˆæ ‘çš„ç®—æ³•ï¼Œå¯ä»¥åœ¨åŠ æƒè¿é€šå›¾ä¸­æ‰¾åˆ°ä¸€æ£µç”Ÿæˆæ ‘ï¼Œä½¿å¾—è¿™æ£µç”Ÿæˆæ ‘çš„æ‰€æœ‰è¾¹çš„æƒå€¼ä¹‹å’Œæœ€å°ã€‚è¯¥ç®—æ³•ä»ä»»æ„ä¸€ä¸ªé¡¶ç‚¹å¼€å§‹ï¼Œé€æ¸æ‰©å±•ç”Ÿæˆæ ‘çš„è§„æ¨¡ï¼Œæ¯æ¬¡é€‰æ‹©ä¸€ä¸ªè·ç¦»å·²ç”Ÿæˆæ ‘æœ€è¿‘çš„é¡¶ç‚¹åŠ å…¥åˆ°ç”Ÿæˆæ ‘ä¸­ã€‚

Huffmanç¼–ç æ˜¯ä¸€ç§åŸºäºéœå¤«æ›¼æ ‘çš„å‹ç¼©ç®—æ³•ï¼Œç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢ä¸ºäºŒè¿›åˆ¶ç¼–ç ä»¥è¿›è¡Œå‹ç¼©ã€‚è¯¥ç®—æ³•çš„ä¸»è¦æ€æƒ³æ˜¯é€šè¿‡å»ºç«‹éœå¤«æ›¼æ ‘ï¼Œå°†å‡ºç°é¢‘ç‡è¾ƒé«˜çš„å­—ç¬¦ç”¨è¾ƒçŸ­çš„ç¼–ç è¡¨ç¤ºï¼Œè€Œå‡ºç°é¢‘ç‡è¾ƒä½çš„å­—ç¬¦ç”¨è¾ƒé•¿çš„ç¼–ç è¡¨ç¤ºï¼Œä»è€Œå®ç°å¯¹å­—ç¬¦ä¸²çš„å‹ç¼©ã€‚åœ¨è§£å‹ç¼©æ—¶ï¼Œæ ¹æ®ç¼–ç é€æ­¥è§£æå‡ºåŸå­—ç¬¦ä¸²ã€‚

ç”±äº PriorityQueue çš„åº•å±‚æ˜¯åŸºäºå †å®ç°çš„ï¼Œå› æ­¤åœ¨æ•°æ®é‡æ¯”è¾ƒå¤§æ—¶ï¼Œä½¿ç”¨ PriorityQueue å¯ä»¥è·å¾—è¾ƒå¥½çš„æ—¶é—´å¤æ‚åº¦ã€‚

è¿™é‡Œç‰µæ¶‰åˆ°äº†å¤§å°å…³ç³»ï¼Œ**å…ƒç´ å¤§å°çš„è¯„åˆ¤å¯ä»¥é€šè¿‡å…ƒç´ æœ¬èº«çš„è‡ªç„¶é¡ºåºï¼ˆ*natural ordering*ï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ„é€ æ—¶ä¼ å…¥çš„æ¯”è¾ƒå™¨**ï¼ˆ_Comparator_ï¼Œæˆ–è€…å…ƒç´ è‡ªèº«å®ç° Comparable æ¥å£ï¼‰æ¥å†³å®šã€‚

åœ¨ PriorityQueue ä¸­ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œè¿™ä¸ªä¼˜å…ˆçº§å†³å®šäº†å…ƒç´ åœ¨é˜Ÿåˆ—ä¸­çš„ä½ç½®ã€‚é˜Ÿåˆ—å†…éƒ¨é€šè¿‡å°é¡¶å †ï¼ˆä¹Ÿå¯ä»¥æ˜¯å¤§é¡¶å †ï¼‰çš„æ–¹å¼æ¥ç»´æŠ¤å…ƒç´ çš„ä¼˜å…ˆçº§å…³ç³»ã€‚å…·ä½“æ¥è¯´ï¼Œå°é¡¶å †æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ï¼Œä»»ä½•ä¸€ä¸ªéå¶å­èŠ‚ç‚¹çš„æƒå€¼ï¼Œéƒ½ä¸å¤§äºå…¶å·¦å³å­èŠ‚ç‚¹çš„æƒå€¼ï¼Œè¿™æ ·ä¿è¯äº†é˜Ÿåˆ—çš„é¡¶éƒ¨å…ƒç´ ï¼ˆå †é¡¶ï¼‰ä¸€å®šæ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚

### [å‰‘æŒ‡ Offer II 059. æ•°æ®æµçš„ç¬¬ K å¤§æ•°å€¼](https://leetcode.cn/problems/jBjn9C/)

è®¾è®¡ä¸€ä¸ªæ‰¾åˆ°æ•°æ®æµä¸­ç¬¬ `k` å¤§å…ƒç´ çš„ç±»ï¼ˆclassï¼‰ã€‚æ³¨æ„æ˜¯æ’åºåçš„ç¬¬ `k` å¤§å…ƒç´ ï¼Œä¸æ˜¯ç¬¬ `k` ä¸ªä¸åŒçš„å…ƒç´ ã€‚

è¯·å®ç° `KthLargest` ç±»ï¼š

- `KthLargest(int k, int[] nums)` ä½¿ç”¨æ•´æ•° `k` å’Œæ•´æ•°æµ `nums` åˆå§‹åŒ–å¯¹è±¡ã€‚
- `int add(int val)` å°† `val` æ’å…¥æ•°æ®æµ `nums` åï¼Œè¿”å›å½“å‰æ•°æ®æµä¸­ç¬¬ `k` å¤§çš„å…ƒç´ ã€‚

ç¤ºä¾‹ï¼š

```shell
è¾“å…¥ï¼š
["KthLargest", "add", "add", "add", "add", "add"]
[[3, [4, 5, 8, 2]], [3], [5], [10], [9], [4]]
è¾“å‡ºï¼š
[null, 4, 5, 5, 8, 8]

è§£é‡Šï¼š
KthLargest kthLargest = new KthLargest(3, [4, 5, 8, 2]);
kthLargest.add(3);   // return 4
kthLargest.add(5);   // return 5
kthLargest.add(10);  // return 5
kthLargest.add(9);   // return 8
kthLargest.add(4);   // return 8
```

å…¶å®å°±æ˜¯ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œåšä¸€ä¸ªå°ä¸é˜Ÿ

```java
class KthLargest {
    PriorityQueue<Integer> queue;
    int k;
    public KthLargest(int k, int[] nums) {
        queue = new PriorityQueue<>();
        // é»˜è®¤æ˜¯ä»å°åˆ°è¾¾çš„é¡ºåºï¼Œå°é¡¶å †
        for(int num: nums){
            queue.add(num);
        }
        this.k = k;
    }
    
    public int add(int val) {
        queue.offer(val);
        while(queue.size()>k){
            queue.poll();
        }
        return queue.peek();
    }
}
```

### [å‰‘æŒ‡ Offer II 060. å‡ºç°é¢‘ç‡æœ€é«˜çš„ k ä¸ªæ•°å­—](https://leetcode.cn/problems/g5c51o/)

> å…³é”®ï¼š ä¼˜å…ˆçº§å­˜å‚¨äº†é¢‘ç‡å’Œæ•°å­—ï¼Œç›´æ¥å®šä¸€ä¸ªPriorityQueue<int[ ] >


ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·è¿”å›å…¶ä¸­å‡ºç°é¢‘ç‡å‰ `k` é«˜çš„å…ƒç´ ã€‚å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [1,1,1,2,2,3], k = 2
è¾“å‡º: [1,2]
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [1], k = 1
è¾“å‡º: [1]
```

**æç¤ºï¼š**

- `1 <= nums.length <= 105`
- `k` çš„å–å€¼èŒƒå›´æ˜¯ `[1, æ•°ç»„ä¸­ä¸ç›¸åŒçš„å…ƒç´ çš„ä¸ªæ•°]`
- é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆå”¯ä¸€ï¼Œæ¢å¥è¯è¯´ï¼Œæ•°ç»„ä¸­å‰ `k` ä¸ªé«˜é¢‘å…ƒç´ çš„é›†åˆæ˜¯å”¯ä¸€çš„

```java
class Solution {
    public int[] topKFrequent(int[] nums, int k) {
        Map<Integer,Integer> map = new HashMap<>();
        for(int i:nums){
            map.put(i,map.getOrDefault(i,0)+1);
        }
        // int[] çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä»£è¡¨æ•°ç»„çš„å€¼ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä»£è¡¨äº†è¯¥å€¼å‡ºç°çš„æ¬¡æ•°
        PriorityQueue<int[]> queue= new PriorityQueue<>(new Comparator<>(){
            public int compare(int[] a,int[] b){
                return a[1]-b[1];
            }
        });
        for(Map.Entry<Integer,Integer> entry:map.entrySet()){
            // éå†æ¯ä¸€ä¸ªmapçš„å…ƒç´ 
            int num = entry.getKey(), count = entry.getValue();
            
            if(queue.size()==k){
                if(queue.peek()[1]<count){
                    queue.poll();
                    queue.offer(new int[]{num,count});
                }
            }else{
                queue.offer(new int[]{num,count});
            }
            /*ä¹Ÿå¯ä»¥å…¨éƒ¨éƒ½åŠ è¿›å»ï¼Œä¹‹åå†åˆ¤æ–­é˜Ÿåˆ—å¤§å°ï¼Œå¤§äº†çš„éƒ¨åˆ†å°±pollå‡ºå»ã€‚
            for (Map.Entry<Integer, Integer> entry : map.entrySet()) {
                Integer num = entry.getKey();
                Integer value = entry.getValue();
                queue.offer(new int[]{num,value});
            }
            while (queue.size()>k){
                queue.poll();
            }
            */
            
        }
        int[] res = new int[k];
        for(int i = 0;i<k;i++){
            res[i] = queue.poll()[0];
        }
        return res;
    }
}
```

### [373. æŸ¥æ‰¾å’Œæœ€å°çš„ K å¯¹æ•°å­—](https://leetcode.cn/problems/find-k-pairs-with-smallest-sums/)

ç»™å®šä¸¤ä¸ªä»¥ **å‡åºæ’åˆ—** çš„æ•´æ•°æ•°ç»„ `nums1` å’Œ `nums2` , ä»¥åŠä¸€ä¸ªæ•´æ•° `k` ã€‚

å®šä¹‰ä¸€å¯¹å€¼ `(u,v)`ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æ¥è‡ª `nums1`ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ¥è‡ª `nums2` ã€‚

è¯·æ‰¾åˆ°å’Œæœ€å°çš„ `k` ä¸ªæ•°å¯¹ `(u1,v1)`, `(u2,v2)` ... Â `(uk,vk)` ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums1 = [1,7,11], nums2 = [2,4,6], k = 3
è¾“å‡º: [1,2],[1,4],[1,6]
è§£é‡Š: è¿”å›åºåˆ—ä¸­çš„å‰ 3 å¯¹æ•°ï¼š
     [1,2],[1,4],[1,6],[7,2],[7,4],[11,2],[7,6],[11,4],[11,6]
```

```java
class Solution {
    public List<List<Integer>> kSmallestPairs(int[] nums1, int[] nums2, int k) {
        // PriorityQueue<int[]> heap = new PriorityQueue<>((a,b)->nums1[a[0]] + nums2[a[1]] - nums1[b[0]] - nums2[b[1]]);
        PriorityQueue<int[]> heap = new PriorityQueue<>((a, b) -> nums1[a[0]] + nums2[a[1]] - (nums1[b[0]] + nums2[b[1]]));
        for(int i = 0;i<Math.min(k,nums1.length);i++){
            heap.offer(new int[]{i,0});
            //nums1çš„ç´¢å¼•éƒ½æ”¾åˆ°heapé‡Œé¢ï¼Œ
            
        }
        List<List<Integer>> ans = new ArrayList<>();
        // æœ€å¤šå¼¹å‡º k æ¬¡
        while(k-- >0 && !heap.isEmpty()){
            //å…¶å®å°±æ˜¯å§heapæ•´ç†ä¸€ä¸‹
            //å§æ§½ï¼Œå°±æ˜¯è¯´å¼¹å‡ºkæ¬¡heapå †çš„å †é¡¶ï¼Œè‚¯å®šå°±æ˜¯æœ€å°å€¼
            int[] pos = heap.poll();
            ans.add(Arrays.asList(nums1[pos[0]],nums2[pos[1]]));
            // å°† index2 åŠ  1 ä¹‹åç»§ç»­å…¥é˜Ÿ
            if(++pos[1]<nums2.length){
                heap.offer(pos);
            }
        }
        return ans;
    }
}
```

## TreeSet

Javaä¸­ TreeMapå’ŒTreeSetç®—æ˜¯javaé›†åˆç±»é‡Œé¢æ¯”è¾ƒæœ‰éš¾åº¦çš„æ•°æ®ç»“æ„ã€‚å’Œæ™®é€šçš„HashMapä¸ä¸€æ ·ï¼Œæ™®é€šçš„HashMapå…ƒç´ å­˜å–çš„æ—¶é—´å¤æ‚åº¦ä¸€èˆ¬æ˜¯O(1)çš„èŒƒå›´ï¼Œè€ŒTreeMapå†…éƒ¨å¯¹å…ƒç´ çš„æ“ä½œå¤æ‚åº¦ä¸ºO(logn)ã€‚

è™½ç„¶åœ¨å…ƒç´ çš„å­˜å–æ–¹é¢TreeMapå¹¶ä¸å ä¼˜ï¼Œä½†æ˜¯å®ƒå†…éƒ¨çš„å…ƒç´ éƒ½æ˜¯æ’åºçš„ï¼Œå½“éœ€è¦æŸ¥æ‰¾æŸäº›å…ƒç´ ä»¥åŠé¡ºåºè¾“å‡ºå…ƒç´ çš„æ—¶å€™å®ƒèƒ½å¤Ÿå¸¦æ¥æ¯”è¾ƒç†æƒ³çš„ç»“æœã€‚å¯ä»¥è¯´ï¼Œ**TreeMapæ˜¯ä¸€ä¸ªå†…éƒ¨å…ƒç´ æ’åºç‰ˆçš„HashMapã€‚**åŒæ ·ï¼ŒTreeSetæ˜¯ä¸€ä¸ªå°è£…äº†ä¸€ä¸ªHashSetçš„æˆå‘˜å˜é‡æ¥å®ç°çš„ï¼Œåº•å±‚è¿ç”¨äº†çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„ã€‚

### TreeSet Vs. HashSet

TreeSetå’ŒHashSetéƒ½å®ç°äº†Setæ¥å£ã€‚ç„¶è€Œï¼Œå®ƒä»¬ä¹‹é—´å­˜åœ¨ç€ä¸€äº›åŒºåˆ«ã€‚

- ä¸HashSetä¸åŒï¼ŒTreeSetä¸­çš„å…ƒç´ æ˜¯ä»¥æŸç§é¡ºåºå­˜å‚¨çš„ã€‚è¿™æ˜¯å› ä¸ºTreeSetè¿˜å®ç°äº†SortedSetæ¥å£ã€‚
- TreeSetæä¾›äº†ä¸€äº›æ˜“äºå¯¼èˆªçš„æ–¹æ³•ã€‚ ä¾‹å¦‚first()ï¼Œlast()ï¼ŒheadSet()ï¼ŒtailSet()ç­‰ã€‚è¿™æ˜¯å› ä¸ºTreeSetè¿˜å®ç°äº†NavigableSetæ¥å£ã€‚
- å¯¹äºæ·»åŠ ã€åˆ é™¤ã€åŒ…å«å’Œå¤§å°ç­‰åŸºæœ¬æ“ä½œï¼ŒHashSetæ¯”TreeSetæ›´å¿«ã€‚

### ä½¿ç”¨

ä¸ºäº†åˆ›å»ºæ ‘é›†ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆå¯¼å…¥java.util.TreeSetåŒ…ã€‚

å¯¼å…¥åŒ…ä¹‹åï¼Œä¸‹é¢æ˜¯å¦‚ä½•åœ¨Javaä¸­åˆ›å»ºTreeSetã€‚

```
TreeSet<Integer> numbers = new TreeSet<>();
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å‚æ•°çš„TreeSetã€‚åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼ŒTreeSetä¸­çš„å…ƒç´ è‡ªç„¶æ’åº(å‡åº)ã€‚

ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Comparatoræ¥å£è‡ªå®šä¹‰å…ƒç´ çš„æ’åºã€‚

### [å‰‘æŒ‡ Offer II 057. å€¼å’Œä¸‹æ ‡ä¹‹å·®éƒ½åœ¨ç»™å®šçš„èŒƒå›´å†…](https://leetcode.cn/problems/7WqeDu/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸¤ä¸ªæ•´æ•° `k` å’Œ `t` ã€‚è¯·ä½ åˆ¤æ–­æ˜¯å¦å­˜åœ¨ **ä¸¤ä¸ªä¸åŒä¸‹æ ‡** `i` å’Œ `j`ï¼Œä½¿å¾— `abs(nums[i] - nums[j]) <= t` ï¼ŒåŒæ—¶åˆæ»¡è¶³ `abs(i - j) <= k` ã€‚

å¦‚æœå­˜åœ¨åˆ™è¿”å› `true`ï¼Œä¸å­˜åœ¨è¿”å› `false`ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3,1], k = 3, t = 0
è¾“å‡ºï¼štrue
```

```java
class Solution {

    public boolean containsNearbyAlmostDuplicate(int[] nums, int k, int t) {
        // æ»‘åŠ¨çª—å£ï¼Œçª—å£å¤§å°ä¸ºkï¼Œçª—å£å†…ä¸¤ä¸ªæ•°å­—çš„å¤§å°ç›¸å·®ä¸ºt
        TreeSet<Long> set =  new TreeSet<>();
        for(int i = 0;i<nums.length;i++){
            Long item = nums[i]*1L;
            Long floor = set.floor(item);
            Long ceil = set.ceiling(item);
            // æ¯”è¾ƒceilå’Œfloorä¸€ä¸ªæ˜¯åˆšå¤§äºä¸€ç‚¹ç‚¹itemï¼Œä¸€ä¸ªæ˜¯ç¨å°ä¸€ç‚¹ç‚¹itemçš„å…ƒç´ 
            if(floor!=null && (item-floor<=t)) return true;
            if(ceil!=null && ceil-item<=t)  return true;
            set.add(item);
            //ç§»é™¤å¤§äºçª—å£çš„å…ƒç´ 
            if(i>=k) set.remove(nums[i-k]*1L);
        }
        return false;
    }
}
```

### Method

### first()å’Œlast()æ–¹æ³•

- first() - è¿”å›é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ 
- last() - è¿”å›é›†åˆçš„æœ€åä¸€ä¸ªå…ƒç´ 

ä¾‹å¦‚ï¼Œ

```java
import java.util.TreeSet;

class Main {
    public static void main(String[] args) {
        TreeSet<Integer> numbers = new TreeSet<>();
        numbers.add(2);
        numbers.add(5);
        numbers.add(6);
        System.out.println("TreeSet: " + numbers);

        // ä½¿ç”¨ first() æ–¹æ³•
        int first = numbers.first();
        System.out.println("ç¬¬ä¸€ä¸ªæ•°å­—: " + first);

        // ä½¿ç”¨ last() æ–¹æ³•
        int last = numbers.last();
        System.out.println("æœ€åä¸€ä¸ªæ•°å­—: " + last);
    }
}
```

**è¾“å‡ºç»“æœ**

```
TreeSet: [2, 5, 6]
ç¬¬ä¸€ä¸ªæ•°å­—: 2
æœ€åä¸€ä¸ªæ•°å­—: 6
```

### ceiling()ï¼Œfloor()ï¼Œhigher()å’Œlower()æ–¹æ³•

- **Higher(element)** - è¿”å›å¤§äºæŒ‡å®šå…ƒç´ (element)çš„æœ€å°å…ƒç´ ã€‚
- **lower(element)** - è¿”å›å°äºæŒ‡å®šå…ƒç´ (element)çš„æœ€å¤§å…ƒç´ ã€‚
- **ceiling(element)** - è¿”å›å¤§äºæŒ‡å®šå…ƒç´ (element)çš„é‚£äº›å…ƒç´ ä¸­çš„æœ€å°å…ƒç´ ã€‚å¦‚æœä¼ é€’çš„å…ƒç´ (element)å­˜åœ¨äºæ ‘é›†ä¸­ï¼Œåˆ™è¿”å›ä½œä¸ºå‚æ•°ä¼ é€’çš„å…ƒç´ (element)ã€‚
- **floor(element)** - è¿”å›å°äºæŒ‡å®šå…ƒç´ (element)çš„å…ƒç´ ä¸­æœ€å¤§çš„å…ƒç´ ã€‚å¦‚æœä¼ é€’çš„å…ƒç´ (element)å­˜åœ¨äºæ ‘é›†ä¸­ï¼Œåˆ™è¿”å›ä½œä¸ºå‚æ•°ä¼ é€’çš„å…ƒç´ (element)ã€‚

```java
import java.util.TreeSet;

class Main {
    public static void main(String[] args) {
        TreeSet<Integer> numbers = new TreeSet<>();
        numbers.add(2);
        numbers.add(5);
        numbers.add(4);
        numbers.add(6);
        System.out.println("TreeSet: " + numbers);

        // ä½¿ç”¨ higher()
        System.out.println("ä½¿ç”¨ higher: " + numbers.higher(4));

        // ä½¿ç”¨ lower()
        System.out.println("ä½¿ç”¨ lower: " + numbers.lower(4));

        // ä½¿ç”¨ ceiling()
        System.out.println("ä½¿ç”¨ ceiling: " + numbers.ceiling(4));

        // ä½¿ç”¨ floor()
        System.out.println("ä½¿ç”¨ floor: " + numbers.floor(3));

    }
}
```

**è¾“å‡ºç»“æœ**

```
TreeSet: [2, 4, 5, 6]
ä½¿ç”¨ higher: 5
ä½¿ç”¨ lower: 2
ä½¿ç”¨ ceiling: 4
ä½¿ç”¨ floor: 2
```

> å½“ç„¶ä½œä¸ºåŸºç¡€çš„setä¹Ÿå¯ä»¥å®ç°setçš„æ–¹æ³•ï¼Œæ‰§è¡Œé›†åˆçš„å„ç§æ“ä½œ


> **TreeMap**
>  
>  

```shell
è¾“å…¥:
["MyCalendar","book","book","book"]
[[],[10,20],[15,25],[20,30]]
è¾“å‡º: [null,true,false,true]
è§£é‡Š: 
MyCalendar myCalendar = new MyCalendar();
MyCalendar.book(10, 20); // returns true 
MyCalendar.book(15, 25); // returns false ï¼Œç¬¬äºŒä¸ªæ—¥ç¨‹å®‰æ’ä¸èƒ½æ·»åŠ åˆ°æ—¥å†ä¸­ï¼Œå› ä¸ºæ—¶é—´ 15 å·²ç»è¢«ç¬¬ä¸€ä¸ªæ—¥ç¨‹å®‰æ’é¢„å®šäº†
MyCalendar.book(20, 30); // returns true ï¼Œç¬¬ä¸‰ä¸ªæ—¥ç¨‹å®‰æ’å¯ä»¥æ·»åŠ åˆ°æ—¥å†ä¸­ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªæ—¥ç¨‹å®‰æ’å¹¶ä¸åŒ…å«æ—¶é—´ 20
```
```java

class MyCalendar {
     TreeMap<Integer,Integer> map =null;
    public MyCalendar() {
        map =   new TreeMap<>();
    }
    
    public boolean book(int start, int end) {
        // æŸ¥æ‰¾åˆšåˆšå¥½å¤§äºç­‰äºstartæ—¶é—´çš„æ¡ç›®ï¼›
        Map.Entry<Integer,Integer> event = map.ceilingEntry(start);
        if(event!=null && event.getKey()<end){
            // å¦‚æœåˆšå¤§äºstartï¼Œä½†æ˜¯å¼€å§‹çš„æ¯”è¦æ·»åŠ è¿›å»çš„endè¿˜è¦æ—©ï¼Œå°±é”™äº†
            return false;
        }
        // æŸ¥æ‰¾åˆšåˆšå¥½å°äºç­‰äºstartæ—¶é—´çš„æ¡ç›®ï¼›
        event = map.floorEntry(start);
        // ç»“æŸçš„æ—¶é—´ä¸èƒ½æ¯”è¦æ’å…¥çš„å¼€å§‹çš„æ™šï¼Œ
        if(event!=null && event.getValue()>start){
            return false;
        }
        map.put(start,end);
        return true;

    }
}

/**
 * Your MyCalendar object will be instantiated and called as such:
 * MyCalendar obj = new MyCalendar();
 * boolean param_1 = obj.book(start,end);
 */
```

## å›¾è®º

å‚è€ƒç¬”è®°æ˜¯ [[å›¾è®ºè¯¦è§£]]

### [399. é™¤æ³•æ±‚å€¼](https://leetcode.cn/problems/evaluate-division/)

ç»™ä½ ä¸€ä¸ªå˜é‡å¯¹æ•°ç»„ `equations` å’Œä¸€ä¸ªå®æ•°å€¼æ•°ç»„ `values` ä½œä¸ºå·²çŸ¥æ¡ä»¶ï¼Œå…¶ä¸­ `equations[i] = [Ai, Bi]` å’Œ `values[i]` å…±åŒè¡¨ç¤ºç­‰å¼ `Ai / Bi = values[i]` ã€‚æ¯ä¸ª `Ai` æˆ– `Bi` æ˜¯ä¸€ä¸ªè¡¨ç¤ºå•ä¸ªå˜é‡çš„å­—ç¬¦ä¸²ã€‚

å¦æœ‰ä¸€äº›ä»¥æ•°ç»„ `queries` è¡¨ç¤ºçš„é—®é¢˜ï¼Œå…¶ä¸­ `queries[j] = [Cj, Dj]` è¡¨ç¤ºç¬¬ `j` ä¸ªé—®é¢˜ï¼Œè¯·ä½ æ ¹æ®å·²çŸ¥æ¡ä»¶æ‰¾å‡º `Cj / Dj = ?` çš„ç»“æœä½œä¸ºç­”æ¡ˆã€‚

è¿”å› **æ‰€æœ‰é—®é¢˜çš„ç­”æ¡ˆ** ã€‚å¦‚æœå­˜åœ¨æŸä¸ªæ— æ³•ç¡®å®šçš„ç­”æ¡ˆï¼Œåˆ™ç”¨ `-1.0` æ›¿ä»£è¿™ä¸ªç­”æ¡ˆã€‚å¦‚æœé—®é¢˜ä¸­å‡ºç°äº†ç»™å®šçš„å·²çŸ¥æ¡ä»¶ä¸­æ²¡æœ‰å‡ºç°çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿéœ€è¦ç”¨ `-1.0` æ›¿ä»£è¿™ä¸ªç­”æ¡ˆã€‚

**æ³¨æ„ï¼š**è¾“å…¥æ€»æ˜¯æœ‰æ•ˆçš„ã€‚ä½ å¯ä»¥å‡è®¾é™¤æ³•è¿ç®—ä¸­ä¸ä¼šå‡ºç°é™¤æ•°ä¸º 0 çš„æƒ…å†µï¼Œä¸”ä¸å­˜åœ¨ä»»ä½•çŸ›ç›¾çš„ç»“æœã€‚

**æ³¨æ„ï¼š**æœªåœ¨ç­‰å¼åˆ—è¡¨ä¸­å‡ºç°çš„å˜é‡æ˜¯æœªå®šä¹‰çš„ï¼Œå› æ­¤æ— æ³•ç¡®å®šå®ƒä»¬çš„ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šequations = [["a","b"],["b","c"]], values = [2.0,3.0], queries = [["a","c"],["b","a"],["a","e"],["a","a"],["x","x"]]
è¾“å‡ºï¼š[6.00000,0.50000,-1.00000,1.00000,-1.00000]
è§£é‡Šï¼š
æ¡ä»¶ï¼ša / b = 2.0, b / c = 3.0
é—®é¢˜ï¼ša / c = ?, b / a = ?, a / e = ?, a / a = ?, x / x = ?
ç»“æœï¼š[6.0, 0.5, -1.0, 1.0, -1.0 ]
æ³¨æ„ï¼šx æ˜¯æœªå®šä¹‰çš„ => -1.0
```

è§£é¢˜æ€è·¯ï¼šè¿™æ˜¯ä¸€ä¸ªæœ‰å‘å›¾çš„æœç´¢é—®é¢˜ã€‚æœ¬è´¨ä¸Šå°±æ˜¯æ±‚ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚

é¦–å…ˆå®šä¹‰é‚»æ¥èŠ‚ç‚¹ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªå­—æ®µï¼Œåˆ†è¡¨è¡¨ç¤ºé‚»æ¥èŠ‚ç‚¹çš„åç§°å’Œå½“å‰èŠ‚ç‚¹åˆ°è¾¾é‚»æ¥èŠ‚ç‚¹æ‰€éœ€çš„å€æ•°ï¼›
ç„¶åæ„é€ ä¸€ä¸ªmapæ¥å­˜å‚¨å›¾ï¼Œmapçš„é”®å°±æ˜¯èŠ‚ç‚¹åç§°ï¼Œmapçš„å€¼å°±æ˜¯èŠ‚ç‚¹çš„é‚»æ¥èŠ‚ç‚¹åˆ—è¡¨ï¼›
éå†ç»™å®šæ‰€æœ‰ç®—å¼ï¼Œå°†èŠ‚ç‚¹å’Œå€¼éƒ½å­˜åˆ°mapå½“ä¸­ï¼›
éå†éœ€è¦æ±‚çš„é—®é¢˜ï¼Œæ·±æœæ¯ä¸ªèŠ‚ç‚¹ï¼Œä¸ºäº†é˜²æ­¢è¿›å…¥ç¯ç»•åœˆï¼Œç”¨ä¸€ä¸ªé›†åˆæ¥å­˜å‚¨å·²ç»æœç´¢è¿‡çš„èŠ‚ç‚¹ã€‚

```java
class Node{
    public String id;
    public double num;
    public Node(String i,double n){
        id = i;
        num = n;
    }
}
class Solution {
    Map<String, List<Node>> map;
    public double[] calcEquation(List<List<String>> equations, double[] values, List<List<String>> queries) {
        int n = equations.size();
        map = new HashMap<>();
        double[] ans = new double[queries.size()];
        for (int i = 0; i < n; i++) {
            String divided = equations.get(i).get(0);//è¢«é™¤çš„æ•°
            String divisor = equations.get(i).get(1);//é™¤æ•°
            if (!map.containsKey(divided)) map.put(divided,new ArrayList<>());
            if (!map.containsKey(divisor)) map.put(divisor,new ArrayList<>());
            map.get(divided).add(new Node(divisor,values[i]));
            map.get(divisor).add(new Node(divided,1/values[i]));//ä¿å­˜å’Œå¦ä¸€ä¸ªèŠ‚ç‚¹çš„å€æ•°çš„å…³ç³»
        }
        int cnt = 0;
        for (List<String> query : queries) {
            ans[cnt] = dfs(query.get(0),query.get(1),1.0,new HashSet<>());
            cnt++;
        }
        return ans;
    }

    /**
     * æ·±æœ
     * @param cur è¡¨ç¤ºå½“å‰èŠ‚ç‚¹
     * @param tar è¡¨ç¤ºç›®æ ‡èŠ‚ç‚¹
     * @param k è®¡ç®—çš„å€æ•°
     * @param set ä¿å­˜å·²ç»èµ°è¿‡çš„èŠ‚ç‚¹
     * @return
     */
    double dfs(String cur,String tar,double k,Set<String> set){
        if (!map.containsKey(cur)||set.contains(cur)) return -1.0;
        if (cur.equals(tar)) return k;
        set.add(cur);
        for (Node node : map.get(cur)) {
            //éå†å½“å‰çš„curçš„ç›¸é‚»çš„è¾¹çš„èŠ‚ç‚¹
            double t = dfs(node.id, tar, k * node.num, set);
            if (t!=-1.0) return t;
        }
        return -1.0;
    }
}
```

### [207. è¯¾ç¨‹è¡¨](https://leetcode.cn/problems/course-schedule/)

ä½ è¿™ä¸ªå­¦æœŸå¿…é¡»é€‰ä¿® `numCourses` é—¨è¯¾ç¨‹ï¼Œè®°ä¸º `0` åˆ° `numCourses - 1` ã€‚

åœ¨é€‰ä¿®æŸäº›è¯¾ç¨‹ä¹‹å‰éœ€è¦ä¸€äº›å…ˆä¿®è¯¾ç¨‹ã€‚ å…ˆä¿®è¯¾ç¨‹æŒ‰æ•°ç»„ `prerequisites` ç»™å‡ºï¼Œå…¶ä¸­ `prerequisites[i] = [ai, bi]` ï¼Œè¡¨ç¤ºå¦‚æœè¦å­¦ä¹ è¯¾ç¨‹ `ai` åˆ™ **å¿…é¡»** å…ˆå­¦ä¹ è¯¾ç¨‹ `bi` ã€‚

- ä¾‹å¦‚ï¼Œå…ˆä¿®è¯¾ç¨‹å¯¹ `[0, 1]` è¡¨ç¤ºï¼šæƒ³è¦å­¦ä¹ è¯¾ç¨‹ `0` ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ `1` ã€‚

è¯·ä½ åˆ¤æ–­æ˜¯å¦å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹çš„å­¦ä¹ ï¼Ÿå¦‚æœå¯ä»¥ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0]]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šæ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å®Œæˆè¯¾ç¨‹ 0 ã€‚è¿™æ˜¯å¯èƒ½çš„ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0],[0,1]]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šæ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 0 ï¼›å¹¶ä¸”å­¦ä¹ è¯¾ç¨‹ 0 ä¹‹å‰ï¼Œä½ è¿˜åº”å…ˆå®Œæˆè¯¾ç¨‹ 1 ã€‚è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚
```

**æç¤ºï¼š**

- `1 <= numCourses <= 2000`
- `0 <= prerequisites.length <= 5000`
- `prerequisites[i].length == 2`
- `0 <= ai, bi < numCourses`
- `prerequisites[i]` ä¸­çš„æ‰€æœ‰è¯¾ç¨‹å¯¹ **äº’ä¸ç›¸åŒ**

> è§£æ³•ï¼š

æ–¹æ³•ä¸€ï¼Œæœ‰ç¯å°±ä¸å¯èƒ½å®Œæˆï¼š[[å›¾è®ºè¯¦è§£]]

æ–¹æ³•äºŒï¼Œä¸»è¦æ˜¯ç†è§£é‚»æ¥è¡¨ã€‚

ä¾‹å¦‚ï¼Œ`numCourses = 5, prerequisites = [[2,1],[3,2],[4,1],[4,2],[5,3],[5,4]]` æ—¶ï¼š

é‚»æ¥è¡¨å¦‚ä¸‹ï¼š

- èŠ‚ç‚¹ 1 èƒ½åˆ°èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 4ï¼ŒèŠ‚ç‚¹ 2 èƒ½åˆ°èŠ‚ç‚¹ 3 å’ŒèŠ‚ç‚¹ 4ï¼›
- è¿™å°±è¡¨æ˜èŠ‚ç‚¹ 2ï¼Œ4 çš„å‰ç½®èŠ‚ç‚¹éƒ½ä¸º 1ï¼ŒèŠ‚ç‚¹ 3ï¼Œ4 çš„å‰ç½®èŠ‚ç‚¹éƒ½ä¸º 2ã€‚

```java
å‰ç½®èŠ‚ç‚¹        
    1     |2|  â€”â€”>  |4|

    2     |3|  â€”â€”>  |4|

    3     |5|

    4     |5|

    5
```

åœ¨æ¯æ¬¡ pre å‡ºé˜Ÿæ—¶ï¼Œæ‰§è¡Œ numCourses--ï¼›
è‹¥æ•´ä¸ªè¯¾ç¨‹å®‰æ’å›¾æ˜¯æœ‰å‘æ— ç¯å›¾ï¼ˆå³å¯ä»¥å®‰æ’ï¼‰ï¼Œåˆ™æ‰€æœ‰èŠ‚ç‚¹ä¸€å®šéƒ½å…¥é˜Ÿå¹¶å‡ºé˜Ÿè¿‡ï¼Œå³å®Œæˆæ‹“æ‰‘æ’åºã€‚æ¢ä¸ªè§’åº¦è¯´ï¼Œè‹¥è¯¾ç¨‹å®‰æ’å›¾ä¸­å­˜åœ¨ç¯ï¼Œä¸€å®šæœ‰èŠ‚ç‚¹çš„å…¥åº¦å§‹ç»ˆä¸ä¸º 000ã€‚
å› æ­¤ï¼Œæ‹“æ‰‘æ’åºå‡ºé˜Ÿæ¬¡æ•°ç­‰äºè¯¾ç¨‹ä¸ªæ•°ï¼Œè¿”å› numCourses == 0 åˆ¤æ–­è¯¾ç¨‹æ˜¯å¦å¯ä»¥æˆåŠŸå®‰æ’ã€‚

```java
class Solution {
    public boolean canFinish(int numCourses, int[][] prerequisites) {
        //å…¥åº¦è¡¨
        int[] inDegrees = new int[numCourses];//è®°å½•èŠ‚ç‚¹çš„å…¥åº¦çš„æ•°
        List<List<Integer>> adjacency = new ArrayList<>();//é‚»æ¥è¡¨
        Queue<Integer> queue = new LinkedList<>();
        for (int i = 0; i < numCourses; i++) {
            adjacency.add(new ArrayList<>());
        }
        for (int[] pre : prerequisites) {
            //èŠ‚ç‚¹çš„å…¥åº¦ç­‰äºå°†ä»¥è¯¥èŠ‚ç‚¹ä¸ºç›®æ ‡èŠ‚ç‚¹çš„è¾¹çš„æ•°é‡ã€‚
            inDegrees[pre[0]]++;//ç»Ÿè®¡æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦
            adjacency.get(pre[1]).add(pre[0]);//è®°å½•ä»pre[1]æŒ‡å‘å‡ºå»çš„å€¼
        }
        for (int i = 0; i < numCourses; i++) {
            if (inDegrees[i]==0){
                //ç»Ÿè®¡å…¥åº¦ä¸º0çš„å€¼ï¼Œå­˜å…¥queue
                queue.add(i);//å…¥åº¦ä¸º0ï¼Œè¯´æ˜æ²¡æœ‰å‰æé¢„ä¿®è¯¾ç¨‹
            }
        }
        // numCourses = 5
        // prerequisites = [[2,1],[3,2],[4,1],[4,2],[5,3],[5,4]]
        while (!queue.isEmpty()){
            //éå†æ‰€æœ‰æ²¡æœ‰ä»¥è¯¥èŠ‚ç‚¹ä¸ºç›®æ ‡èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œå…¥åº¦ä¸º0ï¼›
            Integer pre = queue.poll();
            numCourses--;
            for (Integer cur : adjacency.get(pre)) {
                //éå†ä»¥è¯¥èŠ‚ç‚¹ä¸ºé¢„ä¿®è¯¾ç¨‹çš„èŠ‚ç‚¹
                //ç›¸å½“äºæœ¬æ¥æœºæ¢°è®¾è®¡ éœ€è¦ææ–™åŠ›å­¦å’Œç†è®ºåŠ›å­¦ï¼Œæ±½è½¦è®¾è®¡éœ€è¦ç†è®ºåŠ›å­¦ï¼Œç†è®ºåŠ›å­¦æ˜¯å…¥åº¦ä¸º0çš„è¯¾ç¨‹
                // ç°åœ¨çš„preç­‰äºç†è®ºåŠ›å­¦ï¼Œadjacencyé‡Œé¢å­˜å‚¨çš„å°±æ˜¯ ææ–™åŠ›å­¦å’Œç†è®ºåŠ›å­¦ï¼Œ
                inDegrees[cur]--;//æ¶ˆé™¤æ‰å½“å‰é¢„ç§‘å¯¹åº”çš„è¿™ä¸ªå…¥åº¦ï¼Œä¹Ÿå°±æ˜¯ææ–™åŠ›å­¦å’Œç†è®ºåŠ›å­¦çš„å…¥åº¦éƒ½--ï¼›
                if (inDegrees[cur]==0){ //å½“å…¥åº¦ä¸º0çš„æ—¶å€™ï¼Œå®Œæˆäº†æ‰€æœ‰çš„æ½œè´¨çš„è¯¾ç¨‹
                    queue.add(cur);
                }
            }
        }
        return numCourses==0;
    }
}
```


### [210. è¯¾ç¨‹è¡¨ II](https://leetcode.cn/problems/course-schedule-ii/)

ç°åœ¨ä½ æ€»å…±æœ‰ `numCourses` é—¨è¯¾éœ€è¦é€‰ï¼Œè®°ä¸º `0` åˆ° `numCourses - 1`ã€‚ç»™ä½ ä¸€ä¸ªæ•°ç»„ `prerequisites` ï¼Œå…¶ä¸­ `prerequisites[i] = [ai, bi]` ï¼Œè¡¨ç¤ºåœ¨é€‰ä¿®è¯¾ç¨‹ `ai` å‰ **å¿…é¡»** å…ˆé€‰ä¿® `bi` ã€‚

- ä¾‹å¦‚ï¼Œæƒ³è¦å­¦ä¹ è¯¾ç¨‹ `0` ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ `1` ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªåŒ¹é…æ¥è¡¨ç¤ºï¼š`[0,1]` ã€‚

è¿”å›ä½ ä¸ºäº†å­¦å®Œæ‰€æœ‰è¯¾ç¨‹æ‰€å®‰æ’çš„å­¦ä¹ é¡ºåºã€‚å¯èƒ½ä¼šæœ‰å¤šä¸ªæ­£ç¡®çš„é¡ºåºï¼Œä½ åªè¦è¿”å› **ä»»æ„ä¸€ç§** å°±å¯ä»¥äº†ã€‚å¦‚æœä¸å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹ï¼Œè¿”å› **ä¸€ä¸ªç©ºæ•°ç»„** ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0]]
è¾“å‡ºï¼š[0,1]
è§£é‡Šï¼šæ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚è¦å­¦ä¹ è¯¾ç¨‹ 1ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 0ã€‚å› æ­¤ï¼Œæ­£ç¡®çš„è¯¾ç¨‹é¡ºåºä¸º [0,1] ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnumCourses = 4, prerequisites = [[1,0],[2,0],[3,1],[3,2]]
è¾“å‡ºï¼š[0,2,1,3]
è§£é‡Šï¼šæ€»å…±æœ‰ 4 é—¨è¯¾ç¨‹ã€‚è¦å­¦ä¹ è¯¾ç¨‹ 3ï¼Œä½ åº”è¯¥å…ˆå®Œæˆè¯¾ç¨‹ 1 å’Œè¯¾ç¨‹ 2ã€‚å¹¶ä¸”è¯¾ç¨‹ 1 å’Œè¯¾ç¨‹ 2 éƒ½åº”è¯¥æ’åœ¨è¯¾ç¨‹ 0 ä¹‹åã€‚
å› æ­¤ï¼Œä¸€ä¸ªæ­£ç¡®çš„è¯¾ç¨‹é¡ºåºæ˜¯ [0,1,2,3] ã€‚å¦ä¸€ä¸ªæ­£ç¡®çš„æ’åºæ˜¯ [0,2,1,3] ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnumCourses = 1, prerequisites = []
è¾“å‡ºï¼š[0]
```

```java
class Solution {
    public int[] findOrder(int numCourses, int[][] prerequisites) {
        //å…¥åº¦è¡¨
        int[] inDegrees = new int[numCourses];//è®°å½•èŠ‚ç‚¹çš„å…¥åº¦çš„æ•°
        List<List<Integer>> adjacency = new ArrayList<>();//é‚»æ¥è¡¨
        Queue<Integer> queue = new LinkedList<>();
        for (int i = 0; i < numCourses; i++) {
            adjacency.add(new ArrayList<>());
        }
        for (int[] pre : prerequisites) {
            //èŠ‚ç‚¹çš„å…¥åº¦ç­‰äºå°†ä»¥è¯¥èŠ‚ç‚¹ä¸ºç›®æ ‡èŠ‚ç‚¹çš„è¾¹çš„æ•°é‡ã€‚
            inDegrees[pre[0]]++;//ç»Ÿè®¡æ¯ä¸ªèŠ‚ç‚¹çš„å…¥åº¦
            adjacency.get(pre[1]).add(pre[0]);//è®°å½•ä»pre[1]æŒ‡å‘å‡ºå»çš„å€¼
        }
        for (int i = 0; i < numCourses; i++) {
            if (inDegrees[i]==0){
                //ç»Ÿè®¡å…¥åº¦ä¸º0çš„å€¼ï¼Œå­˜å…¥queue
                queue.add(i);//å…¥åº¦ä¸º0ï¼Œè¯´æ˜æ²¡æœ‰å‰æé¢„ä¿®è¯¾ç¨‹
            }
        }
        int idx = 0;
        int[] ans = new int[numCourses];
        // numCourses = 5
        // prerequisites = [[2,1],[3,2],[4,1],[4,2],[5,3],[5,4]]
        while (!queue.isEmpty()){
            //éå†æ‰€æœ‰æ²¡æœ‰ä»¥è¯¥èŠ‚ç‚¹ä¸ºç›®æ ‡èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œå…¥åº¦ä¸º0ï¼›
            Integer pre = queue.poll();
            ans[idx++] = pre;
            for (Integer cur : adjacency.get(pre)) {
                //éå†ä»¥è¯¥èŠ‚ç‚¹ä¸ºé¢„ä¿®è¯¾ç¨‹çš„èŠ‚ç‚¹
                //ç›¸å½“äºæœ¬æ¥æœºæ¢°è®¾è®¡ éœ€è¦ææ–™åŠ›å­¦å’Œç†è®ºåŠ›å­¦ï¼Œæ±½è½¦è®¾è®¡éœ€è¦ç†è®ºåŠ›å­¦ï¼Œç†è®ºåŠ›å­¦æ˜¯å…¥åº¦ä¸º0çš„è¯¾ç¨‹
                // ç°åœ¨çš„preç­‰äºç†è®ºåŠ›å­¦ï¼Œadjacencyé‡Œé¢å­˜å‚¨çš„å°±æ˜¯ ææ–™åŠ›å­¦å’Œç†è®ºåŠ›å­¦ï¼Œ
                inDegrees[cur]--;//æ¶ˆé™¤æ‰å½“å‰é¢„ç§‘å¯¹åº”çš„è¿™ä¸ªå…¥åº¦ï¼Œä¹Ÿå°±æ˜¯ææ–™åŠ›å­¦å’Œç†è®ºåŠ›å­¦çš„å…¥åº¦éƒ½--ï¼›
                if (inDegrees[cur]==0){ //å½“å…¥åº¦ä¸º0çš„æ—¶å€™ï¼Œå®Œæˆäº†æ‰€æœ‰çš„æ½œè´¨çš„è¯¾ç¨‹
                    queue.add(cur);
                }
            }
        }
        if (idx==numCourses) return ans;
        return new int[0];
    }
}
```

### PRIMç®—æ³•-æœ€å°ç”Ÿæˆæ ‘

é¢˜ç›®æè¿°ï¼š

åœ¨ä¸–ç•Œçš„æŸä¸ªåŒºåŸŸï¼Œæœ‰ä¸€äº›åˆ†æ•£çš„ç¥ç§˜å²›å±¿ï¼Œæ¯ä¸ªå²›å±¿ä¸Šéƒ½æœ‰ä¸€ç§çç¨€çš„èµ„æºæˆ–è€…å®è—ã€‚ä½ æ˜¯ä¸€åæ¢é™©è€…ï¼Œå†³å®šå‰å¾€è¿™äº›å²›å±¿ï¼Œä½†ä¸ºäº†èŠ‚çœæ—¶é—´å’Œèµ„æºï¼Œä½ å¸Œæœ›è§„åˆ’ä¸€æ¡æœ€çŸ­çš„è·¯å¾„ï¼Œä»¥ä¾¿åœ¨æ¢ç´¢è¿™äº›å²›å±¿æ—¶å°½é‡å‡å°‘æ—…è¡Œçš„è·ç¦»ã€‚

ç»™å®šä¸€å¼ åœ°å›¾ï¼Œå…¶ä¸­åŒ…æ‹¬äº†æ‰€æœ‰çš„å²›å±¿ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„è·ç¦»ã€‚æ¯ä¸ªå²›å±¿éƒ½éœ€è¦è¢«è‡³å°‘è®¿é—®ä¸€æ¬¡ï¼Œä½ çš„ç›®æ ‡æ˜¯è§„åˆ’ä¸€æ¡æœ€çŸ­è·¯å¾„ï¼Œä»¥æœ€å°åŒ–æ¢ç´¢è·¯å¾„çš„æ€»è·ç¦»ï¼ŒåŒæ—¶ç¡®ä¿è®¿é—®äº†æ‰€æœ‰å²›å±¿ã€‚

è¾“å…¥æè¿°ï¼š

ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°V å’Œ Eï¼ŒVä»£è¡¨é¡¶ç‚¹æ•°ï¼ŒEä»£è¡¨è¾¹æ•° ã€‚é¡¶ç‚¹ç¼–å·æ˜¯ä»1åˆ°Vã€‚ä¾‹å¦‚ï¼šV=2ï¼Œä¸€ä¸ªæœ‰ä¸¤ä¸ªé¡¶ç‚¹ï¼Œåˆ†åˆ«æ˜¯1å’Œ2ã€‚

æ¥ä¸‹æ¥å…±æœ‰ E è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªæ•´æ•° v1ï¼Œv2 å’Œ valï¼Œv1 å’Œ v2 ä¸ºè¾¹çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œvalä»£è¡¨è¾¹çš„æƒå€¼ã€‚

è¾“å‡ºæè¿°ï¼š

è¾“å‡ºè”é€šæ‰€æœ‰å²›å±¿çš„æœ€å°è·¯å¾„æ€»è·ç¦»

è¾“å…¥ç¤ºä¾‹ï¼š

```
7 11
1 2 1
1 3 1
1 5 2
2 6 1
2 4 2
2 3 2
3 4 1
4 5 1
5 6 2
5 7 1
6 7 1
```

è¾“å‡ºç¤ºä¾‹ï¼š

6

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/640.jpg#id=GWALR&originHeight=499&originWidth=1080&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

**è§£ç­”ï¼š**

æœ€å°ç”Ÿæˆæ ‘æ˜¯æ‰€æœ‰èŠ‚ç‚¹çš„æœ€å°è¿é€šå­å›¾ï¼Œ å³ï¼šä»¥æœ€å°çš„æˆæœ¬ï¼ˆè¾¹çš„æƒå€¼ï¼‰å°†å›¾ä¸­æ‰€æœ‰èŠ‚ç‚¹é“¾æ¥åˆ°ä¸€èµ·ã€‚

å›¾ä¸­æœ‰nä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆä¸€å®šå¯ä»¥ç”¨ n - 1 æ¡è¾¹å°†æ‰€æœ‰èŠ‚ç‚¹è¿æ¥åˆ°ä¸€èµ·ã€‚

é‚£ä¹ˆå¦‚ä½•é€‰æ‹© è¿™ n-1 æ¡è¾¹ å°±æ˜¯ æœ€å°ç”Ÿæˆæ ‘ç®—æ³•çš„ä»»åŠ¡æ‰€åœ¨ã€‚

ï¼ˆå›¾ä¸­ä¸ºnä¸º7ï¼Œå³7ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåªéœ€è¦ n-1 å³ 6æ¡è¾¹å°±å¯ä»¥è®²æ‰€æœ‰é¡¶ç‚¹è¿æ¥åˆ°ä¸€èµ·ï¼‰

primç®—æ³• æ˜¯ä»èŠ‚ç‚¹çš„è§’åº¦ é‡‡ç”¨è´ªå¿ƒçš„ç­–ç•¥ æ¯æ¬¡å¯»æ‰¾è·ç¦» æœ€å°ç”Ÿæˆæ ‘æœ€è¿‘çš„èŠ‚ç‚¹ å¹¶åŠ å…¥åˆ°æœ€å°ç”Ÿæˆæ ‘ä¸­ã€‚

primç®—æ³•æ ¸å¿ƒå°±æ˜¯ä¸‰æ­¥ï¼Œæˆ‘ç§°ä¸º**primä¸‰éƒ¨æ›²**ï¼Œå¤§å®¶ä¸€å®šè¦ç†Ÿæ‚‰è¿™ä¸‰æ­¥ï¼Œä»£ç ç›¸å¯¹ä¼šå¥½äº›å¾ˆå¤šï¼š

1. ç¬¬ä¸€æ­¥ï¼Œé€‰è·ç¦»ç”Ÿæˆæ ‘æœ€è¿‘èŠ‚ç‚¹
2. ç¬¬äºŒæ­¥ï¼Œæœ€è¿‘èŠ‚ç‚¹åŠ å…¥ç”Ÿæˆæ ‘
3. ç¬¬ä¸‰æ­¥ï¼Œæ›´æ–°éç”Ÿæˆæ ‘èŠ‚ç‚¹åˆ°ç”Ÿæˆæ ‘çš„è·ç¦»ï¼ˆå³æ›´æ–°minDistæ•°ç»„ï¼‰

åœ¨primç®—æ³•ä¸­ï¼Œæœ‰ä¸€ä¸ªæ•°ç»„ç‰¹åˆ«é‡è¦ï¼Œè¿™é‡Œèµ·åä¸ºï¼šminDistã€‚

ï¼ˆ**ç¤ºä¾‹ä¸­èŠ‚ç‚¹ç¼–å·æ˜¯ä»1å¼€å§‹ï¼Œæ‰€ä»¥ä¸ºäº†è®©å¤§å®¶çœ‹çš„ä¸æ™•ï¼ŒminDistæ•°ç»„ä¸‹æ ‡æˆ‘ä¹Ÿä» 1 å¼€å§‹è®¡æ•°ï¼Œä¸‹æ ‡0 å°±ä¸ä½¿ç”¨äº†ï¼Œè¿™æ · ä¸‹æ ‡å’ŒèŠ‚ç‚¹æ ‡å·å°±å¯ä»¥å¯¹åº”ä¸Šäº†ï¼Œé¿å…å¤§å®¶ææ··**ï¼‰

minDist æ•°ç»„ é‡Œçš„æ•°å€¼åˆå§‹åŒ–ä¸º æœ€å¤§æ•°ï¼Œå› ä¸ºæœ¬é¢˜ èŠ‚ç‚¹è·ç¦»ä¸ä¼šè¶…è¿‡ 10000ï¼Œæ‰€ä»¥ åˆå§‹åŒ–æœ€å¤§æ•°ä¸º 10001å°±å¯ä»¥ã€‚

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/640-20240407155813334.jpg#id=nQhR3&originHeight=664&originWidth=1080&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```java
import java.util.Scanner;
import java.util.Arrays;

public class Main {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        int v = scanner.nextInt();
        int e = scanner.nextInt();

        int x, y, k;
        int[][] grid = new int[v + 1][v + 1];
        for (int i = 0; i <= v; i++) {
            Arrays.fill(grid[i], 10001);
        }

        while (e-- > 0) {
            x = scanner.nextInt();
            y = scanner.nextInt();
            k = scanner.nextInt();
            grid[x][y] = k;
            grid[y][x] = k;
        }

        int[] minDist = new int[v + 1];
        Arrays.fill(minDist, 10001);

        boolean[] isInTree = new boolean[v + 1];

        for (int i = 1; i < v; i++) {
            int cur = -1;
            for (int j = 1; j <= v; j++) // 1 - vï¼Œé¡¶ç‚¹ç¼–å·ï¼Œè¿™é‡Œä¸‹æ ‡ä»1å¼€å§‹
              //  é€‰å–æœ€å°ç”Ÿæˆæ ‘èŠ‚ç‚¹çš„æ¡ä»¶ï¼š
              //  ï¼ˆ1ï¼‰ä¸åœ¨æœ€å°ç”Ÿæˆæ ‘é‡Œ
              //  ï¼ˆ2ï¼‰è·ç¦»æœ€å°ç”Ÿæˆæ ‘æœ€è¿‘çš„èŠ‚ç‚¹
              //  ï¼ˆ3ï¼‰åªè¦ä¸åœ¨æœ€å°ç”Ÿæˆæ ‘é‡Œï¼Œå…ˆé»˜è®¤é€‰ä¸€ä¸ªèŠ‚ç‚¹ ï¼Œåœ¨æ¯”è¾ƒ å“ªä¸€ä¸ªæ˜¯æœ€å°çš„
              //  ç†è§£æ¡ä»¶3 å¾ˆé‡è¦ï¼Œæ‰èƒ½ç†è§£è¿™æ®µä»£ç ï¼š(cur == -1 || minDist[j] < minDist[cur])
                if (!isInTree[j] && (cur == -1 || minDist[j] < minDist[cur])) {
                    cur = j;
                }
            }

            isInTree[cur] = true;

            for (int j = 1; j <= v; j++) {
                if (!isInTree[j] && grid[cur][j] < minDist[j]) {
                    minDist[j] = grid[cur][j];
                }
            }
        }

        int result = 0;
        for (int i = 2; i <= v; i++) {
            result += minDist[i];
        }
        
        System.out.println(result);
    }
}
```

### [743. ç½‘ç»œå»¶è¿Ÿæ—¶é—´](https://leetcode.cn/problems/network-delay-time/)

æœ‰ `n` ä¸ªç½‘ç»œèŠ‚ç‚¹ï¼Œæ ‡è®°ä¸º `1` åˆ° `n`ã€‚

ç»™ä½ ä¸€ä¸ªåˆ—è¡¨ `times`ï¼Œè¡¨ç¤ºä¿¡å·ç»è¿‡ **æœ‰å‘** è¾¹çš„ä¼ é€’æ—¶é—´ã€‚ `times[i] = (ui, vi, wi)`ï¼Œå…¶ä¸­ `ui` æ˜¯æºèŠ‚ç‚¹ï¼Œ`vi` æ˜¯ç›®æ ‡èŠ‚ç‚¹ï¼Œ `wi` æ˜¯ä¸€ä¸ªä¿¡å·ä»æºèŠ‚ç‚¹ä¼ é€’åˆ°ç›®æ ‡èŠ‚ç‚¹çš„æ—¶é—´ã€‚

ç°åœ¨ï¼Œä»æŸä¸ªèŠ‚ç‚¹ `K` å‘å‡ºä¸€ä¸ªä¿¡å·ã€‚éœ€è¦å¤šä¹…æ‰èƒ½ä½¿æ‰€æœ‰èŠ‚ç‚¹éƒ½æ”¶åˆ°ä¿¡å·ï¼Ÿå¦‚æœä¸èƒ½ä½¿æ‰€æœ‰èŠ‚ç‚¹æ”¶åˆ°ä¿¡å·ï¼Œè¿”å› `-1` ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/931_example_1.png#id=coVl1&originHeight=239&originWidth=217&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼štimes = [[2,1,1],[2,3,1],[3,4,1]], n = 4, k = 2
è¾“å‡ºï¼š2
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼štimes = [[1,2,1]], n = 2, k = 1
è¾“å‡ºï¼š1
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼štimes = [[1,2,1]], n = 2, k = 2
è¾“å‡ºï¼š-1
```

```java
int N = 110,M = 6010;
int[][] w = new int[N][N];
int INF = 0x3f3f3f;
int n,k;
public int networkDelayTime(int[][] times, int n, int k) {
    this.n = n;
    this.k = k;
    for (int i = 1; i < n + 1; i++) {
        for (int j = 1; j < n + 1; j++) {
            w[i][j]=w[j][i]=i==j?0:INF;
        }
    }
    for (int[] time : times) {
        w[time[0]][time[1]]=time[2];
    }
    floyd();
    int ans = 0;
    for (int i = 1; i < n + 1; i++) {
        ans = Math.max(ans,w[k][i]);
    }
    return ans>=INF/2?-1:ans;

}
void floyd(){
    // floyd åŸºæœ¬æµç¨‹ä¸ºä¸‰å±‚å¾ªç¯ï¼š
    // æšä¸¾ä¸­è½¬ç‚¹ - æšä¸¾èµ·ç‚¹ - æšä¸¾ç»ˆç‚¹ - æ¾å¼›æ“ä½œ   
    for (int p = 1; p < n + 1; p++) {
        for (int i = 1; i <= n; i++) {
            for (int j = 1; j < n + 1; j++) {
                //å…ˆæšä¸¾çš„ä¸­è½¬ç‚¹ï¼Œå†æšä¸¾èµ·ç‚¹iï¼Œç»ˆç‚¹j
                w[i][j]=Math.min(w[i][j],w[i][p]+w[p][j]);
            }
        }
    }
}
```

## å¤šå‰æ ‘

### [208. å®ç° Trie (å‰ç¼€æ ‘)](https://leetcode.cn/problems/implement-trie-prefix-tree/)

[**Trie**](https://baike.baidu.com/item/%E5%AD%97%E5%85%B8%E6%A0%91/9825209?fr=aladdin)ï¼ˆå‘éŸ³ç±»ä¼¼ "try"ï¼‰æˆ–è€…è¯´ **å‰ç¼€æ ‘** æ˜¯ä¸€ç§æ ‘å½¢æ•°æ®ç»“æ„ï¼Œç”¨äºé«˜æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢å­—ç¬¦ä¸²æ•°æ®é›†ä¸­çš„é”®ã€‚è¿™ä¸€æ•°æ®ç»“æ„æœ‰ç›¸å½“å¤šçš„åº”ç”¨æƒ…æ™¯ï¼Œä¾‹å¦‚è‡ªåŠ¨è¡¥å®Œå’Œæ‹¼å†™æ£€æŸ¥ã€‚

è¯·ä½ å®ç° Trie ç±»ï¼š

- `Trie()` åˆå§‹åŒ–å‰ç¼€æ ‘å¯¹è±¡ã€‚
- `void insert(String word)` å‘å‰ç¼€æ ‘ä¸­æ’å…¥å­—ç¬¦ä¸² `word` ã€‚
- `boolean search(String word)` å¦‚æœå­—ç¬¦ä¸² `word` åœ¨å‰ç¼€æ ‘ä¸­ï¼Œè¿”å› `true`ï¼ˆå³ï¼Œåœ¨æ£€ç´¢ä¹‹å‰å·²ç»æ’å…¥ï¼‰ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚
- `boolean startsWith(String prefix)` å¦‚æœä¹‹å‰å·²ç»æ’å…¥çš„å­—ç¬¦ä¸² `word` çš„å‰ç¼€ä¹‹ä¸€ä¸º `prefix` ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥
["Trie", "insert", "search", "search", "startsWith", "insert", "search"]
[[], ["apple"], ["apple"], ["app"], ["app"], ["app"], ["app"]]
è¾“å‡º
[null, null, true, false, true, null, true]

è§£é‡Š
Trie trie = new Trie();
trie.insert("apple");
trie.search("apple");   // è¿”å› True
trie.search("app");     // è¿”å› False
trie.startsWith("app"); // è¿”å› True
trie.insert("app");
trie.search("app");     // è¿”å› True
```

Trie æ ‘
TrieTrieTrie æ ‘ï¼ˆåˆå«ã€Œå‰ç¼€æ ‘ã€æˆ–ã€Œå­—å…¸æ ‘ã€ï¼‰æ˜¯ä¸€ç§ç”¨äºå¿«é€ŸæŸ¥è¯¢ã€ŒæŸä¸ªå­—ç¬¦ä¸²/å­—ç¬¦å‰ç¼€ã€æ˜¯å¦å­˜åœ¨çš„æ•°æ®ç»“æ„ã€‚

å…¶æ ¸å¿ƒæ˜¯ä½¿ç”¨ã€Œè¾¹ã€æ¥ä»£è¡¨æœ‰æ— å­—ç¬¦ï¼Œä½¿ç”¨ã€Œç‚¹ã€æ¥è®°å½•æ˜¯å¦ä¸ºã€Œå•è¯ç»“å°¾ã€ä»¥åŠã€Œå…¶åç»­å­—ç¬¦ä¸²çš„å­—ç¬¦æ˜¯ä»€ä¹ˆã€ã€‚

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/1618369228-slAfrQ-IMG_1659.png#id=rsOnW&originHeight=583&originWidth=1024&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```java
class Trie {
    class TrieNode{
        // Trie çš„æ¯ä¸ªç»“ç‚¹ä¸­éƒ½ä¿ç•™ç€ä¸€ä¸ªå­—æ¯è¡¨ï¼Œè¿™æ˜¯å¾ˆè€—è´¹ç©ºé—´çš„ã€‚
        boolean end;
        TrieNode[] tns = new TrieNode[26];
    }
    TrieNode root;
    public Trie() {
        root = new TrieNode();
    }
    
    public void insert(String word) {
        TrieNode p = root;
        /**
         * é¦–å…ˆä»æ ¹ç»“ç‚¹çš„å­ç»“ç‚¹å¼€å§‹ä¸ word ç¬¬ä¸€ä¸ªå­—ç¬¦è¿›è¡ŒåŒ¹é…ï¼Œ
         * ä¸€ç›´åŒ¹é…åˆ°å‰ç¼€é“¾ä¸Šæ²¡æœ‰å¯¹åº”çš„å­—ç¬¦ï¼Œ
         * è¿™æ—¶å¼€å§‹ä¸æ–­å¼€è¾Ÿæ–°çš„ç»“ç‚¹ï¼Œç›´åˆ°æ’å…¥å®Œ word çš„æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œ
         * åŒæ—¶è¿˜è¦å°†æœ€åä¸€ä¸ªç»“ç‚¹isEnd = true;ï¼Œè¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ªå•è¯çš„æœ«å°¾ã€‚
         */
        for (char c : word.toCharArray()) {
            int u = c - 'a';
            if (p.tns[u]==null) p.tns[u] = new TrieNode();
            p = p.tns[u];//26å‰æ ‘
        }
        p.end = true;
    }
    
    public boolean search(String word) {
        TrieNode p = root;
        /**
         * ä»æ ¹ç»“ç‚¹çš„å­ç»“ç‚¹å¼€å§‹ï¼Œä¸€ç›´å‘ä¸‹åŒ¹é…å³å¯ï¼Œ
         * å¦‚æœå‡ºç°ç»“ç‚¹å€¼ä¸ºç©ºå°±è¿”å› falseï¼Œ
         * å¦‚æœåŒ¹é…åˆ°äº†æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œé‚£æˆ‘ä»¬åªéœ€åˆ¤æ–­ node->isEndå³å¯ã€‚
         */
        for (char c : word.toCharArray()) {
            int u = c - 'a';
            if (p.tns[u]==null) return false;
            p = p.tns[u];//26å‰æ ‘
        }
        return p.end;
    }

    /**
     * åˆ¤æ–­ Trie ä¸­æ˜¯æˆ–æœ‰ä»¥ prefix ä¸ºå‰ç¼€çš„å•è¯
     * @param prefix
     * @return
     */
    public boolean startsWith(String prefix) {
        TrieNode p = root;
        for (char c : prefix.toCharArray()) {
            int u = c - 'a';
            if (p.tns[u]==null) return false;
            p = p.tns[u];//26å‰æ ‘
        }
        return true;
    }
}
```

### [211. æ·»åŠ ä¸æœç´¢å•è¯ - æ•°æ®ç»“æ„è®¾è®¡](https://leetcode.cn/problems/design-add-and-search-words-data-structure/)

è¯·ä½ è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œæ”¯æŒ æ·»åŠ æ–°å•è¯ å’Œ æŸ¥æ‰¾å­—ç¬¦ä¸²æ˜¯å¦ä¸ä»»ä½•å…ˆå‰æ·»åŠ çš„å­—ç¬¦ä¸²åŒ¹é… ã€‚

å®ç°è¯å…¸ç±» `WordDictionary` ï¼š

- `WordDictionary()` åˆå§‹åŒ–è¯å…¸å¯¹è±¡
- `void addWord(word)` å°† `word` æ·»åŠ åˆ°æ•°æ®ç»“æ„ä¸­ï¼Œä¹‹åå¯ä»¥å¯¹å®ƒè¿›è¡ŒåŒ¹é…
- `bool search(word)` å¦‚æœæ•°æ®ç»“æ„ä¸­å­˜åœ¨å­—ç¬¦ä¸²ä¸ `word` åŒ¹é…ï¼Œåˆ™è¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚`word` ä¸­å¯èƒ½åŒ…å«ä¸€äº› `'.'` ï¼Œæ¯ä¸ª `.` éƒ½å¯ä»¥è¡¨ç¤ºä»»ä½•ä¸€ä¸ªå­—æ¯ã€‚

**ç¤ºä¾‹ï¼š**

```
è¾“å…¥ï¼š
["WordDictionary","addWord","addWord","addWord","search","search","search","search"]
[[],["bad"],["dad"],["mad"],["pad"],["bad"],[".ad"],["b.."]]
è¾“å‡ºï¼š
[null,null,null,null,false,true,true,true]

è§£é‡Šï¼š
WordDictionary wordDictionary = new WordDictionary();
wordDictionary.addWord("bad");
wordDictionary.addWord("dad");
wordDictionary.addWord("mad");
wordDictionary.search("pad"); // è¿”å› False
wordDictionary.search("bad"); // è¿”å› True
wordDictionary.search(".ad"); // è¿”å› True
wordDictionary.search("b.."); // è¿”å› True
```

```java
class WordDictionary {
    class TrieNode{
        boolean isWord;
        TrieNode[] tns = new TrieNode[26];
    }
    TrieNode root;

    public WordDictionary() {
        root = new TrieNode();
    }
    
    public void addWord(String word) {
        TrieNode p = root;
        for (char c : word.toCharArray()) {
            int u = c - 'a';
            if (p.tns[u]==null) p.tns[u]= new TrieNode();
            p = p.tns[u];//å°±æ˜¯æ’å…¥ä¸€ä¸ªuçš„ä¸‹æ ‡çš„å…ƒç´ 
        }
        p.isWord = true;
    }
    
    public boolean search(String word) {
        return dfs(word,root,0);
    }
  //dfsæ·±åº¦æœç´¢
    boolean dfs(String s,TrieNode p,int idx){
        if (idx==s.length()) return p.isWord;
        char c = s.charAt(idx);
        if (c=='.'){
            for (int i = 0; i < 26; i++) {
                //éå†ä¸€ä¸‹æ‰€æœ‰çš„26ä¸ªå­—æ¯ï¼Œå¦‚æœä¸ç­‰äºnullï¼Œç»§ç»­å›æº¯éå†
                if (p.tns[i]!=null && dfs(s,p.tns[i],idx+1)) return true;
            }
            return false;
        }else {
            if (p.tns[c-'a']==null) return false;
            return dfs(s,p.tns[c-'a'],idx+1);//ç»§ç»­éå†ä¸‹ä¸€ä¸ªã€‚
        }
    }
}
```

### [212. å•è¯æœç´¢ II](https://leetcode.cn/problems/word-search-ii/)

ç»™å®šä¸€ä¸ª `m x n` äºŒç»´å­—ç¬¦ç½‘æ ¼ `board` å’Œä¸€ä¸ªå•è¯ï¼ˆå­—ç¬¦ä¸²ï¼‰åˆ—è¡¨ `words`ï¼Œ _è¿”å›æ‰€æœ‰äºŒç»´ç½‘æ ¼ä¸Šçš„å•è¯_ ã€‚

å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ **ç›¸é‚»çš„å•å…ƒæ ¼** å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯åœ¨ä¸€ä¸ªå•è¯ä¸­ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2020/11/07/search1.jpg#id=kSK9o&originHeight=322&originWidth=322&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šboard = [["o","a","a","n"],["e","t","a","e"],["i","h","k","r"],["i","f","l","v"]], words = ["oath","pea","eat","rain"]
è¾“å‡ºï¼š["eat","oath"]
```

**ç¤ºä¾‹ 2ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/search2.jpg#id=WlrhK&originHeight=162&originWidth=162&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šboard = [["a","b"],["c","d"]], words = ["abcb"]
è¾“å‡ºï¼š[]
```

**æç¤ºï¼š**

- `m == board.length`
- `n == board[i].length`
- `1 <= m, n <= 12`
- `board[i][j]` æ˜¯ä¸€ä¸ªå°å†™è‹±æ–‡å­—æ¯
- `1 <= words.length <= 3 * 104`
- `1 <= words[i].length <= 10`

```java
class Solution {
    class TrieNode{
        String s;
        TrieNode[] tns= new TrieNode[26];
    }
    void insert(String s){
        TrieNode p = root;
        for (char c : s.toCharArray()) {
            int u = c - 'a';
            if (p.tns[u]==null) p.tns[u] = new TrieNode();
            p = p.tns[u];
        }
        p.s = s;//å­˜å‚¨å½“å‰çš„å•è¯
    }
    Set<String> set = new HashSet<>();
    char[][] board;
    int m,n;//æ–¹å—çš„å¤§å°å°äº 12
    TrieNode root = new TrieNode();
    int[][] dirs = new int[][]{{1,0},{-1,0},{0,1},{0,-1}};
    boolean[][] vis = new boolean[15][15];//15å¤Ÿç”¨äº†
    public List<String> findWords(char[][] board, String[] words) {
        this.board = board;
        m = board.length;
        n = board[0].length;
        for (String word : words) {
            insert(word);//å°†æ‰€æœ‰çš„å•è¯å­˜è¿›å»å­—å…¸æ ‘é‡Œé¢ï¼Œå¦‚æœéå†åˆ°æœ‰å•è¯çš„æ—¶å€™ï¼Œå°±ç›´æ¥æ·»åŠ åˆ°ç»“æœ
        }
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                int u = board[i][j] - 'a';
                if (root.tns[u]!=null){
                    //å½“å‰æ£‹ç›˜å½“å‰ä½ç½®èƒ½å¤Ÿåœ¨å­—å…¸æ ‘æ‰¾åˆ°å¯¹åº”çš„å­—æ¯å°±ç»§ç»­å¼€å§‹å¯»æ‰¾
                    vis[i][j]=true;
                    dfs(i,j,root.tns[u]);
                    vis[i][j] = false;
                }
            }
        }
        List<String> ans = new ArrayList<>();
        for (String s : set) {
            ans.add(s);
        }
        return ans;
    }
    void dfs(int i,int j,TrieNode node){
        if (node.s!=null) set.add(node.s);
        for (int[] dir : dirs) {
            int dx = i+dir[0],dy = j+dir[1];
            if (dx<0||dx>=m||dy<0||dy>=n) continue;//è¶…é™çš„å°±ä¸éå†äº†
            if (vis[dx][dy]) continue;//éå†è¿‡çš„å°±ä¸éå†äº†ã€‚
            int u = board[dx][dy] - 'a';
            if (node.tns[u]!=null){
                vis[dx][dy]=true;
                dfs(dx,dy,node.tns[u]);
                vis[dx][dy] = false;
            }
        }
    }
}
```

## å †/ä¼˜å…ˆé˜Ÿåˆ—

### æ–¹æ³•æ‘˜è¦
| **Modifier and Type** | **Method and Description** |
| --- | --- |
| `**boolean**` | `**add(E e)**`
,**å°†æŒ‡å®šçš„å…ƒç´ æ’å…¥åˆ°æ­¤ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­ã€‚** |
| `**void**` | `**clear()**`
,**ä»æ­¤ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­åˆ é™¤æ‰€æœ‰å…ƒç´ ã€‚** |
| `**Comparator<? super E>**` | `**comparator()**`
,**è¿”å›ç”¨äºä¸ºäº†åœ¨è¿™ä¸ªé˜Ÿåˆ—ä¸­çš„å…ƒç´ ï¼Œæˆ–æ¯”è¾ƒ**`**null**`
**å¦‚æœæ­¤é˜Ÿåˆ—æ ¹æ®æ‰€è¿°æ’åº **[**natural ordering**](https://blog.csdn.net/qq_22596931/java/lang/Comparable.html)
** çš„å…ƒç´ ã€‚** |
| `**boolean**` | `**contains(Object o)**`
,**å¦‚æœæ­¤é˜Ÿåˆ—åŒ…å«æŒ‡å®šçš„å…ƒç´ ï¼Œåˆ™è¿”å› **`**true**`
** ã€‚** |
| `**Iterator<E>**` | `**iterator()**`
,**è¿”å›æ­¤é˜Ÿåˆ—ä¸­çš„å…ƒç´ çš„è¿­ä»£å™¨ã€‚** |
| `**boolean**` | `**offer(E e)**`
,**å°†æŒ‡å®šçš„å…ƒç´ æ’å…¥åˆ°æ­¤ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­ã€‚** |
| `**E**` | `**peek()**`
,**æ£€ç´¢ä½†ä¸åˆ é™¤æ­¤é˜Ÿåˆ—çš„å¤´ï¼Œå¦‚æœæ­¤é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å› **`**null**`
** ã€‚** |
| `**E**` | `**poll()**`
,**æ£€ç´¢å¹¶åˆ é™¤æ­¤é˜Ÿåˆ—çš„å¤´ï¼Œå¦‚æœæ­¤é˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™è¿”å› **`**null**`
** ã€‚** |
| `**boolean**` | `**remove(Object o)**`
,**ä»è¯¥é˜Ÿåˆ—ä¸­åˆ é™¤æŒ‡å®šå…ƒç´ çš„å•ä¸ªå®ä¾‹ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚** |
| `**int**` | `**size()**`
,**è¿”å›æ­¤é›†åˆä¸­çš„å…ƒç´ æ•°ã€‚** |
| `**Spliterator<E>**` | `**spliterator()**`
,**åœ¨æ­¤é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸Šåˆ›å»º ***[**late-binding**](https://blog.csdn.net/qq_22596931/article/details/Spliterator.html#binding)
*** å’Œ*å¤±è´¥å¿«é€Ÿ* **`[**Spliterator**](https://blog.csdn.net/qq_22596931/java/util/Spliterator.html)`
** ã€‚** |
| `**Object[]**` | `**toArray()**`
,**è¿”å›ä¸€ä¸ªåŒ…å«æ­¤é˜Ÿåˆ—ä¸­æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ã€‚**å…ƒç´ æ²¡æœ‰ç‰¹å®šçš„é¡ºåºã€‚è¿”å›çš„æ•°ç»„å°†æ˜¯ â€œå®‰å…¨çš„â€ï¼Œå› ä¸ºè¯¥é˜Ÿåˆ—ä¸ä¿ç•™å¯¹å®ƒçš„å¼•ç”¨ã€‚ ï¼ˆæ¢å¥è¯è¯´ï¼Œè¿™ä¸ªæ–¹æ³•å¿…é¡»åˆ†é…ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼‰ã€‚ å› æ­¤ï¼Œè°ƒç”¨è€…å¯ä»¥è‡ªç”±åœ°ä¿®æ”¹è¿”å›çš„æ•°ç»„ã€‚æ­¤æ–¹æ³•å……å½“åŸºäºé˜µåˆ—å’ŒåŸºäºé›†åˆçš„ API ä¹‹é—´çš„æ¡¥æ¢ã€‚ |
| `**<T> T[]**` | `**toArray(T[] a)**`
,**è¿”å›ä¸€ä¸ªåŒ…å«æ­¤é˜Ÿåˆ—ä¸­æ‰€æœ‰å…ƒç´ çš„æ•°ç»„; è¿”å›çš„æ•°ç»„çš„è¿è¡Œæ—¶ç±»å‹æ˜¯æŒ‡å®šæ•°ç»„çš„è¿è¡Œæ—¶ç±»å‹ã€‚** |


ä¸æŒ‡å®š Comparator æ—¶é»˜è®¤ä¸ºæœ€å°å †, é€šè¿‡ä¼ å…¥è‡ªå®šä¹‰çš„ Comparator å‡½æ•°å¯ä»¥å®ç°å¤§é¡¶å †ã€‚

```java
PriorityQueue<Integer> minHeap = new PriorityQueue<Integer>(); //å°é¡¶å †ï¼Œé»˜è®¤å®¹é‡ä¸º11
PriorityQueue<Integer> maxHeap = new PriorityQueue<Integer>(new Comparator<Integer>(){ //å¤§é¡¶å †ï¼Œå®¹é‡11
    @Override
    public int compare(Integer i1,Integer i2){
        return i2-i1;
    }
});
PriorityQueue<String> priorityQueue = new PriorityQueue<>(Comparator.reverseOrder());
```

è¿™æ˜¯ä¸€é¢—åŒ…å«æ•´æ•° 1, 2, 3, 4, 5, 6, 7 çš„**å°é¡¶å †ï¼š**

```latex
      1
     / \
    2   3
   / \ / \
  4  5 6  7
```

è¿™æ˜¯ä¸€é¢—å¤§é¡¶å †ã€‚

```
            8
          /   \
         7     5
        / \   / \
       6   4 2   1
```

```java
//è‡ªå®šä¹‰æ¯”è¾ƒå™¨ï¼Œé™åºæ’åˆ—
	static Comparator<Integer> cmp = new Comparator<Integer>() {
	      public int compare(Integer e1, Integer e2) {
	        return e2 - e1;  //é™åº
	      }
	    };
	public static void main(String[] args) {
	        //ä¸ç”¨æ¯”è¾ƒå™¨ï¼Œé»˜è®¤å‡åºæ’åˆ—
	        Queue<Integer> q = new PriorityQueue<>();
	        q.add(8);
	        q.add(5);
	        q.add(13);
	        q.add(2);
	        System.out.println("**,********ä¸ä½¿ç”¨æ¯”è¾ƒå™¨********************");
	        while(!q.isEmpty())
	        {
	            System.out.print(q.poll()+" ");
	        }
	        System.out.println();
	        System.out.println("**********ä½¿ç”¨æ¯”è¾ƒå™¨********************");
	        //ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå™¨ï¼Œé™åºæ’åˆ—
	        Queue qq = new PriorityQueue(cmp);
	        qq.add(8);
	        qq.add(5);
	        qq.add(13);
	        qq.add(2);
	        while(!qq.isEmpty())
	        {
	            System.out.print(qq.poll()+" ");
	        }
	}

**********ä¸ä½¿ç”¨æ¯”è¾ƒå™¨********************
2 5 8 13 
**********ä½¿ç”¨æ¯”è¾ƒå™¨********************
13 8 5 2
```

PriorityQueue çš„ iteratorï¼ˆï¼‰ä¸ä¿è¯ä»¥ä»»ä½•ç‰¹å®šé¡ºåºéå†é˜Ÿåˆ—å…ƒç´ ã€‚è‹¥æƒ³æŒ‰ç‰¹å®šé¡ºåºéå†ï¼Œå…ˆå°†é˜Ÿåˆ—è½¬æˆæ•°ç»„ï¼Œç„¶åæ’åºéå†

```java
Queue<Integer> q = new PriorityQueue<>(cmp);
        int[] nums= {2,5,3,4,1,6};
        for(int i:nums)
        {
            q.add(i);
        }
        Object[] nn=q.toArray();
        Arrays.sort(nn);
        for(int i=nn.length-1;i>=0;i--)
            System.out.print((int)nn[i]+" ");
        /**
         * è¾“å‡ºç»“æœ
         * 6 5 4 3 2 1 
         */
```

### [215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´ ](https://leetcode.cn/problems/kth-largest-element-in-an-array/)

ç»™å®šæ•´æ•°æ•°ç»„ `nums` å’Œæ•´æ•° `k`ï¼Œè¯·è¿”å›æ•°ç»„ä¸­ç¬¬ `**k**` ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚

è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ `k` ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ `k` ä¸ªä¸åŒçš„å…ƒç´ ã€‚

ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: [3,2,1,5,6,4], k = 2
è¾“å‡º: 5
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: [3,2,3,1,2,4,5,5,6], k = 4
è¾“å‡º: 4
```

**æç¤ºï¼š**

- `1 <= k <= nums.length <= 105`
- `-104 <= nums[i] <= 104`

```java
class Solution {
    public int findKthLargest(int[] nums, int k) {
        //ä½¿ç”¨å †çš„æ–¹æ³•
        if (nums==null||nums.length<k ||k==0) return Integer.MIN_VALUE;
        PriorityQueue<Integer> maxQ = new PriorityQueue<>(Collections.reverseOrder());
        for (int num : nums) {
            maxQ.add(num);
        }
        while (k-->1){
            maxQ.poll();
        }
        return maxQ.peek();
    }
}
```

```java
class Solution {
    public int findKthLargest(int[] nums, int k) {
        //ä½¿ç”¨å †çš„æ–¹æ³•
        if (nums==null||nums.length<k ||k==0) return Integer.MIN_VALUE;
        PriorityQueue<Integer> maxQueue = new PriorityQueue<>(
            new Comparator<Integer>(){
                @Override
                public int compare(Integer o1,Integer o2){
                    return o2-o1;
                }
            }
        );
        for(int u: nums){
            maxQueue.add(u);
        }
        for(int i = k; i>1;i--){
            maxQueue.poll();
        }
        return maxQueue.peek();

    }
}
```

# äºŒã€ç®—æ³•é—®é¢˜

## æ’åºç®—æ³•

[ç›¸å¯¹è·¯å¾„](%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95.md)

## åŒæŒ‡é’ˆç®—æ³•
### [11. ç››æœ€å¤šæ°´çš„å®¹å™¨](https://leetcode.cn/problems/container-with-most-water/)
ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ height ã€‚æœ‰ n æ¡å‚çº¿ï¼Œç¬¬ i æ¡çº¿çš„ä¸¤ä¸ªç«¯ç‚¹æ˜¯ (i, 0) å’Œ (i, height[i]) ã€‚
æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ x è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚
è¿”å›å®¹å™¨å¯ä»¥å‚¨å­˜çš„æœ€å¤§æ°´é‡ã€‚
è¯´æ˜ï¼šä½ ä¸èƒ½å€¾æ–œå®¹å™¨ã€‚

**ç¤ºä¾‹ 1ï¼š**
![](https://cdn.nlark.com/yuque/0/2024/jpeg/1389077/1714622261324-1a52b70b-56be-4f9d-9722-4721aee20f02.jpeg#averageHue=%234a4b49&clientId=ud7ca9d0f-538b-4&from=paste&id=uf5783842&originHeight=383&originWidth=801&originalType=url&ratio=2&rotation=0&showTitle=false&status=done&style=none&taskId=u76aa2da2-8f22-436d-b9bb-806d071afff&title=)
```
è¾“å…¥ï¼š[1,8,6,2,5,4,8,3,7]
è¾“å‡ºï¼š49 
è§£é‡Šï¼šå›¾ä¸­å‚ç›´çº¿ä»£è¡¨è¾“å…¥æ•°ç»„ [1,8,6,2,5,4,8,3,7]ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå®¹å™¨èƒ½å¤Ÿå®¹çº³æ°´ï¼ˆè¡¨ç¤ºä¸ºè“è‰²éƒ¨åˆ†ï¼‰çš„æœ€å¤§å€¼ä¸º 49ã€‚
```
**ç¤ºä¾‹ 2ï¼š**
```
è¾“å…¥ï¼šheight = [1,1]
è¾“å‡ºï¼š1
```

è¿™é“é¢˜ç›®çœ‹ä¼¼ç®€å•ï¼Œåšèµ·æ¥æ‰å‘ç°ä¸å®¹æ˜“ã€‚åˆ†æ²»æ³•ã€åŠ¨æ€è§„åˆ’éƒ½ç”¨ä¸ä¸Šï¼Œè¦æƒ³å¾—åˆ° O(n)O(n)O(n) çš„è§£æ³•åªæœ‰ä½¿ç”¨åŒæŒ‡é’ˆä¸€æ¡è·¯ã€‚å³ä½¿çœ‹äº†ç­”æ¡ˆçŸ¥é“äº†åŒæŒ‡é’ˆè§£æ³•ï¼Œä½ ä¹Ÿå¯èƒ½å¹¶ä¸æ¸…æ¥šè¿™ä¸ªè§£æ³•ä¸ºä»€ä¹ˆæ­£ç¡®ã€‚ä¸ºä»€ä¹ˆåŒæŒ‡é’ˆå¾€ä¸­é—´ç§»åŠ¨æ—¶ï¼Œä¸ä¼šæ¼æ‰æŸäº›æƒ…å†µå‘¢ï¼Ÿ
ç”¨ä¸€å¥è¯æ¦‚æ‹¬åŒæŒ‡é’ˆè§£æ³•çš„è¦ç‚¹ï¼šæŒ‡é’ˆæ¯ä¸€æ¬¡ç§»åŠ¨ï¼Œéƒ½æ„å‘³ç€æ’é™¤æ‰äº†ä¸€ä¸ªæŸ±å­ã€‚
å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬è€ƒè™‘ç›¸è·æœ€è¿œçš„ä¸¤ä¸ªæŸ±å­æ‰€èƒ½å®¹çº³æ°´çš„é¢ç§¯ã€‚æ°´çš„å®½åº¦æ˜¯ä¸¤æ ¹æŸ±å­ä¹‹é—´çš„è·ç¦» _d_=8ï¼›æ°´çš„é«˜åº¦å–å†³äºä¸¤æ ¹æŸ±å­ä¹‹é—´è¾ƒçŸ­çš„é‚£ä¸ªï¼Œå³å·¦è¾¹æŸ±å­çš„é«˜åº¦ _h_=3ã€‚æ°´çš„é¢ç§¯å°±æ˜¯ 3Ã—8=24ã€‚
![image.png](https://cdn.nlark.com/yuque/0/2024/png/1389077/1714622419051-4cf9cc23-a95f-4200-8de7-4a4420088e87.png#averageHue=%23e7e4e2&clientId=ud7ca9d0f-538b-4&from=paste&height=250&id=u26337615&originHeight=500&originWidth=1200&originalType=binary&ratio=2&rotation=0&showTitle=false&size=29729&status=done&style=none&taskId=ue8a7337e-ce13-4379-843e-b184d82e692&title=&width=600)
å¦‚æœé€‰æ‹©å›ºå®šä¸€æ ¹æŸ±å­ï¼Œå¦å¤–ä¸€æ ¹å˜åŒ–ï¼Œæ°´çš„é¢ç§¯ä¼šæœ‰ä»€ä¹ˆå˜åŒ–å—ï¼Ÿç¨åŠ æ€è€ƒå¯å¾—ï¼š

- å½“å‰æŸ±å­æ˜¯æœ€ä¸¤ä¾§çš„æŸ±å­ï¼Œæ°´çš„å®½åº¦ ddd ä¸ºæœ€å¤§ï¼Œå…¶ä»–çš„ç»„åˆï¼Œæ°´çš„å®½åº¦éƒ½æ¯”è¿™ä¸ªå°ã€‚
- å·¦è¾¹æŸ±å­è¾ƒçŸ­ï¼Œå†³å®šäº†æ°´çš„é«˜åº¦ä¸º `3`ã€‚å¦‚æœç§»åŠ¨å·¦è¾¹çš„æŸ±å­ï¼Œæ–°çš„æ°´é¢é«˜åº¦ä¸ç¡®å®šï¼Œä¸€å®šä¸ä¼šè¶…è¿‡å³è¾¹çš„æŸ±å­é«˜åº¦ 7ã€‚
- å¦‚æœç§»åŠ¨å³è¾¹çš„æŸ±å­ï¼Œæ–°çš„æ°´é¢é«˜åº¦ä¸€å®šä¸ä¼šè¶…è¿‡å·¦è¾¹çš„æŸ±å­é«˜åº¦ `3`ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šè¶…è¿‡ç°åœ¨çš„æ°´é¢é«˜åº¦ã€‚

![image.jpg](https://cdn.nlark.com/yuque/0/2024/jpeg/1389077/1714622445083-b601c4d3-610f-4df6-be49-4dd24ca4010f.jpeg#averageHue=%23ede9e5&clientId=u9235c46d-065e-4&from=paste&id=ue8a472f3&originHeight=500&originWidth=1200&originalType=url&ratio=1&rotation=0&showTitle=false&size=76713&status=done&style=none&taskId=ua2393a4e-5439-4f35-aaf0-fe3d326ccbb&title=)
ç”±æ­¤å¯è§ï¼Œå¦‚æœå›ºå®šå·¦è¾¹çš„æŸ±å­ï¼Œç§»åŠ¨å³è¾¹çš„æŸ±å­ï¼Œé‚£ä¹ˆæ°´çš„é«˜åº¦ä¸€å®šä¸ä¼šå¢åŠ ï¼Œä¸”å®½åº¦ä¸€å®šå‡å°‘ï¼Œæ‰€ä»¥æ°´çš„é¢ç§¯ä¸€å®šå‡å°‘ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå·¦è¾¹çš„æŸ±å­å’Œä»»æ„ä¸€ä¸ªå…¶ä»–æŸ±å­çš„ç»„åˆï¼Œå…¶å®éƒ½å¯ä»¥æ’é™¤äº†ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥æ’é™¤æ‰å·¦è¾¹çš„æŸ±å­äº†ã€‚
è¿™ä¸ªæ’é™¤æ‰å·¦è¾¹æŸ±å­çš„æ“ä½œï¼Œå°±æ˜¯åŒæŒ‡é’ˆä»£ç é‡Œçš„ `i++`ã€‚`i` å’Œ `j` ä¸¤ä¸ªæŒ‡é’ˆä¸­é—´çš„åŒºåŸŸéƒ½æ˜¯è¿˜æœªæ’é™¤æ‰çš„åŒºåŸŸã€‚éšç€ä¸æ–­çš„æ’é™¤ï¼Œ`i` å’Œ `j` éƒ½ä¼šå¾€ä¸­é—´ç§»åŠ¨ã€‚å½“ `i` å’Œ `j` ç›¸é‡ï¼Œç®—æ³•å°±ç»“æŸäº†ã€‚

```java
public int maxArea(int[] height) {
    //åŒæŒ‡é’ˆè´ªå¿ƒç®—æ³•
    int left = 0;
    int right = height.length-1;
    int res  =0;
    while (left<right){
        if (height[left]<height[right]){
            //æ°´æ˜¯çŸ­æ¿æ•ˆåº”ã€‚
            //è¿™ä¸ªæ—¶å€™leftçš„æŸ±å­å°±æ˜¯ä»£è¡¨è¿™ä¸ªå®½åº¦é‡Œé¢æœ€å¤§é¢è¯•çš„æ°´äº†
            //æ— è®ºæ€ä¹ˆå³è¾¹æŸ±å­æ€ä¹ˆç§»åŠ¨ï¼Œæ°´åªèƒ½åˆ°leftè¿™ä¸ªé«˜åº¦ï¼Œè€Œä¸”å®½åº¦è¿˜ä¼šé™ä½
            res = Math.max(res,(right-left)*height[left]);
            left++;
        }else {
            res = Math.max(res,(right-left)*height[right]);
            right--;
        }
    }
    return res;
}
```
 
### 34.æœç´¢æ’åºæ•°ç»„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ ã€‚
ç»™ä½ ä¸€ä¸ªæŒ‰ç…§éé€’å‡é¡ºåºæ’åˆ—çš„æ•´æ•°æ•°ç»„ numsï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ targetã€‚è¯·ä½ æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚
å¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ targetï¼Œè¿”å› [-1, -1]ã€‚
ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚
ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 8
è¾“å‡ºï¼š[3,4]
```
**ç¤ºä¾‹ 2ï¼š**
```
è¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 6
è¾“å‡ºï¼š[-1,-1]
```
**ç¤ºä¾‹ 3ï¼š**
```
è¾“å…¥ï¼šnums = [], target = 0
è¾“å‡ºï¼š[-1,-1]
```
```java
class Solution {
    public int[] searchRange(int[] nums, int target) {
        int l = 0;
        int r = nums.length-1;
        int s = -1;
        int e = -1;
        while (l<=r){
            //[l,r],æ‰€ä»¥lã€Š=ræ˜¯ä¸€ä¸ªåˆæ³•çš„åŒºé—´
            int m = l + (r - l) / 2;
            if (nums[m]==target){
                while (m>=0&&nums[m]==target){
                    m--;
                }
                s = m+1;
                m++;
                while (m< nums.length&&nums[m]==target){
                    m++;
                }
                e = m-1;
                return new int[]{s,e};
            } else if (nums[m] > target) {
                r = m-1;
            }else {
                l = m+1;
            }
        }
        return new int[]{s,e};
    }
}
```
## KMP
å‚è€ƒï¼š[[KMPç®—æ³•]]

```java
public class kmp {
    public static void main(String[] args) {
        String str1 = "BBCABCDABABCDABCDABDE";
        String str2 = "ABCDABD";
        System.out.println(Arrays.toString(kmpNext(str2)));
        System.out.println(kmpSearch(str1,str2,kmpNext(str2)));
    }
    public static int kmpSearch(String s1,String s2,int[] next){
        for (int i = 0,j=0; i < s1.length(); i++) {
            //ä¸åŒ¹é…å°±è·å–ä¸Šä¸€æ¬¡çš„éƒ¨åˆ†åŒ¹é…è¡¨çš„ä¸Šä¸€ä½
            while (j>0&&s1.charAt(i)!=s2.charAt(j)) j =next[j-1];
            if (s1.charAt(i)==s2.charAt(j)) j++;
            if (j==s2.length()) return i-j+1;
        }
        return -1;
    }
    public static int[] kmpNext(String dest){
        int[] next = new int[dest.length()];
        next[0] = 0;//[ABCDABD],[A]çš„éƒ¨åˆ†åŒ¹é…è¡¨æ˜¯0
        int j = 0;
        for (int i = 1; i < dest.length(); i++) {
            while (j>0&&dest.charAt(i)!=dest.charAt(j)){
                j = next[j-1];//çœ‹ä½œæ˜¯jä»¥å‰çš„å°ä¸²å»åŒ¹é…içš„å¤§ä¸²
            }
            if (dest.charAt(i)==dest.charAt(j)) j++;
            next[i]=j;
        }
        return next;
    }

}
```
## é€’å½’ç®—æ³•

### 257 äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„

ç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼ŒæŒ‰ ä»»æ„é¡ºåº ï¼Œè¿”å›æ‰€æœ‰ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚

å¶å­èŠ‚ç‚¹ æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚

ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šroot = [1,2,3,null,5]
è¾“å‡ºï¼š["1->2->5","1->3"]

```java
    List<TreeNode> path = new ArrayList<>();
    List<String> ans = new ArrayList<>();
    StringBuilder sb = new StringBuilder();
    public List<String> binaryTreePaths(TreeNode root) {
        if (root == null) return ans;
        recur(root,"");
        return ans;
    }
    public void recur(TreeNode root,String path) {
        if (root == null) return;
        if (root.left == null && root.right == null) {
            ans.add(new StringBuilder(path).append(root.val).toString());
            return;//å¶å­èŠ‚ç‚¹çš„æ—¶å€™å°±ä¿å­˜ä¸€ä¸‹
        }
        String tmp = new StringBuilder(path).append(root.val).append("->").toString();
        recur(root.left,tmp);
        recur(root.right,tmp);
    }ï¿½
```

## å›æº¯ç®—æ³•æ¨¡ç‰ˆ

å›æº¯æ˜¯é€’å½’çš„å‰¯äº§å“ï¼Œåªè¦æœ‰é€’å½’å°±ä¼šæœ‰å›æº¯ã€‚

**å› ä¸ºå›æº¯çš„æœ¬è´¨æ˜¯ç©·ä¸¾ï¼Œç©·ä¸¾æ‰€æœ‰å¯èƒ½ï¼Œç„¶åé€‰å‡ºæˆ‘ä»¬æƒ³è¦çš„ç­”æ¡ˆ**ï¼Œå¦‚æœæƒ³è®©å›æº¯æ³•é«˜æ•ˆä¸€äº›ï¼Œå¯ä»¥åŠ ä¸€äº›å‰ªæçš„æ“ä½œï¼Œä½†ä¹Ÿæ”¹ä¸äº†å›æº¯æ³•å°±æ˜¯ç©·ä¸¾çš„æœ¬è´¨ã€‚

é‚£ä¹ˆæ—¢ç„¶å›æº¯æ³•å¹¶ä¸é«˜æ•ˆä¸ºä»€ä¹ˆè¿˜è¦ç”¨å®ƒå‘¢ï¼Ÿ

å› ä¸ºæ²¡å¾—é€‰ï¼Œä¸€äº›é—®é¢˜èƒ½æš´åŠ›æœå‡ºæ¥å°±ä¸é”™äº†ï¼Œæ’‘æ­»äº†å†å‰ªæä¸€ä¸‹ï¼Œè¿˜æ²¡æœ‰æ›´é«˜æ•ˆçš„è§£æ³•ã€‚

å›æº¯æ³•ï¼Œä¸€èˆ¬å¯ä»¥è§£å†³å¦‚ä¸‹å‡ ç§é—®é¢˜ï¼š

- ç»„åˆé—®é¢˜ï¼šNä¸ªæ•°é‡Œé¢æŒ‰ä¸€å®šè§„åˆ™æ‰¾å‡ºkä¸ªæ•°çš„é›†åˆ
- åˆ‡å‰²é—®é¢˜ï¼šä¸€ä¸ªå­—ç¬¦ä¸²æŒ‰ä¸€å®šè§„åˆ™æœ‰å‡ ç§åˆ‡å‰²æ–¹å¼
- å­é›†é—®é¢˜ï¼šä¸€ä¸ªNä¸ªæ•°çš„é›†åˆé‡Œæœ‰å¤šå°‘ç¬¦åˆæ¡ä»¶çš„å­é›†
- æ’åˆ—é—®é¢˜ï¼šNä¸ªæ•°æŒ‰ä¸€å®šè§„åˆ™å…¨æ’åˆ—ï¼Œæœ‰å‡ ç§æ’åˆ—æ–¹å¼
- æ£‹ç›˜é—®é¢˜ï¼šNçš‡åï¼Œè§£æ•°ç‹¬ç­‰ç­‰

**å›æº¯æ³•è§£å†³çš„é—®é¢˜éƒ½å¯ä»¥æŠ½è±¡ä¸ºæ ‘å½¢ç»“æ„**ï¼Œæ˜¯çš„ï¼Œæˆ‘æŒ‡çš„æ˜¯æ‰€æœ‰å›æº¯æ³•çš„é—®é¢˜éƒ½å¯ä»¥æŠ½è±¡ä¸ºæ ‘å½¢ç»“æ„ï¼

å› ä¸ºå›æº¯æ³•è§£å†³çš„éƒ½æ˜¯åœ¨é›†åˆä¸­é€’å½’æŸ¥æ‰¾å­é›†ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬æåˆ°äº†ï¼Œå›æº¯æ³•ä¸€èˆ¬æ˜¯åœ¨é›†åˆä¸­é€’å½’æœç´¢ï¼Œé›†åˆçš„å¤§å°æ„æˆäº†æ ‘çš„å®½åº¦ï¼Œé€’å½’çš„æ·±åº¦æ„æˆçš„æ ‘çš„æ·±åº¦ã€‚

å¦‚å›¾ï¼š

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/20210130173631174.png#id=FiBgs&originHeight=736&originWidth=1558&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

é€’å½’å°±è¦æœ‰ç»ˆæ­¢æ¡ä»¶ï¼Œæ‰€ä»¥å¿…ç„¶æ˜¯ä¸€æ£µé«˜åº¦æœ‰é™çš„æ ‘ï¼ˆNå‰æ ‘ï¼‰ã€‚

å¦‚æœæ˜¯æ±‚ç›®æ ‡targetï¼Œå°±æ˜¯æ‰¾åˆ°targetä¹‹åæ˜¯å¤šå°‘å±‚å°±æ˜¯å¤šå°‘å±‚ã€‚

```cpp
void backtracking(å‚æ•°) {
    if (ç»ˆæ­¢æ¡ä»¶) {
        å­˜æ”¾ç»“æœ;
        return;
    }a

    for (é€‰æ‹©ï¼šæœ¬å±‚é›†åˆä¸­å…ƒç´ ï¼ˆæ ‘ä¸­èŠ‚ç‚¹å­©å­çš„æ•°é‡å°±æ˜¯é›†åˆçš„å¤§å°ï¼‰) {
        å¤„ç†èŠ‚ç‚¹;
        backtracking(è·¯å¾„ï¼Œé€‰æ‹©åˆ—è¡¨); // é€’å½’
        å›æº¯ï¼Œæ’¤é”€å¤„ç†ç»“æœ
    }
}
```

å›æº¯å‡½æ•°éå†è¿‡ç¨‹ä¼ªä»£ç å¦‚ä¸‹ï¼š

```cpp
for (é€‰æ‹©ï¼šæœ¬å±‚é›†åˆä¸­å…ƒç´ ï¼ˆæ ‘ä¸­èŠ‚ç‚¹å­©å­çš„æ•°é‡å°±æ˜¯é›†åˆçš„å¤§å°ï¼‰) {
    å¤„ç†èŠ‚ç‚¹;
    backtracking(è·¯å¾„ï¼Œé€‰æ‹©åˆ—è¡¨); // é€’å½’
    å›æº¯ï¼Œæ’¤é”€å¤„ç†ç»“æœ
}
```

forå¾ªç¯å°±æ˜¯éå†é›†åˆåŒºé—´ï¼Œå¯ä»¥ç†è§£ä¸€ä¸ªèŠ‚ç‚¹æœ‰å¤šå°‘ä¸ªå­©å­ï¼Œè¿™ä¸ªforå¾ªç¯å°±æ‰§è¡Œå¤šå°‘æ¬¡ã€‚

### [40. ç»„åˆæ€»å’Œ II](https://leetcode.cn/problems/combination-sum-ii/)

ç»™å®šä¸€ä¸ªå€™é€‰äººç¼–å·çš„é›†åˆ `candidates` å’Œä¸€ä¸ªç›®æ ‡æ•° `target` ï¼Œæ‰¾å‡º `candidates` ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º `target` çš„ç»„åˆã€‚

`candidates` ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ **ä¸€æ¬¡** ã€‚

**æ³¨æ„ï¼š**è§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: candidates = [10,1,2,7,6,1,5], target = 8,
è¾“å‡º:
[
[1,1,6],
[1,2,5],
[1,7],
[2,6]
]
```

```java
class Solution {
    List<List<Integer>> ans = new ArrayList<>();
    List<Integer> path = new ArrayList<>();
    int sum = 0;
    public List<List<Integer>> combinationSum2(int[] candidates, int target) {
        Arrays.sort(candidates);
        traverse(candidates,target,0);
        return ans;
    }
    private void traverse(int[] candidates,int target,int idx){
        if (sum==target){
            ans.add(new ArrayList<>(path));
            return;
        }
        if (sum>target) return;
        for (int i = idx; i < candidates.length; i++) {
          //è¿™é‡Œæ˜¯åœ¨éå†é›†åˆåŒºé—´ï¼Œå¯ä»¥ç†è§£ä¸€ä¸ªèŠ‚ç‚¹æœ‰å¤šå°‘ä¸ªå­©å­ï¼Œidxå°±æ˜¯ä¿è¯æ¯ä¸€æ¬¡éå†å
          //å­©å­èŠ‚ç‚¹éƒ½ä¼šå°‘ä¸€ä¸ªã€‚
            int candidate = candidates[i];
            if (i>idx&&candidates[i-1]==candidate) continue;
            //å»é™¤é‡å¤çš„ï¼Œæ¯”å¦‚[1,2,2,3,3,4,5] è¿™æ ·éå†çš„æ—¶å€™ï¼Œå°±ä¼šå»é™¤é‡å¤çš„2å’Œé‡å¤çš„3
            //wocao,è¿™é‡Œç¡®å®ç¢‰å ¡äº†
          //å¦‚æœä¸æ˜¯ä¸Šè¿™æ ·ï¼Œç»“æœå°±æ˜¯ã€1 2 6ã€‘ã€ã€1 2 6ã€‘è¿™æ ·ä¼šç”¨é‡å¤çš„ç»“æœï¼Œ
          
            if (candidate >target) return;
            sum+=candidate;
            path.add(candidate);
            traverse(candidates, target, i+1);
            sum-=candidate;
            path.remove(path.size()-1);
        }
    }
}
```

### **FZ1** **ç‰›ç‰›çš„ä¸‰å…ƒç»„é—®é¢˜**-ä¸‰å…ƒä¹‹å’Œä¸º0

åŠ¨ç‰©ç‰›ç‰›æ˜¯ä¸€ä¸ªå‹‡æ•¢çš„å†’é™©å®¶ï¼Œå®ƒæ­£åœ¨æ¢ç´¢ä¸€ä¸ªç¥ç§˜çš„å²›å±¿ã€‚å²›ä¸Šæœ‰è®¸å¤šå®è—ï¼Œä½†æ˜¯å®è—è¢«éšè—åœ¨ä¸€ç³»åˆ—æ•°å­—ä¸­ã€‚ç‰›ç‰›æ‰¾åˆ°äº†ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œå®ƒç›¸ä¿¡è¿™ä¸ªæ•°ç»„ä¸­å­˜åœ¨ä¸€äº›ç‰¹æ®Šçš„ä¸‰å…ƒç»„ï¼Œæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

- ä¸‰å…ƒç»„çš„å’Œç­‰äº 0ã€‚
- ä¸‰å…ƒç»„ä¸­çš„å…ƒç´ ä¸èƒ½é‡å¤ã€‚
- ç‰›ç‰›æƒ³æŒ‰ç…§å­—å…¸åºè¿”å›æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„ä¸‰å…ƒç»„ã€‚

è¯·ä½ å¸®åŠ©ç‰›ç‰›è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè®¾è®¡ä¸€ä¸ªå‡½æ•° `findTriplets`ï¼Œæ¥æ”¶ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªäºŒç»´æ•´æ•°æ•°ç»„ï¼Œè¡¨ç¤ºæ»¡è¶³æ¡ä»¶çš„ä¸‰å…ƒç»„ï¼ŒæŒ‰ç…§å­—å…¸åºè¿”å›æ‰€æœ‰çš„ä¸‰å…ƒç»„ã€‚

```java
ArrayList<int[]> list = new ArrayList<>();
    ArrayList<Integer> path = new ArrayList<>();
    boolean[] used ;
    int sum = 0;
    public int[][] findTriplets (int[] nums) {
        Arrays.sort(nums);
        used = new boolean[nums.length];
        back(nums,0);
        //å›æº¯ç®—æ³•,å…ƒç´ å¯ä»¥é‡å¤ï¼Œä½†æ˜¯ä¸å¯å¤é€‰
        return list.toArray(new int[list.size()][3]);
    }
    void back(int[] nums,int idx){
        if (path.size()==3&&sum==0) {
            list.add(new int[]{path.get(0),path.get(1),path.get(2)});
            return;
        }
        if (sum>0) {
            return;
        }
        for (int i = idx; i < nums.length; i++) {
            int num = nums[i];
            if (used[i] || (i>0&&nums[i-1]==nums[i]&&!used[i-1])) {
                continue;//å¦‚æœæ˜¯ä½¿ç”¨è¿‡çš„ï¼Œæˆ–è€…å½“å‰å’Œä¸Šä¸€ä¸ªå…ƒç´ ç›¸ç­‰ï¼Œå¹¶ä¸”æ²¡ä½¿ç”¨è¿‡ä¸Šä¸€ä¸ª
            }
            if (sum>0) {
                return;//
            }
            sum+=num;
            path.add(num);
            used[i]=true;
            back(nums, i+1);
            path.remove(path.size()-1);
            used[i]=false;
            sum-=num;
        }

    }
```

### [90. å­é›† II](https://leetcode.cn/problems/subsets-ii/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«é‡å¤å…ƒç´ ï¼Œè¯·ä½ è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚

è§£é›† **ä¸èƒ½** åŒ…å«é‡å¤çš„å­é›†ã€‚è¿”å›çš„è§£é›†ä¸­ï¼Œå­é›†å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** æ’åˆ—ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,2]
è¾“å‡ºï¼š[[],[1],[1,2],[1,2,2],[2],[2,2]]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [0]
è¾“å‡ºï¼š[[],[0]]
```

```java

class Solution {
    List<List<Integer>> ans = new ArrayList<>();
    List<Integer> path = new ArrayList<>();//è¿‡ç¨‹è·¯å¾„
    public List<List<Integer>> subsetsWithDup(int[] nums) {
        Arrays.sort(nums);
        //æ•°ç»„å…ƒç´ é‡å¤ï¼Œä½†æ˜¯æ­é…ä¸èƒ½é‡å¤ï¼Œ
        vertrace(nums,0);
        return ans;
    }
    void vertrace(int[] nums,int idx){
        ans.add(new ArrayList<>(path));//å­˜å‚¨
        for (int i = idx; i < nums.length; i++) {
            //å›æº¯ç®—æ³•æ³¨æ„éå†çš„å¹¿åº¦å’Œæ·±åº¦
            if (i>idx&&nums[i-1]==nums[i]){
                continue;//å¦‚æœåŒä¸€ä¸ªæ ‘æ ‘å¹²ä¸Šä½¿ç”¨è¿‡ç›¸åŒçš„ï¼Œå°±è·³è¿‡
            }
            path.add(nums[i]);
            vertrace(nums,i+1);
            path.remove(path.size()-1);
        }
        return;
    }
}
```

### 47.å…¨æ’åˆ— II

[åŠ›æ‰£é¢˜ç›®é“¾æ¥](https://leetcode.cn/problems/permutations-ii/)

ç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„åºåˆ— nums ï¼ŒæŒ‰ä»»æ„é¡ºåº è¿”å›æ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚

ç¤ºä¾‹ 1ï¼š

- è¾“å…¥ï¼šnums = [1,1,2]
- è¾“å‡ºï¼š
[[1,1,2],
[1,2,1],
[2,1,1]]

ç¤ºä¾‹ 2ï¼š

- è¾“å…¥ï¼šnums = [1,2,3]
- è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]

æç¤ºï¼š

- 1 <= nums.length <= 8
- -10 <= nums[i] <= 10

è¿™é“é¢˜ç›®å’Œ[46.å…¨æ’åˆ—](https://programmercarl.com/0046.%E5%85%A8%E6%8E%92%E5%88%97.html)çš„åŒºåˆ«åœ¨ä¸**ç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„åºåˆ—**ï¼Œè¦è¿”å›**æ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—**ã€‚

è¿™é‡Œåˆæ¶‰åŠåˆ°å»é‡äº†ã€‚

åœ¨[40.ç»„åˆæ€»å’ŒII](https://programmercarl.com/0040.%E7%BB%84%E5%90%88%E6%80%BB%E5%92%8CII.html) ã€[90.å­é›†II](https://programmercarl.com/0090.%E5%AD%90%E9%9B%86II.html)æˆ‘ä»¬åˆ†åˆ«è¯¦ç»†è®²è§£äº†ç»„åˆé—®é¢˜å’Œå­é›†é—®é¢˜å¦‚ä½•å»é‡ã€‚

é‚£ä¹ˆæ’åˆ—é—®é¢˜å…¶å®ä¹Ÿæ˜¯ä¸€æ ·çš„å¥—è·¯ã€‚

**è¿˜è¦å¼ºè°ƒçš„æ˜¯å»é‡ä¸€å®šè¦å¯¹å…ƒç´ è¿›è¡Œæ’åºï¼Œè¿™æ ·æˆ‘ä»¬æ‰æ–¹ä¾¿é€šè¿‡ç›¸é‚»çš„èŠ‚ç‚¹æ¥åˆ¤æ–­æ˜¯å¦é‡å¤ä½¿ç”¨äº†**ã€‚

æˆ‘ä»¥ç¤ºä¾‹ä¸­çš„ [1,1,2]ä¸ºä¾‹ ï¼ˆä¸ºäº†æ–¹ä¾¿ä¸¾ä¾‹ï¼Œå·²ç»æ’åºï¼‰æŠ½è±¡ä¸ºä¸€æ£µæ ‘ï¼Œå»é‡è¿‡ç¨‹å¦‚å›¾ï¼š

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/20201124201331223-20230802163414885.png#id=qZEW1&originHeight=1098&originWidth=1894&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

å¦‚æœæ˜¯æŒ‰ç…§used[i-1]=trueæ—¶å€™ï¼šæŒ‰æ ‘ææ¥å‡

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/%E5%85%A8%E6%8E%92%E5%88%97%E5%8E%BB%E9%87%8D%E5%A4%8D.drawio.svg#id=LK6bo&originHeight=532&originWidth=974&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

å›¾ä¸­æˆ‘ä»¬å¯¹åŒä¸€æ ‘å±‚ï¼Œå‰ä¸€ä½ï¼ˆä¹Ÿå°±æ˜¯nums[i-1]ï¼‰å¦‚æœä½¿ç”¨è¿‡ï¼Œé‚£ä¹ˆå°±è¿›è¡Œå»é‡ã€‚

**ä¸€èˆ¬æ¥è¯´ï¼šç»„åˆé—®é¢˜å’Œæ’åˆ—é—®é¢˜æ˜¯åœ¨æ ‘å½¢ç»“æ„çš„å¶å­èŠ‚ç‚¹ä¸Šæ”¶é›†ç»“æœï¼Œè€Œå­é›†é—®é¢˜å°±æ˜¯å–æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„ç»“æœ**ã€‚

åœ¨[46.å…¨æ’åˆ—](https://programmercarl.com/0046.%E5%85%A8%E6%8E%92%E5%88%97.html)ä¸­å·²ç»è¯¦ç»†è®²è§£äº†æ’åˆ—é—®é¢˜çš„å†™æ³•ï¼Œåœ¨[40.ç»„åˆæ€»å’ŒII](https://programmercarl.com/0040.%E7%BB%84%E5%90%88%E6%80%BB%E5%92%8CII.html) ã€[90.å­é›†II](https://programmercarl.com/0090.%E5%AD%90%E9%9B%86II.html)ä¸­è¯¦ç»†è®²è§£äº†å»é‡çš„å†™æ³•ï¼Œæ‰€ä»¥è¿™æ¬¡æˆ‘å°±ä¸ç”¨å›æº¯ä¸‰éƒ¨æ›²åˆ†æäº†ï¼Œç›´æ¥ç»™å‡ºä»£ç ï¼Œå¦‚ä¸‹ï¼š

```java
class Solution {
    //å­˜æ”¾ç»“æœ
    List<List<Integer>> result = new ArrayList<>();
    //æš‚å­˜ç»“æœ
    List<Integer> path = new ArrayList<>();

    public List<List<Integer>> permuteUnique(int[] nums) {
        boolean[] used = new boolean[nums.length];
        Arrays.fill(used, false);
        Arrays.sort(nums);
        backTrack(nums, used);
        return result;
    }

    private void backTrack(int[] nums, boolean[] used) {
        if (path.size() == nums.length) {
            result.add(new ArrayList<>(path));
            return;
        }
        for (int i = 0; i < nums.length; i++) {
            // used[i - 1] == trueï¼Œè¯´æ˜åŒâ¼€æ ‘â½€nums[i - 1]ä½¿â½¤è¿‡
            // used[i - 1] == falseï¼Œè¯´æ˜åŒâ¼€æ ‘å±‚nums[i - 1]ä½¿â½¤è¿‡
            // å¦‚æœåŒâ¼€æ ‘å±‚nums[i - 1]ä½¿â½¤è¿‡åˆ™ç›´æ¥è·³è¿‡
            if (i > 0 && nums[i] == nums[i - 1] && used[i - 1] == false) {
                continue;
            }
            //å¦‚æœåŒâ¼€æ ‘â½€nums[i]æ²¡ä½¿â½¤è¿‡å¼€å§‹å¤„ç†
            if (used[i] == false) {
                used[i] = true;//æ ‡è®°åŒâ¼€æ ‘â½€nums[i]ä½¿â½¤è¿‡ï¼Œé˜²æ­¢åŒä¸€æ ‘æé‡å¤ä½¿ç”¨
                path.add(nums[i]);
                backTrack(nums, used);
                path.remove(path.size() - 1);//å›æº¯ï¼Œè¯´æ˜åŒâ¼€æ ‘å±‚nums[i]ä½¿â½¤è¿‡ï¼Œé˜²æ­¢ä¸‹ä¸€æ ‘å±‚é‡å¤
                used[i] = false;//å›æº¯
            }
        }
    }
}
```

å¤§å®¶å‘ç°ï¼Œå»é‡æœ€ä¸ºå…³é”®çš„ä»£ç ä¸ºï¼š

```cpp
if (i > 0 && nums[i] == nums[i - 1] && used[i - 1] == false) {
    continue;
}
```

**å¦‚æœæ”¹æˆ **`**used[i - 1] == true**`**ï¼Œ ä¹Ÿæ˜¯æ­£ç¡®çš„!**ï¼Œå»é‡ä»£ç å¦‚ä¸‹ï¼š

```cpp
if (i > 0 && nums[i] == nums[i - 1] && used[i - 1] == true) {
    continue;
}
```

è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Œå°±æ˜¯ä¸Šé¢æˆ‘åˆšè¯´çš„ï¼Œå¦‚æœè¦å¯¹æ ‘å±‚ä¸­å‰ä¸€ä½å»é‡ï¼Œå°±ç”¨`used[i - 1] == false`ï¼Œå¦‚æœè¦å¯¹æ ‘æå‰ä¸€ä½å»é‡ç”¨`used[i - 1] == true`ã€‚

**å¯¹äºæ’åˆ—é—®é¢˜ï¼Œæ ‘å±‚ä¸Šå»é‡å’Œæ ‘æä¸Šå»é‡ï¼Œéƒ½æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ ‘å±‚ä¸Šå»é‡æ•ˆç‡æ›´é«˜ï¼**

è¿™ä¹ˆè¯´æ˜¯ä¸æ˜¯æœ‰ç‚¹æŠ½è±¡ï¼Ÿ

æ¥æ¥æ¥ï¼Œæˆ‘å°±ç”¨è¾“å…¥: [1,1,1] æ¥ä¸¾ä¸€ä¸ªä¾‹å­ã€‚

æ ‘å±‚ä¸Šå»é‡(used[i - 1] == false)ï¼Œçš„æ ‘å½¢ç»“æ„å¦‚ä¸‹ï¼š

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/20201124201406192.png#id=UKLLl&originHeight=962&originWidth=1534&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

æ ‘æä¸Šå»é‡ï¼ˆused[i - 1] == trueï¼‰çš„æ ‘å‹ç»“æ„å¦‚ä¸‹ï¼š

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/20201124201431571-20230802163519118.png#id=AonsF&originHeight=1156&originWidth=2274&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

å¤§å®¶åº”è¯¥å¾ˆæ¸…æ™°çš„çœ‹åˆ°ï¼Œæ ‘å±‚ä¸Šå¯¹å‰ä¸€ä½å»é‡éå¸¸å½»åº•ï¼Œæ•ˆç‡å¾ˆé«˜ï¼Œæ ‘æä¸Šå¯¹å‰ä¸€ä½å»é‡è™½ç„¶æœ€åå¯ä»¥å¾—åˆ°ç­”æ¡ˆï¼Œä½†æ˜¯åšäº†å¾ˆå¤šæ— ç”¨æœç´¢ã€‚

æ€»ç»“

è¿™é“é¢˜å…¶å®è¿˜æ˜¯ç”¨äº†æˆ‘ä»¬ä¹‹å‰è®²è¿‡çš„å»é‡æ€è·¯ï¼Œä½†æœ‰æ„æ€çš„æ˜¯ï¼Œå»é‡çš„ä»£ç ä¸­ï¼Œè¿™ä¹ˆå†™ï¼š

```cpp
if (i > 0 && nums[i] == nums[i - 1] && used[i - 1] == false) {
    continue;
}
```

å’Œè¿™ä¹ˆå†™ï¼š

```cpp
if (i > 0 && nums[i] == nums[i - 1] && used[i - 1] == true) {
    continue;
}
```

éƒ½æ˜¯å¯ä»¥çš„ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šåŒå­¦åšè¿™é“é¢˜ç›®å›°æƒ‘çš„åœ°æ–¹ï¼ŒçŸ¥é“`used[i - 1] == false`ä¹Ÿè¡Œè€Œ`used[i - 1] == true`ä¹Ÿè¡Œï¼Œä½†æ˜¯å°±æƒ³ä¸æ˜ç™½ä¸ºå•¥ã€‚

æ‰€ä»¥æˆ‘é€šè¿‡ä¸¾[1,1,1]çš„ä¾‹å­ï¼ŒæŠŠè¿™ä¸¤ä¸ªå»é‡çš„é€»è¾‘åˆ†åˆ«æŠ½è±¡æˆæ ‘å½¢ç»“æ„ï¼Œå¤§å®¶å¯ä»¥ä¸€ç›®äº†ç„¶ï¼šä¸ºä»€ä¹ˆä¸¤ç§å†™æ³•éƒ½å¯ä»¥ä»¥åŠå“ªä¸€ç§æ•ˆç‡æ›´é«˜ï¼

æ˜¯ä¸æ˜¯è±ç„¶å¼€æœ—äº†ï¼ï¼

### [77. ç»„åˆ](https://leetcode.cn/problems/combinations/)

ç»™å®šä¸¤ä¸ªæ•´æ•° `n` å’Œ `k`ï¼Œè¿”å›èŒƒå›´ `[1, n]` ä¸­æ‰€æœ‰å¯èƒ½çš„ `k` ä¸ªæ•°çš„ç»„åˆã€‚

ä½ å¯ä»¥æŒ‰ **ä»»ä½•é¡ºåº** è¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šn = 4, k = 2
è¾“å‡ºï¼š
[
  [2,4],
  [3,4],
  [2,3],
  [1,2],
  [1,3],
  [1,4],
]
```

```java
class Solution {
    List<List<Integer>> res= new ArrayList<>();
    LinkedList<Integer> path = new LinkedList<>();
    public List<List<Integer>> combine(int n, int k) {
        backTrace(n,k,1);//é€’å½’å‡½æ•°è¿”å›å€¼ä¸ºvoidï¼Œä¸€èˆ¬ç›´æ¥å°±åœ¨å‚æ•°é‡Œé¢ä¿®æ”¹
        return res;
    }
    void backTrace(int n,int k, int s){
        if(path.size()==k){
            res.add(new ArrayList<>(path));
            return;
        }
        /*
        å·²ç»é€‰æ‹©çš„å…ƒç´ ä¸ªæ•°ï¼špath.size();
        è¿˜éœ€è¦çš„å…ƒç´ ä¸ªæ•°ä¸º: k - path.size();
        åœ¨é›†åˆnä¸­è‡³å¤šè¦ä»è¯¥èµ·å§‹ä½ç½® : n - (k - path.size()) + 1
        */
        //å¯é€‰æ‹©çš„èŒƒå›´éšç€é€‰æ‹©çš„è¿›è¡Œè€Œæ”¶ç¼©ï¼Œè°ƒæ•´å¯é€‰æ‹©çš„èŒƒå›´ï¼Œå°±æ˜¯è¦é s
        for(int i =s;i<=n-(k-path.size())+1;i++ ){
            path.add(i);
            backTrace(n,k,i+1);
            path.removeLast();
        }
    }
}
```

> å¦‚æœ `n = 7, k = 4`ï¼Œ**ä» 5 å¼€å§‹æœç´¢å°±å·²ç»æ²¡æœ‰æ„ä¹‰äº†**ï¼Œè¿™æ˜¯å› ä¸ºï¼šå³ä½¿æŠŠ 5 é€‰ä¸Šï¼Œåé¢çš„æ•°åªæœ‰ 6 å’Œ 7ï¼Œä¸€å…±å°± 3 ä¸ªå€™é€‰æ•°ï¼Œå‡‘ä¸å‡º 4 ä¸ªæ•°çš„ç»„åˆã€‚
>  
> å› æ­¤åœ¨é›†åˆnä¸­è‡³å¤šè¦ä»è¯¥èµ·å§‹ä½ç½® : n - (k - path.size()) + 1
>  

```java
        for (int i = begin; i <= n-(k-path.size())+1; i++) {
```

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/68747470733a2f2f636f64652d7468696e6b696e672d313235333835353039332e66696c652e6d7971636c6f75642e636f6d2f706963732f32303230313132333139353234323839392e706e67.png#id=hmY0J&originHeight=784&originWidth=1360&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

### [17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆ](https://leetcode.cn/problems/letter-combinations-of-a-phone-number/)

ç»™å®šä¸€ä¸ªä»…åŒ…å«æ•°å­— `2-9` çš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ‰€æœ‰å®ƒèƒ½è¡¨ç¤ºçš„å­—æ¯ç»„åˆã€‚ç­”æ¡ˆå¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ã€‚

ç»™å‡ºæ•°å­—åˆ°å­—æ¯çš„æ˜ å°„å¦‚ä¸‹ï¼ˆä¸ç”µè¯æŒ‰é”®ç›¸åŒï¼‰ã€‚æ³¨æ„ 1 ä¸å¯¹åº”ä»»ä½•å­—æ¯ã€‚

![](https://cdn.jsdelivr.net/gh/52chen/imagebed2023@main/picgo/200px-telephone-keypad2svg.png#id=Ex3Mq&originHeight=162&originWidth=200&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šdigits = "23"
è¾“å‡ºï¼š["ad","ae","af","bd","be","bf","cd","ce","cf"]
```

```java
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    HashMap<Integer,String> map = new HashMap<>(){
        {
            put(2,"abc");
            put(3,"def");
            put(4,"ghi");
            put(5,"jkl");
            put(6,"mno");
            put(7,"pqrs");
            put(8,"tuv");
            put(9,"wxyz");
        }
    };
    List<String> ans = new ArrayList<>();
    StringBuilder sb = new StringBuilder();
    public List<String> letterCombinations(String digits) {
        if (digits.length()==0) return ans;
        back(digits,0,0);
        //å›æº¯ç®—æ³•ï¼Œå°±æ˜¯éå†
        return ans;
    }
    void back(String digits,int idx,int charIdx){
        if (idx==digits.length()){
            ans.add(sb.toString());
            return;
        }
        //éå†æ•°å­—ï¼Œ
        char c = digits.charAt(idx);
        String s = map.get(c - '0');
        for (int j = 0; j < s.length(); j++) {
            //å•ä¸ªå­—ç¬¦çš„é•¿åº¦
            sb.append(s.charAt(j));
            back(digits,idx+1,j);
            sb.deleteCharAt(sb.length()-1);
        }
    }
}
```

### [å‰‘æŒ‡ Offer II 084. å«æœ‰é‡å¤å…ƒç´ é›†åˆçš„å…¨æ’åˆ— ](https://leetcode.cn/problems/7p8L0Z/)

ç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„æ•´æ•°é›†åˆ `nums` ï¼Œ**æŒ‰ä»»æ„é¡ºåº** è¿”å›å®ƒæ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,1,2]
è¾“å‡ºï¼š
[[1,1,2],
 [1,2,1],
 [2,1,1]]
```

```java
class Solution {
    List<List<Integer>> ans = new ArrayList<>();
    List<Integer> path = new ArrayList<>();
    boolean[] used;
    public List<List<Integer>> permuteUnique(int[] nums) {
        Arrays.sort(nums);//æ’åˆ—ä¸€ä¸‹
        used = new boolean[nums.length];
        back(nums);
        return ans;
    }
    void back(int[] nums){
        if (path.size() == nums.length){
            ans.add(new ArrayList<>(path));
            return;
        }
        int last = -11;
        for (int i = 0; i < nums.length; i++) {
            if ((used[i] || i>0 && nums[i]==nums[i-1] && used[i-1]))
                continue;//å»æ‰é‡
            // i>0 && nums[i]==nums[i-1] && used[i-1] è¿™é‡Œåº”è¯¥æ˜¯è¯´å¦‚æœå½“å‰å…ƒç´ å’Œä¸Šä¸€ä¸ªç›¸åŒï¼Œæœ‰å¯èƒ½æ˜¯å¯ä»¥ç»§ç»­ä½¿ç”¨çš„
//            åˆ¤æ–­ä¸ºä¸èƒ½ä½¿ç”¨çš„è¯ï¼Œå¾—åŠ ä¸€ä¸ªåˆ¤æ–­ï¼Œåˆ¤æ–­ä¹‹å‰çš„å…ƒç´ ä¹Ÿæ˜¯ç”¨è¿‡çš„ï¼Œé‚£å°±å¯ä»¥äº†
            path.add(nums[i]);
            used[i]= true;
            back(nums);
            used[i]= false;
            path.remove(path.size()-1);
        }
    }
}
```

### [93. å¤åŸ IP åœ°å€](https://leetcode.cn/problems/restore-ip-addresses/)

**æœ‰æ•ˆ IP åœ°å€** æ­£å¥½ç”±å››ä¸ªæ•´æ•°ï¼ˆæ¯ä¸ªæ•´æ•°ä½äº `0` åˆ° `255` ä¹‹é—´ç»„æˆï¼Œä¸”ä¸èƒ½å«æœ‰å‰å¯¼ `0`ï¼‰ï¼Œæ•´æ•°ä¹‹é—´ç”¨ `'.'` åˆ†éš”ã€‚

- ä¾‹å¦‚ï¼š`"0.1.2.201"` å’Œ`"192.168.1.1"` æ˜¯ **æœ‰æ•ˆ** IP åœ°å€ï¼Œä½†æ˜¯ `"0.011.255.245"`ã€`"192.168.1.312"` å’Œ `"192.168@1.1"` æ˜¯ **æ— æ•ˆ** IP åœ°å€ã€‚

ç»™å®šä¸€ä¸ªåªåŒ…å«æ•°å­—çš„å­—ç¬¦ä¸² `s` ï¼Œç”¨ä»¥è¡¨ç¤ºä¸€ä¸ª IP åœ°å€ï¼Œè¿”å›æ‰€æœ‰å¯èƒ½çš„**æœ‰æ•ˆ IP åœ°å€**ï¼Œè¿™äº›åœ°å€å¯ä»¥é€šè¿‡åœ¨ `s` ä¸­æ’å…¥ `'.'` æ¥å½¢æˆã€‚ä½  **ä¸èƒ½** é‡æ–°æ’åºæˆ–åˆ é™¤ `s` ä¸­çš„ä»»ä½•æ•°å­—ã€‚ä½ å¯ä»¥æŒ‰ **ä»»ä½•** é¡ºåºè¿”å›ç­”æ¡ˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "25525511135"
è¾“å‡ºï¼š["255.255.11.135","255.255.111.35"]
```

```java
class Solution {
    List<String> ans = new ArrayList<>();
    public List<String> restoreIpAddresses(String s) {
        //startIndexä¸€å®šæ˜¯éœ€è¦çš„ï¼Œå› ä¸ºä¸èƒ½é‡å¤åˆ†å‰²ï¼Œè®°å½•ä¸‹ä¸€å±‚é€’å½’åˆ†å‰²çš„èµ·å§‹ä½ç½®ã€‚
        //æœ¬é¢˜æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå˜é‡pointNumï¼Œè®°å½•æ·»åŠ é€—ç‚¹çš„æ•°é‡ã€‚
        if (s.length()>12) return ans;
        backTrace(s,0,0);
        return ans;
    }
    void backTrace(String s, int begin,int pointNumber) {
        if (pointNumber==3){
            //æ­¤æ—¶å·²ç»åˆ°è¾¾äº†æœ€åä¸€ä¸ªé˜¶æ®µï¼Œåˆ¤æ–­beginåˆ°æœ€åçš„ä¸€æ®µæ˜¯å¦åˆæ³•ï¼Œä¸åˆæ³•å°±ä¸æ·»åŠ 
            if (isValid(s,begin,s.length()-1))
                ans.add(s);
            return;
        }
        for (int i = begin; i < s.length(); i++) {
            if (isValid(s,begin,i)){
                s=s.substring(0, i + 1) + "." + s.substring(i + 1);
                //æ’å…¥ä¸€ä¸ªã€‚
                pointNumber++;
                backTrace(s,i+2,pointNumber);
                pointNumber--;
                s=s.substring(0, i + 1) + s.substring(i + 2);
            }else {
                continue;
            }
        }
    }
    boolean isValid(String s,int begin,int end) {
        if (begin>end) return false;
        if (s.charAt(begin)=='0'&&begin!=end){
            return false;
            //0å¼€å¤´çš„æ•°å­—ä¸åˆæ³•ï¼Œæ­¤æ—¶beginå’Œendä¸ç›¸ç­‰çš„
        }
        int num =0;

        for (int i = begin; i <= end; i++) {
            if (s.charAt(i)>'9'||s.charAt(i)<'0')
                return false;
            num = num *10 + (s.charAt(i)-'0');
            if (num>255)
                return false;
        }
        return true;
    }
}
```

### [437. è·¯å¾„æ€»å’Œ III](https://leetcode.cn/problems/path-sum-iii/)

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œå’Œä¸€ä¸ªæ•´æ•° `targetSum` ï¼Œæ±‚è¯¥äºŒå‰æ ‘é‡ŒèŠ‚ç‚¹å€¼ä¹‹å’Œç­‰äº `targetSum` çš„ **è·¯å¾„** çš„æ•°ç›®ã€‚

**è·¯å¾„** ä¸éœ€è¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¹Ÿä¸éœ€è¦åœ¨å¶å­èŠ‚ç‚¹ç»“æŸï¼Œä½†æ˜¯è·¯å¾„æ–¹å‘å¿…é¡»æ˜¯å‘ä¸‹çš„ï¼ˆåªèƒ½ä»çˆ¶èŠ‚ç‚¹åˆ°å­èŠ‚ç‚¹ï¼‰ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/04/09/pathsum3-1-tree.jpg#id=h7yeP&originHeight=494&originWidth=576&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šroot = [10,5,-3,3,2,null,11,3,-2,null,1], targetSum = 8
è¾“å‡ºï¼š3
è§£é‡Šï¼šå’Œç­‰äº 8 çš„è·¯å¾„æœ‰ 3 æ¡ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚
```

```java
class Solution {
    HashMap<Long,Integer> map = new HashMap<>();
    public int pathSum(TreeNode root, int targetSum) {
//        å›æº¯ç®—æ³•
        map.put(0L,1);//å­˜å‚¨å‰ç¼€å’Œä¸º0çš„æ¬¡æ•°ä¸º1ï¼›
        return recursion(root,targetSum,0L);
    }
    int recursion(TreeNode root,int targetSum,Long currSum) {
        if (root==null) return 0;
        int res = 0;
        currSum+=root.val;
        // çœ‹çœ‹rootåˆ°å½“å‰èŠ‚ç‚¹è¿™æ¡è·¯ä¸Šæ˜¯å¦å­˜åœ¨[èŠ‚ç‚¹å‰ç¼€å’ŒåŠ target] ä¸ºcurrSumçš„è·¯å¾„
        //currSum-targetç›¸å½“äºæ‰¾è·¯å¾„çš„èµ·ç‚¹ï¼Œèµ·ç‚¹çš„sum+target=currSumï¼Œå½“å‰ç‚¹åˆ°èµ·ç‚¹çš„è·ç¦»å°±æ˜¯target
        //å› ä¸ºcurrSUmæ˜¯å‰ç¼€å’Œï¼Œä¹Ÿå°±æ˜¯å‰é¢æ‰€æœ‰çš„éƒ½åŠ èµ·æ¥ï¼Œå¦‚æœä¹‹å‰èµ°è¿‡çš„è·¯ä¸Šæœ‰äº‹currSum-targetçš„ä½ç½®ï¼Œé‚£ä¹ˆ
        //é‚£ä¸ªä½ç½®åˆ°ç°åœ¨ï¼ŒcurrSum-(curr-target)=targetï¼Œä¸å°±æ˜¯ä¸€ä¸ªä½ éœ€è¦çš„targetå—ï¼Ÿ
        res+=map.getOrDefault(currSum-targetSum,0);
        // æ›´æ–°è·¯å¾„ä¸Šå½“å‰èŠ‚ç‚¹å‰ç¼€å’Œçš„ä¸ªæ•°
        map.put(currSum,map.getOrDefault(currSum,0)+1);
        res+=recursion(root.left,targetSum,currSum);
        res+=recursion(root.right,targetSum,currSum);
        map.put(currSum,map.getOrDefault(currSum,0)-1);
        return res;
    }

}
```

### ![](https://gw.alipayobjects.com/os/lib/twemoji/11.2.0/2/svg/1f31f.svg#height=18&id=T0zVI&originHeight=150&originWidth=150&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=&width=18) [112. è·¯å¾„æ€»å’Œ](https://leetcode.cn/problems/path-sum/)

ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` å’Œä¸€ä¸ªè¡¨ç¤ºç›®æ ‡å’Œçš„æ•´æ•° `targetSum` ã€‚åˆ¤æ–­è¯¥æ ‘ä¸­æ˜¯å¦å­˜åœ¨ **æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹** çš„è·¯å¾„ï¼Œè¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹å€¼ç›¸åŠ ç­‰äºç›®æ ‡å’Œ `targetSum` ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

**å¶å­èŠ‚ç‚¹** æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2021/01/18/pathsum1.jpg#id=F89Si&originHeight=421&originWidth=592&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šroot = [5,4,8,11,null,13,4,7,2,null,null,null,1], targetSum = 22
è¾“å‡ºï¼štrue
è§£é‡Šï¼šç­‰äºç›®æ ‡å’Œçš„æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹è·¯å¾„å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚
```

**ç¤ºä¾‹ 2ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/pathsum2-20231026201006343.jpg#id=l32ge&originHeight=181&originWidth=212&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šroot = [1,2,3], targetSum = 5
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šæ ‘ä¸­å­˜åœ¨ä¸¤æ¡æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼š
(1 --> 2): å’Œä¸º 3
(1 --> 3): å’Œä¸º 4
ä¸å­˜åœ¨ sum = 5 çš„æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = [], targetSum = 0
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šç”±äºæ ‘æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥ä¸å­˜åœ¨æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚
```

[https://www.bilibili.com/video/BV19t4y1L7CR/?t=46](https://www.bilibili.com/video/BV19t4y1L7CR/?t=46)

```java
// æ ‡å‡†å›æº¯çš„å†™æ³•ï¼š

class Solution {
    public boolean hasPathSum(TreeNode root, int targetSum) {
        //è¦æœç´¢å…¶ä¸­ä¸€æ¡ç¬¦åˆæ¡ä»¶çš„è·¯å¾„ï¼Œé‚£ä¹ˆé€’å½’ä¸€å®šéœ€è¦è¿”å›å€¼ï¼Œå› ä¸ºé‡åˆ°ç¬¦åˆæ¡ä»¶çš„è·¯å¾„äº†å°±è¦åŠæ—¶è¿”å›ã€‚
        //éå†çš„è·¯çº¿ï¼Œå¹¶ä¸è¦éå†æ•´æ£µæ ‘ï¼Œæ‰€ä»¥é€’å½’å‡½æ•°éœ€è¦è¿”å›å€¼ï¼Œå¯ä»¥ç”¨boolç±»å‹è¡¨ç¤ºã€‚
        if(root==null) return false;
        return recur(root,targetSum-root.val);
    }
    boolean recur(TreeNode root,int targetSum){
        if(root==null) return false;
//        targetSum-=root.val;
        if(root.left==null&&root.right==null&&targetSum==0) return true;
        if(root.left==null&&root.right==null) return false;
        if(root.left!=null){
//            targetSum-=root.left.val;
//            if (recur(root.left,targetSum)) return true;
//            targetSum+=root.left.val;
            //ä¸Šé¢çš„ä»£ç å¯ä»¥ç¼©å‡ä¸ºä¸€è¡Œï¼Œå…¶å®ä½ åªè¦ç©¿ä¸€ä¸ªè™šå¹»çš„æ ‘æä¸‹å»ï¼Œä¸ç”¨å®é™…æ›´æ”¹targetSumçš„å€¼å°±å¯ä»¥å›æº¯
            if (recur(root.left,targetSum-root.left.val)) return true;
        }
        if(root.right!=null){
            targetSum-=root.right.val;
            if (recur(root.right,targetSum)) return true;
            targetSum+=root.right.val;
        }
        return false;
    }
}
```

### [113. è·¯å¾„æ€»å’Œ II](https://leetcode.cn/problems/path-sum-ii/)

ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å’Œ `targetSum` ï¼Œæ‰¾å‡ºæ‰€æœ‰ **ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹** è·¯å¾„æ€»å’Œç­‰äºç»™å®šç›®æ ‡å’Œçš„è·¯å¾„ã€‚

**å¶å­èŠ‚ç‚¹** æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/pathsumii1.jpg#id=I034z&originHeight=421&originWidth=592&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šroot = [5,4,8,11,null,13,4,7,2,null,null,5,1], targetSum = 22
è¾“å‡ºï¼š[[5,4,11,2],[5,8,4,5]]
```

**ç¤ºä¾‹ 2ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/pathsum2.jpg#id=u0Ay8&originHeight=181&originWidth=212&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šroot = [1,2,3], targetSum = 5
è¾“å‡ºï¼š[]
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šroot = [1,2], targetSum = 0
è¾“å‡ºï¼š[]
```

```java
class Solution {

    List<List<Integer>> ans = new ArrayList<>();
    List<Integer> path = new ArrayList<>();
    public List<List<Integer>> pathSum(TreeNode root, int targetSum) {
        //å¦‚æœéœ€è¦æœç´¢æ•´æ£µäºŒå‰æ ‘ä¸”ä¸ç”¨å¤„ç†é€’å½’è¿”å›å€¼ï¼Œé€’å½’å‡½æ•°å°±ä¸è¦è¿”å›å€¼ã€‚
        recur(root,targetSum);
        return ans;
    }
    void recur(TreeNode root,int target){
        if(root==null) return;
        path.add(root.val);
        target-=root.val;
        if (root.left==null&&root.right==null&&target==0){
            ans.add(new ArrayList<>(path));
        }
        recur(root.left,target);
        recur(root.right,target);
        path.remove(path.size()-1);
    }
}
```

```java
// æ ‡å‡†å›æº¯çš„å†™æ³•ï¼š
class Solution {

    List<List<Integer>> ans = new ArrayList<>();
    List<Integer> path = new ArrayList<>();
    public List<List<Integer>> pathSum(TreeNode root, int targetSum) {
        if(root==null) return ans;
        //å¦‚æœéœ€è¦æœç´¢æ•´æ£µäºŒå‰æ ‘ä¸”ä¸ç”¨å¤„ç†é€’å½’è¿”å›å€¼ï¼Œé€’å½’å‡½æ•°å°±ä¸è¦è¿”å›å€¼ã€‚
        path.add(root.val);
        recur(root,targetSum-root.val);//è¿™é‡Œå¯¹æœ€å¼€å§‹çš„å¤„ç†äº†ï¼Œå°±å¾—åœ¨pathåŠ ä¸Šè¿™ä¸ªvalã€‚
        return ans;
    }
    void recur(TreeNode root,int target){

        if (root.left==null&&root.right==null&&target==0){
            ans.add(new ArrayList<>(path));
            return;
        }
        if (root.left==null&&root.right==null){
            return;
        }
        if(root.left!=null){
            path.add(root.left.val);
            target-=root.left.val;
            recur(root.left,target);
            target+=root.left.val;
            path.remove(path.size()-1);
        }
        if(root.right!=null){
            path.add(root.right.val);
            target-=root.right.val;
            recur(root.right,target);
            target+=root.right.val;
            path.remove(path.size()-1);
        }
        return;
    }
}
```

### [å‰‘æŒ‡ Offer II 086. åˆ†å‰²å›æ–‡å­å­—ç¬¦ä¸²](https://leetcode.cn/problems/M99OJA/)

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·å°† `s` åˆ†å‰²æˆä¸€äº›å­ä¸²ï¼Œä½¿æ¯ä¸ªå­ä¸²éƒ½æ˜¯ **å›æ–‡ä¸²** ï¼Œè¿”å› s æ‰€æœ‰å¯èƒ½çš„åˆ†å‰²æ–¹æ¡ˆã€‚

**å›æ–‡ä¸²** æ˜¯æ­£ç€è¯»å’Œåç€è¯»éƒ½ä¸€æ ·çš„å­—ç¬¦ä¸²ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "google"
è¾“å‡ºï¼š[["g","o","o","g","l","e"],["g","oo","g","l","e"],["goog","l","e"]]
```

```java
class Solution {
    List<List<String>> ans = new ArrayList<>();
    List<String> path = new ArrayList<>();
    private String s;
    public String[][] partition(String s) {
        this.s = s;
        back(0);
        String[][] res = new String[ans.size()][];
        for (int i = 0; i < ans.size(); i++) {
            String[] temp = new String[ans.get(i).size()];
            for (int j = 0; j < ans.get(i).size(); j++) {
                temp[j] = ans.get(i).get(j);
            }
            res[i] = temp;//è¿™é‡Œçš„tempæ¯ä¸€ä¸ªéƒ½æ˜¯ä¸åŒçš„ã€‚
        }
        return res;
    }
    void back(int idx){
        if (idx == s.length()){
            ans.add(new ArrayList<>(path));
            return;
        }
        for (int i = idx; i < s.length(); i++) {
            if (isPali(idx,i)) {
                path.add(s.substring(idx,i+1));
                back(i+1);
                path.remove(path.size()-1);
            }
        }
    }
    boolean isPali(int left,int right){
        while (left < right)
            if (s.charAt(left++) != s.charAt(right--))
                return false;
        return true;
    }
}
```

### 79.å•è¯æœç´¢

ç»™å®šä¸€ä¸ª `m x n` äºŒç»´å­—ç¬¦ç½‘æ ¼ `board` å’Œä¸€ä¸ªå­—ç¬¦ä¸²å•è¯ `word` ã€‚å¦‚æœ `word` å­˜åœ¨äºç½‘æ ¼ä¸­ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ç›¸é‚»çš„å•å…ƒæ ¼å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚

**è¾“å…¥ï¼š**board = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], word = "ABCCED" **è¾“å‡ºï¼š**true

```java
class Solution {
    public boolean exist(char[][] board, String word) {
        for (int i = 0; i < board.length; i++) {
            for (int j = 0; j < board[0].length; j++) {
                if (dfs(board,word,0,i,j)) return true;
            }
        }
        return false;
    }
    int[] dx = new int[]{-1,0,1,0},dy =  new int[]{0,1,0,-1};
    boolean dfs(char[][] board,String word,int u,int x,int y){
        if (board[x][y]!=word.charAt(u)) return false;
        if (u==word.length()-1) return true;
        char c = board[x][y];
        board[x][y]='.';
        for (int i = 0; i < 4; i++) {
            int a = x+dx[i],b = y+dy[i];
            if (a<0||a>=board.length||b<0||b>=board[0].length||board[a][b]=='.')
                continue;
            if (dfs(board,word,u+1,a,b)) return true;
        }
        board[x][y]=c;
        return false;
    }
}
```

### [513. æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼](https://leetcode.cn/problems/find-bottom-left-tree-value/)

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„ **æ ¹èŠ‚ç‚¹** `root`ï¼Œè¯·æ‰¾å‡ºè¯¥äºŒå‰æ ‘çš„ **æœ€åº•å±‚ æœ€å·¦è¾¹** èŠ‚ç‚¹çš„å€¼ã€‚

å‡è®¾äºŒå‰æ ‘ä¸­è‡³å°‘æœ‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚

**ç¤ºä¾‹ 1:**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/tree1.jpg#id=oZJe9&originHeight=182&originWidth=302&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥: root = [2,1,3]
è¾“å‡º: 1
```

**ç¤ºä¾‹ 2:**

![](https://assets.leetcode.com/uploads/2020/12/14/tree2.jpg#id=PGsiC&originHeight=421&originWidth=432&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥: [1,2,3,4,null,5,6,null,null,7]
è¾“å‡º: 7
```

```java
class Solution {
    int deepest = Integer.MIN_VALUE;
    int ans = 0;
    public int findBottomLeftValue(TreeNode root) {
        recur(root,1);
        return ans;
    }
    void recur(TreeNode root,int depth){
        if (root==null) return;
        if (root.left==null&&root.right==null&&depth>deepest){
            ans = root.val;
            deepest = Math.max(deepest,depth);
        }
//        if (root.left!=null){
//            recur(root.left,depth+1);
//        }
        recur(root.left,depth+1);//è¿˜å¯ä»¥ç¼©å‡æˆè¿™æ ·ï¼Œå› ä¸ºå°±ç®—æ˜¯nullä¼ è¿›å»äº†ï¼Œä¹Ÿæ— æ‰€è°“
//        if (root.right!=null){
//            recur(root.right,depth+1);
//        }
        recur(root.right,depth+1);
    }
}
```

### [22. æ‹¬å·ç”Ÿæˆ](https://leetcode.cn/problems/generate-parentheses/)

æ•°å­— `n` ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” **æœ‰æ•ˆçš„** æ‹¬å·ç»„åˆã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šn = 3
è¾“å‡ºï¼š["((()))","(()())","(())()","()(())","()()()"]
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šn = 1
è¾“å‡ºï¼š["()"]
```

```java
class Solution {
    List<String> ans = new ArrayList<>();
    public List<String> generateParenthesis(int n) {
        backtrack(n,n,"");
        return ans;
    }
    void backtrack(int l,int r,String cur){
        if (l==0&&r==0){
            ans.add(cur);
            return;
        }
        if (l>0){
            backtrack(l-1,r,cur+'(');
        }
        if (r>l){
            backtrack(l,r-1,cur+')');
        }
    }
}
```

### [79. å•è¯æœç´¢](https://leetcode.cn/problems/word-search/)

ç»™å®šä¸€ä¸ª `m x n` äºŒç»´å­—ç¬¦ç½‘æ ¼ `board` å’Œä¸€ä¸ªå­—ç¬¦ä¸²å•è¯ `word` ã€‚å¦‚æœ `word` å­˜åœ¨äºç½‘æ ¼ä¸­ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚

å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ç›¸é‚»çš„å•å…ƒæ ¼å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/word2.jpg#id=VEAhq&originHeight=242&originWidth=322&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šboard = [["A","B","C","E"],["S","F","C","S"],["A","D","E","E"]], word = "ABCCED"
è¾“å‡ºï¼štrue
```

```java
class Solution {
    boolean[][] visited = new boolean[15][15];
    int m,n;
    int[][] dirs = new int[][]{{1,0},{-1,0},{0,1},{0,-1}};
    public boolean exist(char[][] board, String word) {
        m = board.length;
        n = board[0].length;
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                if (dfs(board,i,j,word,0)) return true;
            }
        }
        return false;
    }
    boolean dfs(char[][] board,int i,int j, String word,int idx){
        if (board[i][j]!= word.charAt(idx)) return false;
        if (idx==word.length()-1) return true;
        visited[i][j]=true;
        for (int[] dir : dirs) {
            int dx = i+dir[0],dy = j+dir[1];
            if (dx<0||dx>=m||dy<0||dy>=n||visited[dx][dy]) continue;//è¶…é™çš„å°±ä¸éå†äº†
            if (dfs(board,dx,dy,word,idx+1)) return true;
        }
        visited[i][j]=false;
        return false;
    }
}
```

## åŠ¨æ€è§„åˆ’

### [64. æœ€å°è·¯å¾„å’Œ](https://leetcode.cn/problems/minimum-path-sum/)

ç»™å®šä¸€ä¸ªåŒ…å«éè´Ÿæ•´æ•°çš„ `*m* x *n*` ç½‘æ ¼ `grid` ï¼Œè¯·æ‰¾å‡ºä¸€æ¡ä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„è·¯å¾„ï¼Œä½¿å¾—è·¯å¾„ä¸Šçš„æ•°å­—æ€»å’Œä¸ºæœ€å°ã€‚

**è¯´æ˜ï¼š**æ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/minpath.jpg#id=R7n57&originHeight=242&originWidth=242&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šgrid = [[1,3,1],[1,5,1],[4,2,1]]
è¾“å‡ºï¼š7
è§£é‡Šï¼šå› ä¸ºè·¯å¾„ 1â†’3â†’1â†’1â†’1 çš„æ€»å’Œæœ€å°ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šgrid = [[1,2,3],[4,5,6]]
è¾“å‡ºï¼š12
```

è§£é¢˜

```bash
åŸå§‹æ•°ç»„
[1, 2, 3]
[2, 5, 6]
[1, 2, 7]
[4, 1, 6]
æœ€å°è·¯å¾„å’Œè·¯å¾„ï¼š [1, 2, 1, 2, 1, 6]
sum = 13
```

```java
public static void main(String[] args) {
    int[][] grid = {{1,2,3},
                    {2,5,6},
                    {1,2,7},
                    {4,1,6}};
    System.out.println("åŸå§‹æ•°ç»„");
    for (int i = 0; i < grid.length; i++) {
        System.out.println(Arrays.toString(grid[i]));
    }
    int sum = minPathSum(grid);
    System.out.println("sum = " + sum);
}
public static int minPathSum(int[][] grid) {
    //åŠ¨æ€è§„åˆ’
    int m = grid.length;
    int n = grid[0].length;
    int[][] dp = new int[m][n];
    dp[0][0]=grid[0][0];
    for (int i = 1; i < m; i++) {
        dp[i][0]=dp[i-1][0]+grid[i][0];
    }
    for (int i = 1;i < n; i++) {
        dp[0][i]=dp[0][i-1]+grid[0][i];
    }
    for (int i = 1; i < m; i++) {
        for (int j = 1; j < n; j++) {
            dp[i][j]=Math.min(dp[i-1][j],dp[i][j-1])+grid[i][j];
        }
    }
  
    // æ˜¾ç¤ºè·¯å¾„
    int r = m - 1;
    int c = n - 1;
    LinkedList<Integer> resultPath = new LinkedList<>();
    resultPath.add(grid[r][c]);
    while (true) {
        if (r - 1 >= 0 && c - 1 >= 0) {
            if (dp[r - 1][c] < dp[r][c - 1]) {
                resultPath.addFirst(grid[r - 1][c]);
                r = r - 1;
            } else {
                resultPath.addFirst(grid[r][c - 1]);
                c = c - 1;
            }
        } else if (r == 0 && c - 1 >= 0) {
            while (c - 1 >= 0) {
                resultPath.addFirst(grid[0][c - 1]);
                c = c - 1;
            }
        } else if (c == 0 && r - 1 >= 0) {
            while (r - 1 >= 0) {
                resultPath.addFirst(grid[r - 1][0]);
                r = r - 1;
            }
        } else {
            break;
        }
    }
    System.out.print("æœ€å°è·¯å¾„å’Œè·¯å¾„ï¼š ");
    System.out.println(Arrays.toString(resultPath.toArray()));
    return dp[m-1][n-1];
}
```

### [97. äº¤é”™å­—ç¬¦ä¸²](https://leetcode.cn/problems/interleaving-string/)

ç»™å®šä¸‰ä¸ªå­—ç¬¦ä¸² `s1`ã€`s2`ã€`s3`ï¼Œè¯·ä½ å¸®å¿™éªŒè¯ `s3` æ˜¯å¦æ˜¯ç”± `s1` å’Œ `s2` **äº¤é”™** ç»„æˆçš„ã€‚

ä¸¤ä¸ªå­—ç¬¦ä¸² `s` å’Œ `t` **äº¤é”™** çš„å®šä¹‰ä¸è¿‡ç¨‹å¦‚ä¸‹ï¼Œå…¶ä¸­æ¯ä¸ªå­—ç¬¦ä¸²éƒ½ä¼šè¢«åˆ†å‰²æˆè‹¥å¹² **éç©º** å­å­—ç¬¦ä¸²ï¼š

- `s = s1 + s2 + ... + sn`
- `t = t1 + t2 + ... + tm`
- `|n - m| <= 1`
- **äº¤é”™** æ˜¯ `s1 + t1 + s2 + t2 + s3 + t3 + ...` æˆ–è€… `t1 + s1 + t2 + s2 + t3 + s3 + ...`

**æ³¨æ„ï¼š**`a + b` æ„å‘³ç€å­—ç¬¦ä¸² `a` å’Œ `b` è¿æ¥ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2020/09/02/interleave.jpg#id=M7vWM&originHeight=203&originWidth=561&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šs1 = "aabcc", s2 = "dbbca", s3 = "aadbbcbcac"
è¾“å‡ºï¼štrue
```

æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª boolean äºŒç»´æ•°ç»„ dp [ i ] [ j ] æ¥è¡¨ç¤º s1[ 0, i ) å’Œ s2 [ 0, j ï¼‰ ç»„åˆåèƒ½å¦æ„æˆ s3 [ 0, i + j )ï¼Œæ³¨æ„ä¸åŒ…æ‹¬å³è¾¹ç•Œï¼Œä¸»è¦æ˜¯ä¸ºäº†è€ƒè™‘å¼€å§‹çš„æ—¶å€™å¦‚æœåªå– s1ï¼Œé‚£ä¹ˆ s2 å°±æ˜¯ç©ºä¸²ï¼Œè¿™æ ·çš„è¯ dp [ i ] [ 0 ] å°±èƒ½è¡¨ç¤º s2 å–ç©ºä¸²ã€‚

çŠ¶æ€è½¬æ¢æ–¹ç¨‹ä¹Ÿå¾ˆå¥½å†™äº†ï¼Œå¦‚æœè¦æ±‚ dp [ i ] [ j ] ã€‚

å¦‚æœ dp [ i - 1 ] [ j ] == trueï¼Œå¹¶ä¸” s1 [ i - 1] == s3 [ i + j - 1]ï¼Œ dp [ i ] [ j ] = true ã€‚

å¦‚æœ dp [ i ] [ j - 1 ] == trueï¼Œå¹¶ä¸” s2 [ j - 1] == s3 [ i + j - 1]ï¼Œ dp [ i ] [ j ] = true ã€‚

å¦åˆ™çš„è¯ï¼Œå°±æ›´æ–°ä¸º dp [ i ] [ j ] = falseã€‚

å¦‚æœ i ä¸º 0ï¼Œæˆ–è€… j ä¸º 0ï¼Œé‚£ç›´æ¥åˆ¤æ–­ s2 å’Œ s3 å¯¹åº”çš„å­—æ¯æˆ–è€… s1 å’Œ s3 å¯¹åº”çš„å­—æ¯å³å¯ã€‚

```java
class Solution {
    public boolean isInterleave(String s1, String s2, String s3) {
        if (s3.length()!=(s1.length()+s2.length())) return false;
        int m = s1.length();
        int n = s2.length();
        boolean[][] dp = new boolean[m + 1][n + 1];
        dp[0][0] = true;
        for (int i = 0; i <= m; i++) {
            for (int j = 0; j <= n; j++) {
                int k = i+j-1;
                if (i>0){
                    //å‘å‰æ¨è¿›dpæ•°ç»„ï¼Œæ–°çš„dpç­‰äºåŸæ¥çš„æ˜¯ä¸æ˜¯trueï¼Œç„¶åå½“å‰çš„å­—ç¬¦æ˜¯ä¸æ˜¯ç›¸ç­‰çš„
                    dp[i][j] = dp[i-1][j] &&(s1.charAt(i-1)==s3.charAt(k));
                }
                if (j>0){
                    dp[i][j] = dp[i][j] ||(dp[i][j-1]&&s2.charAt(j-1)==s3.charAt(k));
                }
            }
        }
        return dp[m][n];
        //dp[i][j] è¡¨ç¤ºçš„æ˜¯å½“å‰æ˜¯å¦æ˜¯s3çš„i+jçš„æ­£ç¡®çš„è¡¨è¾¾å¼
        //if(s3.chatAt(i+j)==s1.charæˆ–è€…s2.char -ã€‹dp[i][j] = dp[i-1][j]

    }
}
```

### II 019å›æ–‡å­—ç¬¦

ç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸² `s`ï¼Œè¯·åˆ¤æ–­å¦‚æœ **æœ€å¤š** ä»å­—ç¬¦ä¸²ä¸­åˆ é™¤ä¸€ä¸ªå­—ç¬¦èƒ½å¦å¾—åˆ°ä¸€ä¸ªå›æ–‡å­—ç¬¦ä¸²ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: s = "aba"
è¾“å‡º: true
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: s = "abca"
è¾“å‡º: true
è§£é‡Š: å¯ä»¥åˆ é™¤ "c" å­—ç¬¦ æˆ–è€… "b" å­—ç¬¦
```

```java
class Solution {
    public boolean validPalindrome(String s) {
        int left = 0;
        int right = s.length() - 1;
        while (left<right){
            if (s.charAt(left)!=s.charAt(right)){
                return validSub(s,left+1,right) || validSub(s,left,right-1);
            }else {
                left++;
                right--;
            }
        }
        return true;
    }
    private boolean validSub(String s,int le,int ri){
        while (le<ri){
            if (s.charAt(le)!=s.charAt(ri)) return false;
            le++;
            ri--;
        }
        return true;
    }
}
```

### [647. å›æ–‡å­ä¸²](https://leetcode.cn/problems/palindromic-substrings/)

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·è®¡ç®—è¿™ä¸ªå­—ç¬¦ä¸²ä¸­æœ‰å¤šå°‘ä¸ªå›æ–‡å­å­—ç¬¦ä¸²ã€‚

å…·æœ‰ä¸åŒå¼€å§‹ä½ç½®æˆ–ç»“æŸä½ç½®çš„å­ä¸²ï¼Œå³ä½¿æ˜¯ç”±ç›¸åŒçš„å­—ç¬¦ç»„æˆï¼Œä¹Ÿä¼šè¢«è§†ä½œä¸åŒçš„å­ä¸²ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "abc"
è¾“å‡ºï¼š3
è§£é‡Šï¼šä¸‰ä¸ªå›æ–‡å­ä¸²: "a", "b", "c"
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "aaa"
è¾“å‡ºï¼š6
è§£é‡Šï¼š6ä¸ªå›æ–‡å­ä¸²: "a", "a", "a", "aa", "aa", "aaa"
```

**æç¤ºï¼š**

- `1 <= s.length <= 1000`
- `s` ç”±å°å†™è‹±æ–‡å­—æ¯ç»„æˆ

æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 647 é¢˜ç›¸åŒï¼š[https://leetcode-cn.com/problems/palindromic-substrings/](https://leetcode-cn.com/problems/palindromic-substrings/)

> æ³¨æ„ï¼šâš ï¸æœ¬é¢˜å…¶å®å’ŒåŠ¨æ€è§„åˆ’æ³•æ±‚è§£[5. æœ€é•¿å›æ–‡å­ä¸²](https://leetcode.cn/problems/longest-palindromic-substring/) æ˜¯ä¸€æ ·çš„æ–¹æ³•ï¼Œåªæ˜¯åœ¨å¾—åˆ°`dp[i][j]`å¤„ç†çš„æ–¹æ³•ä¸ä¸€æ ·ã€‚


```java
class Solution {
    public int countSubstrings(String s) {
        //åŠ¨æ€è§„åˆ’ï¼Œdp[i][j]è¡¨ç¤ºiåˆ°jæ˜¯å¦æ˜¯å›æ–‡ä¸²
        int length = s.length();
        boolean[][] dp = new boolean[length][length];
        int count = 0;
        for (int i = 0; i < length; i++) {
            dp[i][i] = true;
            count++;
        }
        /*
        * å½“ä¸‹æ ‡ i å’Œ j ç›¸åŒæ—¶ï¼šåŒºé—´åªæœ‰ä¸€ä¸ªå­—æ¯ï¼Œæ˜¯å›æ–‡å­ä¸²ã€‚
        * å½“ä¸‹æ ‡ i å’Œ j ç›¸å·®ä¸º 1 æ—¶ï¼šåŒºé—´æœ‰ä¸¤ä¸ªå­—æ¯ï¼Œä¸”è¿™ä¸¤ä¸ªå­—æ¯ç›¸åŒï¼Œæ˜¯å›æ–‡å­ä¸²ã€‚
        * å½“ä¸‹æ ‡ i å’Œ j ç›¸å·®å¤§äº 1 æ—¶ï¼šæ­¤æ—¶æœ‰ s[i] == s[j] ï¼Œ
        è¦çœ‹åŒºé—´ [i, j] æ˜¯ä¸æ˜¯å›æ–‡å­ä¸²ï¼Œå°±å¾—çœ‹ä¸­é—´å¤¹ç€çš„åŒºé—´ [i + 1, j - 1]
        æ˜¯ä¸æ˜¯å›æ–‡å­ä¸²ï¼Œå³å½“ dp[i + 1][j - 1] = true æ—¶ï¼Œ
        åŒºé—´ [i, j] æ˜¯å›æ–‡å­ä¸²ï¼Œå¦åˆ™å°±ä¸æ˜¯å›æ–‡å­ä¸²ã€‚
         */
        for (int i = length-1; i >= 0; i--) {
            for (int j = i+1; j < length; j++) {
                char ci = s.charAt(i);
                char cj = s.charAt(j);
                if (j-1>=i+1){
                    //ä¸­é—´çš„åŒºé—´
                    dp[i][j] = (ci==cj) && dp[i+1][j-1];
                }else {
                    dp[i][j] = (ci==cj);//åªæœ‰ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™
                }
                if (dp[i][j]) count++;
                //å¦‚æœä¸Šè¿°åˆ¤æ–­å®Œäº†ä¹‹åæ˜¯trueï¼Œé‚£ä¹ˆå°±è®¡æ•°+1ï¼›
            }
        }
        return count;
    }
}
```

```java
for (int i = 0; i < n; i++) {
  for (int j = 0; j < i; j++) {
    char ci = s.charAt(i);
    char cj = s.charAt(j);
    if (i>j+1){
      dp[j][i]=(dp[j+1][i-1])&&(ci==cj);
    }else {
      dp[j][i]=(ci==cj);
    }
    if (dp[j][i]) count++;
  }
}
```

### [5. æœ€é•¿å›æ–‡å­ä¸²](https://leetcode.cn/problems/longest-palindromic-substring/)

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s`ï¼Œæ‰¾åˆ° `s` ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚

å¦‚æœå­—ç¬¦ä¸²çš„ååºä¸åŸå§‹å­—ç¬¦ä¸²ç›¸åŒï¼Œåˆ™è¯¥å­—ç¬¦ä¸²ç§°ä¸ºå›æ–‡å­—ç¬¦ä¸²ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "babad"
è¾“å‡ºï¼š"bab"
è§£é‡Šï¼š"aba" åŒæ ·æ˜¯ç¬¦åˆé¢˜æ„çš„ç­”æ¡ˆã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "cbbd"
è¾“å‡ºï¼š"bb"
```

#### ä¸­å¿ƒæ‰©æ•£æ³•

æœ¬é¢˜æœ€å®¹æ˜“æƒ³åˆ°çš„ä¸€ç§æ–¹æ³•åº”è¯¥å°±æ˜¯ **ä¸­å¿ƒæ‰©æ•£æ³•**ã€‚

ä¸­å¿ƒæ‰©æ•£æ³•æ€ä¹ˆå»æ‰¾å›æ–‡ä¸²ï¼Ÿ

ä»æ¯ä¸€ä¸ªä½ç½®å‡ºå‘ï¼Œå‘ä¸¤è¾¹æ‰©æ•£å³å¯ã€‚é‡åˆ°ä¸æ˜¯å›æ–‡çš„æ—¶å€™ç»“æŸã€‚ä¸¾ä¸ªä¾‹å­ï¼Œ_str_=_acdbbdaa_ æˆ‘ä»¬éœ€è¦å¯»æ‰¾ä»ç¬¬ä¸€ä¸ª bï¼ˆä½ç½®ä¸º 3ï¼‰å‡ºå‘æœ€é•¿å›æ–‡ä¸²ä¸ºå¤šå°‘ã€‚æ€ä¹ˆå¯»æ‰¾ï¼Ÿ

é¦–å…ˆå¾€å·¦å¯»æ‰¾ä¸å½“æœŸä½ç½®ç›¸åŒçš„å­—ç¬¦ï¼Œç›´åˆ°é‡åˆ°ä¸ç›¸ç­‰ä¸ºæ­¢ã€‚

ç„¶åå¾€å³å¯»æ‰¾ä¸å½“æœŸä½ç½®ç›¸åŒçš„å­—ç¬¦ï¼Œç›´åˆ°é‡åˆ°ä¸ç›¸ç­‰ä¸ºæ­¢ã€‚

æœ€åå·¦å³åŒå‘æ‰©æ•£ï¼Œç›´åˆ°å·¦å’Œå³ä¸ç›¸ç­‰ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/2f205fcd0493818129e8d3604b2d84d94678fda7708c0e9831f192e21abb1f34.png#id=ca0rr&originHeight=684&originWidth=724&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

æ¯ä¸ªä½ç½®å‘ä¸¤è¾¹æ‰©æ•£éƒ½ä¼šå‡ºç°ä¸€ä¸ªçª—å£å¤§å°ï¼ˆ`len`ï¼‰ã€‚å¦‚æœ `len>maxLen`(ç”¨æ¥è¡¨ç¤ºæœ€é•¿å›æ–‡ä¸²çš„é•¿åº¦ï¼‰ã€‚åˆ™æ›´æ–° `maxLen` çš„å€¼ã€‚
å› ä¸ºæˆ‘ä»¬æœ€åè¦è¿”å›çš„æ˜¯å…·ä½“å­ä¸²ï¼Œè€Œä¸æ˜¯é•¿åº¦ï¼Œå› æ­¤ï¼Œè¿˜éœ€è¦è®°å½•ä¸€ä¸‹ `maxLen` æ—¶çš„èµ·å§‹ä½ç½®ï¼ˆ`maxStart`ï¼‰ï¼Œå³æ­¤æ—¶è¿˜è¦ `maxStart=len`ã€‚

```java
class Solution {
    public String longestPalindrome(String s) {
        //ç”¨ä¸­é—´å‘ä¸¤è¾¹æ‰©æ•£çš„æ–¹æ³•
        if (s.length()<2) return s;
        int n = s.length();
        int maxLeft=0,maxRight=0;
        int left = 0,right = 0;
        int len = 1;
        int maxLen = 0;
        for (int i = 0; i < n; i++) {
            left = i-1;
            right = i+1;
            while (left>=0 && s.charAt(left)==s.charAt(i)) {
                left--;
                len++;
            }
            while (right<n && s.charAt(right)==s.charAt(i)) {
                right++;
                len++;
            }
            //left å’Œrightéƒ½æ˜¯ä¸å’Œiå¤„ç›¸ç­‰çš„äº†ï¼Œ
            while (left>=0 && right<n && s.charAt(left)==s.charAt(right)) {
                len+=2;
                left--;
                right++;
            }
            if (len>maxLen){
                maxLen=len;
                maxLeft=left;
                maxRight=right;
            }
            len=1;
        }
        return s.substring(maxLeft+1,maxRight);
    }
}
```

```java
class Solution {
    public String longestPalindrome(String s) {
        /**
         * æˆ‘ä»¬ç”¨ä¸€ä¸ª boolean dp[l][r] è¡¨ç¤ºå­—ç¬¦ä¸²ä»
         * i åˆ° j è¿™æ®µæ˜¯å¦ä¸ºå›æ–‡ã€‚è¯•æƒ³å¦‚æœ dp[l][r]=true
         * ï¼Œæˆ‘ä»¬è¦åˆ¤æ–­ dp[l-1][r+1] æ˜¯å¦ä¸ºå›æ–‡ã€‚
         * åªéœ€è¦åˆ¤æ–­å­—ç¬¦ä¸²åœ¨(l-1)å’Œï¼ˆr+1)ä¸¤ä¸ªä½ç½®æ˜¯å¦ä¸º
         * ç›¸åŒçš„å­—ç¬¦ï¼Œæ˜¯ä¸æ˜¯å‡å°‘äº†å¾ˆå¤šé‡å¤è®¡ç®—ã€‚
         */
        if (s==null||s.length()<2) return s;
        int n = s.length();
        int maxStart=0,maxEnd=0,maxLen=1;
        boolean[][] dp = new boolean[n][n];
        for (int j = 1; j < n; j++) {
            for (int i = 0; i < j; i++) {
                //éå†ä»iåˆ°j
                if (s.charAt(i)==s.charAt(j)&&(j-i<=2||dp[i+1][j-1])){
                    dp[i][j]=true;
                    //j-i<=2||dp[i+1][j-1] iå’Œjä¹‹é—´çš„å…ƒç´ å°äºç­‰äºä¸€ä¸ªæˆ–è€…ä¸­é—´çš„ä¸ºå›æ–‡
                    if (j-i+1>maxLen){
                        maxStart=i;
                        maxEnd=j;
                        maxLen=j-i+1;
                    }
                }
            }
        }
        return s.substring(maxStart,maxEnd+1);
    }
}
```

```java
class Solution {
    public String longestPalindrome(String s) {
        //ç”¨åŠ¨æ€è§„åˆ’çš„æ–¹æ³•

        if (s.length()<2) return s;
        String ans= String.valueOf(s.charAt(0));
        int n = s.length();
        boolean[][] dp = new boolean[n][n];
        for (int i = 0; i < n; i++) {
            dp[i][i]=true;
        }
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < i; j++) {
                char ci = s.charAt(i);
                char cj = s.charAt(j);
                if (i>j+1){
                    //é—´éš”ä¸€ä¸ªä»¥ä¸Š
                    dp[j][i]=(dp[j+1][i-1])&&(ci==cj);
                }else {
                    dp[j][i]=(ci==cj);
                }
                if (dp[j][i]){
                    if (ans.length()<(i-j+1)) ans = s.substring(j,i+1);
                }
            }
        }
        return ans;
    }
}
```

#### åŠ¨æ€è§„åˆ’æ³•

æ³¨æ„å¾ªç¯â™»ï¸çš„é¡ºåºï¼šï¼ï¼ï¼

```java
public String longestPalindrome(String s) {
        char[] sc = s.toCharArray();
        int n = s.length();
        if (n<2) return s;
        boolean[][] dp = new boolean[n][n];
        String ans = s.substring(0,1);
        for (int i = n-1; i >= 0; i--) {
            for (int j = i; j < n; j++) {
                if (j-i<2){
                    dp[i][j]=(sc[i]==sc[j]);
                }else {
                    dp[i][j]=(sc[i]==sc[j])&&dp[i+1][j-1];
                }
              	
                if (dp[i][j]){
                    if (ans.length()<j-i+1){
                        ans = s.substring(i,j+1);
                    }
                }
            }
        }
        return ans;
    }
```

### [516. æœ€é•¿å›æ–‡å­åºåˆ—](https://leetcode.cn/problems/longest-palindromic-subsequence/)

> **å›æ–‡å­ä¸²æ˜¯è¦è¿ç»­çš„ï¼Œå›æ–‡å­åºåˆ—å¯ä¸æ˜¯è¿ç»­çš„ï¼** å›æ–‡å­ä¸²ï¼Œå›æ–‡å­åºåˆ—éƒ½æ˜¯åŠ¨æ€è§„åˆ’ç»å…¸é¢˜ç›®ã€‚


ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€é•¿çš„å›æ–‡å­åºåˆ—ï¼Œå¹¶è¿”å›è¯¥åºåˆ—çš„é•¿åº¦ã€‚

å­åºåˆ—å®šä¹‰ä¸ºï¼šä¸æ”¹å˜å‰©ä½™å­—ç¬¦é¡ºåºçš„æƒ…å†µä¸‹ï¼Œåˆ é™¤æŸäº›å­—ç¬¦æˆ–è€…ä¸åˆ é™¤ä»»ä½•å­—ç¬¦å½¢æˆçš„ä¸€ä¸ªåºåˆ—ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "bbbab"
è¾“å‡ºï¼š4
è§£é‡Šï¼šä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸º "bbbb" ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "cbbd"
è¾“å‡ºï¼š2
è§£é‡Šï¼šä¸€ä¸ªå¯èƒ½çš„æœ€é•¿å›æ–‡å­åºåˆ—ä¸º "bb" ã€‚
```

```
è¿™é‡Œå°±æ˜¯è®¡ç®—å¥½åˆ é™¤é‚£ä¸€ä¸ªå­—ç¬¦è¿˜æ˜¯ä¸åˆ é™¤é‚£ä¸ªå­—ç¬¦ã€‚
åœ¨åˆ¤æ–­å›æ–‡å­ä¸²çš„é¢˜ç›®ä¸­ï¼Œå…³é”®é€»è¾‘å°±æ˜¯çœ‹s[i]ä¸s[j]æ˜¯å¦ç›¸åŒã€‚
å¦‚æœs[i]ä¸s[j]ç›¸åŒï¼Œé‚£ä¹ˆdp[i][j] = dp[i + 1][j - 1] + 2;
```

å¦‚å›¾ï¼š![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/1631603904-bajQkL-file_1631603903949.jpeg#id=Cc94s&originHeight=514&originWidth=1058&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
å¦‚æœè¿™é‡Œçœ‹ä¸æ‡‚ï¼Œå›å¿†ä¸€ä¸‹dp[i][j]çš„å®šä¹‰
å¦‚æœs[i]ä¸s[j]ä¸ç›¸åŒï¼Œè¯´æ˜s[i]å’Œs[j]çš„åŒæ—¶åŠ å…¥ å¹¶ä¸èƒ½å¢åŠ [i,j]åŒºé—´å›æ–‡å­ä¸²çš„é•¿åº¦ï¼Œé‚£ä¹ˆåˆ†åˆ«åŠ å…¥s[i]ã€s[j]çœ‹çœ‹å“ªä¸€ä¸ªå¯ä»¥ç»„æˆæœ€é•¿çš„å›æ–‡å­åºåˆ—ã€‚
åŠ å…¥s[j]çš„å›æ–‡å­åºåˆ—é•¿åº¦ä¸ºdp[i + 1][j]ã€‚
åŠ å…¥s[i]çš„å›æ–‡å­åºåˆ—é•¿åº¦ä¸ºdp[i][j - 1]ã€‚
é‚£ä¹ˆdp[i][j]ä¸€å®šæ˜¯å–æœ€å¤§çš„ï¼Œå³ï¼šdp[i][j] = max(dp[i + 1][j], dp[i][j - 1]);
```

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/1631603904-sbMuFq-file_1631603903993.jpeg#id=xuzSW&originHeight=584&originWidth=1070&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```java
public int longestPalindromeSubseq(String s) {
    //æœ€é•¿çš„å­åºåˆ—
    int n = s.length();
    char[] sc = s.toCharArray();
    if (n<2) return n;
    int res = 0;
    int[][] dp = new int[n][n];
    for (int i = n-1; i >=0; i--) {
        dp[i][i]=1;
        for (int j = i+1; j <n; j++) {
            //  f[i][j]å°±æ˜¯s[i+1]åˆ°s[j-1]çš„æœ€é•¿å­åºåˆ—é•¿åº¦
            // ï¼ˆå°±æ˜¯f[i+1][j-1]ï¼‰ åŠ ä¸Šs[i]å’Œs[j]ä¸¤ä¸ªå­—ç¬¦çš„é•¿åº¦ã€‚
            dp[i][j]=sc[i]==sc[j]?dp[i+1][j-1]+2:Math.max(dp[i+1][j],dp[i][j-1]);
            res = Math.max(res,dp[i][j]);
        }
    }
    return res;
}
```

å¦‚æœæ˜¯æ±‚æœ€é•¿å›æ–‡å­ä¸²ï¼š

```java
public String longestPalindrome(String s) {
  			//æœ€é•¿å›æ–‡å­ä¸²
        char[] sc = s.toCharArray();
        int n = s.length();
        if (n<2) return s;
        boolean[][] dp = new boolean[n][n];
        String ans = s.substring(0,1);
        for (int i = n-1; i >= 0; i--) {
            for (int j = i; j < n; j++) {
                if (j-i<2){
                    dp[i][j]=(sc[i]==sc[j]);
                }else {
                    dp[i][j]=(sc[i]==sc[j])&&dp[i+1][j-1];
                }
                if (dp[i][j]){
                    if (ans.length()<j-i+1){
                        ans = s.substring(i,j+1);
                    }
                }
            }
        }
        return ans;
    }
```

### [å‰‘æŒ‡ Offer II 093. æœ€é•¿æ–æ³¢é‚£å¥‘æ•°åˆ—](https://leetcode.cn/problems/Q91FMA/)

å¦‚æœåºåˆ— `X_1, X_2, ..., X_n` æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼Œå°±è¯´å®ƒæ˜¯ _æ–æ³¢é‚£å¥‘å¼_ çš„ï¼š

- `n >= 3`
- å¯¹äºæ‰€æœ‰ `i + 2 <= n`ï¼Œéƒ½æœ‰ `X_i + X_{i+1} = X_{i+2}`

ç»™å®šä¸€ä¸ª**ä¸¥æ ¼é€’å¢**çš„æ­£æ•´æ•°æ•°ç»„å½¢æˆåºåˆ— `arr` ï¼Œæ‰¾åˆ° `arr` ä¸­æœ€é•¿çš„æ–æ³¢é‚£å¥‘å¼çš„å­åºåˆ—çš„é•¿åº¦ã€‚å¦‚æœä¸€ä¸ªä¸å­˜åœ¨ï¼Œè¿”å› 0 ã€‚

_ï¼ˆå›æƒ³ä¸€ä¸‹ï¼Œå­åºåˆ—æ˜¯ä»åŸåºåˆ— _`_arr_`_ ä¸­æ´¾ç”Ÿå‡ºæ¥çš„ï¼Œå®ƒä» _`_arr_`_ ä¸­åˆ æ‰ä»»æ„æ•°é‡çš„å…ƒç´ ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ ï¼‰ï¼Œè€Œä¸æ”¹å˜å…¶ä½™å…ƒç´ çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œ _`_[3, 5, 8]_`_ æ˜¯ _`_[3, 4, 5, 6, 7, 8]_`_ çš„ä¸€ä¸ªå­åºåˆ—ï¼‰_

```java
class Solution {
    public int lenLongestFibSubseq(int[] arr) {
        //æ¯ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—éƒ½å¯ä»¥ç”±å…¶æœ€åä¸¤ä½æ•°å­—ç²¾å‡†å®šä½
        int n = arr.length;
        int[][] dp = new int[n][n];
        // dp[2][3]è¡¨ç¤ºæ•°åˆ—[1,2,3]ã€dp[3][5]è¡¨ç¤ºæ•°åˆ—[1,2,3,5]ã€
        // dp[5][8]è¡¨ç¤ºæ•°åˆ—[1,2,3,5,8]
        //æ¯ä¸ªdpå…ƒç´ çš„å€¼ï¼Œä»£è¡¨å®ƒæ‰€å®šä½çš„æ•°åˆ—çš„é•¿åº¦ï¼Œ
        // ä¾‹å¦‚ä¸Šé¢çš„ dp[2][3]=3 , dp[3][5]=4 , dp[5][8]=5ï¼›
        int max = 0;
        for (int i = 2; i < n; i++) {
            int j = 0, k = i-1;
            //j k ä¸ºåŒæŒ‡é’ˆï¼Œ
            while (j<k){
                if (arr[j] + arr[k] == arr[i]){
                    //æ‰¾åˆ°
                    if (dp[j][k] == 0){//å¦‚æœjå’Œkï¼Œjä¹‹å‰çš„é•¿åº¦ä¸º0ï¼Œ
                        dp[k][i] = 3;//è‡³å°‘æœ‰ä¸‰ä¸ªå…ƒç´ äº†ï¼Œkå’Œiæœ‰3çš„é•¿åº¦
                        //ä¸¤ä¸ªå‰ç½®å…ƒç´ jã€kä¹‹å‰å¹¶æ²¡æœ‰å½¢æˆæ–æ³¢é‚£å¥‘å­æ•°åˆ—ï¼ˆå³dp[j][k]==0ï¼‰ï¼Œ
                        // é‚£å°±å°†å½“å‰ä½ç½®å­˜å‚¨çš„æ–æ³¢é‚£å¥‘æ•°åˆ—é•¿åº¦dp[k][i]ä¿®æ”¹ä¸º3
                    }else {
                        //å¦‚æœå‰ç½®å…ƒç´ jã€kä¹‹å‰ä½œä¸ºæŸä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—çš„æœ€åä¸¤ä½å…ƒç´ å­˜åœ¨
                        // ï¼ˆå³dp[j][k]==nï¼Œn>=3ï¼‰
                        dp[k][i] = Math.max(dp[j][k]+1,dp[k][i]);
                        //å°†å½“å‰ä½ç½®å­˜å‚¨çš„æ–æ³¢é‚£å¥‘æ•°åˆ—é•¿åº¦dp[k][i]ä¿®æ”¹ä¸º n+1 ï¼Œ
                    }
                    max = Math.max(max,dp[k][i]);
                    j++;k--;
                }else if (arr[j] + arr[k] < arr[i]){
                    j++;
                }else
                    k--;
            }
        }
        return max;

    }
}
```

### [å‰‘æŒ‡ Offer II 092. ç¿»è½¬å­—ç¬¦](https://leetcode.cn/problems/cyJERH/)

å¦‚æœä¸€ä¸ªç”± `'0'` å’Œ `'1'` ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œæ˜¯ä»¥ä¸€äº› `'0'`ï¼ˆå¯èƒ½æ²¡æœ‰ `'0'`ï¼‰åé¢è·Ÿç€ä¸€äº› `'1'`ï¼ˆä¹Ÿå¯èƒ½æ²¡æœ‰ `'1'`ï¼‰çš„å½¢å¼ç»„æˆçš„ï¼Œé‚£ä¹ˆè¯¥å­—ç¬¦ä¸²æ˜¯ **å•è°ƒé€’å¢** çš„ã€‚

æˆ‘ä»¬ç»™å‡ºä¸€ä¸ªç”±å­—ç¬¦ `'0'` å’Œ `'1'` ç»„æˆçš„å­—ç¬¦ä¸² sï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»ä½• `'0'` ç¿»è½¬ä¸º `'1'` æˆ–è€…å°† `'1'` ç¿»è½¬ä¸º `'0'`ã€‚

è¿”å›ä½¿ s **å•è°ƒé€’å¢** çš„æœ€å°ç¿»è½¬æ¬¡æ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "00110"
è¾“å‡ºï¼š1
è§£é‡Šï¼šæˆ‘ä»¬ç¿»è½¬æœ€åä¸€ä½å¾—åˆ° 00111.
```

```java
class Solution {
    public int minFlipsMonoIncr(String s) {
        if(s.length() < 2){
            return 0;
        } // å‰ä¸€ä½åè½¬æˆ0çš„æœ€å°å€¼å’Œå‰ä¸€ä½åè½¬æˆ1çš„æœ€å°å€¼
         int [][] dp = new int[s.length()][2];
        if (s.charAt(0)=='1'){
            dp[0][0] = 1;//ç¬¬ä¸€ä¸ªä¸º1çš„è¯ï¼Œä»–åè½¬æˆé›¶å°±éœ€è¦å˜åŠ¨ä¸€ä¸‹ï¼Œæ‰€ä»¥æ˜¯ä¸€ï¼Œ
          		//ä½†å¦‚æœä»–åè½¬æˆä¸€çš„è¯ï¼Œå°±ä¸ç”¨åŠ¨ï¼Œæ‰€ä»¥å°±æœ€å°å€¼å˜åŠ¨æ¬¡æ•°ä¸ºé›¶
            dp[0][1] = 0;
        }else {
            dp[0][0] = 0;
            dp[0][1] = 1;
        }
        for (int i = 1; i < s.length(); i++) {
            if (s.charAt(i)=='1'){
                dp[i][0] = dp[i-1][0]+1;//å‰ä¸€ä¸ªæ˜¯0çš„æ—¶å€™ï¼Œå°±å¾—å¤šç¿»ä¸€ä¸ª
                dp[i][1] = Math.min(dp[i-1][0],dp[i-1][1]);
            }else {
                //å½“å‰ä½ç½®ä¸º0 çš„æ—¶å€™ã€‚å¦‚æœå‰ä¸€ä¸ªä¸º0ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦å˜ï¼Œ
//                å‰ä¸€ä¸ªä¸º1ï¼Œéœ€è¦åŠ ä¸€
                dp[i][0] = dp[i-1][0];
                dp[i][1] = Math.min(dp[i-1][1],dp[i-1][0])+1;
            }
        }
        return Math.min(dp[s.length()-1][0],dp[s.length()-1][1]);
    }
}
```

### [44. é€šé…ç¬¦åŒ¹é…](https://leetcode.cn/problems/wildcard-matching/)

ç»™ä½ ä¸€ä¸ªè¾“å…¥å­—ç¬¦ä¸² (`s`) å’Œä¸€ä¸ªå­—ç¬¦æ¨¡å¼ (`p`) ï¼Œè¯·ä½ å®ç°ä¸€ä¸ªæ”¯æŒ `'?'` å’Œ `'*'` åŒ¹é…è§„åˆ™çš„é€šé…ç¬¦åŒ¹é…ï¼š

- `'?'` å¯ä»¥åŒ¹é…ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚
- `'*'` å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦åºåˆ—ï¼ˆåŒ…æ‹¬ç©ºå­—ç¬¦åºåˆ—ï¼‰ã€‚

åˆ¤å®šåŒ¹é…æˆåŠŸçš„å……è¦æ¡ä»¶æ˜¯ï¼šå­—ç¬¦æ¨¡å¼å¿…é¡»èƒ½å¤Ÿ **å®Œå…¨åŒ¹é…** è¾“å…¥å­—ç¬¦ä¸²ï¼ˆè€Œä¸æ˜¯éƒ¨åˆ†åŒ¹é…ï¼‰ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šs = "aa", p = "a"
è¾“å‡ºï¼šfalse
è§£é‡Šï¼š"a" æ— æ³•åŒ¹é… "aa" æ•´ä¸ªå­—ç¬¦ä¸²ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šs = "aa", p = "*"
è¾“å‡ºï¼štrue
è§£é‡Šï¼š'*' å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦ä¸²ã€‚
```

```java
class Solution {
    public boolean isMatch(String s, String p) {
        int m = s.length();
        int n = p.length();
        s = " "+s;//charæ•°ç»„å°±æ˜¯ä»1å¼€å§‹çš„äº†
        p = " "+p;
        char[] chars = s.toCharArray();
        char[] charp = p.toCharArray();
        //åŠ¨æ€è§„åˆ’ï¼Œdp(i,j)å°±æ˜¯1åˆ°içš„å­—ç¬¦å’Œpçš„1åˆ°jçš„å­—ç¬¦æ˜¯å¦åŒ¹é…
        boolean[][] dp = new boolean[m + 1][n + 1];
        dp[0][0]=true;
        for (int i = 0; i <= m; i++) {
            for (int j = 1; j <= n; j++) {
                if (charp[j]=='*'){
                    //å¦‚æœpçš„æ­¤å¤„ä¸º*ï¼Œé‚£ä¹ˆ
                    dp[i][j] = dp[i][j-1] || (i-1>=0 && dp[i-1][j]);
                    //æ­¤æ—¶dp[i][j] å¯ä»¥æ˜¯ç”± dp[i][j-1]åŒ¹é…ä¼ é€’æ¥ æˆ–è€…(i-1>=0 && dp[i-1][j]);
                    
                }else {
                    dp[i][j] = i-1>=0 
                        && dp[i-1][j-1] && (chars[i]==charp[j] 
                                            || charp[j]=='?');
                // ? åŒ¹é…çš„æ¡ä»¶æ˜¯å‰é¢çš„å­—ç¬¦åŒ¹é…ï¼Œs ä¸­çš„ç¬¬ i ä¸ªå­—ç¬¦å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ã€‚
                //   åŒ¹é…çš„æ¡ä»¶æ˜¯å‰é¢çš„å­—ç¬¦åŒ¹é…ï¼ŒåŒæ—¶ s ä¸­çš„ç¬¬ i ä¸ªå­—ç¬¦å’Œ p ä¸­çš„ç¬¬ j ä½ç›¸åŒã€‚
                }
            }
        }
        return dp[m][n];
    }
}
```

### [72. ç¼–è¾‘è·ç¦»](https://leetcode.cn/problems/edit-distance/)

ç»™ä½ ä¸¤ä¸ªå•è¯ `word1` å’Œ `word2`ï¼Œ _è¯·è¿”å›å°† _`_word1_`_ è½¬æ¢æˆ _`_word2_`_ æ‰€ä½¿ç”¨çš„æœ€å°‘æ“ä½œæ•°_ ã€‚

ä½ å¯ä»¥å¯¹ä¸€ä¸ªå•è¯è¿›è¡Œå¦‚ä¸‹ä¸‰ç§æ“ä½œï¼š

- æ’å…¥ä¸€ä¸ªå­—ç¬¦
- åˆ é™¤ä¸€ä¸ªå­—ç¬¦
- æ›¿æ¢ä¸€ä¸ªå­—ç¬¦

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šword1 = "horse", word2 = "ros"
è¾“å‡ºï¼š3
è§£é‡Šï¼š
horse -> rorse (å°† 'h' æ›¿æ¢ä¸º 'r')
rorse -> rose (åˆ é™¤ 'r')
rose -> ros (åˆ é™¤ 'e')
```

```java
class Solution {
    public int minDistance(String word1, String word2) {
        //Dynamic Plan
        //äºŒç»´æ•°ç»„ï¼Œdp[i][j] è¡¨ç¤ºå‰iä¸ªword1è½¬åŒ–æˆå‰jä¸ªword2çš„æœ€å°‘çš„æ“ä½œæ•°
        int m = word1.length();
        int n = word2.length();
        int[][] dp = new int[m + 1][n + 1];
        for (int i = 0; i <= m; i++) {
            dp[i][0] = i;
        }
        for (int i = 0; i <= n; i++) {
            dp[0][i] = i;
        }
        for (int i = 1; i <=m ; i++) {
            for (int j = 1; j <= n; j++) {
                //å¼€å§‹æ¯”è¾ƒäº†
                if (word1.charAt(i-1) == word2.charAt(j-1)){
                    dp[i][j] = dp[i-1][j-1];
                }else {
                    //å¦‚æœæ˜¯åˆ é™¤içš„è¯ï¼šdp[i][j] = dp[i-1][j]+1ï¼›
                  //è¿™ä¸ªå¢åŠ å…¶å®å°±æ˜¯ä¸¤ä¸ªå•è¯åè¿‡æ¥æ“ä½œçš„ç»“æœï¼Œç¬¬ä¸€ä¸ªå•è¯å¢åŠ ä¸€ä¸ªå…ƒç´ å˜æˆç¬¬äºŒä¸ªï¼Œ
                  //å®é™…ä¸Šå°±æ˜¯ç¬¬äºŒä¸ªå…ƒç´ åˆ é™¤ä¸€ä¸ªå…ƒç´ å˜æˆç¬¬ä¸€ä¸ªï¼Œä»–ä»¬ä¸¤ä¸ªçš„æ“ä½œæ­¥éª¤æ¬¡æ•°æ˜¯ä¸€æ ·çš„ã€‚
                    //å¦‚æœæ˜¯å¢åŠ çš„è¯ï¼šdp[i][j] = dp[i][j-1]+1ï¼›
                    //å¦‚æœæ˜¯æ›¿æ¢é‚£å°±æ˜¯dp[i][j] = dp[i-1][j-1]+1;
                    dp[i][j] = Math.min( dp[i-1][j],Math.min(dp[i][j-1],dp[i-1][j-1]))+1;
                }
            }
        }
        return dp[m][n];
    }
}
```

### 718. æœ€é•¿é‡å¤å­æ•°ç»„

[åŠ›æ‰£é¢˜ç›®é“¾æ¥](https://leetcode.cn/problems/maximum-length-of-repeated-subarray/)

ç»™ä¸¤ä¸ªæ•´æ•°æ•°ç»„Â AÂ å’ŒÂ BÂ ï¼Œè¿”å›ä¸¤ä¸ªæ•°ç»„ä¸­å…¬å…±çš„ã€é•¿åº¦æœ€é•¿çš„å­æ•°ç»„çš„é•¿åº¦ã€‚

ç¤ºä¾‹ï¼š

è¾“å…¥ï¼š

- A: [1,2,3,2,1]
- B: [3,2,1,4,7]
- è¾“å‡ºï¼š3
- è§£é‡Šï¼šé•¿åº¦æœ€é•¿çš„å…¬å…±å­æ•°ç»„æ˜¯ [3, 2, 1] ã€‚

æç¤ºï¼š

- 1 <= len(A), len(B) <= 1000
- 0 <= A[i], B[i] < 100

**æ€è·¯**

æ³¨æ„é¢˜ç›®ä¸­è¯´çš„å­æ•°ç»„ï¼Œå…¶å®å°±æ˜¯è¿ç»­å­åºåˆ—ã€‚

è¦æ±‚ä¸¤ä¸ªæ•°ç»„ä¸­æœ€é•¿é‡å¤å­æ•°ç»„ï¼Œå¦‚æœæ˜¯æš´åŠ›çš„è§£æ³• åªéœ€è¦å…ˆä¸¤å±‚forå¾ªç¯ç¡®å®šä¸¤ä¸ªæ•°ç»„èµ·å§‹ä½ç½®ï¼Œç„¶åå†æ¥ä¸€ä¸ªå¾ªç¯å¯ä»¥æ˜¯foræˆ–è€…whileï¼Œæ¥ä»ä¸¤ä¸ªèµ·å§‹ä½ç½®å¼€å§‹æ¯”è¾ƒï¼Œå–å¾—é‡å¤å­æ•°ç»„çš„é•¿åº¦ã€‚

æœ¬é¢˜å…¶å®æ˜¯åŠ¨è§„è§£å†³çš„ç»å…¸é¢˜ç›®ï¼Œæˆ‘ä»¬åªè¦æƒ³åˆ° **ç”¨äºŒç»´æ•°ç»„å¯ä»¥è®°å½•ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æ‰€æœ‰æ¯”è¾ƒæƒ…å†µï¼Œ**è¿™æ ·å°±æ¯”è¾ƒå¥½æ¨ é€’æ¨å…¬å¼äº†ã€‚
åŠ¨è§„äº”éƒ¨æ›²åˆ†æå¦‚ä¸‹ï¼š

1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

`dp[i][j]` ï¼šä»¥ä¸‹æ ‡i - 1ä¸ºç»“å°¾çš„Aï¼Œå’Œä»¥ä¸‹æ ‡j - 1ä¸ºç»“å°¾çš„Bï¼Œæœ€é•¿é‡å¤å­æ•°ç»„é•¿åº¦ä¸ºdp[i][j]ã€‚ Â ï¼ˆ**ç‰¹åˆ«æ³¨æ„**ï¼š â€œä»¥ä¸‹æ ‡i - 1ä¸ºç»“å°¾çš„Aâ€ æ ‡æ˜ä¸€å®šæ˜¯ ä»¥A[i-1]ä¸ºç»“å°¾çš„å­—ç¬¦ä¸² ï¼‰

æ­¤æ—¶ç»†å¿ƒçš„åŒå­¦åº”è¯¥å‘ç°ï¼Œé‚£`dp[0][0]`æ˜¯ä»€ä¹ˆå«ä¹‰å‘¢ï¼Ÿæ€»ä¸èƒ½æ˜¯ä»¥ä¸‹æ ‡-1ä¸ºç»“å°¾çš„Aæ•°ç»„å§ã€‚

å…¶å®`dp[i][j]` çš„å®šä¹‰ä¹Ÿå°±å†³å®šç€ï¼Œæˆ‘ä»¬åœ¨éå†`dp[i][j]` çš„æ—¶å€™i å’Œ jéƒ½è¦ä»1å¼€å§‹ã€‚

é‚£æœ‰åŒå­¦é—®äº†ï¼Œæˆ‘å°±å®šä¹‰`dp[i][j]` ä¸º ä»¥ä¸‹æ ‡iä¸ºç»“å°¾çš„Aï¼Œå’Œä»¥ä¸‹æ ‡j ä¸ºç»“å°¾çš„Bï¼Œæœ€é•¿é‡å¤å­æ•°ç»„é•¿åº¦ã€‚ä¸è¡Œä¹ˆï¼Ÿ

è¡Œå€’æ˜¯è¡Œï¼ ä½†å®ç°èµ·æ¥å°±éº»çƒ¦ä¸€ç‚¹ï¼Œéœ€è¦å•ç‹¬å¤„ç†åˆå§‹åŒ–éƒ¨åˆ†ï¼Œåœ¨æœ¬é¢˜è§£ä¸‹é¢çš„æ‹“å±•å†…å®¹é‡Œï¼Œæˆ‘ç»™å‡ºäº† ç¬¬äºŒç§ dpæ•°ç»„çš„å®šä¹‰æ–¹å¼æ‰€å¯¹åº”çš„ä»£ç å’Œè®²è§£ï¼Œå¤§å®¶æ¯”è¾ƒä¸€ä¸‹å°±äº†è§£äº†ã€‚

2. ç¡®å®šé€’æ¨å…¬å¼

æ ¹æ®`dp[i][j]` çš„å®šä¹‰ï¼Œ`dp[i][j]` çš„çŠ¶æ€åªèƒ½ç”±dp[i - 1][j - 1]æ¨å¯¼å‡ºæ¥ã€‚

å³å½“A[i - 1] å’ŒB[j - 1]ç›¸ç­‰çš„æ—¶å€™ï¼Œ`dp[i][j]` Â = dp[i - 1][j - 1] + 1;

æ ¹æ®é€’æ¨å…¬å¼å¯ä»¥çœ‹å‡ºï¼Œéå†i å’Œ j è¦ä»1å¼€å§‹ï¼

3. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–

æ ¹æ®`dp[i][j]` çš„å®šä¹‰ï¼Œdp[i][0] å’Œ`dp[0][j]`å…¶å®éƒ½æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼

ä½†dp[i][0] å’Œdp[0][j]è¦åˆå§‹å€¼ï¼Œå› ä¸º ä¸ºäº†æ–¹ä¾¿é€’å½’å…¬å¼`dp[i][j]` Â = dp[i - 1][j - 1] + 1;

æ‰€ä»¥dp[i][0] å’Œdp[0][j]åˆå§‹åŒ–ä¸º0ã€‚

ä¸¾ä¸ªä¾‹å­A[0]å¦‚æœå’ŒB[0]ç›¸åŒçš„è¯ï¼Œdp[1][1] = dp[0][0] + 1ï¼Œåªæœ‰dp[0][0]åˆå§‹ä¸º0ï¼Œæ­£å¥½ç¬¦åˆé€’æ¨å…¬å¼é€æ­¥ç´¯åŠ èµ·æ¥ã€‚

4. ç¡®å®šéå†é¡ºåº

å¤–å±‚forå¾ªç¯éå†Aï¼Œå†…å±‚forå¾ªç¯éå†Bã€‚

é‚£åˆæœ‰åŒå­¦é—®äº†ï¼Œå¤–å±‚forå¾ªç¯éå†Bï¼Œå†…å±‚forå¾ªç¯éå†Aã€‚ä¸è¡Œä¹ˆï¼Ÿ

ä¹Ÿè¡Œï¼Œä¸€æ ·çš„ï¼Œæˆ‘è¿™é‡Œå°±ç”¨å¤–å±‚forå¾ªç¯éå†Aï¼Œå†…å±‚forå¾ªç¯éå†Bäº†ã€‚

åŒæ—¶é¢˜ç›®è¦æ±‚é•¿åº¦æœ€é•¿çš„å­æ•°ç»„çš„é•¿åº¦ã€‚æ‰€ä»¥åœ¨éå†çš„æ—¶å€™é¡ºä¾¿æŠŠ`dp[i][j]` çš„æœ€å¤§å€¼è®°å½•ä¸‹æ¥ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```cpp
for (int i = 1; i <= nums1.size(); i++) {
    for (int j = 1; j <= nums2.size(); j++) {
        if (nums1[i - 1] == nums2[j - 1]) {
            dp[i][j] = dp[i - 1][j - 1] + 1;
        }
        if (dp[i][j] > result) result = dp[i][j];
    }
}
```

5. ä¸¾ä¾‹æ¨å¯¼dpæ•°ç»„

æ‹¿ç¤ºä¾‹1ä¸­ï¼ŒA: [1,2,3,2,1]ï¼ŒB: [3,2,1,4,7]ä¸ºä¾‹ï¼Œç”»ä¸€ä¸ªdpæ•°ç»„çš„çŠ¶æ€å˜åŒ–ï¼Œå¦‚ä¸‹ï¼š

![](https://code-thinking-1253855093.file.myqcloud.com/pics/2021011215282060.jpg#id=ctN0m&originHeight=748&originWidth=914&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```cpp
class Solution {
    public int findLength(int[] nums1, int[] nums2) {
        int n1 = nums1.length;
        int n2 = nums2.length;
        int[][] dp = new int[n1 + 1][n2 + 1];//dpå­˜å‚¨ç›¸åŒçš„é•¿åº¦
        //ä»¥ä¸‹æ ‡i - 1ä¸ºç»“å°¾çš„Aï¼Œå’Œä»¥ä¸‹æ ‡j - 1ä¸ºç»“å°¾çš„Bï¼Œæœ€é•¿é‡å¤å­æ•°ç»„é•¿åº¦ä¸ºdp[i][j]ã€‚
        int count = 0;
        for (int i = 1; i <= nums1.length; i++) {
            for (int j = 1; j <=nums2.length ; j++) {
                if (nums1[i-1]==nums2[j-1]){
                    dp[i][j] = dp[i-1][j-1]+1;
                }
                if (dp[i][j]>count) count = dp[i][j];
            }
        }
        return count;
    }
}
```

- æ—¶é—´å¤æ‚åº¦ï¼šO(n Ã— m)ï¼Œn ä¸ºAé•¿åº¦ï¼Œmä¸ºBé•¿åº¦
- ç©ºé—´å¤æ‚åº¦ï¼šO(n Ã— m)

æ‰“å®¶åŠ«èˆï¼š

### 198.æ‰“å®¶åŠ«èˆ

[åŠ›æ‰£é¢˜ç›®é“¾æ¥](https://leetcode.cn/problems/house-robber/)

ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œå¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦ã€‚

ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹ ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚

- ç¤ºä¾‹ 1ï¼š
- è¾“å…¥ï¼š[1,2,3,1]
- è¾“å‡ºï¼š4

è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 1) ï¼Œç„¶åå·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 3)ã€‚
Â  Â  Â å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 1 + 3 = 4 ã€‚

- ç¤ºä¾‹ 2ï¼š
- è¾“å…¥ï¼š[2,7,9,3,1]
- è¾“å‡ºï¼š12
è§£é‡Šï¼šå·çªƒ 1 å·æˆ¿å±‹ (é‡‘é¢ = 2), å·çªƒ 3 å·æˆ¿å±‹ (é‡‘é¢ = 9)ï¼Œæ¥ç€å·çªƒ 5 å·æˆ¿å±‹ (é‡‘é¢ = 1)ã€‚
Â  Â  Â å·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ = 2 + 9 + 1 = 12 ã€‚

æç¤ºï¼š

- 0 <= nums.length <= 100
- 0 <= nums[i] <= 400

å†³å®šdp[i]çš„å› ç´ å°±æ˜¯ç¬¬iæˆ¿é—´å·è¿˜æ˜¯ä¸å·ã€‚

å¦‚æœå·ç¬¬iæˆ¿é—´ï¼Œé‚£ä¹ˆdp[i] = dp[i - 2] + nums[i] ï¼Œå³ï¼šç¬¬i-1æˆ¿ä¸€å®šæ˜¯ä¸è€ƒè™‘çš„ï¼Œæ‰¾å‡º ä¸‹æ ‡i-2ï¼ˆåŒ…æ‹¬i-2ï¼‰ä»¥å†…çš„æˆ¿å±‹ï¼Œæœ€å¤šå¯ä»¥å·çªƒçš„é‡‘é¢ä¸ºdp[i-2] åŠ ä¸Šç¬¬iæˆ¿é—´å·åˆ°çš„é’±ã€‚

å¦‚æœä¸å·ç¬¬iæˆ¿é—´ï¼Œé‚£ä¹ˆdp[i] = dp[i - 1]ï¼Œå³è€ƒ è™‘i-1æˆ¿ï¼Œï¼ˆ**æ³¨æ„è¿™é‡Œæ˜¯è€ƒè™‘ï¼Œå¹¶ä¸æ˜¯ä¸€å®šè¦å·i-1æˆ¿ï¼Œè¿™æ˜¯å¾ˆå¤šåŒå­¦å®¹æ˜“æ··æ·†çš„ç‚¹**ï¼‰

ç„¶ådp[i]å–æœ€å¤§å€¼ï¼Œå³dp[i] = max(dp[i - 2] + nums[i], dp[i - 1]);

```java
class Solution {
    public int rob(int[] nums) {
        //æ‰“å®¶åŠ«èˆ
        //dp[i] = Math.max(dp[i-1],dp[i-2]+nums[i]);
        int[] dp = new int[nums.length];
        if (nums.length==1) return nums[0];
        dp[0] = nums[0];
        dp[1] = Math.max(nums[0],nums[1]);
        for (int i = 2; i < nums.length; i++) {
            dp[i] = Math.max(dp[i-1],dp[i-2]+nums[i]);
        }
        return dp[nums.length-1];
    }
}
```

### [139. å•è¯æ‹†åˆ†](https://leetcode.cn/problems/word-break/)

ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` å’Œä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨ `wordDict` ä½œä¸ºå­—å…¸ã€‚è¯·ä½ åˆ¤æ–­æ˜¯å¦å¯ä»¥åˆ©ç”¨å­—å…¸ä¸­å‡ºç°çš„å•è¯æ‹¼æ¥å‡º `s` ã€‚

**æ³¨æ„ï¼š**ä¸è¦æ±‚å­—å…¸ä¸­å‡ºç°çš„å•è¯å…¨éƒ¨éƒ½ä½¿ç”¨ï¼Œå¹¶ä¸”å­—å…¸ä¸­çš„å•è¯å¯ä»¥é‡å¤ä½¿ç”¨ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥: s = "leetcode", wordDict = ["leet", "code"]
è¾“å‡º: true
è§£é‡Š: è¿”å› true å› ä¸º "leetcode" å¯ä»¥ç”± "leet" å’Œ "code" æ‹¼æ¥æˆã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥: s = "applepenapple", wordDict = ["apple", "pen"]
è¾“å‡º: true
è§£é‡Š: è¿”å› true å› ä¸º "applepenapple" å¯ä»¥ç”± "apple" "pen" "apple" æ‹¼æ¥æˆã€‚
     æ³¨æ„ï¼Œä½ å¯ä»¥é‡å¤ä½¿ç”¨å­—å…¸ä¸­çš„å•è¯ã€‚
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥: s = "catsandog", wordDict = ["cats", "dog", "sand", "and", "cat"]
è¾“å‡º: false
```

**åŠ¨æ€è§„åˆ’**
s ä¸²èƒ½å¦åˆ†è§£ä¸ºå•è¯è¡¨çš„å•è¯ï¼ˆå‰ s.length ä¸ªå­—ç¬¦çš„ s ä¸²èƒ½å¦åˆ†è§£ä¸ºå•è¯è¡¨å•è¯ï¼‰
å°†å¤§é—®é¢˜åˆ†è§£ä¸ºè§„æ¨¡å°ä¸€ç‚¹çš„å­é—®é¢˜ï¼š
å‰`i`ä¸ªå­—ç¬¦çš„å­ä¸²ï¼Œèƒ½å¦åˆ†è§£æˆå•è¯
å‰©ä½™å­ä¸²ï¼Œæ˜¯å¦ä¸ºå•ä¸ªå•è¯ã€‚
`dp[i]`ï¼šé•¿åº¦ä¸ºiçš„`s[0:i-1]`å­ä¸²æ˜¯å¦èƒ½æ‹†åˆ†æˆå•è¯ã€‚é¢˜ç›®æ±‚:`dp[s.length]`

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/70b0957d0086f43cd56b9e311e03deed4e9a77be0ae40ccbaa2f2b006d7caeb5-image.png#id=tmoZw&originHeight=557&originWidth=2017&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

**çŠ¶æ€è½¬ç§»æ–¹ç¨‹**
ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ç”¨æŒ‡é’ˆ `j` å»åˆ’åˆ†`s[0:i]` å­ä¸²å¦‚ä¸‹å›¾ï¼š
`s[0:i]` å­ä¸²å¯¹åº” `dp[i+1]` ï¼Œå®ƒæ˜¯å¦ä¸º trueï¼ˆ`s[0:i]`èƒ½å¦ breakï¼‰ï¼Œå–å†³äºä¸¤ç‚¹ï¼š
å®ƒçš„å‰ç¼€å­ä¸² `s[0:j-1]` çš„ `dp[j]`ï¼Œæ˜¯å¦ä¸º trueã€‚
å‰©ä½™å­ä¸² `s[j:i]`ï¼Œæ˜¯å¦æ˜¯å•è¯è¡¨çš„å•è¯ã€‚

![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/bcef185f09c72fb525855bd56155f4658793d86b0dc4f3de31cace6bd9398c5b-image.png#id=pTJZe&originHeight=550&originWidth=1170&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

**base case**
base case ä¸º`dp[0] = true`ã€‚å³ï¼Œé•¿åº¦ä¸º 0 çš„`s[0:-1]`**èƒ½**æ‹†åˆ†æˆå•è¯è¡¨å•è¯ã€‚
è¿™çœ‹ä¼¼è’è°¬ï¼Œä½†è¿™åªæ˜¯ä¸ºäº†è®©è¾¹ç•Œæƒ…å†µä¹Ÿèƒ½å¥—ç”¨çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œè€Œå·²ã€‚
å½“ j = 0 æ—¶ï¼ˆä¸Šå›¾é»„è‰²å‰ç¼€ä¸²ä¸ºç©ºä¸²ï¼‰ï¼Œ`s[0:i]`çš„`dp[i+1]`ï¼Œå–å†³äº`s[0:-1]`çš„`dp[0]`ï¼Œå’Œï¼Œå‰©ä½™å­ä¸²`s[0:i]`æ˜¯å¦æ˜¯å•ä¸ªå•è¯ã€‚
åªæœ‰è®©`dp[0]`ä¸ºçœŸï¼Œ`dp[i+1]`æ‰ä¼šåªå–å†³äº`s[0:i]`æ˜¯å¦ä¸ºå•ä¸ªå•è¯ï¼Œæ‰èƒ½ç”¨ä¸Šè¿™ä¸ªçŠ¶æ€è½¬ç§»æ–¹ç¨‹ã€‚

```java
class Solution {
    public boolean wordBreak(String s, List<String> wordDict) {
        //dp[i]ï¼šé•¿åº¦ä¸ºiçš„s[0:i-1]å­ä¸²æ˜¯å¦èƒ½æ‹†åˆ†æˆå•è¯ã€‚
        int n = s.length();
        boolean[] dp = new boolean[n + 1];
        dp[0]=true;
        for (int i = 1; i < n + 1; i++) {
            for (int j = i-1; j >=0; j--) {
                String suffix = s.substring(j, i);//åç¼€éƒ¨åˆ†
                if (wordDict.contains(suffix)&&dp[j]){
                    dp[i]=true;
                    break;//å¦‚æœæ‰¾åˆ°äº†å°±é€€å‡º
                }
            }
        }
        return dp[n];
    }
}
```

### [300. æœ€é•¿é€’å¢å­åºåˆ—](https://leetcode.cn/problems/longest-increasing-subsequence/) LIS

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œæ‰¾åˆ°å…¶ä¸­æœ€é•¿ä¸¥æ ¼é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚

**å­åºåˆ—** æ˜¯ç”±æ•°ç»„æ´¾ç”Ÿè€Œæ¥çš„åºåˆ—ï¼Œåˆ é™¤ï¼ˆæˆ–ä¸åˆ é™¤ï¼‰æ•°ç»„ä¸­çš„å…ƒç´ è€Œä¸æ”¹å˜å…¶ä½™å…ƒç´ çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œ`[3,6,2,7]` æ˜¯æ•°ç»„ `[0,3,1,6,2,2,7]` çš„å­åºåˆ—ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [10,9,2,5,3,7,101,18]
è¾“å‡ºï¼š4
è§£é‡Šï¼šæœ€é•¿é€’å¢å­åºåˆ—æ˜¯ [2,3,7,101]ï¼Œå› æ­¤é•¿åº¦ä¸º 4 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [0,1,0,3,2,3]
è¾“å‡ºï¼š4
```

**ç¤ºä¾‹ 3ï¼š**

```
è¾“å…¥ï¼šnums = [7,7,7,7,7,7,7]
è¾“å‡ºï¼š1
```

-  **çŠ¶æ€å®šä¹‰ï¼š** 
-  
   - _dp_[_i_] çš„å€¼ä»£è¡¨ nums ä»¥ _nums_[_i_] ç»“å°¾çš„æœ€é•¿å­åºåˆ—é•¿åº¦ã€‚
-  **è½¬ç§»æ–¹ç¨‹ï¼š** è®¾ _j_âˆˆ[0,_i_)ï¼Œè€ƒè™‘æ¯è½®è®¡ç®—æ–° _dp_[_i_] æ—¶ï¼Œéå† [0,_i_) åˆ—è¡¨åŒºé—´ï¼Œåšä»¥ä¸‹åˆ¤æ–­ï¼š 
-  
   - **å½“** _nums_[_i_]>_nums_[_j_] **æ—¶ï¼š** _nums_[_i_] å¯ä»¥æ¥åœ¨ _nums_[_j_] ä¹‹åï¼ˆæ­¤é¢˜è¦æ±‚ä¸¥æ ¼é€’å¢ï¼‰ï¼Œæ­¤æƒ…å†µä¸‹æœ€é•¿ä¸Šå‡å­åºåˆ—é•¿åº¦ä¸º _dp_[_j_]+1 ï¼›
   - **å½“** _nums_[_i_]<=_nums_[_j_] **æ—¶ï¼š** _nums_[_i_] æ— æ³•æ¥åœ¨ _nums_[_j_] ä¹‹åï¼Œæ­¤æƒ…å†µä¸Šå‡å­åºåˆ—ä¸æˆç«‹ï¼Œè·³è¿‡ã€‚
   - ä¸Šè¿°æ‰€æœ‰ **1.** **æƒ…å†µ** ä¸‹è®¡ç®—å‡ºçš„ _dp_[_j_]+1 çš„æœ€å¤§å€¼ï¼Œä¸ºç›´åˆ° _i_ çš„æœ€é•¿ä¸Šå‡å­åºåˆ—é•¿åº¦ï¼ˆå³ _dp_[_i_] ï¼‰ã€‚å®ç°æ–¹å¼ä¸ºéå† _j_ æ—¶ï¼Œæ¯è½®æ‰§è¡Œ _dp_[_i_]=_max_(_dp_[_i_],_dp_[_j_]+1)ã€‚
   - **è½¬ç§»æ–¹ç¨‹ï¼š** dp[i] = max(dp[i], dp[j] + 1) for j in [0, i)ã€‚
-  **åˆå§‹çŠ¶æ€ï¼š** 
-  
   - _dp_[_i_] æ‰€æœ‰å…ƒç´ ç½® 1ï¼Œå«ä¹‰æ˜¯æ¯ä¸ªå…ƒç´ éƒ½è‡³å°‘å¯ä»¥å•ç‹¬æˆä¸ºå­åºåˆ—ï¼Œæ­¤æ—¶é•¿åº¦éƒ½ä¸º 1ã€‚
-  **è¿”å›å€¼ï¼š** 
-  
   - è¿”å› _dp_ åˆ—è¡¨æœ€å¤§å€¼ï¼Œå³å¯å¾—åˆ°å…¨å±€æœ€é•¿ä¸Šå‡å­åºåˆ—é•¿åº¦ã€‚

```java
class Solution {
    public int lengthOfLIS(int[] nums) {
        if (nums.length==0) return 0;
        int[] dp = new int[nums.length + 1];
        Arrays.fill(dp,1);//æ¯ä¸€ä¸ªéƒ½æ˜¯è‡ªå·±ç»™è‡ªå·±é€’å¢çš„éƒ½æ˜¯ 1
        int maxSize=0;
        for (int i = 0; i < nums.length; i++) {
            for (int j = 0; j < i; j++) {
                //éå†ä»0åˆ°iï¼Œå¦‚æœæœ‰nums[j]<nums[i]
                //dp[i]=math.max(dp[i]+dp[j]+1);
                //ä¹Ÿå°±æ˜¯ä¸Šä¸€ä¸ªçš„dp[j]åŠ ä¸Šå½“å‰ä½ç½®ï¼Œè¿™å°±æ˜¯åœ°æ¨
                if (nums[j]<nums[i]){
                    dp[i]=Math.max(dp[i],dp[j]+1);
                }
            }
            maxSize=Math.max(maxSize,dp[i]);
        }
        return maxSize;
    }
}
```



### [1143. æœ€é•¿å…¬å…±å­åºåˆ— LCS](https://leetcode.cn/problems/longest-common-subsequence/)

ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² `text1` å’Œ `text2`ï¼Œè¿”å›è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿ **å…¬å…±å­åºåˆ—** çš„é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ **å…¬å…±å­åºåˆ—** ï¼Œè¿”å› `0` ã€‚

ä¸€ä¸ªå­—ç¬¦ä¸²çš„ **å­åºåˆ—** æ˜¯æŒ‡è¿™æ ·ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼šå®ƒæ˜¯ç”±åŸå­—ç¬¦ä¸²åœ¨ä¸æ”¹å˜å­—ç¬¦çš„ç›¸å¯¹é¡ºåºçš„æƒ…å†µä¸‹åˆ é™¤æŸäº›å­—ç¬¦ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ä»»ä½•å­—ç¬¦ï¼‰åç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚

- ä¾‹å¦‚ï¼Œ`"ace"` æ˜¯ `"abcde"` çš„å­åºåˆ—ï¼Œä½† `"aec"` ä¸æ˜¯ `"abcde"` çš„å­åºåˆ—ã€‚

ä¸¤ä¸ªå­—ç¬¦ä¸²çš„ **å…¬å…±å­åºåˆ—** æ˜¯è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ‰€å…±åŒæ‹¥æœ‰çš„å­åºåˆ—ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼štext1 = "abcde", text2 = "ace" 
è¾“å‡ºï¼š3  
è§£é‡Šï¼šæœ€é•¿å…¬å…±å­åºåˆ—æ˜¯ "ace" ï¼Œå®ƒçš„é•¿åº¦ä¸º 3 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼štext1 = "abc", text2 = "abc"
è¾“å‡ºï¼š3
è§£é‡Šï¼šæœ€é•¿å…¬å…±å­åºåˆ—æ˜¯ "abc" ï¼Œå®ƒçš„é•¿åº¦ä¸º 3 ã€‚
```



![CleanShot 2024-07-01 at 22.14.13@2x](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/CleanShot%202024-07-01%20at%2022.14.13@2x.png)

```java
class Solution {
    public int longestCommonSubsequence(String text1, String text2) {
        int m = text1.length();
        int n = text2.length();
        if (m==0||n==0) return 0;
        int ans = 0;
        int[][] dp = new int[m+1][n+1];
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                if (text1.charAt(i)==text2.charAt(j)){
                    //å¦‚æœå½“å‰ä½ç½®ç›¸ç­‰çš„è¯ï¼Œå°±é€‰æ‹©
                    //dp[i+1][j+1]=Math.max(dp[i+1][j+1],dp[i][j]+1);
                    dp[i+1][j+1]=dp[i][j]+1;
                }else {
                    dp[i+1][j+1] = Math.max(dp[i][j+1],dp[i+1][j]);
                    //dp[i+1][j+1] = Math.max(dp[i+1][j+1],Math.max(dp[i][j+1],dp[i+1][j]));
                }
            }
        }
        return dp[m][n];
    }
}
```

æ€ä¹ˆä¼˜åŒ–æˆä¸€ä¸ªä¸€ç»´çš„æ•°ç»„å‘¢ï¼Ÿå…¶å®æ˜¯è¿™ä¸ªDPéƒ½æ˜¯æ ¹æ®å·¦è¾¹ï¼Œå·¦ä¸Šï¼Œä¸Šé¢ï¼Œå¾—åˆ°çš„ã€‚

| `dp[i-1][j-1]` | `dp[i][j-1]` |
| -------------- | ------------ |
| `dp[i-1][j]`   | `dp[i][j]`   |



### HJ.24 åˆå”±å›¢

é¢˜ç›®æè¿°
è®¡ç®—æœ€å°‘å‡ºåˆ—å¤šå°‘ä½åŒå­¦ï¼Œä½¿å¾—å‰©ä¸‹çš„åŒå­¦æ’æˆåˆå”±é˜Ÿå½¢

è¯´æ˜ï¼š

Nä½åŒå­¦ç«™æˆä¸€æ’ï¼ŒéŸ³ä¹è€å¸ˆè¦è¯·å…¶ä¸­çš„(N-K)ä½åŒå­¦å‡ºåˆ—ï¼Œä½¿å¾—å‰©ä¸‹çš„Kä½åŒå­¦æ’æˆåˆå”±é˜Ÿå½¢ã€‚
åˆå”±é˜Ÿå½¢æ˜¯æŒ‡è¿™æ ·çš„ä¸€ç§é˜Ÿå½¢ï¼šè®¾Kä½åŒå­¦ä»å·¦åˆ°å³ä¾æ¬¡ç¼–å·ä¸º1ï¼Œ2â€¦ï¼ŒKï¼Œä»–ä»¬çš„èº«é«˜åˆ†åˆ«ä¸ºT1ï¼ŒT2ï¼Œâ€¦ï¼ŒTKï¼Œ åˆ™ä»–ä»¬çš„èº«é«˜æ»¡è¶³å­˜åœ¨iï¼ˆ1<=i<=Kï¼‰ä½¿å¾—T1<T2<......<Ti-1Ti+1>......>TKã€‚
ä½ çš„ä»»åŠ¡æ˜¯ï¼Œå·²çŸ¥æ‰€æœ‰Nä½åŒå­¦çš„èº«é«˜ï¼Œè®¡ç®—æœ€å°‘éœ€è¦å‡ ä½åŒå­¦å‡ºåˆ—ï¼Œå¯ä»¥ä½¿å¾—å‰©ä¸‹çš„åŒå­¦æ’æˆåˆå”±é˜Ÿå½¢ã€‚

å…¶å®å°±æ˜¯æœ€é•¿å­åºåˆ—çš„å˜å½¢é¢˜

1. å¯¹äºé¢˜ç›®ï¼Œæ‰€æœ‰äººéƒ½å·²ç»ç«™å¥½ä½ï¼Œä¸èƒ½å†æ”¹å˜ä½ç½®äº†ï¼Œåªèƒ½ä»å½“ä¸­å»æ‰äººç»„æˆåˆå”±é˜Ÿã€‚åŒæ—¶ï¼Œå¯ä»¥è€ƒè™‘ä¸­é—´çš„äººä¸¤è¾¹æ²¡æœ‰äººçš„æƒ…å†µï¼ˆæ¯”å¦‚ä¸¤å¤´çš„ä¸¤ä¸ªäººï¼Œæˆ–è€…è¿™ä¸ªäººå¤ªçŸ®å‘¨å›´çš„äººéƒ½æ¯”ä»–é«˜çš„æƒ…å†µï¼‰ï¼Œä½†æ˜¯è¿™ç§æƒ…å†µåŸºæœ¬è¢«passæ‰ã€‚
2. è®¡ç®—å‡ºæ¯ä¸ªäººå·¦è¾¹èƒ½å‡ºç°çš„æœ€å¤šçš„äººæ•°ï¼š
æ¯”å¦‚é¢˜ä¸­æ‰€ç»™å‡ºçš„ç¤ºä¾‹ï¼š186 186 150 200 160 130 197 200ã€‚é¦–å…ˆå¦‚æœç¬¬ä¸€ä¸ªæ•°186åœ¨ä¸­é—´ï¼Œå·¦è¾¹æ²¡æœ‰æ•°ï¼Œå°±è‡ªå·±ä¸€ä¸ªäººï¼Œæ‰€ä»¥æ˜¯1ï¼›ç¬¬äºŒä¸ªæ•°186å› ä¸ºå·¦è¾¹é‚£ä¸ªäººè·Ÿä»–ä¸€è¾¹é«˜ï¼Œæ²¡æœ‰æ¯”ä»–çŸ®çš„äº†ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯1ï¼›ç¬¬ä¸‰ä¸ªæ•°150ï¼Œå·¦è¾¹çš„äººéƒ½æ¯”ä»–é«˜ï¼Œä»–å¦‚æœæ˜¯ä¸­é—´çš„è¯å·¦è¾¹ä¹Ÿä»–è‡ªå·±ä¸€ä¸ªäººï¼Œæ‰€ä»¥è¿˜æ˜¯1ï¼›ç¬¬å››ä¸ªæ•°200ï¼Œå› ä¸ºä¸èƒ½æ¢ä½ç½®ï¼Œæ‰€ä»¥åªèƒ½ç•™186æˆ–è€…150ï¼ŒåŠ ä¸Šè‡ªå·±ï¼Œå°±æ˜¯2...æœ€åå†ä»¥197ä¸ºä¾‹ï¼Œå·¦è¾¹ä¿ç•™150,160æ˜¯å·¦è¾¹äººæœ€å¤šçš„æƒ…å†µï¼Œå†åŠ ä¸Šè‡ªå·±ï¼Œå°±æ˜¯3ã€‚æ‰€ä»¥æ¯ä¸ªäººå·¦è¾¹äººæœ€å¤šçš„æƒ…å†µï¼ˆåŠ ä¸Šè‡ªå·±ï¼‰å°±æ˜¯ï¼ˆ186ï¼‰1 1 1 2 2 1 3 4ï¼ˆ200ï¼‰ã€‚
3. åŒç†ï¼Œçœ‹ä¸€ä¸‹æ¯ä¸ªäººå³è¾¹å¯èƒ½å‡ºç°æœ€å¤šçš„äººï¼Œè¿™æ—¶æˆ‘ä»¬ä»åå¾€å‰çœ‹ã€‚200åœ¨æœ€å³é¢ï¼Œæ‰€ä»¥è‡ªå·±ä¸€ä¸ªäººï¼Œæ˜¯1ï¼›197æœ€å³é¢æ²¡æœ‰æ¯”ä»–çŸ®çš„ï¼Œè‡ªå·±ï¼Œæ˜¯1...160å·¦è¾¹ä¸€ä¸ªæ¯”ä»–çŸ®çš„ï¼Œæ‰€ä»¥ç®—ä¸Šè‡ªå·±æ˜¯2ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ‰€ä»¥æ¯ä¸ªäººå³è¾¹äººåšå¤šçš„æƒ…å†µï¼ˆåŠ ä¸Šè‡ªå·±ï¼‰å°±æ˜¯ï¼ˆ186ï¼‰3 3 2 3 2 1 1 1ï¼ˆ200ï¼‰
4. æ‰€ä»¥å°†ä¸Šé¢ä¸¤ä¸ªåˆ’æ¨ªçº¿çš„å¯¹åº”ç›¸åŠ ï¼Œå°±å¯ä»¥å¾—åˆ°è‡ªå·±å¦‚æœæ˜¯ä¸­é—´çš„é‚£ä¸ªäººï¼Œå¯ä»¥å¾—åˆ°çš„æœ€å¤§çš„åˆå”±é˜Ÿäººæ•°ã€‚å½“ç„¶ï¼Œè‡ªå·±åŠ äº†ä¸¤éï¼Œæ‰€ä»¥å¾—å‡æ‰ä¸€ä¸ªè‡ªå·±ã€‚å¦å¤–é¢˜ç›®é—®çš„æ˜¯æœ€å°‘å»æ‰çš„äººï¼Œæ‰€ä»¥æœ€åçš„ç»“æœï¼š
æ€»äººæ•° - è¯¥æ•°æ‰€åœ¨é˜Ÿåˆ—äººæ•° = éœ€è¦å‡ºé˜Ÿçš„äººæ•°

[Ref](https://www.nowcoder.com/share/jump/1509878261713947848753)

```java
public class Main {
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        // æ³¨æ„ hasNext å’Œ hasNextLine çš„åŒºåˆ«
        while (in.hasNextInt()) { // æ³¨æ„ while å¤„ç†å¤šä¸ª case
            int n = in.nextInt();
            int[] arr = new int[n];
            for (int i = 0; i < n; i++) {
                arr[i] = in.nextInt();
            }
            int[]  left = new int[n];
            int[]  right = new int[n];
            left[0]=1;
            right[n-1] = 1;
            for (int i = 0; i < n; i++) {
                left[i]=1;
                for (int j = 0; j < i; j++) {
                    if (arr[i]>arr[j]) {
                        //å¦‚æœå·¦è¾¹æœ‰ä¸€ä¸ªæ¯”å½“å‰çš„å°çš„ï¼Œé‚£ä¹ˆå°±ç›´æ¥åŠ¨æ€è§„åˆ’
                        left[i]=Math.max(left[j]+1, left[i]);
                        //è¿™é‡Œä¸èƒ½æ˜¯left[i]++;
                        //å› ä¸ºä¸æ˜¯æ‰€æœ‰ä½ æ¯”ä»–å¤§ä½ å°±å¯ä»¥ç›´æ¥è¯´é€’å¢çš„ï¼Œè¿™é‡Œæ˜¯é€’å¢çš„ã€‚
                    }
                }
            }
            for (int i = n-1; i >=0; i--) {
                right[i] = 1;
                for (int j = n-1; j > i; j--) {
                    if (arr[i]>arr[j]) {
                        right[i] = Math.max(right[i],right[j]+1);
                    }
                }
            }
            int max = 1;
            int[] res = new int[n];
            for (int i = 0; i < n; i++) {
                res[i] = left[i]+right[i]-1;
                max = Math.max(max, res[i]);
            }
            System.out.println(n-max);
        }
    }
}
```

### [120. ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ](https://leetcode.cn/problems/triangle/)

ç»™å®šä¸€ä¸ªä¸‰è§’å½¢ `triangle` ï¼Œæ‰¾å‡ºè‡ªé¡¶å‘ä¸‹çš„æœ€å°è·¯å¾„å’Œã€‚

æ¯ä¸€æ­¥åªèƒ½ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œä¸­ç›¸é‚»çš„ç»“ç‚¹ä¸Šã€‚**ç›¸é‚»çš„ç»“ç‚¹** åœ¨è¿™é‡ŒæŒ‡çš„æ˜¯ **ä¸‹æ ‡** ä¸ **ä¸Šä¸€å±‚ç»“ç‚¹ä¸‹æ ‡** ç›¸åŒæˆ–è€…ç­‰äº **ä¸Šä¸€å±‚ç»“ç‚¹ä¸‹æ ‡ + 1** çš„ä¸¤ä¸ªç»“ç‚¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæ­£ä½äºå½“å‰è¡Œçš„ä¸‹æ ‡ `i` ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥å¯ä»¥ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œçš„ä¸‹æ ‡ `i` æˆ– `i + 1` ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼štriangle = [[2],[3,4],[6,5,7],[4,1,8,3]]
è¾“å‡ºï¼š11
è§£é‡Šï¼šå¦‚ä¸‹é¢ç®€å›¾æ‰€ç¤ºï¼š
   2
  3 4
 6 5 7
4 1 8 3
è‡ªé¡¶å‘ä¸‹çš„æœ€å°è·¯å¾„å’Œä¸º 11ï¼ˆå³ï¼Œ2 + 3 + 5 + 1 = 11ï¼‰ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼štriangle = [[-10]]
è¾“å‡ºï¼š-10
```

**æç¤ºï¼š**

- `1 <= triangle.length <= 200`
- `triangle[0].length == 1`
- `triangle[i].length == triangle[i - 1].length + 1`
- `-104 <= triangle[i][j] <= 104`

çŠ¶æ€å®šä¹‰ï¼š`dp[i][j]`è¡¨ç¤ºåŒ…å«ç¬¬iè¡Œç¬¬jåˆ—å…ƒç´ çš„æœ€å°è·¯å¾„å’Œ

çŠ¶æ€åˆ†æ

1. åˆå§‹åŒ–ï¼š
`dp[0][0]=triangle[0][0]`
2. å¸¸è§„ï¼š
`triangle[i][j]`ä¸€å®šä¼š**ç»è¿‡**`triangle[i-1][j]`æˆ–è€…`triangle[i-1][j-1]`,
æ‰€ä»¥çŠ¶æ€`dp[i][j]`ä¸€å®šç­‰äº`dp[i-1][j]`æˆ–è€…`dp[i-1][j-1]`çš„æœ€å°å€¼+`triangle[i][j]`
3. ç‰¹æ®Šï¼š
`triangle[i][0]`æ²¡æœ‰å·¦ä¸Šè§’ åªèƒ½ä»`triangle[i-1][j]`ç»è¿‡
`triangle[i][row[0].length]`æ²¡æœ‰ä¸Šé¢ åªèƒ½ä»`triangle[i-1][j-1]`ç»è¿‡

è½¬æ¢æ–¹ç¨‹ï¼š`dp[i][j]=min(dp[i-1][j],dp[i-1][j-1])+triangle[i][j]`

```java
class Solution {
    public int minimumTotal(List<List<Integer>> triangle) {
        //dp[i][j]è¡¨ç¤ºiå’Œjä½ç½®çš„æœ€å°çš„è·¯å¾„ä¹‹å’Œ
        int size = triangle.size();
        int[][] dp = new int[size + 1][size + 1];
        dp[0][0]=triangle.get(0).get(0);
//        if (size==1) return dp[0][0];
        for (int i = 1; i < size; i++) {
            for (int j = 0; j <= i; j++) {
                if (j==0){
                    // triangle[i][0]æ²¡æœ‰å·¦ä¸Šè§’
                    dp[i][0]=dp[i-1][0]+triangle.get(i).get(0);
                } else if (j == i) {
                    //triangle[i][row[0].length]æ²¡æœ‰ä¸Šé¢
                    dp[i][i]=dp[i-1][i-1]+triangle.get(i).get(i);
                }else {
                    //dp[i][j]=min(dp[i-1][j],dp[i-1][j-1])+triangle[i][j]
                    dp[i][j]=Math.min(dp[i-1][j],dp[i-1][j-1])+triangle.get(i).get(j);
                }
            }
        }
        int minPath = Integer.MAX_VALUE;
        for (int i = 0; i < size; i++) {
            minPath=Math.min(minPath,dp[size-1][i]);
        }
        return minPath;
    }
}
```

### [221. æœ€å¤§æ­£æ–¹å½¢](https://leetcode.cn/problems/maximal-square/)

åœ¨ä¸€ä¸ªç”± `'0'` å’Œ `'1'` ç»„æˆçš„äºŒç»´çŸ©é˜µå†…ï¼Œæ‰¾åˆ°åªåŒ…å« `'1'` çš„æœ€å¤§æ­£æ–¹å½¢ï¼Œå¹¶è¿”å›å…¶é¢ç§¯ã€‚

**ç¤ºä¾‹ 1ï¼š**

![](https://assets.leetcode.com/uploads/2020/11/26/max1grid.jpg#id=b1GB5&originHeight=322&originWidth=404&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```
è¾“å…¥ï¼šmatrix = [["1","0","1","0","0"],["1","0","1","1","1"],["1","1","1","1","1"],["1","0","0","1","0"]]
è¾“å‡ºï¼š4
```

ç†è§£ min(ä¸Š, å·¦, å·¦ä¸Š) + 1

å¦‚é¢˜ï¼Œåœ¨å…¶ä»–åŠ¨æ€è§„åˆ’æ–¹æ³•çš„é¢˜è§£ä¸­ï¼Œå¤§éƒ½ä¼šæ¶‰åŠåˆ°ä¸‹åˆ—å½¢å¼çš„ä»£ç ï¼š

- []

```java
// ä¼ªä»£ç 
if (matrix(i - 1, j - 1) == '1') {
    dp(i, j) = min(dp(i - 1, j), dp(i, j - 1), dp(i - 1, j - 1)) + 1;
}
```

å…¶ä¸­ï¼Œ`dp(i, j)` æ˜¯ä»¥ `matrix(i - 1, j - 1)` ä¸º **å³ä¸‹è§’** çš„æ­£æ–¹å½¢çš„æœ€å¤§è¾¹é•¿ã€‚(æ„Ÿè°¢ @liweiwei1419 æå‡ºè¡¥å……)
ç­‰åŒäºï¼š`dp(i + 1, j + 1)` æ˜¯ä»¥ `matrix(i, j)` ä¸ºå³ä¸‹è§’çš„æ­£æ–¹å½¢çš„æœ€å¤§è¾¹é•¿

ç¿»è¯‘æˆä¸­æ–‡

> è‹¥æŸæ ¼å­å€¼ä¸º `1`ï¼Œåˆ™ä»¥æ­¤ä¸º**å³ä¸‹è§’**çš„æ­£æ–¹å½¢çš„ã€æœ€å¤§è¾¹é•¿ä¸ºï¼šä¸Šé¢çš„æ­£æ–¹å½¢ã€å·¦é¢çš„æ­£æ–¹å½¢æˆ–å·¦ä¸Šçš„æ­£æ–¹å½¢ä¸­ï¼Œæœ€å°çš„é‚£ä¸ªï¼Œå†åŠ ä¸Šæ­¤æ ¼ã€‚


å…ˆæ¥é˜è¿°ç®€å•å…±è¯†

- è‹¥å½¢æˆæ­£æ–¹å½¢ï¼ˆéå• `1`ï¼‰ï¼Œä»¥å½“å‰ä¸ºå³ä¸‹è§’çš„è§†è§’çœ‹ï¼Œåˆ™éœ€è¦ï¼šå½“å‰æ ¼ã€ä¸Šã€å·¦ã€å·¦ä¸Šéƒ½æ˜¯ `1`
- å¯ä»¥æ¢ä¸ªè§’åº¦ï¼šå½“å‰æ ¼ã€ä¸Šã€å·¦ã€å·¦ä¸Šéƒ½ä¸èƒ½å— `0` çš„é™åˆ¶ï¼Œæ‰èƒ½æˆä¸ºæ­£æ–¹å½¢

![](https://pic.leetcode-cn.com/8c4bf78cf6396c40291e40c25d34ef56bd524313c2aa863f3a20c1f004f32ab0-image.png#id=hoiy7&originHeight=238&originWidth=728&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

ä¸Šé¢è¯¦è§£äº† ä¸‰è€…å–æœ€å° çš„å«ä¹‰ï¼š

- å›¾ 1ï¼šå—é™äºå·¦ä¸Šçš„ 0
- å›¾ 2ï¼šå—é™äºä¸Šè¾¹çš„ 0
- å›¾ 3ï¼šå—é™äºå·¦è¾¹çš„ 0
- æ•°å­—è¡¨ç¤ºï¼šä»¥æ­¤ä¸ºæ­£æ–¹å½¢å³ä¸‹è§’çš„æœ€å¤§è¾¹é•¿
- é»„è‰²è¡¨ç¤ºï¼šæ ¼å­ `?` ä½œä¸ºå³ä¸‹è§’çš„æ­£æ–¹å½¢åŒºåŸŸ

å°±åƒ [**æœ¨æ¡¶çš„çŸ­æ¿ç†è®º**](https://baike.baidu.com/item/%E7%9F%AD%E6%9D%BF%E7%90%86%E8%AE%BA) é‚£æ ·â€”â€”é™„è¿‘çš„æœ€å°è¾¹é•¿ï¼Œæ‰ä¸ `?` çš„æœ€é•¿è¾¹é•¿æœ‰å…³ã€‚
æ­¤æ—¶å·²å¯å¾—åˆ°é€’æ¨å…¬å¼

- []

```java
// ä¼ªä»£ç 
if (grid[i - 1][j - 1] == '1') {
    dp[i][j] = min(dp[i - 1][j - 1], dp[i - 1][j], dp[i][j - 1]) + 1;
}
```

ä»æ„Ÿæ€§ç†è§£ï¼Œåˆ°ä»£ç å®ç°

-  ä»ä¸Šè¿°å›¾è§£ä¸­ï¼Œæˆ‘ä»¬ä¼¼ä¹å¾—åˆ°çš„åªæ˜¯ã€ŒåŠ¨æ€è§„åˆ’ **æ¨è¿›** çš„è¿‡ç¨‹ã€ï¼Œå³ã€Œå¦‚ä½•ä»å‰é¢çš„ `dp` æ¨å‡ºåé¢çš„ `dp`ã€ï¼Œç”šè‡³è¿˜åªæ˜¯æ„Ÿæ€§ç†è§£ 
-  è·ç¦»ä»£ç æˆ‘ä»¬è¿˜ç¼ºï¼š`dp` å…·ä½“å®šä¹‰å¦‚ä½•ï¼Œæ•°ç»„å¤šå¤§ï¼Œåˆå€¼å¦‚ä½•ï¼Œå¦‚ä½•ä¸é¢˜ç›®è¦æ±‚çš„é¢ç§¯ç›¸å…³ 
-  `dp` å…·ä½“å®šä¹‰ï¼š`dp[i + 1][j + 1]` è¡¨ç¤º ã€Œä»¥ç¬¬ `i` è¡Œã€ç¬¬ `j` åˆ—ä¸ºå³ä¸‹è§’çš„æ­£æ–¹å½¢çš„æœ€å¤§è¾¹é•¿ã€ 
-  ä¸ºä½•ä¸æ˜¯ `dp[i][j]` 
-  å›åˆ°å›¾è§£ä¸­ï¼Œä»»ä½•ä¸€ä¸ªæ­£æ–¹å½¢ï¼Œæˆ‘ä»¬éƒ½ã€Œä¾èµ–ã€**å½“å‰æ ¼** å·¦ã€ä¸Šã€å·¦ä¸Šä¸‰ä¸ªæ–¹æ ¼çš„æƒ…å†µ 
-  ä½†ç¬¬ä¸€è¡Œçš„ä¸Šå±‚å·²ç»æ²¡æœ‰æ ¼å­ï¼Œç¬¬ä¸€åˆ—å·¦è¾¹å·²ç»æ²¡æœ‰æ ¼å­ï¼Œéœ€è¦åšç‰¹æ®Š `if` åˆ¤æ–­æ¥å¤„ç† 
-  ä¸ºäº†ä»£ç ç®€æ´ï¼Œæˆ‘ä»¬ **å‡è®¾è¡¥å……** äº†å¤šä¸€è¡Œå…¨ `'0'`ã€å¤šä¸€åˆ—å…¨ `'0'` 
-  ![](https://pic.leetcode-cn.com/035ec1919a802f81078ce40bde8c33d6c0990b486ce3aebd846d1fdf79241221-image.png#id=JOFO6&originHeight=226&originWidth=266&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=) 
-  æ­¤æ—¶ `dp` æ•°ç»„çš„å¤§å°ä¹Ÿæ˜ç¡®ä¸º `new dp[height + 1][width + 1]` 
-  åˆå§‹å€¼å°±æ˜¯å°†ç¬¬ä¸€åˆ— `dp[row][0]` ã€ç¬¬ä¸€è¡Œ `dp[0][col]` éƒ½èµ‹ä¸º `0`ï¼Œç›¸å½“äºå·²ç»è®¡ç®—äº†æ‰€æœ‰çš„ç¬¬ä¸€è¡Œã€ç¬¬ä¸€åˆ—çš„ `dp` å€¼ 
-  é¢˜ç›®è¦æ±‚é¢ç§¯ã€‚æ ¹æ® ã€Œé¢ç§¯ = è¾¹é•¿ x è¾¹é•¿ã€å¯çŸ¥ï¼Œæˆ‘ä»¬åªéœ€æ±‚å‡ºæœ€å¤§è¾¹é•¿
  å³å¯ 
   - å®šä¹‰ `maxSide` è¡¨ç¤ºæœ€é•¿è¾¹é•¿ï¼Œæ¯æ¬¡å¾—å‡ºä¸€ä¸ª `dp`ï¼Œå°± `maxSide = max(maxSide, dp);`
   - æœ€ç»ˆè¿”å› `return maxSide * maxSide;`

```java
class Solution {
    public int maximalSquare(char[][] matrix) {
        if (matrix==null||matrix.length<1||matrix[0].length<1) return 0;
        int m = matrix.length;
        int n = matrix[0].length;
        int[][] dp = new int[m + 1][n + 1];
        int maxSize = 0;
        //dpå°±æ˜¯æœ¨æ¡¶æ•ˆåº”ï¼Œé€‰æ‹©å·¦è¾¹ï¼Œå·¦ä¸Šï¼Œå’Œä¸Šè¾¹ä¸‰ä¸ªæœ€å°çš„é‚£ä¸ªå†åŠ ä¸Š1ï¼Œ
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                if (matrix[i][j]=='1'){
                    dp[i+1][j+1]=Math.min(Math.min(dp[i+1][j],dp[i][j+1]),dp[i][j])+1;
                    maxSize=Math.max(maxSize,dp[i+1][j+1]);
                }
            }
        }
        return maxSize*maxSize;
    }
}
```

### [123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº III](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/)

ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬ `i` ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šçš„è‚¡ç¥¨åœ¨ç¬¬ `i` å¤©çš„ä»·æ ¼ã€‚

è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ æœ€å¤šå¯ä»¥å®Œæˆ **ä¸¤ç¬”** äº¤æ˜“ã€‚

**æ³¨æ„ï¼š**ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥ï¼šprices = [3,3,5,0,0,3,1,4]
è¾“å‡ºï¼š6
è§£é‡Šï¼šåœ¨ç¬¬ 4 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 0ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 6 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 3ï¼‰çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 3-0 = 3 ã€‚
     éšåï¼Œåœ¨ç¬¬ 7 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 8 å¤© ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 4ï¼‰çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 4-1 = 3 ã€‚
```

```java
class Solution {
    public int maxProfit(int[] prices) {
        //å¾—ä¹°ä¸¤ç¬”ï¼Œä¸èƒ½åŒæ—¶ä¹°
        int[][] dp = new int[prices.length][5];
        //åˆå§‹åŒ–dp
        dp[0][0]=0;//ä¸æ“ä½œ;
        dp[0][1]=-prices[0];//ç¬¬ä¸€æ¬¡æŒæœ‰;
        dp[0][2]=0;//ç¬¬ä¸€æ¬¡å–å‡º;
        dp[0][3]=-prices[0];//ç¬¬äºŒæ¬¡ä¹°å…¥
        dp[0][4]=0;//ç¬¬äºŒæ¬¡å–å‡º;
        for (int i = 1; i < prices.length; i++) {
            dp[i][1]=Math.max(dp[i-1][1],dp[i][0]-prices[i]);//ä¸æŒæœ‰åˆ°æŒæœ‰
            dp[i][2]=Math.max(dp[i-1][2],dp[i][1]+prices[i]);//
            dp[i][3]=Math.max(dp[i-1][3],dp[i][2]-prices[i]);//
            dp[i][4]=Math.max(dp[i-1][4],dp[i][3]+prices[i]);//
        }
        return dp[prices.length-1][4];
    }
}
```

### [188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº IV](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `prices` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œå…¶ä¸­ `prices[i]` æ˜¯æŸæ”¯ç»™å®šçš„è‚¡ç¥¨åœ¨ç¬¬ `i` å¤©çš„ä»·æ ¼ã€‚

è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ æœ€å¤šå¯ä»¥å®Œæˆ `k` ç¬”äº¤æ˜“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ æœ€å¤šå¯ä»¥ä¹° `k` æ¬¡ï¼Œå– `k` æ¬¡ã€‚

**æ³¨æ„ï¼š**ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šk = 2, prices = [2,4,1]
è¾“å‡ºï¼š2
è§£é‡Šï¼šåœ¨ç¬¬ 1 å¤© (è‚¡ç¥¨ä»·æ ¼ = 2) çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 2 å¤© (è‚¡ç¥¨ä»·æ ¼ = 4) çš„æ—¶å€™å–å‡ºï¼Œè¿™ç¬”äº¤æ˜“æ‰€èƒ½è·å¾—åˆ©æ¶¦ = 4-2 = 2 ã€‚
```

```java
class Solution {
    public int maxProfit(int k, int[] prices) {
        //kç¬”çš„è¯ï¼Œå°±æ˜¯2kå¤§å°çš„dp
        int[][] dp = new int[prices.length][2 * k + 1];
        for (int i = 0; i < (2 * k + 1); i++) {
            if (i%2==1){
                //å¥‡æ•°çš„è¯å°±ç­‰äºprice[0];
                dp[0][i]=-prices[0];
            }
        }
        for (int i = 1; i < prices.length; i++) {
            for (int j = 1; j < (2 * k + 1); j++) {
                if (j%2==1){
                    //å¥‡æ•°çš„è¯å°±æ˜¯è¦æŒæœ‰;
                    dp[i][j]=Math.max(dp[i-1][j],dp[i][j-1]-prices[i]);
                }else {
                    //å¶æ•°çš„è¯å°±æ˜¯è¦å–;
                    dp[i][j]=Math.max(dp[i-1][j],dp[i][j-1]+prices[i]);
                }
            }
        }
        return dp[prices.length-1][2 * k];
    }
}
```

## èƒŒåŒ…ç®—æ³•![](https://gw.alipayobjects.com/os/lib/twemoji/11.2.0/2/svg/1f6c4.svg#height=18&id=HtUHN&originHeight=18&originWidth=18&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=&width=18)

![](https://cdn.jsdelivr.net/gh/52chen/imagebed2023@main/picgo/20210117171307407-20230310132423205.png#id=cB3tb&originHeight=718&originWidth=2074&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

01èƒŒåŒ…ä¸­äºŒç»´dpæ•°ç»„çš„ä¸¤ä¸ªforéå†çš„å…ˆåå¾ªåºæ˜¯å¯ä»¥é¢ å€’çš„ï¼Œä¸€ç»´dpæ•°ç»„çš„ä¸¤ä¸ªforå¾ªç¯å…ˆåå¾ª**åºä¸€å®šæ˜¯å…ˆéå†ç‰©å“ï¼Œå†éå†èƒŒåŒ…å®¹é‡ã€‚**

**åœ¨å®Œå…¨èƒŒåŒ…ä¸­ï¼Œå¯¹äºä¸€ç»´dpæ•°ç»„æ¥è¯´ï¼Œå…¶å®ä¸¤ä¸ªforå¾ªç¯åµŒå¥—é¡ºåºæ˜¯æ— æ‰€è°“çš„ï¼**

æœ‰Nä»¶ç‰©å“å’Œä¸€ä¸ªæœ€å¤šèƒ½èƒŒé‡é‡ä¸ºWçš„èƒŒåŒ…ã€‚ç¬¬iä»¶ç‰©å“çš„é‡é‡æ˜¯weight[i]ï¼Œå¾—åˆ°çš„ä»·å€¼æ˜¯value[i] ã€‚**æ¯ä»¶ç‰©å“éƒ½æœ‰æ— é™ä¸ªï¼ˆä¹Ÿå°±æ˜¯å¯ä»¥æ”¾å…¥èƒŒåŒ…å¤šæ¬¡ï¼‰**ï¼Œæ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…é‡Œç‰©å“ä»·å€¼æ€»å’Œæœ€å¤§ã€‚

**å®Œå…¨èƒŒåŒ…å’Œ01èƒŒåŒ…é—®é¢˜å”¯ä¸€ä¸åŒçš„åœ°æ–¹å°±æ˜¯ï¼Œæ¯ç§ç‰©å“æœ‰æ— é™ä»¶**ã€‚

å›é¡¾ä¸€ä¸‹01èƒŒåŒ…çš„æ ¸å¿ƒä»£ç 

```cpp
for(int i = 0; i < weight.size(); i++) { // éå†ç‰©å“
    for(int j = bagWeight; j >= weight[i]; j--) { // éå†èƒŒåŒ…å®¹é‡
        dp[j] = max(dp[j], dp[j - weight[i]] + value[i]);
    }
}
```

æˆ‘ä»¬çŸ¥é“01èƒŒåŒ…å†…åµŒçš„å¾ªç¯æ˜¯ä»å¤§åˆ°å°éå†ï¼Œä¸ºäº†ä¿è¯æ¯ä¸ªç‰©å“ä»…è¢«æ·»åŠ ä¸€æ¬¡ã€‚

è€Œå®Œå…¨èƒŒåŒ…çš„ç‰©å“æ˜¯å¯ä»¥æ·»åŠ å¤šæ¬¡çš„ï¼Œæ‰€ä»¥è¦ä»å°åˆ°å¤§å»éå†ï¼Œå³ï¼š

```cpp
// å…ˆéå†ç‰©å“ï¼Œå†éå†èƒŒåŒ…
for(int i = 0; i < weight.size(); i++) { // éå†ç‰©å“
    for(int j = weight[i]; j <= bagWeight ; j++) { // éå†èƒŒåŒ…å®¹é‡
        dp[j] = max(dp[j], dp[j - weight[i]] + value[i]);

    }
}
```

**å®Œå…¨èƒŒåŒ…çš„æ¨¡ç‰ˆ**ï¼š

```java
//å…ˆéå†ç‰©å“ï¼Œå†éå†èƒŒåŒ…
private static void testCompletePack(){
    int[] weight = {1, 3, 4};
    int[] value = {15, 20, 30};
    int bagWeight = 4;
    int[] dp = new int[bagWeight + 1];
    for (int i = 0; i < weight.length; i++){ // éå†ç‰©å“
        for (int j = weight[i]; j <= bagWeight; j++){ // éå†èƒŒåŒ…å®¹é‡
            dp[j] = Math.max(dp[j], dp[j - weight[i]] + value[i]);
        }
    }
    for (int maxValue : dp){
        System.out.println(maxValue + "   ");
    }
}

//å…ˆéå†èƒŒåŒ…ï¼Œå†éå†ç‰©å“
private static void testCompletePackAnotherWay(){
    int[] weight = {1, 3, 4};
    int[] value = {15, 20, 30};
    int bagWeight = 4;
    int[] dp = new int[bagWeight + 1];
    for (int i = 1; i <= bagWeight; i++){ // éå†èƒŒåŒ…å®¹é‡
        for (int j = 0; j < weight.length; j++){ // éå†ç‰©å“
            if (i - weight[j] >= 0){
                dp[i] = Math.max(dp[i], dp[i - weight[j]] + value[j]);
            }
        }
    }
    for (int maxValue : dp){
        System.out.println(maxValue + "   ");
    }
}
```

### èƒŒåŒ…é€’æ¨å…¬å¼

é—®èƒ½å¦èƒ½è£…æ»¡èƒŒåŒ…ï¼ˆæˆ–è€…æœ€å¤šè£…å¤šå°‘ï¼‰ï¼šdp[j] = max(dp[j], dp[j - nums[i]] + nums[i]); ï¼Œ

é—®è£…æ»¡èƒŒåŒ…æœ‰å‡ ç§æ–¹æ³•ï¼šdp[j] += dp[j - nums[i]] ï¼Œ

é—®èƒŒåŒ…è£…æ»¡æœ€å¤§ä»·å€¼ï¼šdp[j] = max(dp[j], dp[j - weight[i]] + value[i]);

é—®è£…æ»¡èƒŒåŒ…æ‰€æœ‰ç‰©å“çš„æœ€å°ä¸ªæ•°ï¼šdp[j] = Â min(dp[j - coins[i]] + 1, dp[j]);

### éå†é¡ºåº

### 01èƒŒåŒ…

äºŒç»´dpæ•°ç»„01èƒŒåŒ…å…ˆéå†ç‰©å“è¿˜æ˜¯å…ˆéå†èƒŒåŒ…éƒ½æ˜¯å¯ä»¥çš„ï¼Œä¸”ç¬¬äºŒå±‚forå¾ªç¯æ˜¯ä»å°åˆ°å¤§éå†ã€‚

ä¸€ç»´dpæ•°ç»„01èƒŒåŒ…**åªèƒ½å…ˆéå†ç‰©å“å†éå†èƒŒåŒ…å®¹é‡ï¼Œä¸”ç¬¬äºŒå±‚forå¾ªç¯æ˜¯ä»å¤§åˆ°å°éå†**ã€‚

**ä¸€ç»´dpæ•°ç»„çš„èƒŒåŒ…åœ¨éå†é¡ºåºä¸Šå’ŒäºŒç»´dpæ•°ç»„å®ç°çš„01èƒŒåŒ…å…¶å®æ˜¯æœ‰å¾ˆå¤§å·®å¼‚çš„ï¼Œå¤§å®¶éœ€è¦æ³¨æ„ï¼**

ä¸¾ä¾‹ï¼š

#### [416. åˆ†å‰²ç­‰å’Œå­é›†](https://leetcode.cn/problems/partition-equal-subset-sum/)

ç»™ä½ ä¸€ä¸ª **åªåŒ…å«æ­£æ•´æ•°** çš„ **éç©º** æ•°ç»„ `nums` ã€‚è¯·ä½ åˆ¤æ–­æ˜¯å¦å¯ä»¥å°†è¿™ä¸ªæ•°ç»„åˆ†å‰²æˆä¸¤ä¸ªå­é›†ï¼Œä½¿å¾—ä¸¤ä¸ªå­é›†çš„å…ƒç´ å’Œç›¸ç­‰ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,5,11,5]
è¾“å‡ºï¼štrue
è§£é‡Šï¼šæ•°ç»„å¯ä»¥åˆ†å‰²æˆ [1, 5, 5] å’Œ [11] ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3,5]
è¾“å‡ºï¼šfalse
è§£é‡Šï¼šæ•°ç»„ä¸èƒ½åˆ†å‰²æˆä¸¤ä¸ªå…ƒç´ å’Œç›¸ç­‰çš„å­é›†ã€‚
```

**æç¤ºï¼š**

- `1 <= nums.length <= 200`
- `1 <= nums[i] <= 100`

```java
class Solution {
    public boolean canPartition(int[] nums) {
        int sum = 0;
        for (int num : nums) {
            sum+=num;
        }
        if (sum%2==1) return false;
        int target = sum/2;
        //åŠ¨æ€è§„åˆ’ 1/èƒŒåŒ…é—®é¢˜ï¼Œèƒ½ä¸èƒ½æ‰¾åˆ°targetå¤§å°çš„å…ƒç´ 
        // dp[i] = dp[i-nums[j]]
        boolean[] dp = new boolean[target + 1];
        //å…ˆéå†ç‰©å“ï¼Œå†éå†èƒŒåŒ…ï¼Œ
        dp[0] = true;
        for (int i = 0; i < nums.length; i++) {
            for (int j = target; j >= nums[i]; j--) {
                dp[j] = dp[j]||dp[j-nums[i]];
            }
        }
        return dp[target];
    }
}
}
```

#### [1049. æœ€åä¸€å—çŸ³å¤´çš„é‡é‡ II](https://leetcode.cn/problems/last-stone-weight-ii/)

æœ‰ä¸€å †çŸ³å¤´ï¼Œç”¨æ•´æ•°æ•°ç»„ `stones` è¡¨ç¤ºã€‚å…¶ä¸­ `stones[i]` è¡¨ç¤ºç¬¬ `i` å—çŸ³å¤´çš„é‡é‡ã€‚

æ¯ä¸€å›åˆï¼Œä»ä¸­é€‰å‡º**ä»»æ„ä¸¤å—çŸ³å¤´**ï¼Œç„¶åå°†å®ƒä»¬ä¸€èµ·ç²‰ç¢ã€‚å‡è®¾çŸ³å¤´çš„é‡é‡åˆ†åˆ«ä¸º `x` å’Œ `y`ï¼Œä¸” `x <= y`ã€‚é‚£ä¹ˆç²‰ç¢çš„å¯èƒ½ç»“æœå¦‚ä¸‹ï¼š

- å¦‚æœ `x == y`ï¼Œé‚£ä¹ˆä¸¤å—çŸ³å¤´éƒ½ä¼šè¢«å®Œå…¨ç²‰ç¢ï¼›
- å¦‚æœ `x != y`ï¼Œé‚£ä¹ˆé‡é‡ä¸º `x` çš„çŸ³å¤´å°†ä¼šå®Œå…¨ç²‰ç¢ï¼Œè€Œé‡é‡ä¸º `y` çš„çŸ³å¤´æ–°é‡é‡ä¸º `y-x`ã€‚

æœ€åï¼Œ**æœ€å¤šåªä¼šå‰©ä¸‹ä¸€å—** çŸ³å¤´ã€‚è¿”å›æ­¤çŸ³å¤´ **æœ€å°çš„å¯èƒ½é‡é‡** ã€‚å¦‚æœæ²¡æœ‰çŸ³å¤´å‰©ä¸‹ï¼Œå°±è¿”å› `0`ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šstones = [2,7,4,1,8,1]
è¾“å‡ºï¼š1
è§£é‡Šï¼š
ç»„åˆ 2 å’Œ 4ï¼Œå¾—åˆ° 2ï¼Œæ‰€ä»¥æ•°ç»„è½¬åŒ–ä¸º [2,7,1,8,1]ï¼Œ
ç»„åˆ 7 å’Œ 8ï¼Œå¾—åˆ° 1ï¼Œæ‰€ä»¥æ•°ç»„è½¬åŒ–ä¸º [2,1,1,1]ï¼Œ
ç»„åˆ 2 å’Œ 1ï¼Œå¾—åˆ° 1ï¼Œæ‰€ä»¥æ•°ç»„è½¬åŒ–ä¸º [1,1,1]ï¼Œ
ç»„åˆ 1 å’Œ 1ï¼Œå¾—åˆ° 0ï¼Œæ‰€ä»¥æ•°ç»„è½¬åŒ–ä¸º [1]ï¼Œè¿™å°±æ˜¯æœ€ä¼˜å€¼ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šstones = [31,26,33,21,40]
è¾“å‡ºï¼š5
```

1. ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰

**dp[j]è¡¨ç¤ºå®¹é‡ï¼ˆè¿™é‡Œè¯´å®¹é‡æ›´å½¢è±¡ï¼Œå…¶å®å°±æ˜¯é‡é‡ï¼‰ä¸ºjçš„èƒŒåŒ…ï¼Œæœ€å¤šå¯ä»¥èƒŒæœ€å¤§é‡é‡ä¸ºdp[j]**ã€‚

å¯ä»¥å›å¿†ä¸€ä¸‹01èƒŒåŒ…ä¸­ï¼Œdp[j]çš„å«ä¹‰ï¼Œå®¹é‡ä¸ºjçš„èƒŒåŒ…ï¼Œæœ€å¤šå¯ä»¥è£…çš„ä»·å€¼ä¸º dp[j]ã€‚

ç›¸å¯¹äº 01èƒŒåŒ…ï¼Œæœ¬é¢˜ä¸­ï¼ŒçŸ³å¤´çš„é‡é‡æ˜¯ stones[i]ï¼ŒçŸ³å¤´çš„ä»·å€¼ä¹Ÿæ˜¯ stones[i] ï¼Œå¯ä»¥ â€œæœ€å¤šå¯ä»¥è£…çš„ä»·å€¼ä¸º dp[j]â€ == â€œæœ€å¤šå¯ä»¥èƒŒçš„é‡é‡ä¸ºdp[j]â€

2. ç¡®å®šé€’æ¨å…¬å¼

01èƒŒåŒ…çš„é€’æ¨å…¬å¼ä¸ºï¼šdp[j] = max(dp[j], dp[j - weight[i]] + value[i]);

æœ¬é¢˜åˆ™æ˜¯ï¼š**dp[j] = max(dp[j], dp[j - stones[i]] + stones[i]);**

ä¸€äº›åŒå­¦å¯èƒ½çœ‹åˆ°è¿™dp[j - stones[i]] + stones[i]ä¸­ åˆæœ‰- stones[i] åˆæœ‰+stones[i]ï¼Œçœ‹ç€æœ‰ç‚¹æ™•ä¹ã€‚

å¤§å®¶å¯ä»¥å†å»çœ‹ dp[j]çš„å«ä¹‰ã€‚

æœ€ådp[target]é‡Œæ˜¯å®¹é‡ä¸ºtargetçš„èƒŒåŒ…æ‰€èƒ½èƒŒçš„æœ€å¤§é‡é‡ã€‚

é‚£ä¹ˆåˆ†æˆä¸¤å †çŸ³å¤´ï¼Œä¸€å †çŸ³å¤´çš„æ€»é‡é‡æ˜¯dp[target]ï¼Œå¦ä¸€å †å°±æ˜¯sum - dp[target]ã€‚

**åœ¨è®¡ç®—targetçš„æ—¶å€™ï¼Œtarget = sum / 2 å› ä¸ºæ˜¯å‘ä¸‹å–æ•´ï¼Œæ‰€ä»¥sum - dp[target] ä¸€å®šæ˜¯å¤§äºç­‰äºdp[target]çš„**ã€‚

é‚£ä¹ˆç›¸æ’ä¹‹åå‰©ä¸‹çš„æœ€å°çŸ³å¤´é‡é‡å°±æ˜¯ (sum - dp[target]) - dp[target]ã€‚

```java
class Solution {
    public int lastStoneWeightII(int[] stones) {
        //ç²‰ç¢çŸ³å¤´ï¼Œå…¶å®å°±æ˜¯çœ‹ä¸¤ä¸ªèƒ½ä¸èƒ½å„åˆ†ä¸€åŠ
        int sum = 0;
        for (int stone : stones) {
            sum+=stone;
        }
        int target = sum/2; // if achieved targetï¼Œthen result is zero;
        //dpè¡¨ç¤ºè£…æ»¡å®¹é‡ä¸ºiçš„èƒŒåŒ…æ‰€èƒ½è£…çš„æœ€å¤§çš„ä»·å€¼ä¹Ÿå°±æ˜¯é‡é‡ï¼›
        int[] dp = new int[target + 1];
        for (int i = 0; i < stones.length; i++) {
            for (int j = target; j >= stones[i]; j--) {
                dp[j] = Math.max(dp[j],dp[j-stones[i]]+stones[i]);
            }
        }
        return sum-2*dp[target];//tagetå®¹é‡çš„èƒŒåŒ…æœ€å¤šèƒ½è£…ä¸‹çš„
        //ä¸€å †çŸ³å¤´çš„æ€»é‡é‡æ˜¯dp[target]ï¼Œå¦ä¸€å †å°±æ˜¯sum - dp[target]ã€‚
        //é‚£ä¹ˆç›¸æ’ä¹‹åå‰©ä¸‹çš„æœ€å°çŸ³å¤´é‡é‡å°±æ˜¯ (sum - dp[target]) - dp[target]ã€‚
    }
}
```

> æœ¬é¢˜å…¶å®å’Œ**[416. åˆ†å‰²ç­‰å’Œå­é›†]**å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯æœ€åå¯¹dp[target]çš„å¤„ç†æ–¹å¼ä¸åŒã€‚
>  
> **_[416. åˆ†å‰²ç­‰å’Œå­é›†]_**ç›¸å½“äºæ˜¯æ±‚èƒŒåŒ…æ˜¯å¦æ­£å¥½è£…æ»¡ï¼Œè€Œæœ¬é¢˜æ˜¯æ±‚èƒŒåŒ…æœ€å¤šèƒ½è£…å¤šå°‘ã€‚


#### [494. ç›®æ ‡å’Œ](https://leetcode.cn/problems/target-sum/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `target` ã€‚

å‘æ•°ç»„ä¸­çš„æ¯ä¸ªæ•´æ•°å‰æ·»åŠ  `'+'` æˆ– `'-'` ï¼Œç„¶åä¸²è”èµ·æ‰€æœ‰æ•´æ•°ï¼Œå¯ä»¥æ„é€ ä¸€ä¸ª **è¡¨è¾¾å¼** ï¼š

- ä¾‹å¦‚ï¼Œ`nums = [2, 1]` ï¼Œå¯ä»¥åœ¨ `2` ä¹‹å‰æ·»åŠ  `'+'` ï¼Œåœ¨ `1` ä¹‹å‰æ·»åŠ  `'-'` ï¼Œç„¶åä¸²è”èµ·æ¥å¾—åˆ°è¡¨è¾¾å¼ `"+2-1"` ã€‚

è¿”å›å¯ä»¥é€šè¿‡ä¸Šè¿°æ–¹æ³•æ„é€ çš„ã€è¿ç®—ç»“æœç­‰äº `target` çš„ä¸åŒ **è¡¨è¾¾å¼** çš„æ•°ç›®ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,1,1,1,1], target = 3
è¾“å‡ºï¼š5
è§£é‡Šï¼šä¸€å…±æœ‰ 5 ç§æ–¹æ³•è®©æœ€ç»ˆç›®æ ‡å’Œä¸º 3 ã€‚
-1 + 1 + 1 + 1 + 1 = 3
+1 - 1 + 1 + 1 + 1 = 3
+1 + 1 - 1 + 1 + 1 = 3
+1 + 1 + 1 - 1 + 1 = 3
+1 + 1 + 1 + 1 - 1 = 3
```

```java
class Solution {
    public int findTargetSumWays(int[] nums, int target) {
        // 01 èƒŒåŒ…ï¼Œdpè¡¨ç¤ºæ”¾åˆ°æ­£æ•°çš„ä¸€éçš„æ–¹æ³•ï¼Œ
        // p+d=s; p-d = t; p = s+t /2;
        int sum = 0;
        for (int num : nums) {
            sum+=num;
        }
        //å¦‚æœäºŒè€…ç›¸åŠ å°äº0ï¼Œæ˜¾ç„¶æ˜¯ä¸è¡Œçš„
        if ((sum+target)%2==1 ||(sum+target)/2<0) return 0;
        int plus = (sum+target)/2;
        int[] dp = new int[plus + 1];
        dp[0] =1;
        //æ‰¾åˆ°å’Œä¸ºplusçš„æ ‘æœ¨æœ‰å¤šå°‘ç§ï¼Œè£…æ»¡è¿™ä¸ªplusçš„èƒŒåŒ…
        for (int i = 0; i < nums.length; i++) {
            for (int j = plus; j >=nums[i] ; j--) {
                dp[j] += dp[j-nums[i]];
            }
        }
        return dp[plus];
    }
}
```

### å®Œå…¨èƒŒåŒ…

çº¯å®Œå…¨èƒŒåŒ…çš„ä¸€ç»´dpæ•°ç»„å®ç°ï¼Œå…ˆéå†ç‰©å“è¿˜æ˜¯å…ˆéå†èƒŒåŒ…éƒ½æ˜¯å¯ä»¥çš„ï¼Œä¸”ç¬¬äºŒå±‚forå¾ªç¯æ˜¯ä»å°åˆ°å¤§éå†ã€‚

ä½†æ˜¯ä»…ä»…æ˜¯**çº¯å®Œå…¨èƒŒåŒ…**çš„éå†é¡ºåºæ˜¯è¿™æ ·çš„ï¼Œé¢˜ç›®ç¨æœ‰å˜åŒ–ï¼Œä¸¤ä¸ªforå¾ªç¯çš„å…ˆåé¡ºåºå°±ä¸ä¸€æ ·äº†ã€‚

**å¦‚æœæ±‚ç»„åˆæ•°å°±æ˜¯å¤–å±‚forå¾ªç¯éå†ç‰©å“ï¼Œå†…å±‚foréå†èƒŒåŒ…**ã€‚

**å¦‚æœæ±‚æ’åˆ—æ•°å°±æ˜¯å¤–å±‚foréå†èƒŒåŒ…ï¼Œå†…å±‚forå¾ªç¯éå†ç‰©å“**ã€‚ä¹Ÿå°±æ˜¯ä¸åŒçš„æ’åºéƒ½ç®—åšæ–°çš„æ–¹æ³•å°±æ˜¯æ±‚æ’åˆ—æ•°

ç›¸å…³é¢˜ç›®å¦‚ä¸‹ï¼š

#### [å‰‘æŒ‡ Offer II 104. æ’åˆ—çš„æ•°ç›®](https://leetcode.cn/problems/D0F0SV/)

ç»™å®šä¸€ä¸ªç”± **ä¸åŒ** æ­£æ•´æ•°ç»„æˆçš„æ•°ç»„ `nums` ï¼Œå’Œä¸€ä¸ªç›®æ ‡æ•´æ•° `target` ã€‚è¯·ä» `nums` ä¸­æ‰¾å‡ºå¹¶è¿”å›æ€»å’Œä¸º `target` çš„å…ƒç´ ç»„åˆçš„ä¸ªæ•°ã€‚æ•°ç»„ä¸­çš„æ•°å­—å¯ä»¥åœ¨ä¸€æ¬¡æ’åˆ—ä¸­å‡ºç°ä»»æ„æ¬¡ï¼Œä½†æ˜¯é¡ºåºä¸åŒçš„åºåˆ—è¢«è§†ä½œä¸åŒçš„ç»„åˆã€‚

é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆç¬¦åˆ 32 ä½æ•´æ•°èŒƒå›´ã€‚

**ç¤ºä¾‹ 1ï¼š**

```shell
è¾“å…¥ï¼šnums = [1,2,3], target = 4
è¾“å‡ºï¼š7
è§£é‡Šï¼š
æ‰€æœ‰å¯èƒ½çš„ç»„åˆä¸ºï¼š
(1, 1, 1, 1)
(1, 1, 2)
(1, 2, 1)
(1, 3)
(2, 1, 1)
(2, 2)
(3, 1)
è¯·æ³¨æ„ï¼Œé¡ºåºä¸åŒçš„åºåˆ—è¢«è§†ä½œä¸åŒçš„ç»„åˆ
```

dp[j] è¡¨ç¤ºï¼šå¡«æ»¡jï¼ˆåŒ…æ‹¬jï¼‰è¿™ä¹ˆå¤§å®¹ç§¯çš„åŒ…ï¼Œæœ‰dp[j]ç§æ–¹æ³•

ä»é€’æ¨å…¬å¼å¯ä»¥çœ‹å‡ºï¼Œåœ¨åˆå§‹åŒ–çš„æ—¶å€™dp[0] ä¸€å®šè¦åˆå§‹åŒ–ä¸º1ï¼Œå› ä¸ºdp[0]æ˜¯åœ¨å…¬å¼ä¸­ä¸€åˆ‡é€’æ¨ç»“æœçš„èµ·æºï¼Œå¦‚æœdp[0]æ˜¯0çš„è¯ï¼Œé€’æ¨ç»“æœå°†éƒ½æ˜¯0ã€‚

è¿™é‡Œæœ‰å½•å‹å¯èƒ½è®¤ä¸ºä»dpæ•°ç»„å®šä¹‰æ¥è¯´ dp[0] åº”è¯¥æ˜¯0ï¼Œä¹Ÿæœ‰å½•å‹è®¤ä¸ºdp[0]åº”è¯¥æ˜¯1ã€‚

å…¶å®ä¸è¦ç¡¬å»è§£é‡Šå®ƒçš„å«ä¹‰ï¼Œå’±å°±æŠŠ dp[0]çš„æƒ…å†µå¸¦å…¥æœ¬é¢˜çœ‹çœ‹åº”è¯¥ç­‰äºå¤šå°‘ã€‚

å¦‚æœæ•°ç»„[0] ï¼Œtarget = 0ï¼Œé‚£ä¹ˆ bagSize = Â (target + sum) / 2 = 0ã€‚ dp[0]ä¹Ÿåº”è¯¥æ˜¯1ï¼Œ ä¹Ÿå°±æ˜¯è¯´ç»™æ•°ç»„é‡Œçš„å…ƒç´  0 å‰é¢æ— è®ºæ”¾åŠ æ³•è¿˜æ˜¯å‡æ³•ï¼Œéƒ½æ˜¯ 1 ç§æ–¹æ³•ã€‚

æ‰€ä»¥æœ¬é¢˜æˆ‘ä»¬åº”è¯¥åˆå§‹åŒ– dp[0] ä¸º 1ã€‚

å¯èƒ½æœ‰åŒå­¦æƒ³äº†ï¼Œé‚£ å¦‚æœæ˜¯ æ•°ç»„[0,0,0,0,0] target = 0 å‘¢ã€‚

å…¶å® æ­¤æ—¶æœ€ç»ˆçš„dp[0] = 32ï¼Œä¹Ÿå°±æ˜¯è¿™äº”ä¸ªé›¶ å­é›†çš„æ‰€æœ‰ç»„åˆæƒ…å†µï¼Œä½†æ­¤dp[0]éå½¼dp[0]ï¼Œdp[0]èƒ½ç®—å‡º32ï¼Œå…¶åŸºç¡€æ˜¯å› ä¸ºdp[0] = 1 ç´¯åŠ èµ·æ¥çš„ã€‚

dp[j]å…¶ä»–ä¸‹æ ‡å¯¹åº”çš„æ•°å€¼ä¹Ÿåº”è¯¥åˆå§‹åŒ–ä¸º0ï¼Œä»é€’æ¨å…¬å¼ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œdp[j]è¦ä¿è¯æ˜¯0çš„åˆå§‹å€¼ï¼Œæ‰èƒ½æ­£ç¡®çš„ç”±dp[j - nums[i]]æ¨å¯¼å‡ºæ¥ã€‚

```java
class Solution {
    public int combinationSum4(int[] nums, int target) {
//        èƒŒåŒ…é—®é¢˜ï¼ŒèƒŒåŒ…æ€»çš„åªèƒ½è£…targetå¤§å°çš„ä¸œè¥¿
//        é¡ºåºå¯ä»¥ä½œä¸ºä¸åŒçš„ç»„åˆdp[j] +=dp[j-nums[i]];
        int[] dp = new int[target + 1];
        dp[0] = 1;
        //å®Œå…¨èƒŒåŒ…ï¼ˆå¯ä»¥é‡å¤ä½¿ç”¨ï¼‰ï¼Œæ±‚æ’åˆ—æ•°ï¼ˆä¸åŒçš„æ’åºéƒ½ç®—æ–¹æ³•ï¼‰
        for (int i = 1; i <= target; i++) {
            // å…ˆéå†èƒŒåŒ…ï¼Œå› ä¸ºè¿™ä¸ªå®¹å™¨èƒŒåŒ…æ˜¯1çš„æ—¶å€™ï¼Œå¯ä»¥æ¯ä¸€ä¸ªnumséƒ½å»éå†æ‰€ä»¥æ˜¯ç»„åˆ
            // å¦‚æœå…ˆå»éå†ç‰©å“ï¼Œä¹Ÿå°±æ˜¯numsçš„æ—¶å€™ï¼Œé‚£ä¸å°±æ˜¯æ²¡æœ‰é¡ºåºl
            for (int j = 0; j < nums.length; j++) {
                if (nums[j]<=i){
                    dp[i] += dp[i-nums[j]];
                }
            }
        }
        return dp[target];

    }
}
```

#### [å‰‘æŒ‡ Offer II 103. æœ€å°‘çš„ç¡¬å¸æ•°ç›®](https://leetcode.cn/problems/gaM7Ch/)

ç»™å®šä¸åŒé¢é¢çš„ç¡¬å¸ `coins` å’Œä¸€ä¸ªæ€»é‡‘é¢ `amount`ã€‚ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ç§ç¡¬å¸ç»„åˆèƒ½ç»„æˆæ€»é‡‘é¢ï¼Œè¿”å› `-1`ã€‚

ä½ å¯ä»¥è®¤ä¸ºæ¯ç§ç¡¬å¸çš„æ•°é‡æ˜¯æ— é™çš„ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šcoins = [1, 2, 5], amount = 11
è¾“å‡ºï¼š3 
è§£é‡Šï¼š11 = 5 + 5 + 1
```

```java
class Solution {
    public int coinChange(int[] coins, int amount) {
        //æ— çº¿ç¡¬å¸å°±æ˜¯å®Œå…¨èƒŒåŒ…ï¼Œç»„åˆæ•°é¦–å…ˆéå†ç‰©å“ï¼Œå†éå†èƒŒåŒ…
        int[] dp = new int[amount + 1];
       //å®Œå…¨èƒŒåŒ…ï¼ˆå¯ä»¥é‡å¤ä½¿ç”¨ï¼‰ï¼Œæ±‚ç»„åˆï¼ˆä¸åŒçš„æ’åºä¸ç®—æ–¹æ³•ï¼‰
        Arrays.fill(dp,Integer.MAX_VALUE);
        dp[0]=0;
        for (int i = 0; i < coins.length; i++) {
            for (int j = coins[i]; j <= amount; j++) {
                if(dp[j-coins[i]]!=Integer.MAX_VALUE){
                    dp[j] = Math.min(dp[j],dp[j-coins[i]]+1);
                }//æœ€å°çš„æ•°
            }
        }
        return dp[amount]==Integer.MAX_VALUE?-1:dp[amount];

    }
}
```

## Kadaneâ€™s Algorithm / Kadeneç®—æ³•

è®¡ç®—æœºå†å²ä¸Šæœ‰ä¸€ä¸ªéå¸¸ç»å…¸çš„é—®é¢˜å«åšMaximum-Subarray-Problemï¼Œ æ±‚æ•°ç»„çš„æœ€å¤§å­åºåˆ—ï¼Œè¦æ±‚è¯¥å­åºåˆ—å’Œä¸ºæœ€å¤§å€¼ï¼Œå­åºåˆ—åº”å½“è¿ç»­ã€‚

æ¯”å¦‚ [âˆ’2, 1, âˆ’3, 4, âˆ’1, 2, 1, âˆ’5, 4]ï¼Œ æœ€å¤§åº”è¯¥å­åºåˆ—ä¸º [4, âˆ’1, 2, 1]ã€‚

æš´åŠ›çš„è§£æ³•æ˜¯ç®—å‡ºæ‰€æœ‰çš„å­åºåˆ—ï¼Œç„¶åæ±‚å’Œï¼Œè¯¥æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n^2).

Kadaneâ€™s Algorithmæ˜¯æ±‚è§£è¯¥ç±»é—®é¢˜çš„ä¸€ä¸ªé€šæ³•ï¼ŒåŸç†æ˜¯åˆ©ç”¨Dynamic Programmingä¿å­˜æ‰€æœ‰ä»¥iç»“å°¾çš„å­åºåˆ—çš„æœ€å¤§é•¿åº¦ï¼Œdpå…¬å¼ä¸º:

å¦‚æœä»¥i - 1ä¸ºç»“å°¾çš„å­åºåˆ—æœ€å¤§å€¼ä¸ºè´Ÿï¼Œé‚£ä¹ˆä¸ç®¡æ€ä¹ˆæ ·ï¼Œdp[i]å°±åº”è¯¥ä»å¤´å¼€å§‹è®¡æ•°ï¼Œå› ä¸ºå‰é¢çš„å­åºåˆ—å·²ç»ä¸å†æœ‰å½±å“äº†(dp[i - 1] + nums[i]å¿…ç„¶å°äºnums[i])

Leetcodeé‡Œæœ‰ä¸¤é“ç»å…¸çš„é¢˜ç›®ï¼Œç”¨åˆ°äº†è¿™ä¸ªç®—æ³•ï¼Œåˆ†åˆ«ä¸ºLeetcode53å’ŒLeetcode1186ï¼ŒLeetcode 53æ˜¯è¿™ä¸€ç®—æ³•çš„ç›´æ¥è¿ç”¨ï¼Œä»£ç å¦‚ä¸‹ï¼š

```java
public int maxSubArray(int[] nums) {
    int[] dp = new int[nums.length];
    dp[0] = nums[0];
    int res = dp[0];
    for(int i = 1; i < nums.length; i++){
      //å¦‚æœå‰é¢çš„æ¯”0å°ï¼Œç›´æ¥å°±ä¸å»å–äº†
        dp[i] = Math.max(dp[i - 1], 0) + nums[i];
        res = Math.max(dp[i], res);
    }
    return res;  
}
```

> LeetCode 1186
>  
> ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œè¿”å›å®ƒçš„æŸä¸ª **éç©º** å­æ•°ç»„ï¼ˆè¿ç»­å…ƒç´ ï¼‰åœ¨æ‰§è¡Œä¸€æ¬¡å¯é€‰çš„åˆ é™¤æ“ä½œåï¼Œæ‰€èƒ½å¾—åˆ°çš„æœ€å¤§å…ƒç´ æ€»å’Œã€‚æ¢å¥è¯è¯´ï¼Œä½ å¯ä»¥ä»åŸæ•°ç»„ä¸­é€‰å‡ºä¸€ä¸ªå­æ•°ç»„ï¼Œå¹¶å¯ä»¥å†³å®šè¦ä¸è¦ä»ä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼ˆåªèƒ½åˆ ä¸€æ¬¡å“¦ï¼‰ï¼Œï¼ˆåˆ é™¤åï¼‰å­æ•°ç»„ä¸­è‡³å°‘åº”å½“æœ‰ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åè¯¥å­æ•°ç»„ï¼ˆå‰©ä¸‹ï¼‰çš„å…ƒç´ æ€»å’Œæ˜¯æ‰€æœ‰å­æ•°ç»„ä¹‹ä¸­æœ€å¤§çš„ã€‚
>  
> æ³¨æ„ï¼Œåˆ é™¤ä¸€ä¸ªå…ƒç´ åï¼Œå­æ•°ç»„ **ä¸èƒ½ä¸ºç©º**ã€‚
>  
> **ç¤ºä¾‹ 1ï¼š**
>  

```shell
è¾“å…¥ï¼šarr = [1,-2,0,3]
è¾“å‡ºï¼š4
è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥é€‰å‡º [1, -2, 0, 3]ï¼Œç„¶ååˆ æ‰ -2ï¼Œè¿™æ ·å¾—åˆ° [1, 0, 3]ï¼Œå’Œæœ€å¤§ã€‚
```

Leetcode 1186æ˜¯ä¸€ä¸ªå˜å¼ï¼ŒåŸºæœ¬æ€è·¯ä¸å˜ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é€‰æ‹©æ˜¯å¦åˆ é™¤åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œæ˜¾ç„¶ï¼Œå¦‚æœé‡åˆ°è´Ÿæ•°ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å°†å…¶åˆ é™¤ï¼Œç„¶åè®¡ç®—ä¸¤å¤´ï¼Œå¯¹äºç¬¬iä¸ªæ•°å­—ï¼Œå¦‚æœå®ƒæ˜¯è´Ÿæ•°ï¼Œåˆ™è®¡ç®—**ä»¥i - 1ä¸ºç»“å°¾çš„æœ€å¤§å­åºåˆ—**å’Œä»¥**i + 1ä¸ºå¼€å¤´çš„æœ€å¤§å­åºåˆ—**ï¼Œæˆ‘ä»¬åˆ†åˆ«ç”¨dp1ï¼Œdp2å­˜å‚¨è¿™ä¸¤ç§çŠ¶æ€ï¼ŒåŸç†ä¾æ—§æ˜¯Kadaneâ€™s Algorithmã€‚

> ä»ä¸¤å¤´å¼€å§‹ï¼Œåˆ†åˆ«ç®—å¥½ï¼Œå¦‚æœé‡Œé¢æœ‰è´Ÿæ•°ï¼Œå†å»è®¡ç®—è´Ÿæ•°å¯¼è‡´çš„å¯èƒ½å­˜åœ¨çš„åˆ é™¤æŸä¸ªå…ƒç´ çš„æƒ…å†µã€‚


```java
public int maximumSum(int[] arr) {
    int[] dp1 = new int[arr.length];
    int[] dp2 = new int[arr.length];
    dp1[0] = arr[0];
    int res = arr[0];
    for(int i = 1; i < arr.length; i++){
        dp1[i] = Math.max(dp1[i - 1], 0) + arr[i];
        res = Math.max(res,dp1[i]);
    }
    dp2[arr.length - 1] = arr[arr.length - 1];
    for(int i = arr.length - 2; i > -1; --i){
        dp2[i] = Math.max(dp2[i + 1], 0) + arr[i];
    }
    
    for(int i = 1; i < arr.length - 1; i++){
        if(arr[i] < 0)
            res = Math.max(dp1[i - 1] + dp2[i + 1], res);
    }

    return res;
}
```

> æˆ‘çš„ï¼š
>  

```java
class Solution {
    public int maximumSum(int[] arr) {
        int[] dp1 = new int[arr.length];//å­˜å‚¨ä»å¤´å¼€å§‹çš„è¿ç»­æœ€å¤§å’Œ
        int[] dp2 = new int[arr.length];//å­˜å‚¨ä»å°¾å¼€å§‹çš„è¿ç»­æœ€å¤§å’Œ
        int max = arr[0];
        dp1[0]=arr[0];
        for (int i = 1; i < arr.length; i++) {
            dp1[i]=Math.max(dp1[i-1],0)+arr[i];
            max = Math.max(max,dp1[i]);
        }
        System.out.println("dp1 = " + Arrays.toString(dp1));
        dp2[arr.length-1]=arr[arr.length-1];//æœ€åä¸€ä¸ªä½ç½®èµ‹å€¼
        for (int i = arr.length-2; i >0; i--) {
            dp2[i]=Math.max(dp2[i+1],0)+arr[i];
            max = Math.max(max,dp2[i]);
        }
        System.out.println("dp2 = " + Arrays.toString(dp2));
        for (int i = 1; i < arr.length-1; i++) {
            if (arr[i]<0){
                max=Math.max(dp1[i-1]+dp2[i+1],max);
            }
        }
        return max;
    }
}
```


## æ»‘åŠ¨çª—å£

åœ¨ Java ä¸­ï¼Œå¯ä»¥é€šè¿‡åŒæŒ‡é’ˆçš„æ–¹å¼æ¥å®ç°æ»‘åŠ¨çª—å£ç®—æ³•ï¼Œè¿™é‡Œç»™å‡ºä¸€ä¸ªç¤ºä¾‹ä»£ç ï¼š

```java
public int slidingWindow(int[] nums, int target) {
    int left = 0, right = 0;
    int sum = 0, minLen = Integer.MAX_VALUE;

    while (right < nums.length) {
        sum += nums[right];

        while (sum >= target) {
            minLen = Math.min(minLen, right - left + 1);
            sum -= nums[left];
            left++;
        }

        right++;
    }

    return minLen == Integer.MAX_VALUE ? 0 : minLen;
}
```

ä»¥ä¸Šä»£ç å®ç°äº†ä¸€ä¸ªæ±‚å–æ•°ç»„ä¸­æœ€çŸ­è¿ç»­å­æ•°ç»„é•¿åº¦çš„é—®é¢˜ï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸º ![](https://www.yuque.com/api/services/graph/generate_redirect/latex?O(n)#card=math&code=O%28n%29&id=hd7mM)ï¼Œå…¶ä¸­ `left` å’Œ `right` åˆ†åˆ«ä»£è¡¨æ»‘åŠ¨çª—å£çš„å·¦å³æŒ‡é’ˆï¼Œ`sum` ä¸ºæ»‘åŠ¨çª—å£ä¸­å…ƒç´ ä¹‹å’Œï¼Œ`minLen` ä¸ºæœ€çŸ­è¿ç»­å­æ•°ç»„çš„é•¿åº¦ã€‚

åœ¨åŒæŒ‡é’ˆç®—æ³•ä¸­ï¼Œå¸¸å¸¸éœ€è¦ä½¿ç”¨åµŒå¥—å¾ªç¯ï¼Œå…¶ä¸­å¤–å±‚å¾ªç¯ä¸ºå³æŒ‡é’ˆç§»åŠ¨ï¼Œå†…å±‚å¾ªç¯ä¸ºå·¦æŒ‡é’ˆç§»åŠ¨ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¦åˆè¦æ±‚çš„ç»“æœã€‚åœ¨å†…å¾ªç¯ä¸­ï¼Œè¦æ³¨æ„ç§»åŠ¨å·¦æŒ‡é’ˆæ—¶çš„ç»†èŠ‚å¤„ç†ï¼Œæ­¤å¤–è¿˜éœ€è¦æ³¨æ„è¾¹ç•Œæ¡ä»¶æ§åˆ¶ã€‚

### åŒæŒ‡é’ˆåˆ¤æ–­å›æ–‡æ•°

```java
boolean isPali(String s,int begin,int end) {
    for (int i = begin, j = end; i < j; i++, j--) {
        if (s.charAt(i)!=s.charAt(j))
            return false;
    }
    return true;
}
```

### [3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²](https://leetcode.cn/problems/longest-substring-without-repeating-characters/)

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ **æœ€é•¿** **å­ä¸²**çš„é•¿åº¦ã€‚

 **ç¤ºä¾‹ 1:**

```
è¾“å…¥: s = "abcabcbb"
è¾“å‡º: 3 
è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "abc"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: s = "bbbbb"
è¾“å‡º: 1
è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "b"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚
```

**ç¤ºä¾‹ 3:**

```
è¾“å…¥: s = "pwwkew"
è¾“å‡º: 3
è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ "wke"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚
     è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ"pwke" æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚
```

```java
class Solution {
    public int lengthOfLongestSubstring(String s) {
        HashMap<Character, Integer> map = new HashMap<>();
        int max = 0;
        int j = 0;
        for (int i = 0; i < s.length(); i++) {
            char c = s.charAt(i);
            if (map.containsKey(c)) {
                j = Math.max(j, map.get(c) + 1);//æœ€é‡è¦çš„æ˜¯max
            }
            map.put(c, i);
            max = Math.max(max, i-j+1);
        }
        return max;
    }
}

```



æœ€å¼€å§‹æˆ‘ä¹Ÿæ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œç›´æ¥å·¦è¾¹i-dic[s[j]]å°±å®Œäº‹äº†ï¼Œ**ç›´åˆ°æˆ‘é‡åˆ°äº†â€œabbaâ€ï¼Œé—®é¢˜å‡ºåœ¨å½“éå†åˆ°ç¬¬äºŒä¸ªâ€œaâ€çš„æ—¶å€™ï¼Œå·¦æŒ‡é’ˆæ ¹æ®bé‡å¤æ›´æ–°äº†ï¼Œåˆ°é‚£æ—¶ç¬¬äºŒä¸ªaæ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸ºå·¦è¾¹çš„aï¼Œ**å·¦æŒ‡é’ˆåˆè·³å›åˆ°å·¦è¾¹çš„aä¸Šå»äº† æ‰€ä»¥æ›´æ–°å·¦æŒ‡é’ˆè¿™ä¸€è¡Œi = max(dic[s[j]], i)ä¸­çš„maxç¥æ¥ä¸€ç¬”ï¼Œä¿è¯äº†å·¦æŒ‡é’ˆæ— è®ºå¦‚ä½•ä¸ä¼šå¾€å·¦è·³ã€‚



### 680. éªŒè¯å›æ–‡ä¸² II

**åˆ¤æ–­å›æ–‡ä¸²æ—¶ï¼Œå…è®¸åˆ é™¤ 1 ä¸ªå­—ç¬¦ã€‚**

ç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸² `s`ï¼Œè¯·åˆ¤æ–­å¦‚æœ **æœ€å¤š** ä»å­—ç¬¦ä¸²ä¸­åˆ é™¤ä¸€ä¸ªå­—ç¬¦èƒ½å¦å¾—åˆ°ä¸€ä¸ªå›æ–‡å­—ç¬¦ä¸²ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: s = "aba"
è¾“å‡º: true
```

ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨åŒæŒ‡é’ˆç›¸å‘éå†æ—¶ï¼Œå½“

s[left]\=s[right]

æˆ‘ä»¬**æœ‰ä¸”ä»…æœ‰ä¸€æ¬¡**è·³è¿‡çš„æœºä¼šï¼š

- å¯ä»¥è·³è¿‡ left æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ ï¼Œç»§ç»­ [left+1âŸ¶,rightâŸµ]ï¼›
- ä¹Ÿå¯ä»¥è·³è¿‡ right æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ ï¼Œç»§ç»­ [leftâŸ¶,rightâˆ’1âŸµ]ã€‚

ä¸¤ç§æƒ…å†µä¸­ï¼Œåªè¦æœ‰ä¸€ä¸ªåˆ¤å®šè¢«ä¸ºå›æ–‡ä¸²ï¼Œé‚£ä¹ˆ s å°±æ˜¯åˆæ³•çš„å›æ–‡ä¸²ã€‚

```java
class Solution {
    public boolean validPalindrome(String s) {
        int left = 0;
        int right = s.length()-1;
        while (left<right){
            if (s.charAt(left)!=s.charAt(right)){
                return validSub(s,left+1,right) || validSub(s,left,right-1);
            }else {
                left++;
                right--;
            }

        }
        return true;
    }
    boolean validSub(String s,int left,int right) {
        while (left<right){
            if (s.charAt(left)!=s.charAt(right))
                return false;
            left++;
            right--;
        }
        return true;
    }
}
```

> ç¼©çŸ­ç‰ˆ:
>  

```java
class Solution {
    public boolean validPalindrome(String s) {
        int start = 0,end=s.length()-1;
        for(int i= start,j=end;i<j;i++,j--){
            if(s.charAt(i)!=s.charAt(j)) 
                return isPali(s,i,j-1)||isPali(s,i+1,j);
        }
        return true;
    }
    private boolean isPali(String s,int start,int end){
        for(int i= start,j=end;i<j;i++,j--){
            if(s.charAt(i)!=s.charAt(j)) return false;
        }
        return true;
    }
}
```

### [26. åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹](https://leetcode.cn/problems/remove-duplicates-from-sorted-array/)

ç»™ä½ ä¸€ä¸ª **å‡åºæ’åˆ—** çš„æ•°ç»„ `nums` ï¼Œè¯·ä½ [** åŸåœ°**](http://baike.baidu.com/item/%E5%8E%9F%E5%9C%B0%E7%AE%97%E6%B3%95) åˆ é™¤é‡å¤å‡ºç°çš„å…ƒç´ ï¼Œä½¿æ¯ä¸ªå…ƒç´  **åªå‡ºç°ä¸€æ¬¡** ï¼Œè¿”å›åˆ é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚å…ƒç´ çš„ **ç›¸å¯¹é¡ºåº** åº”è¯¥ä¿æŒ **ä¸€è‡´** ã€‚ç„¶åè¿”å› `nums` ä¸­å”¯ä¸€å…ƒç´ çš„ä¸ªæ•°ã€‚

è€ƒè™‘ `nums` çš„å”¯ä¸€å…ƒç´ çš„æ•°é‡ä¸º `k` ï¼Œä½ éœ€è¦åšä»¥ä¸‹äº‹æƒ…ç¡®ä¿ä½ çš„é¢˜è§£å¯ä»¥è¢«é€šè¿‡ï¼š

- æ›´æ”¹æ•°ç»„ `nums` ï¼Œä½¿ `nums` çš„å‰ `k` ä¸ªå…ƒç´ åŒ…å«å”¯ä¸€å…ƒç´ ï¼Œå¹¶æŒ‰ç…§å®ƒä»¬æœ€åˆåœ¨ `nums` ä¸­å‡ºç°çš„é¡ºåºæ’åˆ—ã€‚`nums` çš„å…¶ä½™å…ƒç´ ä¸ `nums` çš„å¤§å°ä¸é‡è¦ã€‚
- è¿”å› `k` ã€‚

ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šnums = [1,1,2]
è¾“å‡ºï¼š2, nums = [1,2,_]
è§£é‡Šï¼šå‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 2 ï¼Œå¹¶ä¸”åŸæ•°ç»„ nums çš„å‰ä¸¤ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º 1, 2 ã€‚ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚

```java
class Solution {
    public int removeDuplicates(int[] nums) {
        //è¿”å›ä¸é‡å¤çš„éƒ¨åˆ†çš„é•¿åº¦ï¼Œå°±æ˜¯å¯ä»¥æŠŠé‡å¤çš„æ”¾åœ¨æœ€å
        int slow = 0;//æœ€åè¿”å›è¿™ä¸ªå°±å¯ä»¥äº†
        int fast = 1;
        while (fast<nums.length){
            //faståœ¨å‰é¢æ ‡è®°ä¸ºå¯ä»¥äº¤æ¢çš„å…ƒç´ 
            if (nums[slow] == nums[fast])
                fast++;
            else {//æ‰¾åˆ°ä¸ä¸€æ ·çš„ä¹‹åå†è¿›è¡Œslowå‰è¿›
                slow++;
                nums[slow]=nums[fast];
                fast++;
            }
        }
        return slow+1;
    }
}
```

### ç»Ÿè®¡è¿ç»­å­æ•°ç»„ä¸ªæ•°

ç»™å®šä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ `nums`å’Œæ•´æ•° `k` ï¼Œè¯·æ‰¾å‡ºè¯¥æ•°ç»„å†…ä¹˜ç§¯å°äº `k` çš„è¿ç»­çš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [10,5,2,6], k = 100
è¾“å‡º: 8
è§£é‡Š: 8 ä¸ªä¹˜ç§¯å°äº 100 çš„å­æ•°ç»„åˆ†åˆ«ä¸º: [10], [5], [2], [6], [10,5], [5,2], [2,6], [5,2,6]ã€‚
éœ€è¦æ³¨æ„çš„æ˜¯ [10,5,2] å¹¶ä¸æ˜¯ä¹˜ç§¯å°äº100çš„å­æ•°ç»„ã€‚
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: nums = [1,2,3], k = 0
è¾“å‡º: 0
```

**æç¤º:**

- `1 <= nums.length <= 3 * 104`
- `1 <= nums[i] <= 1000`
- `0 <= k <= 106`

æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 713 é¢˜ç›¸åŒï¼š[https://leetcode-cn.com/problems/subarray-product-less-than-k/](https://leetcode-cn.com/problems/subarray-product-less-than-k/)

```java
class Solution {
    public int numSubarrayProductLessThanK(int[] nums, int k) {
        //æ»‘åŠ¨çª—å£
        //ä½¿ç”¨ä¸€ä¸ªå˜é‡ cur è®°å½•å½“å‰çª—å£çš„ä¹˜ç§¯ï¼Œä½¿ç”¨ä¸¤ä¸ªå˜é‡ j å’Œ i åˆ†åˆ«ä»£è¡¨å½“å‰çª—å£çš„å·¦å³ç«¯ç‚¹ã€‚
        int len = nums.length;
        int ans = 0;
        if (k<=1) return 0;
        for (int i = 0, j = 0, cur = 1; i < len; i++) {
            cur*=nums[i];
            // å½“ cur>=k æ—¶ï¼Œæˆ‘ä»¬è€ƒè™‘å°†å·¦ç«¯ç‚¹ j å³ç§»ï¼ŒåŒæ—¶æ¶ˆé™¤åŸæ¥å·¦ç«¯ç‚¹å…ƒç´  nums[j] å¯¹ cur çš„è´¡çŒ®ï¼Œ
            // ç›´åˆ° cur>=k ä¸å†æ»¡è¶³ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°æ¯ä¸ªå³ç«¯ç‚¹ nums[i] çš„æœ€è¿œå·¦ç«¯ç‚¹ nums[j]
            while (cur>=k) cur/=nums[j++];
            ans+=i-j+1;
        }
        return ans;
        //è¯·æ‰¾å‡ºè¯¥æ•°ç»„å†…ä¹˜ç§¯å°äº k çš„è¿ç»­çš„å­æ•°ç»„çš„ä¸ªæ•°ã€‚
    }
}
```

### offer || 014 æ˜¯å¦åŒ…å« `s1` çš„æŸä¸ªå˜ä½è¯ã€‚

ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² `s1` å’Œ `s2`ï¼Œå†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ `s2` æ˜¯å¦åŒ…å« `s1` çš„æŸä¸ªå˜ä½è¯ã€‚

æ¢å¥è¯è¯´ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ’åˆ—ä¹‹ä¸€æ˜¯ç¬¬äºŒä¸ªå­—ç¬¦ä¸²çš„ **å­ä¸²** ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥: s1 = "ab" s2 = "eidbaooo"
è¾“å‡º: True
è§£é‡Š: s2 åŒ…å« s1 çš„æ’åˆ—ä¹‹ä¸€ ("ba").
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥: s1= "ab" s2 = "eidboaoo"
è¾“å‡º: False
```

**æç¤ºï¼š**

- `1 <= s1.length, s2.length <= 104`
- `s1` å’Œ `s2` ä»…åŒ…å«å°å†™å­—æ¯

æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 567 é¢˜ç›¸åŒï¼š [https://leetcode-cn.com/problems/permutation-in-string/](https://leetcode-cn.com/problems/permutation-in-string/)

```java
class Solution {
    public boolean checkInclusion(String s1, String s2) {
        int l1 = s1.length();
        int l2 = s2.length();
        int[] list1 = new int[26];
        int[] list2 = new int[26];
        if (l2<l1) return false;
        //// åŒæ—¶å¡«å……ä¸¤ä¸ªå­—ç¬¦è¡¨ï¼Œå…¶ä¸­alpha1å¡«å……å®Œæ¯•ï¼Œalpha2åªå¡«å……äº†å‰é¢ä¸€éƒ¨åˆ†ã€‚
        for (int i = 0; i < l1; i++) {
            list1[s1.charAt(i)-'a']++;
            list2[s2.charAt(i)-'a']++;
        }
        if (Arrays.equals(list1,list2)) return true;
        for (int i = l1; i < l2; i++) {
            //çª—å£å³è¾¹æ–°æ¥çš„åŠ åŠ 
//            çª—å£å·¦è¾¹è¦æ’é™¤çš„æ¸æ¸
            list2[s2.charAt(i)-'a']++;
            list2[s2.charAt(i-l1)-'a']--;//æ³¨æ„è¿™é‡Œï¼Œå› ä¸ºæœ‰i-liæ‰€ä»¥è¦é¢å¤–å†™ä¸€ä¸ªéå†
            // åˆ¤æ–­å½“å‰çŠ¶æ€ä¸‹ï¼Œs2çª—å£ä¸­çš„å­—ç¬¦æ˜¯å¦å’Œs1çš„å­—ç¬¦ç§ç±»å’Œæ•°é‡éƒ½ä¸€è‡´ã€‚
            // Arrays.equals() æ˜¯é€šè¿‡éå†åˆ¤æ–­çš„ï¼Œè‡ªå·±äº›forä¹Ÿä¸€æ ·ã€‚
            if (Arrays.equals(list2,list1)) return true;
        }
        return false;
    }
}
```

### LCR 015.æ»‘åŠ¨çª—å£ç»Ÿè®¡å˜ä½è¯

ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² `s` å’Œ `p`ï¼Œæ‰¾åˆ° `s` ä¸­æ‰€æœ‰ `p` çš„ **å˜ä½è¯** çš„å­ä¸²ï¼Œè¿”å›è¿™äº›å­ä¸²çš„èµ·å§‹ç´¢å¼•ã€‚ä¸è€ƒè™‘ç­”æ¡ˆè¾“å‡ºçš„é¡ºåºã€‚

**å˜ä½è¯** æŒ‡å­—æ¯ç›¸åŒï¼Œä½†æ’åˆ—ä¸åŒçš„å­—ç¬¦ä¸²ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥: s = "cbaebabacd", p = "abc"
è¾“å‡º: [0,6]
è§£é‡Š:
èµ·å§‹ç´¢å¼•ç­‰äº 0 çš„å­ä¸²æ˜¯ "cba", å®ƒæ˜¯ "abc" çš„å˜ä½è¯ã€‚
èµ·å§‹ç´¢å¼•ç­‰äº 6 çš„å­ä¸²æ˜¯ "bac", å®ƒæ˜¯ "abc" çš„å˜ä½è¯ã€‚
```

```java
class Solution {
    public List<Integer> findAnagrams(String s, String p) {
        ArrayList<Integer> ans = new ArrayList<>();
        if (p.length()>s.length()) return ans;
        int[] listp = new int[26];
        int[] lists = new int[26];
        for (int i = 0; i < p.length(); i++) {
            listp[p.charAt(i)-'a']++;
            lists[s.charAt(i)-'a']++;
        }

        if (Arrays.equals(listp,lists)) ans.add(0);
        for (int i = p.length(); i < s.length(); i++) {
            lists[s.charAt(i)-'a']++;
            lists[s.charAt(i-p.length())-'a']--;
            if (Arrays.equals(listp,lists)) ans.add(i-p.length()+1);
        }
        return ans;
    }
}
```





### [209. é•¿åº¦æœ€å°çš„å­æ•°ç»„](https://leetcode.cn/problems/minimum-size-subarray-sum/)

ç»™å®šä¸€ä¸ªå«æœ‰ `n` ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° `target` **ã€‚**

æ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶æ€»å’Œå¤§äºç­‰äº `target` çš„é•¿åº¦æœ€å°çš„ 

**å­æ•°ç»„**

`[numsl, numsl+1, ..., numsr-1, numsr]` ï¼Œå¹¶è¿”å›å…¶é•¿åº¦**ã€‚**å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› `0` ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼štarget = 7, nums = [2,3,1,2,4,3]
è¾“å‡ºï¼š2
è§£é‡Šï¼šå­æ•°ç»„ [4,3] æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼štarget = 4, nums = [1,4,4]
è¾“å‡ºï¼š1
```

```java
class Solution {
    public int minSubArrayLen(int target, int[] nums) {
        //æ»‘åŠ¨çª—å£
        int sum = 0;
        int left = 0;
        int ans = Integer.MAX_VALUE;
        for (int right = 0; right < nums.length; right++) {
            sum+=nums[right];
            while (left<nums.length&&sum-nums[left]>=target){
                sum-=nums[left];
                left++;
            }
            if (sum>=target){
                ans = Math.min(ans,right-left+1);
            }
        }
        return ans==Integer.MAX_VALUE?0:ans;
    }
}
```

### [2958. æœ€å¤š K ä¸ªé‡å¤å…ƒç´ çš„æœ€é•¿å­æ•°ç»„](https://leetcode.cn/problems/length-of-longest-subarray-with-at-most-k-frequency/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ã€‚

ä¸€ä¸ªå…ƒç´  `x` åœ¨æ•°ç»„ä¸­çš„ **é¢‘ç‡** æŒ‡çš„æ˜¯å®ƒåœ¨æ•°ç»„ä¸­çš„å‡ºç°æ¬¡æ•°ã€‚

å¦‚æœä¸€ä¸ªæ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ çš„é¢‘ç‡éƒ½ **å°äºç­‰äº** `k` ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç§°è¿™ä¸ªæ•°ç»„æ˜¯ **å¥½** æ•°ç»„ã€‚

è¯·ä½ è¿”å› `nums` ä¸­ **æœ€é•¿å¥½** å­æ•°ç»„çš„é•¿åº¦ã€‚

**å­æ•°ç»„** æŒ‡çš„æ˜¯ä¸€ä¸ªæ•°ç»„ä¸­ä¸€æ®µè¿ç»­éç©ºçš„å…ƒç´ åºåˆ—ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,3,1,2,3,1,2], k = 2
è¾“å‡ºï¼š6
è§£é‡Šï¼šæœ€é•¿å¥½å­æ•°ç»„æ˜¯ [1,2,3,1,2,3] ï¼Œå€¼ 1 ï¼Œ2 å’Œ 3 åœ¨å­æ•°ç»„ä¸­çš„é¢‘ç‡éƒ½æ²¡æœ‰è¶…è¿‡ k = 2 ã€‚[2,3,1,2,3,1] å’Œ [3,1,2,3,1,2] ä¹Ÿæ˜¯å¥½å­æ•°ç»„ã€‚
æœ€é•¿å¥½å­æ•°ç»„çš„é•¿åº¦ä¸º 6 ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [1,2,1,2,1,2,1,2], k = 1
è¾“å‡ºï¼š2
è§£é‡Šï¼šæœ€é•¿å¥½å­æ•°ç»„æ˜¯ [1,2] ï¼Œå€¼ 1 å’Œ 2 åœ¨å­æ•°ç»„ä¸­çš„é¢‘ç‡éƒ½æ²¡æœ‰è¶…è¿‡ k = 1 ã€‚[2,1] ä¹Ÿæ˜¯å¥½å­æ•°ç»„ã€‚
æœ€é•¿å¥½å­æ•°ç»„çš„é•¿åº¦ä¸º 2 ã€‚
```



```java
class Solution {
    public int maxSubarrayLength(int[] nums, int k) {
        HashMap<Integer, Integer> map = new HashMap<>();
        int l = 0;
        int ans = 0;
        for (int i = 0; i < nums.length; i++) {
            // æ–°åŠ å…¥å…ƒç´  x=nums[right] åï¼Œå¦‚æœ x çš„å‡ºç°æ¬¡æ•°è¶…è¿‡ kï¼Œ
            // åˆ™ä¸æ–­å³ç§»å·¦æŒ‡é’ˆ leftï¼Œç›´åˆ°çª—å£å†…çš„ x çš„å‡ºç°æ¬¡æ•°ç­‰äº k ä¸ºæ­¢ï¼Œ
            // ç„¶åç”¨ rightâˆ’left+1 æ›´æ–°ç­”æ¡ˆçš„æœ€å¤§å€¼ã€‚
            map.put(nums[i], map.getOrDefault(nums[i], 0) + 1);
            while (map.get(nums[i])>k){
                map.merge(nums[l], -1, Integer::sum);
                l++;//lå³è¾¹ç§»åŠ¨
            }
            ans = Math.max(ans, i - l+1);
        }
        return ans;
    }
}
```



## å‰ç¼€å’Œç®—æ³•

### å’Œå¤§äºç­‰äºtargetçš„è¿ç»­å­æ•°ç»„ å’Œä¸‹é¢ä¸€æ ·çš„é¢˜

ç»™å®šä¸€ä¸ªå«æœ‰ `n` ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° `target` **ã€‚**

æ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶å’Œ `â‰¥ target` çš„é•¿åº¦æœ€å°çš„ **è¿ç»­å­æ•°ç»„** `[numsl, numsl+1, ..., numsr-1, numsr]` ï¼Œå¹¶è¿”å›å…¶é•¿åº¦**ã€‚**å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› `0` ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼štarget = 7, nums = [2,3,1,2,4,3]
è¾“å‡ºï¼š2
è§£é‡Šï¼šå­æ•°ç»„ [4,3] æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼štarget = 4, nums = [1,4,4]
è¾“å‡ºï¼š1
```

```java
class Solution {
    public int minSubArrayLen(int target, int[] nums) {
        int[] preSum = new int[nums.length+1];
        preSum[0]=0;
        for (int i = 0; i < nums.length; i++) {
            preSum[i+1] = preSum[i]+nums[i];
        }
        int left = 0;
        int right = 1;
        int res = Integer.MAX_VALUE;
        while (right<=nums.length) {
            if (preSum[right]-preSum[left]>=target){
                res = Math.min(right-left,res);
                left++;
                right=left;
            }else
                right++;

        }
        if (res==Integer.MAX_VALUE){
            return 0;
        }else
            return res;
    }
}
```

```java
class Solution {
    public int minSubArrayLen(int target, int[] nums) {
        int[] preSum = new int[nums.length+1];
        preSum[0]=0;
        for (int i = 0; i < nums.length; i++) {
            preSum[i+1] = preSum[i]+nums[i];
        }
        int res = Integer.MAX_VALUE;
        for (int i = 1; i <= nums.length; i++) {
            // å‰ç¼€å’Œæ•°ç»„ä¸‹æ ‡ [0,i] èŒƒå›´å†…æ‰¾åˆ°æ»¡è¶³ã€Œå€¼å°äºç­‰äº sâˆ’targetã€
            // çš„æœ€å¤§ä¸‹æ ‡ï¼Œå……å½“å­æ•°ç»„å·¦ç«¯ç‚¹çš„å‰ä¸€ä¸ªå€¼ã€‚
            // å·¦è¾¹çš„èŒƒå›´å°äºç­‰äºï¼Œé‚£ä¹ˆå°±æ˜¯è¯´preSum[i]-preSum[left]>=target
            int s = preSum[i],d = s-target;
            int left = 0, right = i;
            while (left<right){
                int mid = (left+right+1)>>1;
                if (preSum[mid]<=d) left=mid;//å¦‚æœä¸­é—´çš„å‰ç¼€å’Œå°äºéœ€è¦çš„ã€‚
                else
                    right = mid -1;
            }
            if (preSum[right]<=d) res = Math.min(res,i-right);
        }
        if (res==Integer.MAX_VALUE){
            return 0;
        }else
            return res;
    }
}
```

### offer010. å’Œä¸ºkçš„å­æ•°ç»„ä¸ªæ•°

ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªæ•´æ•° `k` **ï¼Œ**è¯·æ‰¾åˆ°è¯¥æ•°ç»„ä¸­å’Œä¸º `k` çš„è¿ç»­å­æ•°ç»„çš„ä¸ªæ•°ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥:nums = [1,1,1], k = 2
è¾“å‡º: 2
è§£é‡Š: æ­¤é¢˜ [1,1] ä¸ [1,1] ä¸ºä¸¤ç§ä¸åŒçš„æƒ…å†µ
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥:nums = [1,2,3], k = 3
è¾“å‡º: 2
```

**æç¤º:**

- `1 <= nums.length <= 2 * 104`

ç»Ÿè®¡ä»¥æ¯ä¸€ä¸ª nums[_i_] ä¸ºç»“å°¾ï¼Œå’Œä¸º _k_ çš„å­æ•°ç»„æ•°é‡å³æ˜¯ç­”æ¡ˆã€‚

æˆ‘ä»¬å¯ä»¥é¢„å¤„ç†å‰ç¼€å’Œæ•°ç»„ `sum`ï¼ˆå‰ç¼€å’Œæ•°ç»„ä¸‹æ ‡é»˜è®¤ä» 1 å¼€å§‹ï¼‰ï¼Œå¯¹äºæ±‚è§£ä»¥æŸä¸€ä¸ªnums[_i_] Â ä¸ºç»“å°¾çš„ï¼Œå’Œä¸º _k_ çš„å­æ•°ç»„æ•°é‡ï¼Œæœ¬è´¨ä¸Šæ˜¯æ±‚è§£åœ¨ [0,_i_] ä¸­ï¼Œ`sum` æ•°ç»„ä¸­æœ‰å¤šå°‘ä¸ªå€¼ä¸º _sum_[_i_+1]âˆ’_k_ çš„æ•°ï¼Œè¿™å¯ä»¥åœ¨éå†è¿‡ç¨‹ä¸­ä½¿ç”¨ã€Œå“ˆå¸Œè¡¨ã€è¿›è¡ŒåŒæ­¥è®°å½•ã€‚

sumæ˜¯ä»æœ€å·¦è¾¹åˆ°å½“i çš„ä½ç½®çš„ï¼ŒHashMapå­˜å‚¨çš„æ˜¯ä»å‰åˆ°åï¼Œçš„å€¼ï¼Œçœ‹å›¾ç†è§£ä¸€ä¸‹ï¼š

![](https://cdn.jsdelivr.net/gh/52chen/imagebed2023@main/picgo/image-20240229103908505.png#id=G7niX&originHeight=289&originWidth=279&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```java
class Solution {
    public int subarraySum(int[] nums, int k) {
        int n = nums.length, ans = 0;
        int[] pre = new int[n+1];
        for (int i = 0; i < n; i++) {
            pre[i+1] = pre[i] + nums[i];
        }
        HashMap<Integer, Integer> map = new HashMap<>();
        map.put(0,1);
        for (int i = 1; i <= n; i++) {
            int tmp = pre[i], d = tmp-k;//æ±‚è§£åœ¨ [0,i] ä¸­ï¼Œ
            // pre æ•°ç»„ä¸­æœ‰å¤šå°‘ä¸ªå€¼ä¸º pre[i+1]âˆ’k çš„æ•°ï¼Œ
            ans+=map.getOrDefault(d,0);//çœ‹çœ‹æœ‰æ— ç›®æ ‡çš„å€¼
            map.put(tmp,map.getOrDefault(tmp,0)+1);
        }
        return ans;
    }
}
```

### [å‰‘æŒ‡ Offer II 011. 0 å’Œ 1 ä¸ªæ•°ç›¸åŒçš„å­æ•°ç»„](https://leetcode.cn/problems/A1NYOS/)

ç»™å®šä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„ `nums` , æ‰¾åˆ°å«æœ‰ç›¸åŒæ•°é‡çš„ `0` å’Œ `1` çš„æœ€é•¿è¿ç»­å­æ•°ç»„ï¼Œå¹¶è¿”å›è¯¥å­æ•°ç»„çš„é•¿åº¦ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥: nums = [0,1]
è¾“å‡º: 2
è¯´æ˜: [0, 1] æ˜¯å…·æœ‰ç›¸åŒæ•°é‡ 0 å’Œ 1 çš„æœ€é•¿è¿ç»­å­æ•°ç»„ã€‚
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥: nums = [0,1,0]
è¾“å‡º: 2
è¯´æ˜: [0, 1] (æˆ– [1, 0]) æ˜¯å…·æœ‰ç›¸åŒæ•°é‡ 0 å’Œ 1 çš„æœ€é•¿è¿ç»­å­æ•°ç»„ã€‚
```

```java
class Solution {
    public int findMaxLength(int[] nums) {
        int len = nums.length;
        int ans = 0;
        int[] pre = new int[len + 1];
        HashMap<Integer, Integer> map = new HashMap<>();
        //ã€ŒæŸä¸ªå‰ç¼€å’Œå‡ºç°çš„æœ€å°ä¸‹æ ‡ã€
        map.put(0,0);
        for (int i = 0; i < len; i++) {
            pre[i+1] = pre[i]+(nums[i]==0?-1:1);
            //å°† nums[i] ä¸º 0 çš„å€¼å½“åš âˆ’1 å¤„ç†ã€‚
        }
        for (int i = 1; i <= len; i++) {
            int t = pre[i];
            if (map.containsKey(t))
                // get(t)çš„ç›®çš„æ˜¯ï¼Œæ˜¯å‰ç¼€å’Œï¼Œæ‰€ä»¥æ‰¾åˆ°ç›¸åŒçš„tçš„æ—¶å€™ï¼Œ
                // åŒºé—´ä¹‹é—´é•¿åº¦å°±æ˜¯0äº†
                ans = Math.max(ans,i-map.get(t));
//            æ¯éå†ä¸€ä¸ªå…ƒç´ ï¼Œå°±ç”¨ã€Œå½“å‰å‰ç¼€å’Œã€å»å‰é¢å·²ç»ç»Ÿè®¡çš„å‰ç¼€å’Œ
//            ä¸­æ‰¾åˆ°ä¸€ä¸ªä½¿å¾—ä¸¤è€…ä¹‹é—´åŒºé—´ä¸º0çš„ï¼Œå¹¶è®¡ç®—è¿™ä¸ªåŒºé—´é•¿åº¦
            else
                map.put(t,i);
        }
        return ans;
    }
}
```

### [304. äºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜-äºŒç»´å‰ç¼€å’Œç®—æ³•](https://leetcode.cn/problems/range-sum-query-2d-immutable/)

äºŒç»´å‰ç¼€å’Œç®—æ³•

ç»™å®šä¸€ä¸ªäºŒç»´çŸ©é˜µ `matrix`ï¼Œä»¥ä¸‹ç±»å‹çš„å¤šä¸ªè¯·æ±‚ï¼š

- è®¡ç®—å…¶å­çŸ©å½¢èŒƒå›´å†…å…ƒç´ çš„æ€»å’Œï¼Œè¯¥å­çŸ©é˜µçš„å·¦ä¸Šè§’ä¸º `(row1, col1)` ï¼Œå³ä¸‹è§’ä¸º `(row2, col2)` ã€‚

å®ç° `NumMatrix` ç±»ï¼š

- `NumMatrix(int[][] matrix)` ç»™å®šæ•´æ•°çŸ©é˜µ `matrix` è¿›è¡Œåˆå§‹åŒ–
- `int sumRegion(int row1, int col1, int row2, int col2)` è¿”å›å·¦ä¸Šè§’ `(row1, col1)` ã€å³ä¸‹è§’ `(row2, col2)` çš„å­çŸ©é˜µçš„å…ƒç´ æ€»å’Œã€‚

![](https://pic.leetcode-cn.com/1626332422-wUpUHT-image.png#id=gUKfy&originHeight=415&originWidth=415&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```java
class NumMatrix {
    int[][] matrix = null;
    int[][] sum = null;
    public NumMatrix(int[][] matrix) {
        this.matrix=matrix;
        int m = matrix.length;
        int n = matrix[0].length;
        sum=new int[m +1][n +1];
        for (int i = 0; i <m ; i++) {
            for (int j = 0; j < n; j++) {
                sum[i+1][j+1]=sum[i][j+1]+sum[i+1][j]-sum[i][j]+matrix[i][j];
            }
        }
    }
    
    public int sumRegion(int row1, int col1, int row2, int col2) {
        return sum[row2+1][col2+1]-sum[row1][col2+1]-sum[row2+1][col1]+sum[row1][col1];
    }
}
```

## ç®—æ•°è¿ç®—

### æ•´æ•°è½¬ç½—é©¬æ•°å­—
å…³é”®æ˜¯ï¼šéå†è¿™ä¸ªæœ‰åºHashMapå°±å¯ä»¥äº†ã€‚

```java
class Solution {
    public String intToRoman(int num) {
        StringBuilder sb = new StringBuilder();
        HashMap<Integer, String> map = new LinkedHashMap<>(){{
            put(1000,"M");
            put(900,"CM");
            put(500,"D");
            put(400,"CD");
            put(100,"C");
            put(90,"XC");
            put(50,"L");
            put(40,"XL");
            put(10,"X");
            put(9,"IX");
            put(5,"V");
            put(4,"IV");
            put(1,"I");
        }};
        for (Integer i : map.keySet()) {
            while (num>=i){
                num-=i;
                sb.append(map.get(i));
            }
        }
        return sb.toString();
    }
}
```

ç½—é©¬æ•°è½¬æ•´æ•°
```java
class Solution {
    public int romanToInt(String s) {
        //ç½—é©¬æ•°å­—è½¬æ•´æ•°
        Map<Character,Integer> map=new HashMap<Character, Integer>(){{
            put('I',1);
            put('V', 5);
            put('X', 10);
            put('L', 50);
            put('C', 100);
            put('D', 500);
            put('M', 1000);
        }};
        int ans = 0;
        int n = s.length();
        for (int i = 0; i < n; i++) {
            Integer val = map.get(s.charAt(i));
            if (i<n-1&&val<map.get(s.charAt(i+1))){
                ans-=val;
            }else {
                ans+=val;
            }
        }
        return ans;
    }
}
```
### è¿›ä½ä¸éè¿›ä½

è®¾ä¸¤æ•°å­—çš„äºŒè¿›åˆ¶å½¢å¼ ,è§‚å¯Ÿå‘ç°ï¼Œæ— è¿›ä½å’Œ ä¸ å¼‚æˆ–è¿ç®— è§„å¾‹ç›¸åŒï¼Œè¿›ä½ å’Œ ä¸è¿ç®— è§„å¾‹ç›¸åŒï¼ˆå¹¶éœ€å·¦ç§»ä¸€ä½ï¼‰ã€‚

![](assets%5C56d56524d8d2b1318f78e209fffe0e266f97631178f6bfd627db85fcd2503205-Picture1.png#id=Kx3bW&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

```java
// è®¾ä¸¤æ•°å­—çš„äºŒè¿›åˆ¶å½¢å¼aã€b, å…¶æ±‚å’Œs = a + b, a(i)ä»£è¡¨açš„äºŒè¿›åˆ¶ç¬¬iä½, åˆ™åˆ†ä¸ºä»¥ä¸‹å››ç§æƒ…å†µ:
//   a(i)  b(i)  æ— è¿›ä½å’Œn(i) è¿›ä½c(i+1)
//    0     0         0           0
//    0     1         1           0
//    1     0         1           0 
//    1     1         0           1
// 
// è§‚å¯Ÿå‘ç°ï¼Œæ— è¿›ä½å’Œä¸"å¼‚æˆ–è¿ç®—"è§„å¾‹ç›¸åŒï¼Œè¿›ä½å’Œ"ä¸è¿ç®—"è§„å¾‹ç›¸åŒ(å¹¶éœ€å·¦ç§»ä¸€ä½)
// å› æ­¤,æ— è¿›ä½å’Œnä¸è¿›ä½cçš„è®¡ç®—å…¬å¼å¦‚ä¸‹:
//                                     n =  a ^ b         éè¿›ä½å’Œ: å¼‚æˆ–è¿ç®—
//                                     c = (a & b) << 1    è¿›ä½: ä¸è¿ç®—+å·¦ç§»ä¸€ä½
// å› ä¸º (å’Œs) = (éè¿›ä½å’Œn) + (è¿›ä½c) ï¼Œæ‰€ä»¥å³å¯å°† s = a + b è½¬åŒ–ä¸º s = n + c ï¼Œå³ s = a ^ b + (a & b) << 1
// 
// é‡‡ç”¨é€’å½’æ€æƒ³: è™½ç„¶s = a + b = n + cï¼Œä½†æ˜¯n + cè¿˜æ˜¯ç”¨äº†'+'ï¼Œå› æ­¤æˆ‘ä»¬å¯¹n + cå†æ¬¡é‡‡ç”¨è¿™ç§è¿ç®— (ä¹Ÿå°±æ˜¯æŠŠnå½“æˆaï¼Œcå½“æˆbï¼Œç»§ç»­åša+bè¿ç®—ã€‚çœ‹ä¼¼æ— é™å¾ªç¯ï¼Œä½†æ˜¯è¿›ä½cæ€»ä¼šæœ‰ç­‰äº0çš„æ—¶å€™ï¼Œæ­¤æ—¶ç»“æœå°±ç­‰äºn)
// éé€’å½’åŒç†ï¼Œå¾ªç¯æ±‚nå’Œcï¼Œç›´è‡³è¿›ä½c = 0; æ­¤æ—¶s = n, è¿”å›nå³å¯ã€‚

class Solution {
    public int add(int a, int b) {
        // açš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸bçš„äºŒè¿›åˆ¶ï¼Œ
        // æ¯ä¸€ä½å–å¼‚æˆ–è¿ç®—ï¼Œå¾—åˆ°æ— è¿›ä½å’Œçš„ç»“æœï¼Œæ¯ä¸€ä½å–ä¸è¿ç®—ï¼Œå·¦ç§»<<ä¸€ä½ï¼Œå¾—åˆ°è¿›ä½ï¼Œ
        // ä¸ç”¨æ‹…å¿ƒæ•´æ•°è½¬äºŒè¿›åˆ¶ï¼Œå› ä¸ºä»–å°±æ˜¯é»˜è®¤å°±æ˜¯äºŒè¿›åˆ¶å­˜å–çš„ç›´æ¥å»&å°±å¯ä»¥äº†
        while(b!=0){
            int c = (a&b)<<1;//è¿›ä½ï¼Œå·¦ç§»ä¸€ä½
            a = a ^ b;//éè¿›ä½å’Œ
            b=c;//å½“è¿›ä½ä¸º0çš„æ—¶å€™å°±å¯ä»¥ä¸éœ€è¦è¿›ä½ï¼Œç›´æ¥éè¿›ä½å’Œå°±å¯ä»¥äº†
        }
        return a;
    }
}
```

### 29.ä¸ç”¨é™¤æ³•çš„é™¤æ³•ï¼šå€å¢æ±‚è§£

ç»™ä½ ä¸¤ä¸ªæ•´æ•°ï¼Œè¢«é™¤æ•° dividend å’Œé™¤æ•° divisorã€‚å°†ä¸¤æ•°ç›¸é™¤ï¼Œè¦æ±‚ ä¸ä½¿ç”¨ ä¹˜æ³•ã€é™¤æ³•å’Œå–ä½™è¿ç®—ã€‚

æ•´æ•°é™¤æ³•åº”è¯¥å‘é›¶æˆªæ–­ï¼Œä¹Ÿå°±æ˜¯æˆªå»ï¼ˆtruncateï¼‰å…¶å°æ•°éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œ8.345 å°†è¢«æˆªæ–­ä¸º 8 ï¼Œ-2.7335 å°†è¢«æˆªæ–­è‡³ -2 ã€‚

è¿”å›è¢«é™¤æ•° dividend é™¤ä»¥é™¤æ•° divisor å¾—åˆ°çš„ å•† ã€‚

æ³¨æ„ï¼šå‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨ 32 ä½ æœ‰ç¬¦å·æ•´æ•°ï¼Œå…¶æ•°å€¼èŒƒå›´æ˜¯ [âˆ’231, Â 231 âˆ’ 1] ã€‚æœ¬é¢˜ä¸­ï¼Œå¦‚æœå•† ä¸¥æ ¼å¤§äº 231 âˆ’ 1 ï¼Œåˆ™è¿”å› 231 âˆ’ 1 ï¼›å¦‚æœå•† ä¸¥æ ¼å°äº -231 ï¼Œåˆ™è¿”å› -231 ã€‚


æˆ‘ä»¬å…ˆæ¥çœ‹æº¢å‡ºé—®é¢˜ï¼Œè¿™ä¸ªå…¶å®åªè¦å…³æ³¨ä¸€é¡¹å°±å¯ä»¥äº†ï¼Œå³è¢«é™¤æ•°ä¸º Integer.MIN_VALUE è€Œé™¤æ•°ä¸º -1 çš„æƒ…å†µï¼Œå› ä¸ºè´Ÿæ•°çš„æœ€å°å€¼çš„ç»å¯¹å€¼æ¯”æ­£æ•°çš„æœ€å¤§å€¼å¤§ 1ï¼Œæ‰€ä»¥ï¼Œç›´æ¥å–åæ˜¯ä¼šæº¢å‡ºï¼Œè¿™ç§æƒ…å†µç‰¹æ®Šå¤„ç†å³å¯ã€‚
ç„¶åï¼Œé’ˆå¯¹ä¸èƒ½ä¸ä½¿ç”¨ long çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸¤ä¸ªæ•°éƒ½è½¬æ¢æˆè´Ÿæ•°æ¥å¤„ç†ï¼ŒåŸå› åŒä¸Šï¼Œè´Ÿæ•°æˆ‘ä»¬ä¸èƒ½è½»æ˜“è½¬æˆæ­£æ•°æ¥å¤„ç†ã€‚
æˆ‘ä»¬è¿™é‡Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ã€å€å¢ä¹˜æ³•ã€‘æ¥å®ç°ï¼Œæ‰€è°“å€å¢ä¹˜æ³•ï¼Œç®€å•ç†è§£å°±æ˜¯æ¯æ¬¡ç”¨è¢«é™¤æ•°å‡å»[é™¤æ•°çš„æœ€å¤§çš„2_x_]ï¼Œè¿™æ ·å¯ä»¥æå¤§åœ°å¢åŠ å¤„ç†çš„é€Ÿåº¦ã€‚
æ¯”å¦‚ï¼Œå‡å®šè¢«é™¤æ•°ä¸º 20ï¼Œé™¤æ•°ä¸º 3ï¼Œä½¿ç”¨å€ä¹˜æ³•çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š

1. è®¡ç®— 3 çš„ 2_x_ çš„æœ€å¤§å€¼ï¼ˆä¸è¶…è¿‡ 20ï¼‰ï¼Œä¸º 3âˆ—2^2=12ï¼Œæ‹¿ 20âˆ’12 å¾—åˆ° 8ï¼Œåšä¸ºæ–°çš„è¢«é™¤æ•°ã€‚
2. è®¡ç®— 3 çš„ 2_x_ çš„æœ€å¤§å€¼ï¼ˆä¸è¶…è¿‡ 8ï¼‰ï¼Œä¸º 3âˆ—21=6ï¼Œæ‹¿ 8âˆ’6 å¾—åˆ° 2ï¼Œåšä¸ºæ–°çš„è¢«é™¤æ•°ã€‚
3. åˆ¤æ–­æ–°çš„è¢«é™¤æ•° 2 å°äº 3 äº†ï¼Œé€€å‡ºè®¡ç®—è¿‡ç¨‹ï¼Œæœ€åçš„ç»“æœå°±æ˜¯ 22+21=6ã€‚

```java
class Solution {
    public int divide(int dividend, int divisor) {
        if(dividend==Integer.MIN_VALUE && divisor == -1) return Integer.MAX_VALUE;
        //è¿”å›å®Œå¼‚å¸¸å€¼
        //å€å¢æ³•ï¼Œæ¯æ¬¡å‡å»ä¸€ä¸ª2^xå€
        boolean sign = false;
        if((dividend>0&&divisor>0)||(dividend<0&&divisor<0))
            sign = true;//æ­£æ•°æ ‡è®°
        dividend = dividend > 0? -dividend:dividend;
        divisor = divisor > 0? -divisor:divisor;
        int ans = 0;
        //dividend / divisor
        while(dividend<=divisor){
            int tmp = divisor,count =1;
            //tmp + tmp >= dividend
            while(tmp>=dividend-tmp){
                tmp+=tmp;
                count+=count;
            }
            dividend = dividend - tmp;
            ans = ans+count;
        }
        return sign?ans:-ans;
    }
}
```

### å‰‘æŒ‡ Offer II 003. å‰ n ä¸ªæ•°å­—äºŒè¿›åˆ¶ä¸­ 1 çš„ä¸ªæ•°

```
å¦‚æœæˆ‘ä»¬æ˜¯ä½¿ç”¨ã€Œæœ´ç´ è§£æ³•ã€æ±‚è§£çš„è¯ï¼Œæ— è®ºæ˜¯ä»é«˜ä½è¿›è¡Œç»Ÿè®¡ï¼Œè¿˜æ˜¯ä»ä½ä½è¿›è¡Œç»Ÿè®¡ï¼Œæœ€åä¸€ä½æ‰«æçš„éƒ½æ˜¯è¾¹ç¼˜çš„æ•°ï¼ˆå¦‚æœæ˜¯ 1 å°±è®¡æ•°ï¼Œä¸æ˜¯ 1 å°±ä¸è®¡æ•°ï¼‰ã€‚

ä»ä½ä½åˆ°é«˜ä½ï¼Œæœ€åä¸€æ­¥åœ¨æ‰«ææœ€é«˜ä½ä¹‹å‰ï¼Œç»Ÿè®¡å‡º 1 çš„ä¸ªæ•°åº”è¯¥ç­‰åŒäºå°† i å·¦ç§»ä¸€ä½ï¼Œå¹¶åœ¨æœ€ä½ä½è¡¥ 0ï¼Œä¹Ÿå°±æ˜¯ç­‰äº ans[i << 1]ï¼Œè¿™æ—¶å€™å°±è¦æ±‚æˆ‘ä»¬åœ¨è®¡ç®— i çš„æ—¶å€™ i << 1 å·²ç»è¢«ç®—å‡ºæ¥ï¼ˆä»å¤§åˆ°å°éå†ï¼‰
ä»é«˜ä½åˆ°ä½ä½ï¼Œæœ€åä¸€æ­¥åœ¨æ‰«ææœ€ä½ä½ä¹‹å‰ï¼Œç»Ÿè®¡å‡º 1 çš„ä¸ªæ•°åº”è¯¥ç­‰åŒäºå°† i å³ç§»ä¸€ä½ï¼Œå¹¶åœ¨æœ€é«˜ä½è¡¥ 0ï¼Œä¹Ÿå°±æ˜¯ç­‰äº ans[i >> 1]ï¼Œè¿™æ—¶å€™å°±è¦æ±‚æˆ‘ä»¬åœ¨è®¡ç®— i çš„æ—¶å€™ i >> 1 å·²ç»è¢«ç®—å‡ºæ¥ï¼ˆä»å°åˆ°å¤§éå†ï¼‰
```

```java
class Solution {
    public int[] countBits(int n) {
        int[] res = new int[n+1];
        for(int i=1;i<n+1;i++)
        //res[i] = ã€Œi >> 1 æ‰€åŒ…å«çš„ 1 çš„ä¸ªæ•°ã€+ã€Œi çš„æœ€ä½ä½æ˜¯å¦ä¸º 1ã€
            res[i] = res[i>>1] + (i&1);
        return res;
    }
}
```

### [å‰‘æŒ‡ Offer II 004. åªå‡ºç°ä¸€æ¬¡çš„æ•°å­— ](https://leetcode.cn/problems/WGki4K/)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œé™¤æŸä¸ªå…ƒç´ ä»…å‡ºç° **ä¸€æ¬¡** å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ éƒ½æ°å‡ºç° **ä¸‰æ¬¡ ã€‚**è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›é‚£ä¸ªåªå‡ºç°äº†ä¸€æ¬¡çš„å…ƒç´ ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šnums = [2,2,3,2]
è¾“å‡ºï¼š3
```

**ç¤ºä¾‹ 2ï¼š**

```
è¾“å…¥ï¼šnums = [0,1,0,1,0,1,100]
è¾“å‡ºï¼š100
```

**æç¤ºï¼š**

- `1 <= nums.length <= 3 * 104`
- `-231 <= nums[i] <= 231 - 1`
- `nums` ä¸­ï¼Œé™¤æŸä¸ªå…ƒç´ ä»…å‡ºç° **ä¸€æ¬¡** å¤–ï¼Œå…¶ä½™æ¯ä¸ªå…ƒç´ éƒ½æ°å‡ºç° **ä¸‰æ¬¡**

**è¿›é˜¶ï¼š**ä½ çš„ç®—æ³•åº”è¯¥å…·æœ‰çº¿æ€§æ—¶é—´å¤æ‚åº¦ã€‚ ä½ å¯ä»¥ä¸ä½¿ç”¨é¢å¤–ç©ºé—´æ¥å®ç°å—ï¼Ÿ

å“ˆå¸Œè¡¨è§£æ³•çš„ç©ºé—´å¤æ‚åº¦æ˜¯ _O_(_n_) çš„ï¼Œè€Œé¢˜ç›®çš„ã€è¿›é˜¶ã€‘éƒ¨åˆ†æåˆ°åº”å½“ä½¿ç”¨å¸¸æ•°ç©ºé—´æ¥åšã€‚

å…¶ä¸­ä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„åšæ³•ï¼Œæ˜¯åˆ©ç”¨intç±»å‹å›ºå®šä¸º 32 ä½ã€‚

**ä½¿ç”¨ä¸€ä¸ªé•¿åº¦ä¸º 32 çš„æ•°ç»„ cnt[] è®°å½•ä¸‹æ‰€æœ‰æ•°å€¼çš„æ¯ä¸€ä½å…±å‡ºç°äº†å¤šå°‘æ¬¡ 1ï¼Œå†å¯¹cnt[] æ•°ç»„çš„æ¯ä¸€ä½è¿›è¡Œmod 3 æ“ä½œï¼Œé‡æ–°æ‹¼å‡‘å‡ºåªå‡ºç°ä¸€æ¬¡çš„æ•°å€¼ã€‚**

ä¸¾ä¸ª ğŸŒ°ï¼Œè€ƒè™‘æ ·ä¾‹ `[1,1,1,3]`ï¼Œ1 å’Œ 3 å¯¹åº”çš„äºŒè¿›åˆ¶è¡¨ç¤ºåˆ†åˆ«æ˜¯ `00..001` å’Œ `00..011`ï¼Œå­˜å…¥ _c**n**t_[] æ•°ç»„åå¾—åˆ° `[0,0,...,0,1,4]`ã€‚è¿›è¡Œ _m**o**d_ 3 æ“ä½œåå¾—åˆ° `[0,0,...,0,1,1]`ï¼Œå†è½¬ä¸ºåè¿›åˆ¶æ•°å­—å³å¯å¾—ã€Œåªå‡ºç°ä¸€æ¬¡ã€çš„ç­”æ¡ˆ 3ã€‚

```java
class Solution {
    public int singleNumber(int[] nums) {
//        å‡ºç°äº†ä¸‰æ¬¡ï¼Œé‚£ä¹ˆå–æ¨¡3ï¼Œåº”è¯¥å°±æ˜¯ç­‰äº0ï¼›
        int[] cnt = new int[32];
        for (int num : nums) {
            for (int i = 0; i < 32; i++) {
                if(((num>>i) & 1)==1){
                    cnt[i]++;
//                    å¦‚æœå½“å‰å…ƒç´ å³ç§»iä¸ªå•ä½æ˜¯1çš„è¯ï¼Œå°±åœ¨cntåŠ åŠ 
                }
            }
        }
        int ans = 0;
        for (int i = 0; i < 32; i++) {
            if (cnt[i]%3==1)
//                mod 3 ä¹‹åï¼Œå…¶å®ä¹Ÿä¸ä¼šå‡ºç°2ï¼Œå› ä¸ºmod 3 å°±æ˜¯å»æ‰äº†é‡å¤3æ¬¡çš„ï¼Œ
                ans+=(1<<i);
        }
        return ans;
    }
}
```

### [å‰‘æŒ‡ Offer II 005. å•è¯é•¿åº¦çš„æœ€å¤§ä¹˜ç§¯](https://leetcode.cn/problems/aseY1I/)-ä½è¿ç®—

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ `words`ï¼Œè¯·è®¡ç®—å½“ä¸¤ä¸ªå­—ç¬¦ä¸² `words[i]` å’Œ `words[j]` ä¸åŒ…å«ç›¸åŒå­—ç¬¦æ—¶ï¼Œå®ƒä»¬é•¿åº¦çš„ä¹˜ç§¯çš„æœ€å¤§å€¼ã€‚å‡è®¾å­—ç¬¦ä¸²ä¸­åªåŒ…å«è‹±è¯­çš„å°å†™å­—æ¯ã€‚å¦‚æœæ²¡æœ‰ä¸åŒ…å«ç›¸åŒå­—ç¬¦çš„ä¸€å¯¹å­—ç¬¦ä¸²ï¼Œè¿”å› 0ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: words = ["abcw","baz","foo","bar","fxyz","abcdef"]
è¾“å‡º: 16 
è§£é‡Š: è¿™ä¸¤ä¸ªå•è¯ä¸º "abcw", "fxyz"ã€‚å®ƒä»¬ä¸åŒ…å«ç›¸åŒå­—ç¬¦ï¼Œä¸”é•¿åº¦çš„ä¹˜ç§¯æœ€å¤§ã€‚
```

æ ¹æ®é¢˜æ„è¿›è¡Œæ¨¡æ‹Ÿå³å¯ï¼Œåˆ©ç”¨æ¯ä¸ª *w**or**d**s**[_i_] åªæœ‰å°å†™å­—æ¯ï¼Œä¸”åªéœ€è¦åŒºåˆ†ä¸¤å­—ç¬¦æ˜¯å¦æœ‰å­—æ¯é‡å¤ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ª `int` æ¥ä»£æŒ‡æŸä¸ª _w**or**d_[_i_]ï¼šä½ 26 æ¥ä»£æŒ‡å­—æ¯ `a-z` æ˜¯å¦å‡ºç°è¿‡ã€‚

ç„¶åå¯¹æ¯ä¸ªã€Œå­—ç¬¦å¯¹ã€æ‰€å¯¹åº”çš„ä¸¤ä¸ª `int` å€¼æ‰§è¡Œ `&` æ“ä½œï¼ˆè‹¥ä¸¤å­—ç¬¦æ— é‡å¤å­—ç¬¦ï¼Œåˆ™ç»“æœä¸º 0ï¼‰ï¼Œå¹¶å¾—å‡ºæœ€ç»ˆç­”æ¡ˆã€‚

ä½è¿ç®—ï¼šæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ä¸ç›¸åŒ

```java
class Solution {
    public int maxProduct(String[] words) {
//        ä½è¿ç®—ï¼Œè¿›è¡Œ&æ“ä½œï¼Œå¦‚æœä¸¤ä¸ªå­—ç¬¦æœ‰é‡å¤çš„å­—ç¬¦é©¬ï¼Œé‚£ä¹ˆå°±æ˜¯1ï¼Œæ— é‡å¤çš„å°±æ˜¯0
        int length = words.length;
        int idx = 0;
        int[] masks = new int[length];
        for (String word : words) {
            int t = 0;
            for (int i = 0; i < word.length(); i++) {
                int u = word.charAt(i)-'a';
                t |= (1<<u);
            }
//            å¯¹æ¯ä¸€ä¸ªwordè¿›è¡Œæˆ–è¿ç®—ï¼Œè®¡ç®—1å·¦ç§»uä½çš„ï¼Œ
//            åˆ™ abc å¯ä»¥è¡¨ç¤ºä¸º 111 def å¯ä»¥è¡¨ç¤ºä¸º 111000
            masks[idx++] = t;
        }
        int ans = 0;
        for (int i = 0; i < length; i++) {
            for (int j = 0; j < i; j++) {
//         // å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²ä¸åŒ…å«ç›¸åŒå…ƒç´  é‚£ä¹ˆä¸è¿ç®—è‚¯å®šä¸º 0
                if ((masks[i]&masks[j])==0)
                    ans = Math.max(ans, words[i].length() * words[j].length());
            }
        }
        return ans;
    }
}
```

### [å‰‘æŒ‡ Offer II 070. æ’åºæ•°ç»„ä¸­åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—](https://leetcode.cn/problems/skFtm2/)

éš¾åº¦ä¸­ç­‰61æ”¶è—åˆ†äº«åˆ‡æ¢ä¸ºè‹±æ–‡æ¥æ”¶åŠ¨æ€åé¦ˆ

ç»™å®šä¸€ä¸ªåªåŒ…å«æ•´æ•°çš„æœ‰åºæ•°ç»„ `nums` ï¼Œæ¯ä¸ªå…ƒç´ éƒ½ä¼šå‡ºç°ä¸¤æ¬¡ï¼Œå”¯æœ‰ä¸€ä¸ªæ•°åªä¼šå‡ºç°ä¸€æ¬¡ï¼Œè¯·æ‰¾å‡ºè¿™ä¸ªå”¯ä¸€çš„æ•°å­—ã€‚

ä½ è®¾è®¡çš„è§£å†³æ–¹æ¡ˆå¿…é¡»æ»¡è¶³ `O(log n)` æ—¶é—´å¤æ‚åº¦å’Œ `O(1)` ç©ºé—´å¤æ‚åº¦ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: nums = [1,1,2,3,3,4,4,8,8]
è¾“å‡º: 2
```

```java
class Solution {
    public int singleNonDuplicate(int[] nums) {
        int left = 0;
        
        int right = nums.length-1;
        while(left<right){
            int mid = (left+right)/2;
            if(nums[mid]==nums[mid^1]){
                left = mid+1;
                //å¦‚æœmidæ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆå¼‚æˆ–1çš„ç»“æœæ˜¯mid-1ï¼›æ‰€ä»¥å°±ç›¸å½“äºæ˜¯æ¯”è¾ƒmidå’Œmid-1æ˜¯å¦æ˜¯ä¸€æ ·çš„
                // ç”±äºå‰å¶åå¥‡ç›¸ç­‰ï¼Œé¡ºåºæ˜¯å¯¹çš„ï¼Œæ‰€ä»¥ç¼©å°èŒƒå›´ï¼Œleft = mid+1ï¼›

                 //å¦‚æœmidæ˜¯å¶æ•°ï¼Œé‚£ä¹ˆå¼‚æˆ–1çš„ç»“æœæ˜¯mid+1ï¼›æ‰€ä»¥å°±ç›¸å½“äºæ˜¯æ¯”è¾ƒmidå’Œmid+1æ˜¯å¦æ˜¯ä¸€æ ·çš„
                // ç”±äºå‰å¶åå¥‡ç›¸ç­‰ï¼Œé¡ºåºæ˜¯å¯¹çš„ï¼Œæ‰€ä»¥ç¼©å°èŒƒå›´ï¼Œleft = mid+1ï¼›
            }else right = mid;
        }
        return nums[left];
    }
}
```

### [43. å­—ç¬¦ä¸²ç›¸ä¹˜](https://leetcode.cn/problems/multiply-strings/)

ç»™å®šä¸¤ä¸ªä»¥å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºçš„éè´Ÿæ•´æ•° `num1` å’Œ `num2`ï¼Œè¿”å› `num1` å’Œ `num2` çš„ä¹˜ç§¯ï¼Œå®ƒä»¬çš„ä¹˜ç§¯ä¹Ÿè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²å½¢å¼ã€‚

**æ³¨æ„ï¼š**ä¸èƒ½ä½¿ç”¨ä»»ä½•å†…ç½®çš„ BigInteger åº“æˆ–ç›´æ¥å°†è¾“å…¥è½¬æ¢ä¸ºæ•´æ•°ã€‚

**ç¤ºä¾‹ 1:**

```
è¾“å…¥: num1 = "2", num2 = "3"
è¾“å‡º: "6"
```

**ç¤ºä¾‹ 2:**

```
è¾“å…¥: num1 = "123", num2 = "456"
è¾“å‡º: "56088"
```

```java
class Solution {
    public String multiply(String num1, String num2) {
        if (num1.equals("0") || num2.equals("0")) return "0";
        String res = "0";
        for (int i = num2.length()-1; i >=0 ; i--) {
            int carry = 0;//çºªå½•è¿›ä½
            StringBuilder sb = new StringBuilder();
            for (int j = 0; j < num2.length()-1-i; j++) {
                sb.append(0);//sbæ˜¯é€†åºçš„ï¼Œå› æ­¤ï¼Œå‡å¦‚è¯´æ˜¯ç¬¬2ä¸ªnum2çš„æ•°å­—ï¼Œé‚£å°±æ˜¯sbä»£è¡¨çš„æ•°å­—è¦è¿›10ã€‚
            }
            int n2 = num2.charAt(i)-'0';
            //num2çš„ç¬¬iä½æ•°å­—ä¸num1æƒ³æˆ
            for (int j = num1.length()-1; j >=0 || carry!=0; j--) {
                int n1 = j<0?0:num1.charAt(j)-'0';
                int product = (n1*n2+carry)%10;
                sb.append(product);
                carry = (n1*n2+carry)/10;
            }
            res = addStrings(res,sb.reverse().toString());
        }
        return res;
    }
    private String addStrings(String num1,String num2){
        StringBuilder sb = new StringBuilder();
        int carry = 0;
        for (int i = num1.length()-1,j = num2.length()-1;
             i >=0 || j>=0||carry!=0 ;
             i--,j--) {
            int x = i<0?0:num1.charAt(i)-'0';
            int y = j<0?0:num2.charAt(j)-'0';
            int sum = (x+y+carry)%10;
            sb.append(sum);
            carry = (x+y+carry)/10;
        }
        return sb.reverse().toString();
    }
}
```

### å®ç°ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸åŠ 

```java
private String addStrings(String num1,String num2){
        StringBuilder sb = new StringBuilder();
        int carry = 0;
        for (int i = num1.length()-1,j = num2.length()-1;
             i >=0 || j>=0||carry!=0 ;
             i--,j--) {
            int x = i<0?0:num1.charAt(i)-'0';
            int y = j<0?0:num2.charAt(j)-'0';
            int sum = (x+y+carry)%10;
            sb.append(sum);
            carry = (x+y+carry)/10;
        }
        return sb.reverse().toString();
 }
```

### [50. Pow(x, n)](https://leetcode.cn/problems/powx-n/)

å®ç° [pow(_x_, _n_)](https://www.cplusplus.com/reference/valarray/pow/) ï¼Œå³è®¡ç®— `x` çš„æ•´æ•° `n` æ¬¡å¹‚å‡½æ•°ï¼ˆå³ï¼Œ`xn` ï¼‰ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šx = 2.00000, n = 10
è¾“å‡ºï¼š1024.00000
```

```java
class Solution {
    public double myPow(double x, int n) {
        //å¿«é€Ÿå¹‚ï¼ŒäºŒè¿›åˆ¶
        //x^9 = (x^1) * (x^0*2) * (x^0*4) * (x^1*8)
        //å°±æ˜¯9çš„äºŒè¿›åˆ¶ 1 0 0 1 ç„¶åä¹˜ä»¥å¯¹åº”çš„2^(i-1)
        if (x == 0.0f) return 0.0d;
        long b = n;
        double res = 1.0;
        if (b < 0) {
            x = 1/x;
            b = -b;
        }
        //x^n = (x^2) ^ (n/2),å°†æŒ‡æ•°né™¤ä»¥äºŒï¼Œå¦‚æœæ˜¯å¶æ•°åˆ™æ­£å¸¸ï¼Œå¦‚æœæ˜¯å¥‡æ•°ï¼Œç”±äºæ˜¯å‘ä¸‹å–æ•´ï¼Œæ‰€ä»¥åé¢å¤šä¹˜ä»¥x
        while (b > 0) {
            if ((b&1) == 1) res *= x; //å¯¹bå–ä½™æ•°ï¼Œb%2 = b&1;
            //å½“ n ä¸ºå¥‡æ•°æ—¶ï¼ŒäºŒåˆ†åä¼šå¤šå‡ºä¸€é¡¹ x ã€‚æ‰€ä»¥è¦å¤šä¹˜ä¸€æ¬¡x
            x *= x;//xçš„å¹³æ–¹
            b>>=1;
        }
        return res;
    }
}
```

### 66.åŠ ä¸€

ç»™å®šä¸€ä¸ªç”± **æ•´æ•°** ç»„æˆçš„ **éç©º** æ•°ç»„æ‰€è¡¨ç¤ºçš„éè´Ÿæ•´æ•°ï¼Œåœ¨è¯¥æ•°çš„åŸºç¡€ä¸ŠåŠ ä¸€ã€‚

æœ€é«˜ä½æ•°å­—å­˜æ”¾åœ¨æ•°ç»„çš„é¦–ä½ï¼Œ æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ åªå­˜å‚¨**å•ä¸ª**æ•°å­—ã€‚

ä½ å¯ä»¥å‡è®¾é™¤äº†æ•´æ•° 0 ä¹‹å¤–ï¼Œè¿™ä¸ªæ•´æ•°ä¸ä¼šä»¥é›¶å¼€å¤´ã€‚

**ç¤ºä¾‹ 1ï¼š**

```
è¾“å…¥ï¼šdigits = [1,2,3]
è¾“å‡ºï¼š[1,2,4]
è§£é‡Šï¼šè¾“å…¥æ•°ç»„è¡¨ç¤ºæ•°å­— 123ã€‚
```

```java
class Solution {
    public int[] plusOne(int[] digits) {
        int len = digits.length;
        for (int i = len -1; i >= 0; i--) {
            digits[i]++;
            digits[i]%=10;
            if (digits[i]!=0)
                return digits;
        }
        digits = new int[len+1];
//        for (int digit : digits) {
//            System.out.println(digit);//å…¶å®æ­¤æ—¶æ‰€æœ‰ä½ç½®éƒ½æ˜¯é›¶äº†
//        }
        digits[0] = 1;
        return digits;
    }
}Æ’
```

### æ±‚è§£æœ€å¤§å…¬çº¦æ•°GCD

åœ¨Javaä¸­ï¼Œæ±‚ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°ï¼ˆGreatest Common Divisor, GCDï¼‰å¯ä»¥é€šè¿‡å¤šç§æ–¹æ³•å®ç°ï¼Œæœ€å¸¸ç”¨çš„æ˜¯è¾—è½¬ç›¸é™¤æ³•ï¼ˆä¹Ÿç§°ä¸ºæ¬§å‡ é‡Œå¾—ç®—æ³•ï¼‰ã€‚è¿™ç§æ–¹æ³•åŸºäºä¸€ä¸ªå®šç†ï¼šä¸¤ä¸ªæ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°ç­‰äºå…¶ä¸­è¾ƒå°æ•°å’Œä¸¤æ•°ç›¸é™¤ä½™æ•°çš„æœ€å¤§å…¬çº¦æ•°ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨è¾—è½¬ç›¸é™¤æ³•åœ¨Javaä¸­è®¡ç®—ä¸¤ä¸ªæ•°æœ€å¤§å…¬çº¦æ•°çš„ç¤ºä¾‹ä»£ç ï¼š

```java
public class Main {
    public static void main(String[] args) {
        int num1 = 60;
        int num2 = 48;
        System.out.println("The GCD of " + num1 + " and " + num2 + " is: " + gcd(num1, num2));
    }

    // ä½¿ç”¨è¾—è½¬ç›¸é™¤æ³•æ±‚æœ€å¤§å…¬çº¦æ•°
    public static int gcd(int a, int b) {
        while (b != 0) {
            int temp = b;
            b = a % b;
            a = temp;
        }
        return a;
    }
}
```

## äºŒè¿›åˆ¶è¿ç®—-^

### ä½è¿ç®— [æ±‚åªå‡ºç°ä¸€æ¬¡çš„ä¸¤ä¸ªå…ƒç´ ](https://www.nowcoder.com/questionTerminal/389fc1c3d3be4479a154f63f495abff8)

ä¸€ä¸ªæ•´å‹æ•°ç»„é‡Œé™¤äº†ä¸¤ä¸ªæ•°å­—åªå‡ºç°ä¸€æ¬¡ï¼Œå…¶ä»–çš„æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚è¯·å†™ç¨‹åºæ‰¾å‡ºè¿™ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚

æ•°æ®èŒƒå›´ï¼šæ•°ç»„é•¿åº¦ 2â‰¤nâ‰¤10002\le n \le 10002â‰¤nâ‰¤1000ï¼Œæ•°ç»„ä¸­æ¯ä¸ªæ•°çš„å¤§å° 0<valâ‰¤10000000 < val \le 10000000<valâ‰¤1000000
è¦æ±‚ï¼šç©ºé—´å¤æ‚åº¦ O(1)O(1)O(1)ï¼Œæ—¶é—´å¤æ‚åº¦ O(n)O(n)O(n)

![å›¾ç‰‡æ ‡é¢˜](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/53C41BB50881E6B82CA24E9B997CB268.png#id=BphHG&originHeight=490&originWidth=622&originalType=binary&ratio=1&rotation=0&showTitle=true&status=done&style=none&title=%E5%9B%BE%E7%89%87%E6%A0%87%E9%A2%98 "å›¾ç‰‡æ ‡é¢˜")

å¦‚ä¸Šé¢ä¾‹å­ä¸­çš„æ•°ç»„ï¼Œæˆ‘ä»¬æ¯åšä¸€æ¬¡å¼‚æˆ–è¿ç®—ï¼Œæœ€åçš„1ä¼šè¢«æ¶ˆå»ï¼Œåªå‰©ä¸‹4å’Œ6çš„å¼‚æˆ–ç»“æœxorã€‚
ç„¶åæˆ‘ä»¬å†æ‰¾è¿™ä¸ªxorçš„æœ€åä¸€ä¸ª1çš„ä½ç½®:xor-xor&(xor-1)
å› ä¸ºæ ¹æ®é¢˜ç›®è¦æ±‚æœ‰ä¸¤ä¸ªæ•°æ˜¯ä¸é‡å¤çš„ï¼Œæ‰€ä»¥æœ€åä¸€ä¸ª1çš„ä½ç½®è¯´æ˜è¿™ä¸¤ä¸ªæ•°åœ¨è¿™ä¸ªä½ç½®ä¸Šçš„äºŒè¿›åˆ¶çš„æ•°å­—æ˜¯ä¸åŒçš„ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸ªç‰¹æ€§ç»™å®ƒä»¬åˆ†åˆ«å­˜æ”¾åœ¨å®¹é‡ä¸º2çš„æ•°ç»„çš„ä¸åŒçš„ä½ç½®ä¸­ã€‚å¾—åˆ°æœ€åçš„1è¿™ä¸ªæ•°å­—ä¹‹åï¼Œç”¨è¿™ä¸ªæ•°å†æ¬¡ä¸æ•´ä¸ªæ•°ç»„è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼Œé‡å¤çš„æ•°ä¼šè¢«æ¶ˆå»ï¼Œåªå‰©ä¸‹é‚£ä¸ªå”¯ä¸€çš„å€¼å°±æ˜¯ç»“æœã€‚ä¸‹é¢ç»™å‡ºå®Œæ•´ä»£ç :

åˆ†ç»„çš„æ—¶å€™ï¼š

```java
// æ‰¾åˆ°é‚£ä¸ªå¯ä»¥å……å½“åˆ†ç»„å»è¿›è¡Œä¸è¿ç®—çš„æ•°
        // ä»æœ€ä½ä½å¼€å§‹æ‰¾èµ·
        int mask = 1;
        while((tmp&mask) == 0){
            mask <<= 1;
        }
```

è¿™æ ·çš„è¯ä¹Ÿæ˜¯å¯ä»¥ç›´æ¥æ‰¾åˆ°æœ€å³è¾¹çš„ä½ç½®çš„1çš„

```java
public int[] FindNumsAppearOnce (int[] nums) {
        int[] ans = new int[2];
        int mark = nums[0];
        for (int i = 1; i < nums.length; i++) {
            mark ^= nums[i];
        }
        mark -=mark&(mark-1);
        for(int i:nums){
            if((mark&i) == 0){
                ans[0] ^=i;
            }else{
                ans[1]^=i;
            }
        }
        if(ans[0] > ans[1]) {
            int temp = ans[0];
            ans[0] = ans[1];
            ans[1] = temp;
        }     
        return ans;
    }
```

### TSPæ—…è¡Œå•†ç®—æ³•

**æè¿°**

å°æ˜ç›®å‰åœ¨åšä¸€ä»½æ¯•ä¸šæ—…è¡Œçš„è§„åˆ’ã€‚æ‰“ç®—ä»åŒ—äº¬å‡ºå‘ï¼Œåˆ†åˆ«å»è‹¥å¹²ä¸ªåŸå¸‚ï¼Œç„¶åå†å›åˆ°åŒ—äº¬ï¼Œæ¯ä¸ªåŸå¸‚ä¹‹é—´å‡ä¹˜åé«˜é“ï¼Œä¸”æ¯ä¸ªåŸå¸‚åªå»ä¸€æ¬¡ã€‚ç”±äºç»è´¹æœ‰é™ï¼Œå¸Œæœ›èƒ½å¤Ÿé€šè¿‡åˆç†çš„è·¯çº¿å®‰æ’å°½å¯èƒ½çš„çœä¸€äº›è·¯ä¸Šçš„èŠ±é”€ã€‚ç»™å®šä¸€ç»„åŸå¸‚å’Œæ¯å¯¹åŸå¸‚ä¹‹é—´çš„ç«è½¦ç¥¨çš„ä»·é’±ï¼Œæ‰¾åˆ°æ¯ä¸ªåŸå¸‚åªè®¿é—®ä¸€æ¬¡å¹¶è¿”å›èµ·ç‚¹çš„æœ€å°è½¦è´¹èŠ±é”€ã€‚

**è¾“å…¥æè¿°ï¼š**

åŸå¸‚ä¸ªæ•°nï¼ˆ1<nâ‰¤20ï¼ŒåŒ…æ‹¬åŒ—äº¬ï¼‰

åŸå¸‚é—´çš„è½¦ç¥¨ä»·é’± nè¡Œnåˆ—çš„çŸ©é˜µ` m[n][n]`

**è¾“å‡ºæè¿°ï¼š**

æœ€å°è½¦è´¹èŠ±é”€ s

**ç¤ºä¾‹1**

è¾“å…¥ï¼š

```
4
0 2 6 5
2 0 4 4
6 4 0 2
5 4 2 0
```

è¾“å‡ºï¼š

```
13
```

è¯´æ˜ï¼š

```
å…± 4 ä¸ªåŸå¸‚ï¼ŒåŸå¸‚ 1 å’ŒåŸå¸‚ 1 çš„è½¦è´¹ä¸º0ï¼ŒåŸå¸‚ 1 å’ŒåŸå¸‚ 2 ä¹‹é—´çš„è½¦è´¹ä¸º 2ï¼ŒåŸå¸‚ 1 å’ŒåŸå¸‚ 3 ä¹‹é—´çš„è½¦è´¹ä¸º 6ï¼ŒåŸå¸‚ 1 å’ŒåŸå¸‚ 4 ä¹‹é—´çš„è½¦è´¹ä¸º 5ï¼Œä¾æ¬¡ç±»æ¨ã€‚å‡è®¾ä»»æ„ä¸¤ä¸ªåŸå¸‚ä¹‹é—´å‡æœ‰å•ç¨‹ç¥¨å¯è´­ä¹°ï¼Œä¸”ç¥¨ä»·åœ¨1000å…ƒä»¥å†…ï¼Œæ— éœ€è€ƒè™‘æç«¯æƒ…å†µã€‚
```

æ•°å­—è¡¨ç¤ºæ—…è¡Œå•†é—®é¢˜


![](https://fastly.jsdelivr.net/gh/52chen/imagebed2023@main/uPic/CleanShot%202024-04-13%20at%2020.29.15@2x.png#id=tmSif&originHeight=1258&originWidth=2636&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

æ¯”å¦‚ [1,[]]è¡¨ç¤ºå°±æ˜¯ä»1åˆ°0çš„è·¯è´¹ä¹Ÿå°±æ˜¯ ç¬¬ä¸€è¡Œçš„1åˆ°0çš„è´¹ç”¨å°±æ˜¯1.

[2,{1,3}]è¡¨ç¤ºå°±æ˜¯ä»2åˆ°ç»è¿‡1å’Œ3åˆ°0çš„è´¹ç”¨å°±æ˜¯2åˆ°1çš„è´¹ç”¨åŠ ä¸Š[1,{3}]ï¼Œä¸2åˆ°3çš„è´¹ç”¨åŠ ä¸Š[3,{1}]çš„è´¹ç”¨çš„æœ€å°å€¼ã€‚

```
åˆ†æï¼š
å‡è®¾æœ‰0,1,2,3å››ä¸ªåŸå¸‚ï¼Œèµ·ç‚¹ä¸ä¼šå½±å“ç»“æœï¼Œå› æ­¤é€‰åŸå¸‚0ä¸ºèµ·ç‚¹ï¼Œåˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„dp[][]ï¼Œç”¨äºŒç»´æ•°ç»„å…ƒç´ çš„å€¼ä»£è¡¨æœ€ä½èŠ±è´¹ï¼Œç”¨è¡Œåæ ‡ä»£è¡¨èµ·ç‚¹åŸå¸‚ï¼Œåˆ—åæ ‡ä»£è¡¨æ¥ä¸‹æ¥è¦å»çš„åŸå¸‚ï¼ˆæ³¨åˆ—åæ ‡ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œå¦‚æ¥ä¸‹æ¥å»1,3åŸå¸‚ï¼Œåˆ™ä½¿äºŒè¿›åˆ¶æ•°ç¬¬ä¸€ä¸‰ä½ä¸º1ï¼Œå³ç”¨101è¡¨ç¤ºï¼‰ã€‚

å› æ­¤ä»¥0ä¸ºèµ·ç‚¹çš„æœ€ä½èŠ±è´¹å¯è¡¨ç¤ºä¸ºdp[0][111];
ä»¥0ä¸ºèµ·ç‚¹ä¸‰ç§æƒ…å†µï¼š
ä»¥0ä¸ºèµ·ç‚¹ï¼Œå†è¿›ä¸€æ­¥é€‰å®š3ä¸ºèµ·ç‚¹ï¼Œæœ€ä½èŠ±è´¹å¯è¡¨ç¤ºä¸ºcost[0][3]+dp[3][011];
ä»¥0ä¸ºèµ·ç‚¹ï¼Œå†è¿›ä¸€æ­¥é€‰å®š2ä¸ºèµ·ç‚¹ï¼Œæœ€ä½èŠ±è´¹å¯è¡¨ç¤ºä¸ºcost[0][2]+dp[2][101];
ä»¥0ä¸ºèµ·ç‚¹ï¼Œå†è¿›ä¸€æ­¥é€‰å®š1ä¸ºèµ·ç‚¹ï¼Œæœ€ä½èŠ±è´¹å¯è¡¨ç¤ºä¸ºcost[0][1]+dp[1][110];
å–ä¸Šé¢ä¸‰ä¸ªå¼å­æœ€å°å€¼ï¼Œå‡è®¾ç¬¬ä¸€ç§æœ€å°ï¼Œå³cost[0][3]+dp[3][011]æœ€å°
ä»¥0ä¸ºèµ·ç‚¹ï¼Œå†è¿›ä¸€æ­¥é€‰å®š3ä¸ºèµ·ç‚¹ä¸¤ç§æƒ…å†µï¼š
ä»¥0ä¸ºèµ·ç‚¹ï¼Œå†è¿›ä¸€æ­¥é€‰å®š3ä¸ºèµ·ç‚¹ï¼Œå†è¿›ä¸€æ­¥é€‰å®š2ä¸ºèµ·ç‚¹ï¼Œæœ€ä½èŠ±è´¹å¯è¡¨ç¤ºä¸ºcost[0][3]+cost[3][2]+dp[2][001];
ä»¥0ä¸ºèµ·ç‚¹ï¼Œå†è¿›ä¸€æ­¥é€‰å®š3ä¸ºèµ·ç‚¹ï¼Œå†è¿›ä¸€æ­¥é€‰å®š1ä¸ºèµ·ç‚¹ï¼Œæœ€ä½èŠ±è´¹å¯è¡¨ç¤ºä¸ºcost[0][3]+cost[3][1]+dp[1][010];
å–ä¸Šé¢ä¸¤ä¸ªå¼å­æœ€å°å€¼ï¼Œå‡è®¾ç¬¬ä¸€ç§æœ€å°ï¼Œå³cost[0][3]+cost[3][2]+dp[2][001]æœ€å°
æœ€ä½èŠ±è´¹å¯è¡¨ç¤ºä¸ºcost[0][3]+cost[3][2]+cost[2][1]+dp[1][000]
```

```java
public class Main {
    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        // æ³¨æ„ hasNext å’Œ hasNextLine çš„åŒºåˆ«
        while (in.hasNextInt()) { // æ³¨æ„ while å¤„ç†å¤šä¸ª case
            int n = in.nextInt();
            int[][] m = new int[n][n];
            for(int i=0;i<n;i++){
                for(int j=0;j<n;j++){
                    m[i][j]=in.nextInt();
                }
            }
            int min_cost = tsp(m,n);
            System.out.println(min_cost);
        }
    }
    public static int tsp(int[][] map,int N){
        //æ¯”è¯´æ˜¯4ä¸ªåŸå¸‚ï¼Œéœ€è¦2^3 = 8 = 1000 jçš„åæ ‡åªèƒ½æ˜¯ 000,001,010,100,101,110,111 æœ€å¤šæ˜¯7
        int[][] dp = new int[N][(int)Math.pow(2, N-1)];
        //æ—…è¡Œå•†é—®é¢˜ï¼Œå°±æ˜¯è¡¨ç¤ºåˆå§‹ç‚¹åˆ°iä½ç½®ï¼Œéœ€è¦ç»è¿‡é›†åˆVçš„çš„å¯èƒ½æ€§ã€‚
        //åŠ¨æ€è§„åˆ’å…¬å¼ d(i,V) è¡¨ç¤ºä»é¡¶ç‚¹ i å‡ºå‘ç»è¿‡ V(æ˜¯ä¸€ä¸ªç‚¹çš„é›†åˆ)
        // ä¸­å„ä¸ªé¡¶ç‚¹ä¸€æ¬¡ä¸”ä»…ä¸€æ¬¡ï¼Œæœ€åå›åˆ°å‡ºå‘ç‚¹ s çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚
        //æ ¹æ®ä¸Šè¿°ç»™çš„æµ‹è¯•ç”¨ä¾‹æœ‰ 4 ä¸ªåŸå¸‚ç¼–å· 0,1,2,3ã€‚é‚£ä¹ˆè®¿é—® n 4 ä¸ªåŸå¸‚
        //ï¼Œæ°å¥½è®¿é—®æ¯ä¸ªåŸå¸‚ä¸€æ¬¡ï¼Œå¹¶æœ€ç»ˆå›åˆ°å‡ºå‘åŸå¸‚çš„å˜´çŸ­è·ç¦»å¯è¡¨ç¤ºä¸º
        // d(0,{1,2,3}), 
        //é›†åˆ {1,3} è¡¨ç¤ºä¸ºäºŒè¿›åˆ¶ä¸º 101æ˜¯ä»å³è¾¹åˆ°å·¦è¾¹ 321
        for (int j = 0; j < dp[0].length; j++) {
            // å››ä¸ªåŸå¸‚ 0 1 2 3ï¼Œ
            //å¤–å±‚éå†ï¼šj = 000,001,010,100,101,110,111
            for (int i = 0; i < dp.length; i++) {
                //å¤–å±‚å¾ªç¯éå†æ‰€æœ‰å¯èƒ½çš„é›†åˆ Vï¼Œå†…å±‚å¾ªç¯éå†æ‰€æœ‰å¯èƒ½çš„ç»ˆç‚¹åŸå¸‚ iã€‚
                // å†…å±‚æ˜¯ï¼ši=0 1 2 3,i = 0;
                dp[i][j]=Integer.MAX_VALUE;
                //å¦‚æœå½“å‰çŠ¶æ€ V ä¸ºç©ºï¼ˆå³ j == 0ï¼‰ï¼Œj=000,ä¸”å½“å‰åŸå¸‚ä¸æ˜¯èµ·å§‹åŸå¸‚ï¼Œ
                //åˆ™å°† dp[i][j] è®¾ç½®ä¸ºä»å½“å‰åŸå¸‚åˆ°èµ·å§‹åŸå¸‚çš„è·ç¦»ã€‚
                if(j==0&&i!=0) dp[i][j]=map[i][0];
                //i!=0å°±æ˜¯ä¸æ˜¯èµ·å§‹åŸå¸‚ï¼Œj==0å°±æ˜¯ç©ºé›†çš„æ—¶å€™ï¼Œ1ï¼Œ2ï¼Œ3åŸå¸‚åˆå§‹åŒ–ã€‚
                //dp:
                // 0  000,001,010,100,101,110,111
                // 1 åˆå§‹åŒ–
                // 2 åˆå§‹åŒ–
                // 3 åˆå§‹åŒ–
                else{
                    //1 << (i-1) è¡¨ç¤ºå°†ä»å³è¾¹å¾€å·¦è¾¹æ•°ï¼Œä»1å¼€å§‹ï¼Œç¬¬ i ä½è®¾ç½®ä¸º1ï¼Œå…¶ä»–ä½éƒ½æ˜¯0ã€‚
                    //å¯¹äº i = 3ï¼Œ1 << (i-1) å°±æ˜¯ 100ã€‚j=1XXéƒ½ç›´æ¥è·³è¿‡ï¼Œä¸å…è®¸èµ°
                    if((j&(1<<(i-1)))!=0) continue;//å› ä¸ºè·¯å¾„ä¸å…è®¸ç»è¿‡è‡ªèº«åŸå¸‚ã€‚
                    //å¦‚æœå½“å‰éå†çš„jçš„äºŒè¿›åˆ¶æ•°å€¼ã€Š110ã€‹åŒ…å«äº†è‡ªèº«çš„åŸå¸‚å°±ç›´æ¥è·³è¿‡ï¼Œåªéå†æ­£å¸¸çš„åŸå¸‚ã€‚
                    for(int k=1;k<N;k++){
                        if((j>>(k-1)&1)==1){//jå³è¾¹ç§»åŠ¨å°±æ˜¯éå†ä»å³å¾€å·¦ç¬¬kä¸ªå…ƒç´ ï¼Œ
                            //j=110 å¾€å³è¾¹ç§»åŠ¨k-1ï¼Œæ¯”å¦‚k=2ï¼Œç§»åŠ¨1ä½ä¸º11ï¼Œç¬¬ä¸€ä½å°±æ˜¯1ï¼Œç­‰äº1
                            //j=110ï¼Œå°±æ˜¯ç»è¿‡äº†2å’Œ3åŸå¸‚ï¼Œå½“å‰åŸå¸‚ä½k=2åŸå¸‚
                            int lastState = j^(1<<(k-1));//110 ^ 10 = 100 
                            //å°†çŠ¶æ€ j ä¸­å¯¹åº” k çš„äºŒè¿›åˆ¶ä½å–åï¼Œä»è€Œç§»é™¤äº†åŸå¸‚ k çš„çŠ¶æ€
                            //è·å¾—ä¸Šä¸€ä¸ªçŠ¶æ€çš„dp[k][lastState]
                            dp[i][j]=Math.min(dp[i][j], map[i][k]+dp[k][lastState]);
                            //å½“å‰æœ€å¤§å€¼å’Œä¸Šä¸€ä¸ªçŠ¶æ€åŠ ä¸Šå½“å‰åŸå¸‚iåˆ°kçš„è·ç¦»ï¼Œé€‰ä¸€ä¸ªæœ€å¤§çš„ã€‚
                            
                            //æ¯”å¦‚ j=001ï¼Œä¹Ÿå°±æ˜¯é›†åˆæ˜¯ç¬¬ä¸€ä¸ªåŸå¸‚ï¼Œé‚£ä¹ˆi=2å¼€å§‹äº†
                            //é‚£å°±æ˜¯åªæœ‰k=1æ‰èƒ½å’Œ1ä¸æ“ä½œç­‰äº1ï¼Œå°±æ˜¯ç¬¬ä¸€ä¸ªåŸå¸‚ï¼Œå°±æ˜¯2è¦ç»è¿‡1ï¼Œ1å›åˆ°0ï¼Œ
                            //dp[2][001] = Math.min(map[2][1]+dp[1][000])
                            
                            //æ¯”å¦‚ j=011ï¼Œä¹Ÿå°±æ˜¯é›†åˆæ˜¯{1,2}åŸå¸‚ï¼Œi=3å¼€å§‹äº†
                            //é‚£å°±æ˜¯æœ‰k=1,k=2,æ‰èƒ½å’Œ1ä¸æ“ä½œç­‰äº1ï¼Œå°±æ˜¯3è¦ç»è¿‡{1,2}å›åˆ°0ï¼Œ
                            //dp[3][011] = Math.min(dp[3][011],dp[1][010]+map[3][1]);
                            //ä¹Ÿå°±æ˜¯3->1->2->0çš„èŠ±è´¹ï¼Œä¹Ÿå°±æ˜¯dp[1][010]å°±æ˜¯1åˆ°2åˆ°0çš„èŠ±è´¹åŠ ä¸Šmap[3][1]ï¼Œ
                            //3åˆ°1çš„èŠ±è´¹ä¹‹å’Œã€‚
                            
                        }
                    }
                }
            }
            
        }
        ////å°±æ˜¯è¿”å›dp[0][111];lengthæ˜¯8ï¼Œå‡å»ä¸€å°±æ˜¯111
        //å°±æ˜¯è¿”å›dp[0][1111];lengthæ˜¯16 10000ï¼Œå‡å»ä¸€å°±æ˜¯1111
        return dp[0][dp[0].length-1];//dp[0][15];15 = 1111
    }
}
```

å½“æˆ‘ä»¬åœ¨åŠ¨æ€è§„åˆ’è§£å†³æ—…è¡Œå•†é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰çŠ¶æ€ä»¥åŠçŠ¶æ€ä¹‹é—´çš„è½¬ç§»å…³ç³»ã€‚åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ`dp[i][j]` è¡¨ç¤ºä»èµ·å§‹åŸå¸‚åˆ°è¾¾åŸå¸‚ `i` å¹¶ç»è¿‡é›†åˆ `V` ä¸­çš„æ¯ä¸ªç‚¹ï¼ˆé›†åˆ `V` ç”¨äºŒè¿›åˆ¶ä½è¡¨ç¤ºï¼‰åªç»è¿‡ä¸€æ¬¡çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚

è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜è¿™ä¸ªæ¦‚å¿µã€‚å‡è®¾æˆ‘ä»¬æœ‰å››ä¸ªåŸå¸‚ï¼ˆ0ï¼Œ1ï¼Œ2ï¼Œ3ï¼‰ï¼Œå…¶ä¸­åŸå¸‚0æ˜¯èµ·å§‹åŸå¸‚ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„ `map` æ¥è¡¨ç¤ºåŸå¸‚ä¹‹é—´çš„è·ç¦»ã€‚ä¾‹å¦‚ï¼Œ`map[1][2]` è¡¨ç¤ºä»åŸå¸‚1åˆ°åŸå¸‚2çš„è·ç¦»ã€‚

```
åŸå¸‚ä¹‹é—´çš„è·ç¦»ï¼š
  0  1  2  3
0 0  10 15 20
1 10 0  35 25
2 15 35 0  30
3 20 25 30 0
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®— `dp` æ•°ç»„ã€‚`dp[i][j]` è¡¨ç¤ºä»åŸå¸‚0å‡ºå‘ï¼Œç»è¿‡é›†åˆ `V` ä¸­çš„åŸå¸‚åˆ°è¾¾åŸå¸‚ `i` çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚åœ¨è¿™é‡Œï¼Œé›†åˆ `V` æ˜¯ç”¨äºŒè¿›åˆ¶ä½è¡¨ç¤ºçš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ `V` ä¸º 1100ï¼Œè¡¨ç¤ºè·¯å¾„ç»è¿‡åŸå¸‚1å’ŒåŸå¸‚2ï¼Œä¸ç»è¿‡åŸå¸‚0å’ŒåŸå¸‚3ã€‚

æˆ‘ä»¬æ¥å…·ä½“çœ‹çœ‹ `dp[2][6]` çš„å«ä¹‰ï¼š

- `dp[2][6],dp[2][110]` è¡¨ç¤ºä»åŸå¸‚0å‡ºå‘ï¼Œç»è¿‡é›†åˆ `{1,2}` ä¸­çš„æ¯ä¸ªç‚¹åˆ°è¾¾åŸå¸‚2çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚
- é›†åˆ `{1,2}` ç”¨äºŒè¿›åˆ¶ä½è¡¨ç¤ºä¸º 110ï¼Œå…¶ä¸­ç¬¬ä¸€ä½è¡¨ç¤ºæ˜¯å¦ç»è¿‡åŸå¸‚1ï¼Œç¬¬äºŒä½è¡¨ç¤ºæ˜¯å¦ç»è¿‡åŸå¸‚2ã€‚
- å› æ­¤ï¼Œ`dp[2][6]` è¡¨ç¤ºä»åŸå¸‚0å‡ºå‘ï¼Œç»è¿‡åŸå¸‚1å’ŒåŸå¸‚2ï¼Œåˆ°è¾¾åŸå¸‚2çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®— `dp` æ•°ç»„çš„å…¶ä»–å€¼ï¼Œä»¥è·å¾—ä»èµ·å§‹åŸå¸‚å‡ºå‘ï¼Œç»è¿‡æ‰€æœ‰åŸå¸‚ä¸€æ¬¡åå›åˆ°èµ·å§‹åŸå¸‚çš„æœ€çŸ­è·¯å¾„é•¿åº¦ã€‚

`if( (j & 1<<(i-1)) !=0 ) continue;` è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯æ£€æŸ¥å½“å‰çŠ¶æ€ `j` æ˜¯å¦åŒ…å«å½“å‰åŸå¸‚ `i`ã€‚

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è§£é‡Šè¿™è¡Œä»£ç ï¼š

å‡è®¾ `i = 3`ï¼Œè¡¨ç¤ºå½“å‰è€ƒè™‘çš„åŸå¸‚æ˜¯ç¬¬ä¸‰ä¸ªåŸå¸‚ï¼Œå³åŸå¸‚ç¼–å·ä»1å¼€å§‹ã€‚å‡è®¾ `j = 5`ï¼Œè¡¨ç¤ºå½“å‰çš„çŠ¶æ€ `j` ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºä¸º `101`ï¼Œå³è¡¨ç¤ºè·¯å¾„ç»è¿‡ç¬¬ä¸€å’Œç¬¬ä¸‰ä¸ªåŸå¸‚ï¼Œè€Œä¸ç»è¿‡ç¬¬äºŒä¸ªåŸå¸‚ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬æƒ³è¦æ£€æŸ¥å½“å‰çŠ¶æ€ `j` æ˜¯å¦åŒ…å«åŸå¸‚ `i`ï¼Œå³ç¬¬ä¸‰ä¸ªåŸå¸‚ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‰ä½ä¸è¿ç®—æ¥å®ç°ã€‚æŒ‰ä½ä¸è¿ç®—å¯ä»¥ç”¨æ¥æ£€æŸ¥æŸä¸€ä½æ˜¯å¦ä¸º1ã€‚

1. é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†ç¬¬ `i` ä¸ªåŸå¸‚å¯¹åº”çš„äºŒè¿›åˆ¶ä½ç½®ä¸º1ï¼Œå…¶ä»–ä½ç½®ä¸º0ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥ä¸ `j` è¿›è¡ŒæŒ‰ä½ä¸è¿ç®—ã€‚ 
   - `1 << (i-1)` è¡¨ç¤ºå°†ç¬¬ `i` ä½è®¾ç½®ä¸º1ï¼Œå…¶ä»–ä½éƒ½æ˜¯0ã€‚å¯¹äº `i = 3`ï¼Œ`1 << (i-1)` å°±æ˜¯ `100`ã€‚
2. ç„¶åï¼Œæˆ‘ä»¬å°†è¿™ä¸ªäºŒè¿›åˆ¶æ•°ä¸ `j` è¿›è¡ŒæŒ‰ä½ä¸è¿ç®—ï¼Œå¦‚æœç»“æœä¸ä¸º0ï¼Œåˆ™è¡¨ç¤ºå½“å‰çŠ¶æ€ `j` ä¸­åŒ…å«åŸå¸‚ `i`ã€‚ 
   - `j & (1 << (i-1))`ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå°±æ˜¯ `101 & 100`ï¼Œç»“æœæ˜¯ `100`ï¼Œä¸ä¸º0ã€‚

å› æ­¤ï¼Œå¦‚æœ `j` ä¸­åŒ…å«åŸå¸‚ `i`**ï¼Œå³ `(j & (1 << (i-1))) != 0` æˆç«‹ï¼Œé‚£ä¹ˆ `continue` è¯­å¥ä¼šè·³è¿‡å½“å‰å¾ªç¯ï¼Œä¸è¿›è¡Œåç»­çš„è®¡ç®—ï¼Œå› ä¸ºè·¯å¾„ä¸å…è®¸ç»è¿‡è‡ªèº«åŸå¸‚ã€‚**

```cmd
array1 = [INF, 4, 12, 12, 10, 11, 13, 13]
array2 = [2, INF, 10, INF, 9, INF, 11, INF]
array3 = [6, 6, INF, INF, 7, 8, INF, INF]
array4 = [5, 6, 8, 8, INF, INF, INF, INF]
```

